import{d as e,s as a,L as t,c as l,r as n,J as r,P as o,N as s,ck as i,R as u,e as d,o as y,f as v,F as p,m as c,V as m,g as b,k as g,h,y as k,cs as x,_ as f}from"./index-BJklM7uy.js";import{n as $,b as M,c as F,i as V,L as w,f as Y}from"./index-Cdoo-leQ.js";const A={class:"fire-calc-wrapper vp-bg"},C={class:"vp-panel"},I={class:"group-grid"},S=["for"],D={key:0},E=["id","type","onUpdate:modelValue"],L={class:"group-grid group-grid--v2"},T=f(e({__name:"index",setup(e){const f=a(t.FIRE_CALC_FORM_DATA,{currentValue:0,monthlySave:3e3,isTargetMode:!1,iterationMonths:12,targetValue:1e6,annualInterestRate:.025,yearEndAwards:0,age:0},localStorage,{listenToStorageChanges:!1}),T=l((()=>[{label:"当前资产",key:"currentValue",type:"number"},{label:"月存入",key:"monthlySave",type:"number"},{label:"是否为目标存款模式",key:"isTargetMode",type:"checkbox"},f.value.isTargetMode?{label:"目标资产",key:"targetValue",type:"number"}:{label:"迭代月数",key:"iterationMonths",type:"number"},{label:"年利率",key:"annualInterestRate",type:"number"},{label:"年终奖",key:"yearEndAwards",type:"number"},{label:"年龄(选填)",key:"age",type:"number"}].filter(Boolean))),_=n([]),R=l((()=>{let e=f.value.currentValue||0,a=f.value.age;_.value=[],_.value.push({label:r().format("YYYY-MM-DD"),value:e,monthCount:0,age:f.value.age});let t=f.value.iterationMonths;f.value.isTargetMode&&(t=1/0);for(let l=0;l<t;l++){const t=l+1;if(t>1200)break;const n=r().add(t,"months"),o=11===n.month();if(o&&(a+=1,e+=Math.abs(e)*f.value.annualInterestRate||0,f.value.yearEndAwards&&(e+=f.value.yearEndAwards)),e+=f.value.monthlySave||0,_.value.push({label:`${n.format("YYYY-MM-DD")}`,value:e,dateMoment:n,isDecember:o,monthCount:t,age:a}),f.value.isTargetMode&&e>=f.value.targetValue)break}return e}));o(R,(()=>{N()}));const P=e=>{const a=e*f.value.annualInterestRate,t=a/12;return{piYearly:a,piMonthly:t,piDaily:t/30}},z=l((()=>{var e,a;try{const t=R.value||0,l=_.value.length-1,n=t-f.value.currentValue,r=(n/t*100).toFixed(2)+"%",o=null==(e=_.value[_.value.length-1])?void 0:e.age,{piYearly:s,piMonthly:i,piDaily:u}=P(t);return[{label:"结果资产",key:"resultValue",value:`${$(t.toFixed(2))} | ${M(t)}`,type:"text"},{label:"结果时间",key:"resultTimes",value:`${l}个月 = ${F(l)} | ${null==(a=_.value[_.value.length-1])?void 0:a.label}`,type:"text"},{label:"被动收入",key:"yearPassiveIncome",value:`年收 ${s.toFixed(2)} | 月收 ${i.toFixed(2)} | 日收 ${u.toFixed(2)}`,type:"text"},{label:"增长值",key:"increasedValue",value:n.toFixed(2),type:"number"},{label:"增长百分比",key:"increasedPercent",value:r,type:"text"},{label:"年龄",key:"resultAge",value:o,type:"text"}].filter(Boolean)}catch(t){return console.error(t),[]}}));function B(){O.value&&O.value.resize()}s((()=>{j(),N(),window.addEventListener("resize",B)})),i((()=>{O.value&&O.value.dispose(),window.removeEventListener("resize",B)}));const O=u(),j=()=>{var e=V(document.getElementById("mainChart"));e.setOption({title:{text:"预测图表"},legend:{},tooltip:{trigger:"axis",formatter(e){const[a]=e,t=a&&_.value[a.dataIndex],l=Number(t.value),{piYearly:n,piMonthly:r,piDaily:o}=P(l);return`<div style="font-family: monospace">\n${a.marker}\n<div>日期：${t.label} (${F(t.monthCount)}) | ${t.monthCount||0}个月</div>\n<div>资产：${$(l.toFixed(2))}</div>\n<div>资产：${M(l)}</div>\n<div>被动收入：年收 ${n.toFixed(2)} | 月收 ${r.toFixed(2)} | 日收 ${o.toFixed(2)}</div>\n<div>年龄：${t.age}</div>\n</div>`},axisPointer:{type:"cross",label:{backgroundColor:"rgba(133,133,133,0.8)"}}},grid:{top:"10%",left:"1%",right:"2.5%",bottom:0,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],splitLine:{show:!0,lineStyle:{type:"dashed"}}},yAxis:{type:"value",minInterval:1,axisPointer:{snap:!0},splitLine:{show:!0,lineStyle:{type:"dashed"}}},series:[{type:"line",symbol:"circle",symbolSize:5,name:"Value",itemStyle:{color:"#FF9800"},smooth:!0,areaStyle:{color:new w(0,0,0,1,[{offset:0,color:"rgba(255,152,0,0.4)"},{offset:1,color:"rgba(255,255,255,0)"}])},data:[]}]}),O.value=e},N=()=>{if(!_.value.length)return;const e=_.value||[];O.value.setOption({xAxis:{data:e.map((e=>e.label))},series:[{data:e.map((e=>e.value)),markPoint:{data:[{type:"max"},{type:"min"}]}}]})};return(e,a)=>(y(),d("div",A,[v("div",C,[v("div",I,[(y(!0),d(p,null,c(k(T),(e=>(y(),d("label",{for:e.key,key:e.key},[m(h(e.label||k(Y)(e.key))+": ",1),"checkbox"===e.type?(y(),d("br",D)):b("",!0),g(v("input",{class:"vp-input",id:e.key,type:e.type,"onUpdate:modelValue":a=>k(f)[e.key]=a},null,8,E),[[x,k(f)[e.key]]])],8,S)))),128))]),v("div",L,[(y(!0),d(p,null,c(k(z),(e=>(y(),d("div",{key:e.key},[m(h(e.label||k(Y)(e.key))+": ",1),v("b",null,h(e.value),1)])))),128))])]),a[0]||(a[0]=v("div",{class:"vp-panel"},[v("div",{class:"chart-area",id:"mainChart"})],-1))]))}}),[["__scopeId","data-v-37fdf083"]]);export{T as default};
