import{E as Q,$ as W,d as T,K as X,N as F,a0 as x,Y as ee,M as w,R as ne,C as V,a1 as te,a2 as oe,t as D,j as L,_ as P,o as m,c as f,a as t,e as s,a3 as h,p,f as H,q as z,x as N,a4 as E,a5 as se,r as C,s as le,w as ae,b as J,m as k,n as S,F as b,a6 as re,a7 as ie,a8 as ue,g as de,z as U,a9 as pe,aa as me,h as G,k as ce,l as _e,ab as ve}from"./index.2adcddd7.js";import{_ as fe,a as he}from"./PageHeader.3c79e6f6.js";const ye=Q("collapse-transition",{width:"100%"},[W()]),ge=Object.assign(Object.assign({},F.props),{show:{type:Boolean,default:!0},appear:Boolean,collapsed:{type:Boolean,default:void 0}}),$e=T({name:"CollapseTransition",props:ge,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:u,mergedRtlRef:d}=X(e),r=F("CollapseTransition","-collapse-transition",ye,x,e,n),a=ee("CollapseTransition",d,n),o=w(()=>e.collapsed!==void 0?e.collapsed:e.show),i=w(()=>{const{self:{bezier:c}}=r.value;return{"--n-bezier":c}}),l=u?ne("collapse-transition",void 0,i,e):void 0;return{rtlEnabled:a,mergedShow:o,mergedClsPrefix:n,cssVars:u?void 0:i,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){return V(oe,{appear:this.appear},{default:()=>{var e;if(!!this.mergedShow)return(e=this.onRender)===null||e===void 0||e.call(this),V("div",te({class:[`${this.mergedClsPrefix}-collapse-transition`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse-transition--rtl`,this.themeClass],style:this.cssVars},this.$attrs),this.$slots)}})}}),K=(e={})=>({key:e.key||"",value:e.value||""}),B=(e={})=>({namespace:e.namespace||"",children:e.children||[],translates:e.translates||[],parent:e.parent||null}),O=(e={},n=[],u=null)=>{if(!e)return[];if(!Array.isArray(e)&&typeof e=="object")for(let d in e){const r=e[d],a=[];if(r&&!Array.isArray(r)&&typeof r=="object"){const o=B({namespace:d,translates:a,parent:u});o.children=O(r,[],o),n.push(o)}else u&&u.translates&&u.translates.push(K({key:d,value:r}))}return console.log(n),n},j=(e,n={})=>(e.forEach(u=>{const d={};u.translates.forEach(r=>{d[r.key]=r.value}),j(u.children,d),n[u.namespace]=d}),n),Ce=e=>e?(e=e.toLowerCase(),e=e.replace(/[^a-zA-Z0-9\s]+/g,""),e=e.replace(/\s/gi,"_"),e=e.slice(0,20),e):"",we=T({name:"TranslateItem",components:{},props:{item:{type:Object,default:null},treeItem:{type:Object,default:null}},emits:["onRemove","previewArray"],setup(e){const{item:n,treeItem:u}=D(e),d=w(()=>{if(!u.value)return"";const a=[];let o=u.value;for(;o;)a.push(o.namespace),o=o.parent||null;return a.reverse().join(".")}),r=w(()=>{if(!n.value||!n.value.value)return"";let a=n.value.key;return d.value&&(a=d.value+"."+a),a});return{namespacePrefix:d,nameDisplay:r,handleCopy(a){let o=`$t('${r.value}')`;a==="html"?o=`{{ $t('${r.value}') }}`:a==="v-html"?o=`v-html="$t('${r.value}')"`:a==="js"&&(o=`this.$t('${r.value}')`),L(o),window.$message.success("Text Copied")},handleBlur(){n.value.key||(n.value.key=Ce(n.value.value))}}}});const ke=p("Array"),Te=p(" Copy: "),Ie=p(" H "),Re=p(" VH "),Ae=p(" JS "),Se=p("Remove"),be=p(" Remove Item? ");function Oe(e,n,u,d,r,a){const o=H,i=z,l=N,c=E,y=se;return e.item?(m(),f(y,{key:0,size:"small",class:"translate-item"},{default:t(()=>[s(l,{size:"small",justify:"space-between"},{default:t(()=>[s(l,{size:"small",align:"center"},{default:t(()=>[s(o,{size:"small",class:"font-code",value:e.item.key,"onUpdate:value":n[0]||(n[0]=_=>e.item.key=_),placeholder:"key",clearable:""},null,8,["value"]),Array.isArray(e.item.value)?(m(),f(i,{key:1,title:e.item.value,size:"small",style:{width:"350px"},onClick:n[2]||(n[2]=_=>e.$emit("previewArray",e.item))},{default:t(()=>[ke]),_:1},8,["title"])):(m(),f(o,{key:0,size:"small",style:{width:"350px"},value:e.item.value,"onUpdate:value":n[1]||(n[1]=_=>e.item.value=_),placeholder:"value",clearable:"",onBlur:e.handleBlur},null,8,["value","onBlur"])),e.nameDisplay?(m(),f(l,{key:2,size:"small"},{default:t(()=>[s(o,{class:"font-code",size:"small",style:{width:"300px"},value:`$t('${e.nameDisplay}')`,readonly:""},null,8,["value"]),s(i,{size:"small",type:"info",onClick:e.handleCopy,title:"Original"},{default:t(()=>[Te]),_:1},8,["onClick"]),s(i,{size:"small",type:"info",onClick:n[3]||(n[3]=_=>e.handleCopy("html")),title:"HTML template"},{default:t(()=>[Ie]),_:1}),s(i,{size:"small",type:"info",onClick:n[4]||(n[4]=_=>e.handleCopy("v-html")),title:"v-html template"},{default:t(()=>[Re]),_:1}),s(i,{size:"small",type:"info",onClick:n[5]||(n[5]=_=>e.handleCopy("js")),title:"JS Script"},{default:t(()=>[Ae]),_:1})]),_:1})):h("",!0)]),_:1}),s(l,null,{default:t(()=>[s(c,{onPositiveClick:n[6]||(n[6]=_=>e.$emit("onRemove"))},{trigger:t(()=>[s(i,{type:"error"},{default:t(()=>[Se]),_:1})]),default:t(()=>[be]),_:1})]),_:1})]),_:1})]),_:1})):h("",!0)}const M=P(we,[["render",Oe],["__scopeId","data-v-753dbc41"]]),Pe=T({name:"TranslateTreeItem",components:{TranslateItem:M},props:{item:{type:Object,default:null},isRoot:{type:Boolean,default:!0}},emits:["onRemove"],setup(e){const{item:n}=D(e),u=()=>{console.log("[handleAddChildren]"),n.value.children.push(B({parent:n.value}))},d=()=>{console.log("[handleAddTranslate]"),n.value.translates.push(K())},r=C(!0),a=C(!1),o=le(null),i=C(null);return ae(a,l=>{l||(o.value=null,i.value=null)}),{handleAddChildren:u,handleAddTranslate:d,handleGetJSON(){const l=j([n.value]);console.log(l),L(JSON.stringify(l,null,2)),window.$message.success("JSON Copied")},handleRemoveTreeItem(l){const c=[...n.value.children];c.splice(l,1),n.value.children=c},handleRemoveItem(l){const c=[...n.value.translates];c.splice(l,1),n.value.translates=c},isExpand:r,isShowPreviewArray:a,currentPreviewItem:o,currentArrayString:i,handlePreviewArray(l){o.value=l,i.value=JSON.stringify(l.value,null,2),a.value=!0},handleSaveArray(){o.value&&(o.value.value=JSON.parse(i.value||"[]"),a.value=!1)}}}});const ze=e=>(pe("data-v-e5b40954"),e=e(),me(),e),Ne={style:{display:"flex"}},Ee=p("Copy JSON"),Je=p("Remove"),Be=p(" Remove Group? "),je=p(" Show "),Ve=p(" Hide "),Fe=p("Add Translate"),De=ze(()=>J("div",{style:{"border-top":"1px dashed darkseagreen","margin-top":"10px","margin-bottom":"10px"}},null,-1)),Le=p("Add Children");function He(e,n,u,d,r,a){const o=H,i=z,l=E,c=re,y=N,_=M,I=ie,R=ue("TranslateTreeItem",!0),g=$e,A=de,Y=U;return e.item?(m(),f(Y,{key:0,size:"small",class:"tree-item"},{default:t(()=>[J("div",Ne,[s(o,{class:"font-code",value:e.item.namespace,"onUpdate:value":n[0]||(n[0]=v=>e.item.namespace=v),placeholder:"namespace",clearable:"",style:{flex:"1"}},null,8,["value"]),s(y,{style:{"margin-left":"10px"},align:"center"},{default:t(()=>[s(i,{type:"info",onClick:e.handleGetJSON},{default:t(()=>[Ee]),_:1},8,["onClick"]),e.isRoot?h("",!0):(m(),f(l,{key:0,onPositiveClick:n[1]||(n[1]=v=>e.$emit("onRemove"))},{trigger:t(()=>[s(i,{type:"error"},{default:t(()=>[Je]),_:1})]),default:t(()=>[Be]),_:1})),s(c,{value:e.isExpand,"onUpdate:value":n[2]||(n[2]=v=>e.isExpand=v)},{checked:t(()=>[je]),unchecked:t(()=>[Ve]),_:1},8,["value"])]),_:1})]),s(g,{show:e.isExpand},{default:t(()=>[e.item.translates&&e.item.translates.length?(m(),f(I,{key:0,size:"small",style:{"margin-top":"10px"}},{default:t(()=>[(m(!0),k(b,null,S(e.item.translates,(v,$)=>(m(),f(_,{item:v,"tree-item":e.item,key:$,onPreviewArray:e.handlePreviewArray,onOnRemove:Z=>e.handleRemoveItem($)},null,8,["item","tree-item","onPreviewArray","onOnRemove"]))),128))]),_:1})):h("",!0),s(y,{justify:"space-between",align:"center",style:{"margin-top":"5px"}},{default:t(()=>[s(i,{type:"primary",onClick:e.handleAddTranslate},{default:t(()=>[Fe]),_:1},8,["onClick"])]),_:1}),De,e.item.children&&e.item.children.length?(m(!0),k(b,{key:1},S(e.item.children,(v,$)=>(m(),f(R,{item:v,key:$,"is-root":!1,onOnRemove:Z=>e.handleRemoveTreeItem($),onPreviewArray:e.handlePreviewArray},null,8,["item","onOnRemove","onPreviewArray"]))),128)):h("",!0),s(i,{type:"primary",onClick:e.handleAddChildren},{default:t(()=>[Le]),_:1},8,["onClick"])]),_:1},8,["show"]),s(A,{style:{width:"80vw"},preset:"dialog","negative-text":"Cancel","positive-text":"Save",title:"Array Detail",onPositiveClick:e.handleSaveArray,show:e.isShowPreviewArray,"onUpdate:show":n[4]||(n[4]=v=>e.isShowPreviewArray=v)},{default:t(()=>[e.isShowPreviewArray&&e.currentArrayString?(m(),f(o,{key:0,type:"textarea",value:e.currentArrayString,"onUpdate:value":n[3]||(n[3]=v=>e.currentArrayString=v),class:"font-code",rows:"30",placeholder:"Array JSON String"},null,8,["value"])):h("",!0)]),_:1},8,["onPositiveClick","show"])]),_:1})):h("",!0)}const q=P(Pe,[["render",He],["__scopeId","data-v-e5b40954"]]),Ue=""+new URL("translate.6e3a2b88.svg",import.meta.url).href,Ge=T({name:"VueI18nCopyTool",components:{TranslateTreeItem:q,FileChooser:G},setup(){const e=C([B()]),n=C();return{treeRootList:e,handleImport:async d=>{const r=await ve(d),a=JSON.parse(r);e.value=O(a)},handleExport(){ce(_e(null,"i18n_export"),JSON.stringify(j(e.value),null,2),".json")},importFileChooserRef:n,loadDemo(){e.value=O({hello_world:{section_a:{test_str:"This is a test string","":"It's fast and cool"},section_b:{"":"Blur this input and it'll fill left blank automatically!"}}})},iconTranslate:Ue}}});const Ke={class:"vue-i18n-copy-tool"},Me=p(" VueI18nCopyTool "),qe=p(" Import JSON "),Ye=p("Export JSON"),Ze=p("Demo"),Qe=p(" Load Demo? This will override editing content. "),We={class:"_container"};function Xe(e,n,u,d,r,a){const o=fe,i=z,l=E,c=N,y=he,_=U,I=q,R=G;return m(),k("div",Ke,[s(_,{size:"small",style:{position:"sticky",top:"0","z-index":"100","margin-bottom":"10px"}},{default:t(()=>[s(y,{subtitle:"",onBack:n[1]||(n[1]=g=>e.$router.push({name:"HomeView"}))},{title:t(()=>[Me]),avatar:t(()=>[s(o,{src:e.iconTranslate,style:{background:"none"}},null,8,["src"])]),extra:t(()=>[s(c,null,{default:t(()=>[s(i,{type:"primary",onClick:n[0]||(n[0]=g=>e.importFileChooserRef.chooseFile()),size:"small"},{default:t(()=>[qe]),_:1}),s(i,{onClick:e.handleExport,size:"small"},{default:t(()=>[Ye]),_:1},8,["onClick"]),s(l,{onPositiveClick:e.loadDemo},{trigger:t(()=>[s(i,{size:"small"},{default:t(()=>[Ze]),_:1})]),default:t(()=>[Qe]),_:1},8,["onPositiveClick"])]),_:1})]),_:1})]),_:1}),J("div",We,[(m(!0),k(b,null,S(e.treeRootList,(g,A)=>(m(),f(I,{key:A,item:g},null,8,["item"]))),128))]),s(R,{ref:"importFileChooserRef",accept:"application/JSON",onSelected:e.handleImport},null,8,["onSelected"])])}const nn=P(Ge,[["render",Xe],["__scopeId","data-v-836e5fe2"]]);export{nn as default};
