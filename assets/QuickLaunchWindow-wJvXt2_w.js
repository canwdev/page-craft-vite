import{M as useI18n,a8 as useRouter,ar as useRoute,u as useMainStore,b as useSettingsStore,e as computed,cO as toRef,r as ref,y as watch,cP as isClient,d as defineComponent,t as toRefs,o as openBlock,c as createElementBlock,z as unref,a2 as h,co as createGlobalState,cQ as onBeforeMount,O as moment,cR as useFileDialog,E as useStorage,s as onMounted,bM as useDebounceFn,cS as useTextareaAutosize,a as createBaseVNode,W as withDirectives,X as vModelText,R as isRef,C as withKeys,k as createVNode,p as createBlock,l as withCtx,a1 as createTextVNode,f as toDisplayString,g as createCommentVNode,S as Teleport,F as Fragment,_ as _export_sfc,i as resolveComponent}from"./index-B89s4h30.js";import{V as ViewPortWindow}from"./index-CaxcvzCk.js";import{u as useModelWrapper}from"./use-model-wrapper-J3pz5QVG.js";import{Q as QuickOptions}from"./index-CId89Rxb.js";import{c as copy,b as base64Utils,f as filterLabel}from"./base64-utils-C7F1SWUm.js";import{n as noCase,_ as __assign,d as dotCase,p as paramCase}from"./index-vcidOvW8.js";import{V as VueMonaco}from"./index-BX-tTlRM.js";import"./Icon-orbADp6I.js";import"./VueRender.vue_vue_type_script_lang-CDgLsD0B.js";import"./Dropdown-CpTLPpia.js";import"./Popover-BFHkdWDY.js";import"./index-CIFTqndj.js";const useCommonTools=()=>{const{t:e}=useI18n(),t=useRouter(),n=useRoute(),o=useMainStore();useSettingsStore();const r=[{label:"⚜ Stylus "+e("common.formatting_tool"),search:"stylus formatting",props:{onClick:async()=>{o.isShowStylusTools=!0}}},{label:"📗 "+e("common.excel_copy_tool"),search:"excel copy",props:{onClick:async()=>{o.isShowQuickLaunch=!1,await t.push({name:"ExcelCopyTool"})}}},{label:"🧬 "+e("common.text_transformer"),search:"text transformer",props:{onClick:async()=>{o.isShowTextTransformer=!o.isShowTextTransformer}}},{label:`🌐 ${e("common.i18njson_editing_too")} 📄`,search:"json editor",props:{onClick:async()=>{o.isShowQuickLaunch=!1,await t.push({name:"VueI18nEditTool"})}}},{label:`🌐 ${e("common.i18njson_batch_tool")} 📂`,search:"json editor batch",props:{onClick:async()=>{o.isShowQuickLaunch=!1,await t.push({name:"VueI18nBatchTool"})}}},{label:"🤯 ChatGPT",props:{onClick:async()=>{o.isShowQuickLaunch=!1,await t.push({name:"AiPage"})}}}],a=computed((()=>{let a=[...r,{label:`✨ ${e("common.more")}...`,children:[{label:`🌏 ${e("common.iframe_browser")} (alt+i)`,props:{onClick:async()=>{o.isShowIframeBrowser=!o.isShowIframeBrowser}}},{label:"📑 "+e("common.rich_text_tool"),props:{onClick:async()=>{o.isShowQuickLaunch=!1,await t.push({name:"RichTextTool"})}}},{label:"🤯 ChatGPT Window (alt+g)",props:{onClick:async()=>{o.isShowAiChat=!o.isShowAiChat}}},{label:"🔧 Dev Page",props:{onClick:async()=>{o.isShowQuickLaunch=!1,await t.push({name:"DevPage"})}}}]},{label:"⚙️ "+e("common.settings"),search:"settings",props:{onClick:async()=>{o.isShowSettings=!0}}}];return"CraftPage"!==n.name&&(a=[{label:"⛏️ Page Craft",props:{onClick:async()=>{o.isShowQuickLaunch=!1,await t.push({name:"CraftPage"})}}},...a]),"HomePage"!==n.name&&(a=[{label:"🏠 "+e("common.home_page"),props:{onClick:async()=>{await t.push({name:"HomePage"})}}},...a]),a}));return{toolsMenuOptions:r,qlOptions:a}};var browser={},canPromise$1=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},utils$1.getSymbolTotalCodewords=function(e){return CODEWORDS_COUNT[e]},utils$1.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},utils$1.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=e},utils$1.isKanjiModeEnabled=function(){return void 0!==toSJISFunction},utils$1.toSJIS=function(e){return toSJISFunction(e)};var errorCorrectionLevel={},exports;function BitBuffer$1(){this.buffer=[],this.length=0}exports=errorCorrectionLevel,exports.L={bit:1},exports.M={bit:0},exports.Q={bit:3},exports.H={bit:2},exports.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},exports.from=function(e,t){if(exports.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return exports.L;case"m":case"medium":return exports.M;case"q":case"quartile":return exports.Q;case"h":case"high":return exports.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(n){return t}},BitBuffer$1.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}BitMatrix$1.prototype.set=function(e,t,n,o){const r=e*this.size+t;this.data[r]=n,o&&(this.reservedBit[r]=!0)},BitMatrix$1.prototype.get=function(e,t){return this.data[e*this.size+t]},BitMatrix$1.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},BitMatrix$1.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var bitMatrix=BitMatrix$1,alignmentPattern={};!function(e){const t=utils$1.getSymbolSize;e.getRowColCoords=function(e){if(1===e)return[];const n=Math.floor(e/7)+2,o=t(e),r=145===o?26:2*Math.ceil((o-13)/(2*n-2)),a=[o-7];for(let t=1;t<n-1;t++)a[t]=a[t-1]-r;return a.push(6),a.reverse()},e.getPositions=function(t){const n=[],o=e.getRowColCoords(t),r=o.length;for(let e=0;e<r;e++)for(let t=0;t<r;t++)0===e&&0===t||0===e&&t===r-1||e===r-1&&0===t||n.push([o[e],o[t]]);return n}}(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function(e){const t=getSymbolSize(e);return[[0,0],[t-FINDER_PATTERN_SIZE,0],[0,t-FINDER_PATTERN_SIZE]]};var maskPattern={};!function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t=3,n=3,o=40,r=10;function a(t,n,o){switch(t){case e.Patterns.PATTERN000:return(n+o)%2==0;case e.Patterns.PATTERN001:return n%2==0;case e.Patterns.PATTERN010:return o%3==0;case e.Patterns.PATTERN011:return(n+o)%3==0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2==0;case e.Patterns.PATTERN101:return n*o%2+n*o%3==0;case e.Patterns.PATTERN110:return(n*o%2+n*o%3)%2==0;case e.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(e){const n=e.size;let o=0,r=0,a=0,i=null,s=null;for(let u=0;u<n;u++){r=a=0,i=s=null;for(let l=0;l<n;l++){let n=e.get(u,l);n===i?r++:(r>=5&&(o+=t+(r-5)),i=n,r=1),n=e.get(l,u),n===s?a++:(a>=5&&(o+=t+(a-5)),s=n,a=1)}r>=5&&(o+=t+(r-5)),a>=5&&(o+=t+(a-5))}return o},e.getPenaltyN2=function(e){const t=e.size;let o=0;for(let n=0;n<t-1;n++)for(let r=0;r<t-1;r++){const t=e.get(n,r)+e.get(n,r+1)+e.get(n+1,r)+e.get(n+1,r+1);4!==t&&0!==t||o++}return o*n},e.getPenaltyN3=function(e){const t=e.size;let n=0,r=0,a=0;for(let o=0;o<t;o++){r=a=0;for(let i=0;i<t;i++)r=r<<1&2047|e.get(o,i),i>=10&&(1488===r||93===r)&&n++,a=a<<1&2047|e.get(i,o),i>=10&&(1488===a||93===a)&&n++}return n*o},e.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let o=0;o<n;o++)t+=e.data[o];return Math.abs(Math.ceil(100*t/n/5)-10)*r},e.applyMask=function(e,t){const n=t.size;for(let o=0;o<n;o++)for(let r=0;r<n;r++)t.isReserved(r,o)||t.xor(r,o,a(e,r,o))},e.getBestMask=function(t,n){const o=Object.keys(e.Patterns).length;let r=0,a=1/0;for(let i=0;i<o;i++){n(i),e.applyMask(i,t);const o=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(i,t),o<a&&(a=o,r=i)}return r}}(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(e,t){switch(t){case ECLevel$1.L:return EC_BLOCKS_TABLE[4*(e-1)+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[4*(e-1)+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[4*(e-1)+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[4*(e-1)+3];default:return}},errorCorrectionCode.getTotalCodewordsCount=function(e,t){switch(t){case ECLevel$1.L:return EC_CODEWORDS_TABLE[4*(e-1)+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[4*(e-1)+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[4*(e-1)+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[4*(e-1)+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)EXP_TABLE[t]=e,LOG_TABLE[e]=t,e<<=1,256&e&&(e^=285);for(let t=255;t<512;t++)EXP_TABLE[t]=EXP_TABLE[t-255]}(),galoisField.log=function(e){if(e<1)throw new Error("log("+e+")");return LOG_TABLE[e]},galoisField.exp=function(e){return EXP_TABLE[e]},galoisField.mul=function(e,t){return 0===e||0===t?0:EXP_TABLE[LOG_TABLE[e]+LOG_TABLE[t]]},function(e){const t=galoisField;e.mul=function(e,n){const o=new Uint8Array(e.length+n.length-1);for(let r=0;r<e.length;r++)for(let a=0;a<n.length;a++)o[r+a]^=t.mul(e[r],n[a]);return o},e.mod=function(e,n){let o=new Uint8Array(e);for(;o.length-n.length>=0;){const e=o[0];for(let a=0;a<n.length;a++)o[a]^=t.mul(n[a],e);let r=0;for(;r<o.length&&0===o[r];)r++;o=o.slice(r)}return o},e.generateECPolynomial=function(n){let o=new Uint8Array([1]);for(let r=0;r<n;r++)o=e.mul(o,new Uint8Array([1,t.exp(r)]));return o}}(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(e){this.degree=e,this.genPoly=Polynomial.generateECPolynomial(this.degree)},ReedSolomonEncoder$1.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=Polynomial.mod(t,this.genPoly),o=this.degree-n.length;if(o>0){const e=new Uint8Array(this.degree);return e.set(n,o),e}return n};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={isValid:function(e){return!isNaN(e)&&e>=1&&e<=40}},regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+")(?:.|[\r\n]))+";regex.KANJI=new RegExp(kanji,"g"),regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),regex.BYTE=new RegExp(byte,"g"),regex.NUMERIC=new RegExp(numeric,"g"),regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(e){return TEST_KANJI.test(e)},regex.testNumeric=function(e){return TEST_NUMERIC.test(e)},regex.testAlphanumeric=function(e){return TEST_ALPHANUMERIC.test(e)},function(e){const t=versionCheck,n=regex;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!t.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?e.ccBits[0]:n<27?e.ccBits[1]:e.ccBits[2]},e.getBestModeForData=function(t){return n.testNumeric(t)?e.NUMERIC:n.testAlphanumeric(t)?e.ALPHANUMERIC:n.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},e.isValid=function(e){return e&&e.bit&&e.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(o){return n}}}(mode),function(e){const t=utils$1,n=errorCorrectionCode,o=errorCorrectionLevel,r=mode,a=versionCheck,i=t.getBCHDigit(7973);function s(e,t){return r.getCharCountIndicator(e,t)+4}function u(e,t){let n=0;return e.forEach((function(e){const o=s(e.mode,t);n+=o+e.getBitsLength()})),n}e.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},e.getCapacity=function(e,o,i){if(!a.isValid(e))throw new Error("Invalid QR Code version");void 0===i&&(i=r.BYTE);const u=8*(t.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,o));if(i===r.MIXED)return u;const l=u-s(i,e);switch(i){case r.NUMERIC:return Math.floor(l/10*3);case r.ALPHANUMERIC:return Math.floor(l/11*2);case r.KANJI:return Math.floor(l/13);case r.BYTE:default:return Math.floor(l/8)}},e.getBestVersionForData=function(t,n){let a;const i=o.from(n,o.M);if(Array.isArray(t)){if(t.length>1)return function(t,n){for(let o=1;o<=40;o++)if(u(t,o)<=e.getCapacity(o,n,r.MIXED))return o}(t,i);if(0===t.length)return 1;a=t[0]}else a=t;return function(t,n,o){for(let r=1;r<=40;r++)if(n<=e.getCapacity(r,o,t))return r}(a.mode,a.getLength(),i)},e.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw new Error("Invalid QR Code version");let n=e<<12;for(;t.getBCHDigit(n)-i>=0;)n^=7973<<t.getBCHDigit(n)-i;return e<<12|n}}(version);var formatInfo={};const Utils$3=utils$1,G15=1335,G15_MASK=21522,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function(e,t){const n=e.bit<<3|t;let o=n<<10;for(;Utils$3.getBCHDigit(o)-G15_BCH>=0;)o^=G15<<Utils$3.getBCHDigit(o)-G15_BCH;return(n<<10|o)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(e){this.mode=Mode$4.NUMERIC,this.data=e.toString()}NumericData.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},NumericData.prototype.getLength=function(){return this.data.length},NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)},NumericData.prototype.write=function(e){let t,n,o;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),o=parseInt(n,10),e.put(o,10);const r=this.data.length-t;r>0&&(n=this.data.substr(t),o=parseInt(n,10),e.put(o,3*r+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(e){this.mode=Mode$3.ALPHANUMERIC,this.data=e}AlphanumericData.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},AlphanumericData.prototype.getLength=function(){return this.data.length},AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)},AlphanumericData.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*ALPHA_NUM_CHARS.indexOf(this.data[t]);n+=ALPHA_NUM_CHARS.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(ALPHA_NUM_CHARS.indexOf(this.data[t]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function(e){for(var t=[],n=e.length,o=0;o<n;o++){var r=e.charCodeAt(o);if(r>=55296&&r<=56319&&n>o+1){var a=e.charCodeAt(o+1);a>=56320&&a<=57343&&(r=1024*(r-55296)+a-56320+65536,o+=1)}r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<55296||r>=57344&&r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=65536&&r<=1114111?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):t.push(239,191,189)}return new Uint8Array(t).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(e){this.mode=Mode$2.BYTE,"string"==typeof e&&(e=encodeUtf8(e)),this.data=new Uint8Array(e)}ByteData.getBitsLength=function(e){return 8*e},ByteData.prototype.getLength=function(){return this.data.length},ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)},ByteData.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(e){this.mode=Mode$1.KANJI,this.data=e}KanjiData.getBitsLength=function(e){return 13*e},KanjiData.prototype.getLength=function(){return this.data.length},KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)},KanjiData.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=Utils$2.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}};var kanjiData=KanjiData,dijkstra={exports:{}},dijkstra2;dijkstra2={single_source_shortest_paths:function(e,t,n){var o={},r={};r[t]=0;var a,i,s,u,l,c,d,g=dijkstra2.PriorityQueue.make();for(g.push(t,0);!g.empty();)for(s in i=(a=g.pop()).value,u=a.cost,l=e[i]||{})l.hasOwnProperty(s)&&(c=u+l[s],d=r[s],(void 0===r[s]||d>c)&&(r[s]=c,g.push(s,c),o[s]=i));if(void 0!==n&&void 0===r[n]){var f=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(f)}return o},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],o=t;o;)n.push(o),e[o],o=e[o];return n.reverse(),n},find_path:function(e,t,n){var o=dijkstra2.single_source_shortest_paths(e,t,n);return dijkstra2.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(e){var t,n=dijkstra2.PriorityQueue,o={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o.queue=[],o.sorter=e.sorter||n.default_sorter,o},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}},dijkstra.exports=dijkstra2;var dijkstraExports=dijkstra.exports;!function(e){const t=mode,n=numericData,o=alphanumericData,r=byteData,a=kanjiData,i=regex,s=utils$1,u=dijkstraExports;function l(e){return unescape(encodeURIComponent(e)).length}function c(e,t,n){const o=[];let r;for(;null!==(r=e.exec(n));)o.push({data:r[0],index:r.index,mode:t,length:r[0].length});return o}function d(e){const n=c(i.NUMERIC,t.NUMERIC,e),o=c(i.ALPHANUMERIC,t.ALPHANUMERIC,e);let r,a;s.isKanjiModeEnabled()?(r=c(i.BYTE,t.BYTE,e),a=c(i.KANJI,t.KANJI,e)):(r=c(i.BYTE_KANJI,t.BYTE,e),a=[]);return n.concat(o,r,a).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function g(e,i){switch(i){case t.NUMERIC:return n.getBitsLength(e);case t.ALPHANUMERIC:return o.getBitsLength(e);case t.KANJI:return a.getBitsLength(e);case t.BYTE:return r.getBitsLength(e)}}function f(e,i){let u;const l=t.getBestModeForData(e);if(u=t.from(i,l),u!==t.BYTE&&u.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+t.toString(u)+".\n Suggested mode is: "+t.toString(l));switch(u!==t.KANJI||s.isKanjiModeEnabled()||(u=t.BYTE),u){case t.NUMERIC:return new n(e);case t.ALPHANUMERIC:return new o(e);case t.KANJI:return new a(e);case t.BYTE:return new r(e)}}e.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(f(t,null)):t.data&&e.push(f(t.data,t.mode)),e}),[])},e.fromString=function(n,o){const r=function(e){const n=[];for(let o=0;o<e.length;o++){const r=e[o];switch(r.mode){case t.NUMERIC:n.push([r,{data:r.data,mode:t.ALPHANUMERIC,length:r.length},{data:r.data,mode:t.BYTE,length:r.length}]);break;case t.ALPHANUMERIC:n.push([r,{data:r.data,mode:t.BYTE,length:r.length}]);break;case t.KANJI:n.push([r,{data:r.data,mode:t.BYTE,length:l(r.data)}]);break;case t.BYTE:n.push([{data:r.data,mode:t.BYTE,length:l(r.data)}])}}return n}(d(n,s.isKanjiModeEnabled())),a=function(e,n){const o={},r={start:{}};let a=["start"];for(let i=0;i<e.length;i++){const s=e[i],u=[];for(let e=0;e<s.length;e++){const l=s[e],c=""+i+e;u.push(c),o[c]={node:l,lastCount:0},r[c]={};for(let e=0;e<a.length;e++){const i=a[e];o[i]&&o[i].node.mode===l.mode?(r[i][c]=g(o[i].lastCount+l.length,l.mode)-g(o[i].lastCount,l.mode),o[i].lastCount+=l.length):(o[i]&&(o[i].lastCount=l.length),r[i][c]=g(l.length,l.mode)+4+t.getCharCountIndicator(l.mode,n))}}a=u}for(let t=0;t<a.length;t++)r[a[t]].end=0;return{map:r,table:o}}(r,o),i=u.find_path(a.map,"start","end"),c=[];for(let e=1;e<i.length-1;e++)c.push(a.table[i[e]].node);return e.fromArray(function(e){return e.reduce((function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(c))},e.rawSplit=function(t){return e.fromArray(d(t,s.isKanjiModeEnabled()))}}(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(e,t){const n=e.size,o=FinderPattern.getPositions(t);for(let r=0;r<o.length;r++){const t=o[r][0],a=o[r][1];for(let o=-1;o<=7;o++)if(!(t+o<=-1||n<=t+o))for(let r=-1;r<=7;r++)a+r<=-1||n<=a+r||(o>=0&&o<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===o||6===o)||o>=2&&o<=4&&r>=2&&r<=4?e.set(t+o,a+r,!0,!0):e.set(t+o,a+r,!1,!0))}}function setupTimingPattern(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}function setupAlignmentPattern(e,t){const n=AlignmentPattern.getPositions(t);for(let o=0;o<n.length;o++){const t=n[o][0],r=n[o][1];for(let n=-2;n<=2;n++)for(let o=-2;o<=2;o++)-2===n||2===n||-2===o||2===o||0===n&&0===o?e.set(t+n,r+o,!0,!0):e.set(t+n,r+o,!1,!0)}}function setupVersionInfo(e,t){const n=e.size,o=Version.getEncodedBits(t);let r,a,i;for(let s=0;s<18;s++)r=Math.floor(s/3),a=s%3+n-8-3,i=1==(o>>s&1),e.set(r,a,i,!0),e.set(a,r,i,!0)}function setupFormatInfo(e,t,n){const o=e.size,r=FormatInfo.getEncodedBits(t,n);let a,i;for(a=0;a<15;a++)i=1==(r>>a&1),a<6?e.set(a,8,i,!0):a<8?e.set(a+1,8,i,!0):e.set(o-15+a,8,i,!0),a<8?e.set(8,o-a-1,i,!0):a<9?e.set(8,15-a-1+1,i,!0):e.set(8,15-a-1,i,!0);e.set(o-8,8,1,!0)}function setupData(e,t){const n=e.size;let o=-1,r=n-1,a=7,i=0;for(let s=n-1;s>0;s-=2)for(6===s&&s--;;){for(let n=0;n<2;n++)if(!e.isReserved(r,s-n)){let o=!1;i<t.length&&(o=1==(t[i]>>>a&1)),e.set(r,s-n,o),a--,-1===a&&(i++,a=7)}if(r+=o,r<0||n<=r){r-=o,o=-o;break}}}function createData(e,t,n){const o=new BitBuffer;n.forEach((function(t){o.put(t.mode.bit,4),o.put(t.getLength(),Mode.getCharCountIndicator(t.mode,e)),t.write(o)}));const r=8*(Utils$1.getSymbolTotalCodewords(e)-ECCode.getTotalCodewordsCount(e,t));for(o.getLengthInBits()+4<=r&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);const a=(r-o.getLengthInBits())/8;for(let i=0;i<a;i++)o.put(i%2?17:236,8);return createCodewords(o,e,t)}function createCodewords(e,t,n){const o=Utils$1.getSymbolTotalCodewords(t),r=o-ECCode.getTotalCodewordsCount(t,n),a=ECCode.getBlocksCount(t,n),i=a-o%a,s=Math.floor(o/a),u=Math.floor(r/a),l=u+1,c=s-u,d=new ReedSolomonEncoder(c);let g=0;const f=new Array(a),m=new Array(a);let p=0;const h=new Uint8Array(e.buffer);for(let E=0;E<a;E++){const e=E<i?u:l;f[E]=h.slice(g,g+e),m[E]=d.encode(f[E]),g+=e,p=Math.max(p,e)}const C=new Uint8Array(o);let w,P,v=0;for(w=0;w<p;w++)for(P=0;P<a;P++)w<f[P].length&&(C[v++]=f[P][w]);for(w=0;w<c;w++)for(P=0;P<a;P++)C[v++]=m[P][w];return C}function createSymbol(e,t,n,o){let r;if(Array.isArray(e))r=Segments.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let o=t;if(!o){const t=Segments.rawSplit(e);o=Version.getBestVersionForData(t,n)}r=Segments.fromString(e,o||40)}}const a=Version.getBestVersionForData(r,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<a)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+a+".\n")}else t=a;const i=createData(t,n,r),s=Utils$1.getSymbolSize(t),u=new BitMatrix(s);return setupFinderPattern(u,t),setupTimingPattern(u),setupAlignmentPattern(u,t),setupFormatInfo(u,n,0),t>=7&&setupVersionInfo(u,t),setupData(u,i),isNaN(o)&&(o=MaskPattern.getBestMask(u,setupFormatInfo.bind(null,u,n))),MaskPattern.applyMask(o,u),setupFormatInfo(u,n,o),{modules:u,version:t,errorCorrectionLevel:n,maskPattern:o,segments:r}}qrcode.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let n,o,r=ECLevel.M;return void 0!==t&&(r=ECLevel.from(t.errorCorrectionLevel,ECLevel.M),n=Version.from(t.version),o=MaskPattern.from(t.maskPattern),t.toSJISFunc&&Utils$1.setToSJISFunction(t.toSJISFunc)),createSymbol(e,n,r,o)};var canvas={},utils={};!function(e){function t(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}e.getOptions=function(e){e||(e={}),e.color||(e.color={});const n=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,o=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:o,scale:o?4:r,margin:n,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},e.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},e.getImageWidth=function(t,n){const o=e.getScale(t,n);return Math.floor((t+2*n.margin)*o)},e.qrToImageData=function(t,n,o){const r=n.modules.size,a=n.modules.data,i=e.getScale(r,o),s=Math.floor((r+2*o.margin)*i),u=o.margin*i,l=[o.color.light,o.color.dark];for(let e=0;e<s;e++)for(let n=0;n<s;n++){let c=4*(e*s+n),d=o.color.light;if(e>=u&&n>=u&&e<s-u&&n<s-u){d=l[a[Math.floor((e-u)/i)*r+Math.floor((n-u)/i)]?1:0]}t[c++]=d.r,t[c++]=d.g,t[c++]=d.b,t[c]=d.a}}}(utils),function(e){const t=utils;e.render=function(e,n,o){let r=o,a=n;void 0!==r||n&&n.getContext||(r=n,n=void 0),n||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),r=t.getOptions(r);const i=t.getImageWidth(e.modules.size,r),s=a.getContext("2d"),u=s.createImageData(i,i);return t.qrToImageData(u.data,e,r),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,a,i),s.putImageData(u,0,0),a},e.renderToDataURL=function(t,n,o){let r=o;void 0!==r||n&&n.getContext||(r=n,n=void 0),r||(r={});const a=e.render(t,n,r),i=r.type||"image/png",s=r.rendererOpts||{};return a.toDataURL(i,s.quality)}}(canvas);var svgTag={};const Utils=utils;function getColorAttrib(e,t){const n=e.a/255,o=t+'="'+e.hex+'"';return n<1?o+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':o}function svgCmd(e,t,n){let o=e+t;return void 0!==n&&(o+=" "+n),o}function qrToPath(e,t,n){let o="",r=0,a=!1,i=0;for(let s=0;s<e.length;s++){const u=Math.floor(s%t),l=Math.floor(s/t);u||a||(a=!0),e[s]?(i++,s>0&&u>0&&e[s-1]||(o+=a?svgCmd("M",u+n,.5+l+n):svgCmd("m",r,0),r=0,a=!1),u+1<t&&e[s+1]||(o+=svgCmd("h",i),i=0)):r++}return o}svgTag.render=function(e,t,n){const o=Utils.getOptions(t),r=e.modules.size,a=e.modules.data,i=r+2*o.margin,s=o.color.light.a?"<path "+getColorAttrib(o.color.light,"fill")+' d="M0 0h'+i+"v"+i+'H0z"/>':"",u="<path "+getColorAttrib(o.color.dark,"stroke")+' d="'+qrToPath(a,r,o.margin)+'"/>',l='viewBox="0 0 '+i+" "+i+'"',c='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+l+' shape-rendering="crispEdges">'+s+u+"</svg>\n";return"function"==typeof n&&n(null,c),c};const canPromise=canPromise$1,QRCode=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(e,t,n,o,r){const a=[].slice.call(arguments,1),i=a.length,s="function"==typeof a[i-1];if(!s&&!canPromise())throw new Error("Callback required as last argument");if(!s){if(i<1)throw new Error("Too few arguments provided");return 1===i?(n=t,t=o=void 0):2!==i||t.getContext||(o=n,n=t,t=void 0),new Promise((function(r,a){try{const a=QRCode.create(n,o);r(e(a,t,o))}catch(i){a(i)}}))}if(i<2)throw new Error("Too few arguments provided");2===i?(r=n,n=t,t=o=void 0):3===i&&(t.getContext&&void 0===r?(r=o,o=void 0):(r=o,o=n,n=t,t=void 0));try{const a=QRCode.create(n,o);r(null,e(a,t,o))}catch(u){r(u)}}function useQRCode(e,t){const n=toRef(e),o=ref("");return watch(n,(async e=>{n.value&&isClient&&(o.value=await browser.toDataURL(e,t))}),{immediate:!0}),o}browser.create=QRCode.create,browser.toCanvas=renderCanvas.bind(null,CanvasRenderer.render),browser.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL),browser.toString=renderCanvas.bind(null,(function(e,t,n){return SvgRenderer.render(e,n)}));const _hoisted_1$2={class:"qr-code-display"},_hoisted_2=["src","alt"],_hoisted_3={key:1},_sfc_main$2=defineComponent({__name:"QrCodeDisplay",props:{text:{default:""}},setup(e){const t=e,{text:n}=toRefs(t),o=useQRCode(n,{errorCorrectionLevel:"H",margin:2});return(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[unref(n)?(openBlock(),createElementBlock("img",{key:0,src:unref(o),alt:unref(n)},null,8,_hoisted_2)):(openBlock(),createElementBlock("span",_hoisted_3,"☝️ Input text to generate QR code"))]))}}),qLogicQrCode=e=>({label:"🤳 QR Code Toolbox",search:"qrcode",children:[{label:"text to QR Code",render:h(_sfc_main$2,{text:e})}]});function pascalCaseTransform(e,t){var n=e.charAt(0),o=e.substr(1).toLowerCase();return t>0&&n>="0"&&n<="9"?"_"+n+o:""+n.toUpperCase()+o}function pascalCaseTransformMerge(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function pascalCase(e,t){return void 0===t&&(t={}),noCase(e,__assign({delimiter:"",transform:pascalCaseTransform},t))}function camelCaseTransform(e,t){return 0===t?e.toLowerCase():pascalCaseTransform(e,t)}function camelCaseTransformMerge(e,t){return 0===t?e.toLowerCase():pascalCaseTransformMerge(e)}function camelCase(e,t){return void 0===t&&(t={}),pascalCase(e,__assign({transform:camelCaseTransform},t))}function upperCaseFirst(e){return e.charAt(0).toUpperCase()+e.substr(1)}function capitalCaseTransform(e){return upperCaseFirst(e.toLowerCase())}function capitalCase(e,t){return void 0===t&&(t={}),noCase(e,__assign({delimiter:" ",transform:capitalCaseTransform},t))}function upperCase(e){return e.toUpperCase()}function constantCase(e,t){return void 0===t&&(t={}),noCase(e,__assign({delimiter:"_",transform:upperCase},t))}function headerCase(e,t){return void 0===t&&(t={}),capitalCase(e,__assign({delimiter:"-"},t))}function pathCase(e,t){return void 0===t&&(t={}),dotCase(e,__assign({delimiter:"/"},t))}function sentenceCaseTransform(e,t){var n=e.toLowerCase();return 0===t?upperCaseFirst(n):n}function sentenceCase(e,t){return void 0===t&&(t={}),noCase(e,__assign({delimiter:" ",transform:sentenceCaseTransform},t))}function snakeCase(e,t){return void 0===t&&(t={}),dotCase(e,__assign({delimiter:"_"},t))}const changeCase=Object.freeze(Object.defineProperty({__proto__:null,camelCase:camelCase,camelCaseTransform:camelCaseTransform,camelCaseTransformMerge:camelCaseTransformMerge,capitalCase:capitalCase,capitalCaseTransform:capitalCaseTransform,constantCase:constantCase,dotCase:dotCase,headerCase:headerCase,noCase:noCase,paramCase:paramCase,pascalCase:pascalCase,pascalCaseTransform:pascalCaseTransform,pascalCaseTransformMerge:pascalCaseTransformMerge,pathCase:pathCase,sentenceCase:sentenceCase,sentenceCaseTransform:sentenceCaseTransform,snakeCase:snakeCase},Symbol.toStringTag,{value:"Module"})),demoPluginTpl="const { addPlugin, copy, computed } = window.$qlUtils\naddPlugin({\n  label: '⚠️ Demo Plugin ⚠️',\n  props: {\n    onClick() {\n      copy('Hello world!', true)\n    }\n  }\n})\naddPlugin((valRef) => {\n  return {\n    label: '⚠️ Demo Plugin (isStaticPlugin) ⚠️',\n    children: [\n      {\n        label: '📋 Copy Input Value',\n        props: {\n          onClick: async () => {\n            await copy(valRef.value, true)\n          },\n        },\n      },\n    ],\n  }\n}, {\n  // If this parameter is passed in, the plug-in can be static (displayed directly in the list without entering text)\n  isStaticPlugin: true,\n})\naddPlugin((valRef) => {\n  return {\n    label: '⚠️ Demo Plugin (Computed) ⚠️',\n    children: () => {\n      return computed(() => {\n        return [{\n          html: `Computed Value: <b style=\"color: red;\">${valRef.value}</b>`\n        }]\n      })\n    },\n  }\n})\n",usePluginState=createGlobalState((()=>({staticPlugins:ref([]),dynamicPlugins:ref([]),customStaticPlugins:ref([]),customDynamicPlugins:ref([])}))),useQuickLaunchPlugins=(update,textRef)=>{const{staticPlugins:staticPlugins,dynamicPlugins:dynamicPlugins,customStaticPlugins:customStaticPlugins,customDynamicPlugins:customDynamicPlugins}=usePluginState(),basePath="q-plugins",reloadPlugins=async()=>{dynamicPlugins.value=[],staticPlugins.value=[];const res=await fetch(`${basePath}/index.json`),data=await res.json(),{plugins:plugins}=data;for(const pluginsKey in plugins){let url=plugins[pluginsKey];const outboundUrlRegex=/^(?:http(s)?:\/\/)/;outboundUrlRegex.test(url)||(url=basePath+"/"+url);const response=await fetch(url),code=await response.text();eval(`;(function () {\n${code}  \n})()`)}},addPlugin=(e,{isStaticPlugin:t=!1,isPresetPlugin:n=!1}={})=>{const o=e=>{n?staticPlugins.value.push(e):customStaticPlugins.value.push(e)};var r;t&&"function"==typeof e&&o(e(textRef)),"function"==typeof e?(r=e,n?dynamicPlugins.value.push(r):customDynamicPlugins.value.push(r)):o(e),update()};onBeforeMount((()=>{window.$qlUtils={copy:copy,moment:moment,useFileDialog:useFileDialog,changeCase:changeCase,base64Utils:base64Utils,ref:ref,computed:computed,watch:watch,filterLabel:filterLabel,update:update,reloadPlugins:reloadPlugins,addPlugin:addPlugin},reloadPlugins()}))},useQuickLaunchCustomPlugins=update=>{const{t:$t}=useI18n(),customPluginsStorage=useStorage("quick_launch_custom_plugins",[]),findCustomPlugin=e=>{const t=customPluginsStorage.value.findIndex((t=>t.name===e));return-1!==t?{index:t,item:customPluginsStorage.value[t]}:null},editingCustomPlugin=ref(null),saveCustomPlugin=()=>{if(!editingCustomPlugin.value)return;const e=findCustomPlugin(editingCustomPlugin.value.name);e?customPluginsStorage.value.splice(e.index,1,editingCustomPlugin.value):customPluginsStorage.value.push(editingCustomPlugin.value),editingCustomPlugin.value=null,reloadCustomPlugins()},evalPluginCode=code=>{try{eval(`;(function () {\n${code}  \n})()`)}catch(e){window.$message.error(e.message)}},runCustomPlugin=()=>{editingCustomPlugin.value&&(customStaticPlugins.value=[],customDynamicPlugins.value=[],evalPluginCode(editingCustomPlugin.value.code))},{customStaticPlugins:customStaticPlugins,customDynamicPlugins:customDynamicPlugins}=usePluginState(),reloadCustomPlugins=()=>{customStaticPlugins.value=[],customDynamicPlugins.value=[],customPluginsStorage.value.forEach((e=>{e.code&&evalPluginCode(e.code)})),update()};onMounted((()=>{reloadCustomPlugins()}));const qLogicManage={label:`🔌 ${$t("common.plugins_manager")} 🧩`,children:()=>computed((()=>[{label:`🔄 ${$t("plugins.reload_all_plugins")}`,props:{isBack:1,onClick:async()=>{reloadCustomPlugins(),await window.$qlUtils.reloadPlugins(),window.$message.success($t("plugins.plugins_reloaded"))}}},{label:`🔄 ${$t("plugins.reload_custom_plugi")}`,props:{isBack:1,onClick:async()=>{reloadCustomPlugins(),window.$message.success($t("plugins.plugins_reloaded"))}}},{label:`✨ ${$t("actions.add_plugin")}`,props:{onClick:async()=>{const e=await window.$mcUtils.showInputPrompt({title:$t("plugins.input_plugin_name"),value:"",placeholder:$t("plugins.input_demo_to_creat"),validateFn(e){if(findCustomPlugin(e))return $t("msgs.error_name_duplicat")}});editingCustomPlugin.value={name:e,code:""},"demo"===e&&(editingCustomPlugin.value.code=demoPluginTpl)}}},{label:`🗃️ ${$t("actions.import_export")} ${$t("actions.plugins")}`,children:[{label:`📥 ${$t("actions.import")} ${$t("actions.plugins")}`,props:{isBack:1,onClick:async()=>{const e=await window.$mcUtils.handleImportJson();customPluginsStorage.value=e||[],window.$message.success($t("msgs.import_success")),reloadCustomPlugins()}}},{label:`📤 ${$t("actions.export")} ${$t("actions.plugins")}`,props:{onClick:async()=>{window.$mcUtils.handleExportFile(await window.$mcUtils.promptGetFileName("QuickLaunchCustomPlugins"),JSON.stringify(customPluginsStorage.value,null,2),".json")}}},{label:`🗑️ ${$t("plugins.delete_all_custom_p")}`,children:[{label:`☑️ ${$t("actions.confirm")}`,props:{isBack:2,onClick:()=>{customPluginsStorage.value=[],reloadCustomPlugins()}}},{label:`🔙 ${$t("actions.cancel")}`,props:{isBack:1}}]}]},{split:!0},...customPluginsStorage.value.map((e=>({label:"🧩 "+e.name,children:[{label:`📝 ${$t("actions.edit")} ${$t("common.code")}`,props:{isBack:2,onClick:()=>{const t=findCustomPlugin(e.name);t&&(editingCustomPlugin.value={...t.item})}}},{label:`✍️ ${$t("actions.rename")}`,props:{isBack:1,onClick:async()=>{const t=await window.$mcUtils.showInputPrompt({title:`${$t("actions.rename")}: ${e.name}`,value:e.name,validateFn(e){if(findCustomPlugin(e))return $t("msgs.error_name_duplicat")}});if(t===e.name)return;const n=findCustomPlugin(e.name);n&&customPluginsStorage.value.splice(n.index,1,{...n.item,name:t})}}},{label:`🗑️ ${$t("actions.delete")} [${e.name}]`,children:[{label:`☑️ ${$t("actions.confirm")}`,props:{isBack:2,onClick:()=>{const t=findCustomPlugin(e.name);t&&customPluginsStorage.value.splice(t.index,1)}}},{label:`🔙 ${$t("actions.cancel")}`,props:{isBack:1}}]}]})))]))};return{qLogicManage:qLogicManage,editingCustomPlugin:editingCustomPlugin,saveCustomPlugin:saveCustomPlugin,runCustomPlugin:runCustomPlugin}},qLogicHelp={label:"❓ 这是一个快捷工具箱，支持全键盘操作，帮你快速执行操作！\n✨ 输入 /? 查看帮助\n✨ 输入框按下 tab 键聚焦到下方功能列表，再按 esc 返回输入框\n✨ 输入框按下 esc 可以清空\n✨ 部分功能支持输入多行文本\n✨ 支持输入时间戳，如：1709794946384\n✨ 支持插件功能，你可以编写自己的插件\n"},useQLogics=(e,t)=>{const{staticPlugins:n,dynamicPlugins:o,customStaticPlugins:r,customDynamicPlugins:a}=usePluginState(),i=ref([]),{qLogicManage:s,editingCustomPlugin:u,saveCustomPlugin:l,runCustomPlugin:c}=useQuickLaunchCustomPlugins(t);return{handleSearch:useDebounceFn((t=>{const u=t.value,l=[s,...r.value,qLogicQrCode(t),...n.value];if(!u)return void(i.value=[...e.value,{split:!0},...l]);if("/?"===u)return void(i.value=[qLogicHelp]);const c={};i.value=[...l.filter((e=>filterLabel(e,u))),...o.value.map((e=>e(t))),...a.value.map((e=>e(t)))].filter((e=>{if(!e)return!1;if(e.label){if(c[e.label])return!1;c[e.label]=!0}return!0}))}),300),filteredOptions:i,editingCustomPlugin:u,saveCustomPlugin:l,runCustomPlugin:c}},_hoisted_1$1={class:"quick-launch"},_sfc_main$1=defineComponent({__name:"index",setup(e,{expose:t}){const n=useRoute(),o=ref(),r=ref(!1),a=()=>{i.value.focus()};onMounted((()=>{a(),l()}));const{textarea:i,input:s}=useTextareaAutosize(),{qlOptions:u}=useCommonTools(),l=()=>{d(s)},{filteredOptions:c,handleSearch:d,editingCustomPlugin:g,saveCustomPlugin:f,runCustomPlugin:m}=useQLogics(u,l);useQuickLaunchPlugins(l,s),watch(n,(()=>{l()}));const p=()=>{r.value||l()},h=()=>{s.value="",l()},C=ref();return t({focus:a}),(e,t)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$1,[withDirectives(createBaseVNode("textarea",{ref_key:"textareaRef",ref:i,rows:"1","onUpdate:modelValue":t[0]||(t[0]=e=>isRef(s)?s.value=e:null),onInput:p,placeholder:"/?",type:"textarea",class:"font-code vp-input",onKeyup:withKeys(h,["esc"])},null,544),[[vModelText,unref(s)]]),createVNode(QuickOptions,{ref_key:"qRef",ref:o,"auto-focus":!1,options:unref(c),"is-static":"",class:"font-emoji",onOnClose:t[1]||(t[1]=e=>unref(i).focus()),onOnEnter:t[2]||(t[2]=e=>r.value=!0),onOnBack:t[3]||(t[3]=e=>r.value=!1)},null,8,["options"])]),(openBlock(),createBlock(Teleport,{to:"body"},[createVNode(ViewPortWindow,{visible:!!unref(g),"init-win-options":{width:"500px",height:"500px"},onResize:t[7]||(t[7]=e=>{var t;return null==(t=unref(C))?void 0:t.resize()}),"allow-maximum":"",onOnClose:t[8]||(t[8]=e=>g.value=null)},{titleBarLeft:withCtx((()=>{var e;return[createTextVNode(" Editing Plugin: "+toDisplayString(null==(e=unref(g))?void 0:e.name),1)]})),titleBarRightControls:withCtx((()=>[createBaseVNode("button",{onClick:t[4]||(t[4]=(...e)=>unref(m)&&unref(m)(...e)),title:"Run Script"},"▶️"),createBaseVNode("button",{onClick:t[5]||(t[5]=(...e)=>unref(f)&&unref(f)(...e)),title:"Save"},"💾")])),default:withCtx((()=>[unref(g)?(openBlock(),createBlock(VueMonaco,{key:0,ref_key:"vueMonacoRef",ref:C,modelValue:unref(g).code,"onUpdate:modelValue":t[6]||(t[6]=e=>unref(g).code=e),language:"javascript","show-line-numbers":""},null,8,["modelValue"])):createCommentVNode("",!0)])),_:1},8,["visible"])]))],64))}}),_sfc_main=defineComponent({name:"QuickLaunchWindow",props:{visible:{type:Boolean,default:!1}},components:{QuickLaunch:_sfc_main$1,ViewPortWindow:ViewPortWindow},emits:["update:visible"],setup(e,{emit:t}){const n=useModelWrapper(e,t,"visible"),o=useRoute(),r=ref();watch(n,(e=>{e&&setTimeout((()=>{r.value.focus()}),100)}));return{mVisible:n,showClose:computed((()=>"HomePage"!==o.name)),qlRef:r}}}),_imports_0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAzUlEQVQ4y2OQFOH5z8fNBsYgtqMy3/9iSwWsGCQnJcoLVguiQeoZQJw9M5LAGKRgXqTR/3WZNlgxSA6kBqYepBduAEgCl0Z0DDMEbADM2SCJUAuV/97aEmAahkF8ZAwSgxkC9gKys0GSyGyYjSCNMDZMHOYdBlDgoEvCNBEyGKQXwwB0b2Bj4zWAFDb1DUAPbWQ2UV5ADjhYyIP42GIBbgCuaETWhB4jKNEIStPICQlbYkLHsIQE0kt5UgaZQm5mArsAlJ6Rsyih7Iye/QFRA+qIOTtE1AAAAABJRU5ErkJggg==",_hoisted_1=createBaseVNode("img",{src:_imports_0,alt:"icon"},null,-1);function _sfc_render(e,t,n,o,r,a){const i=resolveComponent("QuickLaunch"),s=resolveComponent("ViewPortWindow");return openBlock(),createBlock(s,{visible:e.mVisible,"onUpdate:visible":t[0]||(t[0]=t=>e.mVisible=t),"show-close":e.showClose,wid:"ql",class:"quick-launch-window","allow-maximum":"","init-win-options":{width:"350px",height:"500px"}},{titleBarLeft:withCtx((()=>[_hoisted_1,createTextVNode(" PageCraft "+toDisplayString(e.$t("common.toolbox"))+" (alt+q) ",1)])),default:withCtx((()=>[createVNode(i,{ref:"qlRef"},null,512)])),_:1},8,["visible","show-close"])}const QuickLaunchWindow=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{QuickLaunchWindow as default};
