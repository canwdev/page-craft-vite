const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./howler-BNQRfZUS.js","./index-D7imv_Md.js","./index-CXkDE1gB.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n);import{r as a,I as n,ah as l,x as o,K as s,a as r,q as i,D as c,a9 as u,H as d,ai as A,a0 as p,aj as m,a5 as v,ak as g,M as h,J as b,u as y,al as f,c as w,N as S,am as C,af as T,an as E,ao as k,y as _,G as x,ap as L,aq as M,d as R,t as P,_ as H,i as U,o as D,p as O,L as $,P as N,f as I,e as B,O as V,ar as z,as as F,at as q,au as j,b as W,g as G,n as J,F as X,ad as Y,m as K,T as Z,X as Q,W as ee,U as te,h as ae,w as ne,ab as le,av as oe,aw as se,Q as re,R as ie,ax as ce,ay as ue,az as de}from"./index-D7imv_Md.js";/* empty css                  *//* empty css                        *//* empty css                    */import{g as Ae,a as pe,b as me}from"./index-BR_HEkHY.js";import{A as ve,_ as ge}from"./index.vue_vue_type_style_index_0_lang-DEuY5zHr.js";import{u as he,a as be}from"./use-beforeunload-walRddPp.js";import{n as ye,f as fe}from"./humanfs-api-Dvdi9RO8.js";import{p as we}from"./index-vcidOvW8.js";import{V as Se}from"./index-CP_TvyA7.js";import{u as Ce}from"./use-model-wrapper-B0P8Zqss.js";import{V as Te}from"./index-ChBI-IfP.js";import{_ as Ee}from"./QuickContextMenu.vue_vue_type_script_setup_true_lang-BpOU60Dx.js";function ke(e,{volume:t=1,playbackRate:r=1,soundEnabled:i=!0,interrupt:c=!1,autoplay:u=!1,onload:d,...A}={}){const p=a(null),m=a(!1),v=a(null),g=a(null);function h(){var e;"function"==typeof d&&d.call(this),v.value=1e3*(v.value||(null==(e=g.value)?void 0:e.duration())||0),!0===u&&(m.value=!0)}n((async()=>{const a=await l((()=>import("./howler-BNQRfZUS.js").then((e=>e.h))),__vite__mapDeps([0,1,2]),import.meta.url);p.value=a.default.Howl,g.value=new p.value({src:o(e),volume:o(t),rate:o(r),onload:h,...A})})),s((()=>[e]),(()=>{p.value&&p.value&&g&&g.value&&(g.value=new p.value({src:o(e),volume:o(t),rate:o(r),onload:h,...A}))})),s((()=>[o(t),o(r)]),(()=>{g.value&&(g.value.volume(o(t)),g.value.rate(o(r)))}));return{play:e=>{void 0===e&&(e={}),g.value&&(i||e.forceSoundEnabled)&&(c&&g.value.stop(),e.playbackRate&&g.value.rate(e.playbackRate),g.value.play(e.id),g.value.once("end",(()=>{g.value&&g.value&&!g.value.playing()&&(m.value=!1)})),m.value=!0)},sound:g,isPlaying:m,duration:v,pause:e=>{g.value&&(g.value.pause("number"==typeof e?e:void 0),m.value=!1)},stop:e=>{g.value&&(g.value.stop("number"==typeof e?e:void 0),m.value=!1)}}}const _e=""+new URL("open-UeZQ83h4.ogg",import.meta.url).href,xe=""+new URL("close1-BakA0P2g.ogg",import.meta.url).href,Le=""+new URL("select_pattern_mix-DXw_mqqO.ogg",import.meta.url).href,Me=""+new URL("wood_mix-zCSPzndQ.ogg",import.meta.url).href,Re=""+new URL("grass_mix-BApjfdS6.ogg",import.meta.url).href,Pe=""+new URL("loading_middle2-D1wQur0C.ogg",import.meta.url).href,He=""+new URL("shoot2-Bgro1KOW.ogg",import.meta.url).href,Ue=""+new URL("brushing_generic2-B670JkA0.ogg",import.meta.url).href,De=""+new URL("bell-XX7Mxd8B.ogg",import.meta.url).href,Oe=""+new URL("fill1-B_y51Az1.ogg",import.meta.url).href,$e=""+new URL("guitar-BG0qG-kv.ogg",import.meta.url).href,Ne=""+new URL("bass-FEG0pYKb.ogg",import.meta.url).href,Ie=e=>{const t=r(),{play:a}=ke(_e,{volume:1,soundEnabled:t.enableSoundFx}),{play:n}=ke(xe,{volume:1,soundEnabled:t.enableSoundFx});s(e,(e=>{e?a():n()}))},Be=e=>{const t=r(),{play:a}=ke(Pe,{volume:1,soundEnabled:t.enableSoundFx}),{play:n}=ke(He,{volume:1,soundEnabled:t.enableSoundFx});s(e,(e=>{e?a():n()}))},Ve=()=>{const e=r(),{play:t,stop:a}=ke(Le,{volume:1,soundEnabled:e.enableSoundFx,sprite:{id_0:[0,500],id_1:[600,539],id_2:[1196,539],id_3:[1878,576],id_4:[2472,696]}});return{play:()=>{t({id:`id_${Math.floor(5*Math.random())}`})},stop:a}},ze=()=>{const e=r();return ke(Ue,{volume:1,soundEnabled:e.enableSoundFx})},Fe=()=>{const e=r();return ke(Oe,{volume:1,soundEnabled:e.enableSoundFx})},qe=()=>ke("data:audio/mpeg;base64,SUQzAwAAAAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+7BgAAAG0WjNZT8gCAAACXCgAAEaeXdl+P2AAAAAJcMAAACyFElJrUoQua0XwehGG+h6Hqur9jT6jV8dsQxYdMdQeFI2GIUZxgQYFyzquOpwHMMbRXTDgepjGJZunp6fPUocuH78ofx/JZjG3IdyWXZXDcbtzD/w/3k21td7T3gQlphuvclmMrn4g5cP5SiWY08vyjdvVJY3T26j/v/L8pRGIcnJtyH8sbz1SWNxiWczz/DDeGGH509Pbwjcvt//591nnn+sMOfhhh/7z7rPPP9YYfnSWN59qSiWY0lJSYfnnnnhzeeffwwz/WH50+eqenqcUOcH/8McRn+cyBNBHBCRCKGZCKLZTSSiVbZLDvG8ZZJyCtIxyWo0sI+gWAQQvg3j/KQCBRWDVSsVdNTUysfOkYgcmGhGIMHAQCAUUMEGxpVp37bg0xypLRacyta1QTMPzMjuZb3Vy/mtRhg70K4a8XclOOsssf/H/9WBKgtovRl9qWQy7UPWrsts73///3909mV27tP3v45dlNbKZ3397/9dlcvwl+WHcOc7uls1cd6/W8df+u///r9a5nSWM4pE5/lTCpU3q1+sqbuNarGbwl9KJQ/eQ7iYWQ39kqdWtASxAAAGlAAACr6qQCckkkZdcvW6zhQLMuLKJp+xoqGy/Wqq2us6UAzbJpcwVUEvRtBLEsi+jXn3CxU1VhYZ9rTlP1dwiNFqamce2saX+XZBhMztNn2W2ZTKsn2v2sY5FZb96Zd2TVq+Ebzwp61NTXLVXKU45XJVD3KbKxarbyypddl1NLsNW7/eXs7s7hyxdjMetUErprWeN3DX/ruuZf/7sGBLAAZOaNRXYwAEAAAJcOAAARp5oz+n4Y2QAAAlwAAABJ/jc3VrZZ2O93Kb1bLfO481/7x/dnG5V1Q1KtSu4LOYdi0SeZ5d1m4wmeitJuT3bGuarVpIkSSAE3JJIH8nTCV53qEoxQMieO40R9G8r4JiCRUCK+YmpqwF7ZCqxca7jBMEHOkUjFmKXqPZR5QJ82eSZ+ZLB3YdZc/VaBZVnDUWlsCDrhyPsO0Oz3VpWR8Qh0Nko5Hw8kW5ODofwOpVBahPgWPYj4qtLYx6jaBq6ZHNDJf2LzFKeH0ZNmA5gquSzQnWQ3lGnxyDUsD4fTey+iejq6NmFEZcrOn1tJbWurjno3aMtXjd6ON2cs0hbAZLlyvFqU5JpeMkzYkk3KgWB8dSAOzC8bhskN9vrWQbtbbbNO0w5Y0ugMCBWYY7HbqEBa50RUhrE19QEEJLvM3BAy0KmJd1SIVMXSbElckaYBgbINcRLQGl9lqsbNTwhLRkwpfYnoagtdryyqHqbK7DTvU8MzuoanpmGr/NzPw4olst203crapyKP7bNGqBsJblVTm1rmz/SX3tVPM1yMVPYGgkSJU8ybW/zPp6r+nzzXmWqqeiWz/2Oyt9U8zTzMtVU3bSKMtwURoob/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////uwYKMAD/lpSmsYM3JGgAlwAAABAAABLgAAACAAACXAAAAE////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+P//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+7BApwAP/ABLgAAACE6ACXAAAAEAAAEuAAAAIAAAJcAAAAT/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",{volume:1,soundEnabled:r().enableSoundFx}),je=/\.comp$/i;let We=1;const Ge=(e,t)=>localStorage.getItem(e+"__"+t)||"",Je=async(e,t,a)=>{await fe.createFile({path:ye(e+"/"+t),file:a,isOverride:!0})},Xe=async(e,t,a)=>await fe.getFile({path:ye(e+"/"+t),mode:a}),Ye=e=>{const{files:t,basePath:a,isLoading:n,emit:l}=e;r();const{t:o}=c(),s=async e=>{const t=`${e.name}.comp`,n=ye(a.value+"/"+t);await fe.createDir({path:n});const l={id:e.id||Ae(),timeCreated:e.timestamp};await Je(n,"index.json",JSON.stringify(l)),await Je(n,"index.html",e.html),await Je(n,"index.scss",e.style),e.cover&&await Je(n,"cover.base64",e.cover)},i=async e=>{if(!e.meta)throw new Error("item must has meta");const t=ye(a.value+"/"+e.name),n=await Xe(t,"index.html"),l=await Xe(t,"index.scss");return{id:e.meta.id,name:e.name.replace(je,""),timestamp:e.meta.timeCreated,html:n,style:l,cover:e.meta.cover}};return{handleCreateComponent:async()=>{try{const e=await((e="",a="",n="")=>window.$mcUtils.showInputPrompt({title:e,value:a,placeholder:n,validateFn:e=>{if(t.value.find((t=>t.name===e)))return o("msgs.name_already_exists")}}))(o("actions.add_component"),`Component${We}`,o("msgs.please_enter_the_nam")),a=`${e}.comp`;if((e=>{if(console.log(e,t.value),t.value.some((t=>t.name===e)))return window.$message.error("Filename already exists, please rename it!"),!0})(a))return;n.value=!0;const r=we(e||"my-component"),i=Ae();await s({id:i,name:e,timestamp:Date.now(),html:`<div class="${r}"></div>`,style:`.${r} {\n}\n`}),We++,l("refresh"),setTimeout((()=>{var e;null==(e=document.querySelector(`.mc-comp-item[data-name="${a}"]`))||e.click()}),100)}finally{n.value=!1}},importComponentAllJson:async e=>{for(let t=0;t<e.length;t++)await s(e[t])},exportComponentAllJson:async e=>{const t=await d("","PageCraftAllComponents");if(!t)return;const a=[];for(let n=0;n<e.length;n++)a.push(await i(e[n]));window.$mcUtils.handleExportFile(t,JSON.stringify(a,null,2),".json")},importComponentJson:s,exportComponentJson:i}},Ke=()=>{const e=r(),t=async t=>{if(!e.curCompInStore)return Ge(u.DEFAULT_CANVAS,t);const{path:a}=e.curCompInStore;return await Xe(a,t)},a=async(t,a)=>{if(!e.curCompInStore)return n=u.DEFAULT_CANVAS,l=t,o=a,localStorage.setItem(n+"__"+l,o);var n,l,o;const{path:s}=e.curCompInStore;return await fe.writeFile({path:ye(s+"/"+t),file:a})};return{openComponent:(t,a)=>{e.curCompInStore=((e,t)=>{if(!e.meta)throw new Error("item has no meta");return{id:e.meta.id,title:e.name.replace(je,""),path:t,basePath:e.basePath}})(t,a)},loadCurCompHtml:async()=>await t("index.html"),saveCurCompHtml:async e=>await a("index.html",e),loadCurCompStyle:async()=>await t("index.scss"),saveCurCompStyle:async e=>await a("index.scss",e)}},Ze=e=>{const t=i("component_is_migrated_v2",!1),l=a(!1),o=async()=>{if(t.value||l.value)return;l.value=!0;const a=(JSON.parse(localStorage.getItem(u.COMP_INDEX_LIST)||"null")||[]).map((({name:e})=>((e,t={})=>new A({blockType:p.COMPONENT,title:e,data:new m(t)}))(e,JSON.parse(Ge(u.COMP_META,e)||"{}"))));for(let e=0;e<a.length;e++){const t=a[e],{title:n,data:{timestamp:l,stared:o,cover:s}}=t,r=ye((o?"/@Migrated/Stared":"/@Migrated")+"/"+`${n}.comp`),i={id:Ae(),timeCreated:l};await Je(r,"index.json",JSON.stringify(i)),await Je(r,"index.html",Ge(u.COMP_HTML,n)),await Je(r,"index.scss",Ge(u.COMP_STYLE,n)),s&&await Je(r,"cover.base64",s)}t.value=!0,e("refresh")};n((async()=>{await o()}))},Qe={indent_size:"2",indent_char:" ",max_preserve_newlines:"1",preserve_newlines:!0,keep_array_indentation:!1,break_chained_methods:!1,indent_scripts:"normal",brace_style:"collapse",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!1,end_with_newline:!1,wrap_line_length:"110",indent_inner_html:!1,comma_first:!1,e4x:!1,indent_empty_lines:!1},et=e=>window.html_beautify(e,Qe),tt=(e,t={})=>window.css_beautify(e,Qe),at=async(e,t)=>{const{html:a,style:n}=e,{isInline:l=!1,inlineWithStyleTag:o=!1}=t||{};let s="";l&&(s+="-inline",o&&(s+="-with-style-tag"));let r=await d(e.name?e.name+s:"");const i=n?tt(await v(n)):"";let c;l?(c=window.$juice(`<style>${i}</style>\n${a}`),o&&(c=`<style>${i}</style>${c}`),c=et(c)):c=`<!doctype html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport"\n        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">\n  <meta http-equiv="X-UA-Compatible" content="ie=edge">\n  <title>${r}</title>\n  <style>\n    ${i}\n  </style>\n</head>\n<body>\n${a}\n</body>\n</html>\n`,g(r,c,".html")},nt=async(e,t=2)=>{const{html:a,style:n}=e,l=await d(e.name),o=`\n<style lang="scss" scoped>\n${n}\n</style>\n`;let s="";s=3===t?`<script lang="ts">\nimport {defineComponent} from 'vue'\n\nexport default defineComponent({\n  name: '${l}',\n})\n<\/script>\n\n<template>\n${a}\n</template>\n\n${o}\n`:`<template>\n${a}\n</template>\n\n<script>\nexport default {\n  name: '${l}',\n}\n<\/script>\n\n${o}\n`,s.trim(),g(l,s,".vue")},lt=e=>new Promise(((t,a)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=e=>{a(e)},n.readAsDataURL(e)})),ot=(e="my_channel",t)=>{const a=h();return n((()=>{const n=new BroadcastChannel(e);t&&(n.onmessage=e=>{t(e)}),a.value=n})),b((()=>{a.value&&a.value.close()})),{channelRef:a}},st=["img","iframe","video","audio","source","track","embed","object","picture","script","link"],rt=(e,t)=>{const{innerText:a="",className:n=""}=t||{},l=a||"",o=e.data.tag,s=document.createElement(o);return st.includes(o)?(["audio","video"].includes(o)&&(s.controls=!0),s.src=l):"input"===o?s.setAttribute("placeholder",l):["br","hr"].includes(o)||(s.innerHTML=l),n&&(s.className=n),s},it=async e=>{const t=await navigator.clipboard.readText();return"src"in e?e.src=t:e.innerHTML=t,t},ct=(e,t=0)=>({label:e,key:e,type:ve.INPUT,props:{clearable:!0,type:t>0?"textarea":void 0,rows:t}}),ut=e=>({label:e,key:e,type:ve.SWITCH,props:{checkedValue:"true"}}),dt={src:{label:"src",key:"src",type:ve.INPUT,props:{clearable:!0}},alt:ct("alt"),href:{label:"href",key:"href",type:ve.INPUT,props:{clearable:!0}},target:{label:"target",key:"target",type:ve.SELECT,options:pe(["_blank","_self","_parent","_top"]),props:{clearable:!0}},rel:{label:"rel",key:"rel",type:ve.SELECT,options:pe(["nofollow noopener noreferrer","nofollow"]),props:{clearable:!0}},poster:{label:"poster",key:"poster",type:ve.INPUT,props:{clearable:!0}},placeholder:ct("placeholder",1),name:ct("name"),inputType:{label:"type",key:"type",type:ve.SELECT,options:pe(["text","email","number","password","tel","button","submit","checkbox","radio","color","date","datetime","time","datetime-local","month","week","file","image","range","reset","search","url","hidden"]),props:{filterable:!0,clearable:!0}},frameborder:{label:"frameborder",key:"frameborder",type:ve.SELECT,options:pe(["0"]),props:{clearable:!0}},srcdoc:ct("srcdoc",2),required:ut("required"),disabled:ut("disabled"),readonly:ut("readonly"),title:ct("title",1),tabindex:{label:"tabindex",key:"tabindex",type:ve.INPUT_NUMBER},id:ct("id"),className:ct("class"),dir:{label:"dir",key:"dir",type:ve.SELECT,options:pe(["ltr","rtl","auto"]),props:{clearable:!0}},style:ct("style",1)},At=e=>"cols"in e?(e.children=e.children.map(At),e):Array.isArray(e)?e=e.map(At):{...e,key:`customProps.${e.key}`},pt=(e=[])=>{e=[dt.className,...e,[dt.title,dt.id,dt.dir],dt.style];const t=[],a=e=>{"cols"in e?e.children.forEach((e=>a(e))):Array.isArray(e)?e.forEach((e=>a(e))):t.push(e.key)};return e.forEach(a),{getCustomProps:e=>{const a={};return t.forEach((t=>{a[t]=e.getAttribute(t)})),a},updateElement(e,a){t.forEach((t=>{((e,t,a)=>{a?e.getAttribute(t)!==a&&e.setAttribute(t,a):e.removeAttribute(t)})(e,t,a.customProps[t])}))},customFormItems:e}},mt={a:pt([dt.href,[dt.target,dt.rel]]),input:pt([dt.placeholder,[dt.inputType,dt.name,dt.required,dt.disabled,dt.readonly]]),textarea:pt([[dt.name,dt.required,dt.disabled,dt.readonly]]),button:pt([[dt.disabled,dt.tabindex]]),video:pt([dt.src,dt.poster]),img:pt([dt.src,dt.alt]),iframe:pt([dt.src,dt.frameborder,dt.srcdoc])},vt=pt();st.forEach((e=>{mt[e]||(mt[e]=pt([dt.src]))}));const gt=e=>{if(!e)return{tagName:"",innerHTML:"",outerHTML:"",customProps:null};const t=mt[e.tagName.toLowerCase()]||vt;return{tagName:e.tagName||"",innerHTML:e.innerHTML||"",outerHTML:e.outerHTML||"",customProps:t.getCustomProps(e)}};class ht{constructor(e){t(this,"currentPosition"),t(this,"currentTarget"),t(this,"preSelectTarget"),t(this,"targetElement"),t(this,"crossX"),this.currentPosition=null,this.currentTarget=null,this.preSelectTarget=null,this.targetElement=e;const a=document.querySelector(".line-helper-x");a||console.error("crossX is not exist!"),this.crossX=a}hideLine(){this.crossX.classList.remove("visible")}drawLine(e){const t=e.target;if(!t)return;const a=this.targetElement,n=this.crossX,l=function(e,t,a){const n=e.getBoundingClientRect(),l=Math.round((n.bottom-n.top)/3);return{top:a<n.top+l,middle:a>=n.top+l&&a<=n.top+2*l,bottom:a>n.top+2*l}}(t,e.clientX,e.clientY),o=t.getBoundingClientRect();if(l.top&&a!==t){if("top"===this.currentPosition&&this.currentTarget===t)return;this.currentPosition="top",this.currentTarget=t,n.style.top=o.top+"px",n.style.left=o.left+"px",n.style.width=o.width+"px",n.style.height="3px",n.classList.add("visible")}else if(l.bottom&&a!==t){if("bottom"===this.currentPosition&&this.currentTarget===t)return;this.currentPosition="bottom",this.currentTarget=t,n.style.top=o.bottom+"px",n.style.left=o.left+"px",n.style.width=o.width+"px",n.style.height="3px",n.classList.add("visible")}else this.currentPosition="middle",this.currentTarget=t,this.preSelectTarget=t,n.style.top=o.top+"px",n.style.left=o.left+"px",n.style.width=o.width+"px",n.style.height=o.height+"px",n.classList.add("visible")}}const bt=e=>{const{t:t}=c(),{mainPlaygroundRef:l,saveData:o,indicatorOptions:s,copyHtml:i,recordUndo:u}=e,d=y(),A=a(0),m=a(null),v=a(0),g=a(0),f=a(!1),S=a(!1);Ie((()=>f.value));const T=h();n((()=>{l.value.addEventListener("contextmenu",V),l.value.addEventListener("pointerdown",U),l.value.addEventListener("pointerup",D),T.value=new ht(l.value)})),b((()=>{l.value.removeEventListener("contextmenu",V),l.value.removeEventListener("pointerdown",U),l.value.removeEventListener("pointerup",D)}));const L=a(null),M=a(null),R=a(!1),P=a();E(P,(e=>{R.value&&setTimeout((()=>{R.value=!1}))}));const H=a(!1),U=e=>{2!==e.button&&(H.value=!0,window.getSelection().removeAllRanges())},D=e=>{if(!H.value)return;const t=window.getSelection();if(L.value=t,!t)return;if(!t.toString())return;const a=t.getRangeAt(0).getBoundingClientRect();M.value=k({x:a.left,y:a.top+a.height,width:a.width,height:a.height}),R.value=!0,H.value=!1},O=[...["b","i","u","del","code","mark","kbd","a","sup","sub","small","big","span","div","br"].map((e=>({label:e,onClick:()=>{u();const t=document.createElement(e);"br"===e?(e=>{try{if(window.getSelection){const t=window.getSelection();if(t){const a=t.getRangeAt(0);a.collapse(!1),a.insertNode(e)}}}catch(t){window.$message.error(t.message),console.error(t)}})(t):(e=>{try{if(window.getSelection){const t=window.getSelection();t&&t.rangeCount&&(t.getRangeAt(0).cloneRange().surroundContents(e),t.removeAllRanges())}}catch(t){window.$message.error(t.message),console.error(t)}})(t),o(),q()}})))],$=async(e,t="beforeend",a)=>{u(),a||(a=await navigator.clipboard.readText()),e.insertAdjacentHTML(t,a),o(),q()},N=(e,t="append",a)=>{u(),a||(a=rt(d.currentBlock,d)),e[t](a),o(),q()},I=a(null),B=a(),V=e=>{var t;const a=null==(t=L.value)?void 0:t.toString();!s.enableRightClick||a||e.ctrlKey||(e.preventDefault(),d.currentBlock.actionType===C.DEBUG&&console.log("[handleContextMenu]",e),I.value=e.target,B.value.showMenu(e))},z=w((()=>{const e=I.value;if(!e)return[];const a=e===l.value,n={label:"✏️ "+t("actions.edit_element"),props:{onClick:async()=>{f.value=!0,S.value=a}}},s=a?[n]:[n,{label:`📄 ${t("actions.copy")} HTML`,props:{onClick:async()=>{i(e)}}},{label:"✂️ "+t("actions.cut"),props:{onClick:async()=>{var t;me(e.outerHTML),u(),null==(t=e.parentNode)||t.removeChild(e),o(),j()}}},{label:"❌ "+t("actions.remove_element"),props:{onClick:async()=>{var t;u(),null==(t=e.parentNode)||t.removeChild(e),o(),j()}}}];return[d.currentBlock.blockType===p.HTML_ELEMENT&&{label:`➕ ${t("actions.insert")} ${d.currentBlock.title}`,children:a?void 0:["before","prepend","append","after"].map((a=>({label:`${t("actions.insert")} ${a}`,props:{onClick:async()=>{N(e,a)}}}))),props:{onClick:async()=>{N(e),contextMenuEtc.showRightMenu.value=!1}}},...s,{label:`📃 ${t("actions.paste")} outerHTML`,children:a?void 0:["beforebegin","afterbegin","beforeend","afterend"].map((a=>({label:`${t("actions.paste_at")} ${a}`,props:{onClick:async()=>{await $(e,a)}}}))),props:{onClick:async()=>{await $(e),contextMenuEtc.showRightMenu.value=!1}}},{label:"🎈 "+t("actions.paste_replace_value"),props:{onClick:async()=>{await(async e=>{u(),await it(e),o(),q()})(e),contextMenuEtc.showRightMenu.value=!1}}},{split:!0},{label:"💻 "+t("actions.print_to_console"),props:{onClick:async()=>{console.log(I.value)}}}].filter(Boolean)})),F=w((()=>s.enableSelection||d.currentBlock.actionType===C.DEBUG||d.currentBlock.actionType===C.PASTE_REPLACE)),{play:q}=(()=>{const e=r(),{play:t}=ke(Me,{volume:1,soundEnabled:e.enableSoundFx,sprite:{id_0:[0,300],id_1:[420,300],id_2:[900,300],id_3:[1420,300]}});return{play:()=>t({id:`id_${Math.floor(4*Math.random())}`})}})(),{play:j}=(()=>{const e=r(),{play:t}=ke(Re,{volume:1,soundEnabled:e.enableSoundFx,sprite:{id_0:[0,400],id_1:[400,500],id_2:[900,400],id_3:[1400,600]}});return{play:()=>t({id:`id_${Math.floor(4*Math.random())}`})}})(),W=async(e,t,a)=>{t||(t=d.currentBlock),t.actionType!==C.CURSOR&&t.actionType!==C.DEBUG&&t.actionType!==C.DRAG&&u(),a=a||d,await(async(e,t,a,n)=>{let l=t.target||n.value;if(e.blockType===p.ACTIONS){if(e.actionType===C.PASTE_REPLACE)return void(await it(l));if(e.actionType===C.DEBUG){console.log("[event]",t);const e=t.target;for(var o=e.previousSibling;o&&1!==o.nodeType;)o=o.previousSibling;for(var s=e.nextSibling;s&&1!==s.nodeType;)s=s.nextSibling;return console.log({sibling1:o,sibling2:s}),void console.log("[targetEl]",l)}if(e.actionType===C.DELETE){if(l===n.value)return;l.parentNode.removeChild(l)}}else if(e.blockType===p.HTML_ELEMENT){const t=rt(e,a);l.appendChild(t)}})(t,e,a,l),t.actionType===C.DELETE?j():t.actionType!==C.DEBUG&&t.actionType!==C.CURSOR&&q(),o()},G=()=>{clearInterval(m.value),A.value=0,v.value=0,g.value=0},J=w((()=>(A.value/300*100).toFixed(2))),X=h(null),Y=a(null);return{isSelectMode:F,handleBlockClick:W,handleMouseDown:e=>{if(!d.selecting&&0===e.button){if(d.currentBlock.actionType===C.DELETE)return G(),m.value=setInterval((()=>{if(A.value>300)return G(),void W(e);A.value+=50}),50),v.value=e.x,g.value=e.y,void e.preventDefault();X.value=null,d.currentBlock.actionType!==C.DRAG?W(e):e.target&&(X.value=e.target,X.value.draggable=!0)}},handleMouseUp:e=>{d.currentBlock.actionType===C.DELETE&&G(),X.value&&(X.value.draggable=!1,X.value.removeAttribute("draggable"))},handleDragOver:e=>{T.value.drawLine(e)},handleDragLeave:e=>{T.value.hideLine()},handleDrop:async e=>{var t;T.value.hideLine();const a=e.target||l.value,n=T.value.currentPosition,s=async e=>{u(),"top"===n?await $(a,"beforebegin",e):"bottom"===n?await $(a,"afterend",e):await $(a,"beforeend",e),o(),q()};if(X.value)return X.value.draggable=!1,X.value.removeAttribute("draggable"),await s(X.value.outerHTML),e.ctrlKey||null==(t=X.value.parentNode)||t.removeChild(X.value),void(X.value=null);const r=window.$draggingComponentExportData;if(r)return window.$draggingComponentExportData=null,await s(r.html),void _.emit(x.ON_ADD_STYLE,{code:r.style,isAppend:!0});const i=e.dataTransfer.getData("data-block");if(!i)return console.warn("drag item must be a BlockItem",e),void window.$message.warning("drag item not supported");const c=JSON.parse(i);if(c.blockType===p.HTML_ELEMENT){const e=rt(c,d);N(a,"top"===n?"before":"bottom"===n?"after":"appendChild",e)}else console.warn("block is unable to insert",c)},waitingProgress:J,cursorX:v,cursorY:g,ctxMenuRef:B,ctxMenuOptions:z,selectionActionStyle:M,selectionElRef:P,isShowSelectionAction:R,selectionPopupOptions:O,isShowElementEdit:f,editingNode:I,isEditingRoot:S,updateEditingElement:({el:e,data:t})=>{if(!e)return;u(),((e,t)=>{if(!t.customProps)return void console.error("[updateHtmlElement] data.customProps is not exist!");if(e.outerHTML!==t.outerHTML?e.outerHTML=t.outerHTML:e.innerHTML!==t.innerHTML&&(e.innerHTML=t.innerHTML),!e.outerHTML)return void console.warn("[updateHtmlElement] data.outerHTML is empty!");const a=mt[null==e?void 0:e.tagName.toLowerCase()]||vt;a&&a.updateElement(e,t)})(e,t);const a=Y.value;"function"==typeof a&&a(),o()}}};class yt{constructor(e=10){t(this,"undoStack",[]),t(this,"redoStack",[]),t(this,"maxStackSize",100),this.maxStackSize=e}get lastUndo(){return this.undoStack[this.undoStack.length-1]||null}get lastRedo(){return this.redoStack[this.redoStack.length-1]||null}recordUndo(e){this.lastRedo!==e&&(this.undoStack.push(e),this.undoStack.length>this.maxStackSize&&this.undoStack.shift(),this.redoStack=[])}undo(e){return this.undoStack.length>0?(this.redoStack.push(e),this.undoStack.pop()):null}redo(e){return this.redoStack.length>0?(this.undoStack.push(e),this.redoStack.pop()):null}clear(){this.undoStack=[],this.redoStack=[]}getCount(){return this.undoStack.length+this.redoStack.length}}const ft=e=>{const{t:t}=c(),{mainPlaygroundRef:l,emit:o}=e;y();const u=r(),d=a(!1),{loadCurCompHtml:A,saveCurCompHtml:p,saveCurCompStyle:m,loadCurCompStyle:g}=Ke(),h=a(new yt(10));he((()=>h.value.getCount()>0));const{play:f}=(()=>{const e=r();return ke(De,{volume:1,soundEnabled:e.enableSoundFx})})(),{play:w}=Fe();n((()=>{H(),_.on(x.SYNC_STORAGE_DATA,E),_.on(x.IMPORT_SUCCESS,H)})),b((()=>{_.off(x.SYNC_STORAGE_DATA,E),_.off(x.IMPORT_SUCCESS,H)}));const C=e=>{const a=e?e.outerHTML:l.value.innerHTML;me(et(a)),window.$message.success(t("msgs.copy_success")),E(),f()},T=a(""),E=async e=>{var t;const a=l.value.innerHTML;await p(a),null==(t=R.value)||t.postMessage(null),e&&e()},k=a(!1),{channelRef:R}=ot("mainPlaygroundUpdate",(e=>{k.value=!0,console.log("[mainPlaygroundUpdate]"),u.$hydrate({runHooks:!0}),H(),S((()=>{k.value=!1}))}));s((()=>u.curCompInStore),(()=>{var e;k.value?console.warn("isSelfUpdating"):(H(),null==(e=R.value)||e.postMessage(null))}));const P=(e="")=>{l.value&&(l.value.innerHTML=e)},H=async()=>{const e=await A();P(e),h.value.clear(),w()},U=i(L.VARIABLES_STYLE,""),D=async({insertVariableCode:e=!0}={})=>{var t;await M();const a=await A()||"";let n=await g();e&&(n=U.value+n);return{name:(null==(t=u.curCompInStore)?void 0:t.title)||"",html:et(a),style:tt(n),timestamp:Date.now()}},O=e=>{N(),P(e),E(),w()},$=[{label:`📤 ${t("actions.export")}`,children:[{label:`💚 ${t("actions.export")} Vue 2 SFC`,props:{onClick:async()=>{await nt(await D({insertVariableCode:!1}))}}},{label:`💚 ${t("actions.export")} Vue 3 SFC`,props:{onClick:async()=>{await nt(await D({insertVariableCode:!1}),3)}}},{label:`📑 ${t("actions.export")} HTML`,props:{onClick:async()=>{at(await D())}}},{label:`📧 ${t("actions.export")} Email HTML`,props:{onClick:async()=>{at(await D(),{isInline:!0})}}},{label:`📧 ${t("actions.export")} Email HTML (With Style Tag)`,props:{onClick:async()=>{at(await D(),{isInline:!0,inlineWithStyleTag:!0})}}}]},{split:!0},{label:`📄 ${t("actions.paste")} HTML...`,props:{onClick:async()=>{d.value=!0}}},{label:`📄 ${t("actions.copy")} HTML`,props:{onClick:async()=>{C()}}},{label:"📄 "+t("actions.copy_compiled_css"),props:{onClick:async()=>{const e=await g(),t=tt(await v(e));window.$qlUtils.copy(t)}}},{split:!0},{label:"❌ "+t("actions.clear_all_html"),props:{onClick:async()=>{window.$dialog.confirm(t("msgs.confirm_clear_curren"),t("actions.confirm"),{type:"warning"}).then((()=>{O(""),_.emit(x.IMPORT_SUCCESS,""),window.$message.success(t("actions.done")+"!")})).catch()}}}];be((async()=>{at(await D())}));const N=()=>{const e=l.value.innerHTML;h.value.recordUndo(e)},{play:I}=(()=>{const e=r();return ke($e,{volume:1,soundEnabled:e.enableSoundFx})})(),{play:B}=(()=>{const e=r();return ke(Ne,{volume:1,soundEnabled:e.enableSoundFx})})();return{htmlMenuOptions:$,isShowImportDialog:d,setPlaygroundHtml:P,pasteHtmlText:T,handleImportHtml:O,saveData:E,copyHtml:C,undoRedo:h,recordUndo:N,handleUndo:()=>{if(!h.value.undoStack.length)return;I();const e=l.value.innerHTML,t=h.value.undo(e);P(t),E()},handleRedo:()=>{if(!h.value.redoStack.length)return;B();const e=l.value.innerHTML,t=h.value.redo(e);P(t),E()}}},wt=R({name:"ElementEditDialog",components:{AutoFormElPlus:ge,ViewPortWindow:Te},props:{editingNode:{type:Object,default:null},visible:{type:Boolean,default:!1},isRoot:{type:Boolean,default:!1}},emits:["onSave","update:visible"],setup(e,{emit:t}){const{isRoot:n,editingNode:l}=P(e),o=Ce(e,t,"visible"),r=a(!0),i=a(),c=a(gt(null)),u=a({}),d=a([]);s(o,(e=>{e?A():(c.value=gt(null),d.value=[])})),s(l,(e=>{A()}));const A=()=>{var e;c.value=gt(l.value),d.value=(e=l.value)?(mt[null==e?void 0:e.tagName.toLowerCase()]||vt).customFormItems.map(At):[],n.value&&(r.value=!0)},p=w((()=>n.value?[{type:ve.MONACO_EDITOR,key:"innerHTML",label:"innerHTML"}]:r.value?[...d.value,{label:"innerHTML",key:"innerHTML",type:ve.MONACO_EDITOR}]:[{label:"outerHTML",key:"outerHTML",type:ve.MONACO_EDITOR}]));return{mVisible:o,dataForm:c,autoFormRef:i,formRules:u,formItems:p,handleResize:()=>{window.dispatchEvent(new Event("resize"))},handleSubmit:()=>{t("onSave",{el:l.value,data:c.value}),o.value=!1},handleCancel:()=>{o.value=!1},isEditInnerHTML:r}}}),St={class:"action-row vp-bg"},Ct={class:"flex-row-center-gap"},Tt={type:"submit",class:"vp-button primary"};const Et=H(wt,[["render",function(e,t,a,n,l,o){const s=z,r=U("AutoFormElPlus"),i=U("ViewPortWindow");return D(),O(i,{visible:e.mVisible,"onUpdate:visible":t[3]||(t[3]=t=>e.mVisible=t),"allow-maximum":"",wid:"element_editor",onResize:e.handleResize,"init-win-options":{width:"400px",height:"500px"}},{titleBarLeft:$((()=>[N(I(`${e.$t("actions.edit_element")} <${e.dataForm.tagName}>`),1)])),titleBarRightControls:$((()=>[B("button",{onClick:t[0]||(t[0]=(...t)=>e.autoFormRef.submitForm&&e.autoFormRef.submitForm(...t))},I(e.$t("actions.ok")),1)])),default:$((()=>[V(r,{ref:"autoFormRef","form-schema":{model:e.dataForm,rules:e.formRules,props:{labelPosition:"top"},formItems:e.formItems},onOnSubmit:e.handleSubmit,class:"element-edit-form font-code","hide-actions":""},{default:$((()=>[B("div",St,[V(s,{modelValue:e.isEditInnerHTML,"onUpdate:modelValue":t[1]||(t[1]=t=>e.isEditInnerHTML=t),title:`${e.$t("actions.toggle")} innerHTML/outerHTML`,disabled:e.isRoot,"active-text":"innerHTML","inactive-text":"outerHTML"},null,8,["modelValue","title","disabled"]),B("div",Ct,[B("button",{type:"button",class:"vp-button",onClick:t[2]||(t[2]=(...t)=>e.handleCancel&&e.handleCancel(...t))},I(e.$t("actions.cancel")),1),B("button",Tt,I(e.$t("actions.ok")),1)])])])),_:1},8,["form-schema","onOnSubmit"])])),_:1},8,["visible","onResize"])}],["__scopeId","data-v-e4885ac7"]]),kt={key:0,class:"mc-indicator-info font-code"},_t=H(R({__name:"IndicatorInfo",props:{parentClass:{default:T}},setup(e){const t=e,{parentClass:l}=P(t),o=a(null);n((()=>{l.value&&(o.value=document.querySelector(l.value))}));const{x:s,y:r}=F({type:"client"}),{element:i}=q({x:s,y:r}),c=f(j(i)),u=w((()=>!(o.value&&!o.value.contains(i.value)||o.value===i.value))),d=w((()=>i.value&&u.value?{display:"block",width:`${c.width}px`,height:`${c.height}px`,left:`${c.left}px`,top:`${c.top}px`,transition:"all 0.05s linear"}:{display:"none"})),A=w((()=>{if(i.value&&u.value){let e=`${i.value.localName}`,t=i.value.className||"";return"string"!=typeof t&&(console.warn("className",t),t=""),t=t.trim().split(" ").join("."),t&&(e+=`.${t}`),e}return""}));return(e,t)=>(D(),W(X,null,[A.value?(D(),W("div",kt,I(A.value),1)):G("",!0),B("div",{style:J(d.value),class:"mc-indicator-box"},null,4)],64))}}),[["__scopeId","data-v-03bdb481"]]),xt=["onClick"],Lt={class:"dialog-footer"},Mt=["title"],Rt=B("i",{class:"fa fa-code","aria-hidden":"true"},null,-1),Pt={class:"vp-button"},Ht=B("i",{class:"fa fa-cog","aria-hidden":"true"},null,-1),Ut={class:"flex-row-center-gap"},Dt=B("i",{class:"fa fa-question-circle-o","aria-hidden":"true"},null,-1),Ot={style:{"font-size":"14px"}},$t={class:"flex-row-center-gap"},Nt={class:"vp-button-group"},It=["disabled"],Bt=[B("i",{class:"fa fa-undo","aria-hidden":"true"},null,-1)],Vt=["disabled"],zt=[B("i",{class:"fa fa-repeat","aria-hidden":"true"},null,-1)],Ft={key:1,style:{"border-right":"1px solid",opacity:"0.3"}},qt=["contenteditable"],jt=B("div",{class:"line-helper-x"},null,-1),Wt=R({name:"MainPlayground",emits:[],setup(e,{emit:t}){const n=t,l=le(),i=oe(),d=a(),A=y(),m=r(),v=w((()=>"PlaygroundPage"===i.name)),{htmlMenuOptions:g,isShowImportDialog:h,setPlaygroundHtml:b,pasteHtmlText:E,handleImportHtml:k,saveData:_,copyHtml:x,undoRedo:L,recordUndo:M,handleUndo:R,handleRedo:P}=ft({mainPlaygroundRef:d,emit:n}),{indicatorOptions:H,mainCanvasClass:z,toggleList:F,backgroundStyle:q}=(()=>{const{t:e}=c(),t=y();qe();const n=a(!1),{channelRef:l}=ot("indicatorUpdate",(e=>{n.value=!0,Object.assign(o,e.data),S((()=>{n.value=!1}))})),o=f(JSON.parse(localStorage.getItem(u.INDICATOR_OPTIONS)||"null")||{enableDevHelpClass:!0,enableExpand:!0,enableSelection:!1,fullWidth:!1,bgDark:!1,bgTransparentPercent:100,centeredElementsY:!1,centeredElementsX:!1,showStyleEditor:!1,contentEditable:!1,enableRightClick:!0});s(o,(()=>{var e;if(n.value)return void console.warn("isSelfUpdating");const t={...o};localStorage.setItem(u.INDICATOR_OPTIONS,JSON.stringify(t)),null==(e=l.value)||e.postMessage(t)}),{deep:!0});const r=e=>{e.preventDefault(),window.$message.warning("Prevent link click")};s((()=>t.currentBlock),(e=>{console.log(e.actionType);const t=`${T} a`;e.actionType!==C.CURSOR?document.querySelectorAll(t).forEach((e=>{e.addEventListener("click",r)})):setTimeout((()=>{document.querySelectorAll(t).forEach((e=>{e.removeEventListener("click",r)}))}),500)}));const i=w((()=>{const e=t.currentBlock;return{"page-craft-mc--dev":o.enableDevHelpClass,"page-craft-mc--cursor-insert":e.blockType!==p.ACTIONS,"page-craft-mc--cursor-pickaxe":e.actionType===C.DELETE,"page-craft-mc--cursor-arrow":!1,"page-craft-mc--cursor-sword":e.actionType===C.DEBUG,"page-craft-mc--cursor-drag":e.actionType===C.DRAG,"page-craft-mc--cursor-oaksign":e.actionType===C.PASTE_REPLACE,"page-craft-mc--expand":o.enableExpand,"page-craft-mc--full-width":o.fullWidth,"page-craft-mc--centered-y":o.centeredElementsY,"page-craft-mc--centered-x":o.centeredElementsX,_dark:o.bgDark}})),d=[{flag:"enableDevHelpClass",title:e("common.outline"),desc:e("msgs.add_1px_outline_per")+" (alt+z)"},{flag:"enableExpand",title:e("common.padding"),desc:e("msgs.pad_each_element_wit")+" (alt+x)"},{flag:"contentEditable",title:e("msgs.content_editable"),desc:e("msgs.enable_html_contente")},{flag:"enableSelection",title:e("msgs.enable_hover"),desc:e("msgs.add_cursor_hover_loc")},{flag:"enableRightClick",title:e("msgs.enable_right_click"),desc:""},{flag:"centeredElementsY",title:e("msgs.centered")+" Y",desc:""},{flag:"centeredElementsX",title:e("msgs.centered")+" X",desc:""},{flag:"fullWidth",title:e("msgs.full_width"),desc:""},{flag:"bgDark",title:e("msgs.dark_bg"),desc:""}],A=w((()=>o.bgDark?{backgroundColor:`rgba(30, 30, 30,${o.bgTransparentPercent/100})`}:{backgroundColor:`rgba(255,255,255,${o.bgTransparentPercent/100})`}));return{indicatorOptions:o,mainCanvasClass:i,toggleList:d,backgroundStyle:A}})(),{isSelectMode:j,handleMouseDown:Ae,handleMouseUp:pe,handleDragOver:me,handleDragLeave:ve,handleDrop:ge,waitingProgress:he,cursorX:be,cursorY:ye,ctxMenuRef:fe,ctxMenuOptions:we,selectionActionStyle:Ce,selectionElRef:Te,isShowSelectionAction:ke,selectionPopupOptions:_e,isShowElementEdit:xe,editingNode:Le,isEditingRoot:Me,updateEditingElement:Re}=bt({mainPlaygroundRef:d,saveData:_,indicatorOptions:H,copyHtml:x,recordUndo:M}),Pe=e=>{const t=e.key.toLowerCase();e.ctrlKey&&e.shiftKey&&"z"===t?P():e.ctrlKey&&"z"===t&&R()};Y(document,"keydown",(e=>{const t=e.key.toLowerCase();e.altKey&&"x"===t?H.enableExpand=!H.enableExpand:e.altKey&&"z"===t&&(H.enableDevHelpClass=!H.enableDevHelpClass)}));const He=()=>{const e=l.resolve({name:"PlaygroundPage"}).href;console.log(e),window.__TAURI__?new se("theUniqueLabel",{url:e}):window.open(e)};return(e,t)=>{const a=re,n=ie,l=ce,s=ue,r=de,i=U("portal");return D(),W("div",{tabindex:"0",onKeyup:Pe,class:"page-craft-mc-wrap"},[o(j)?(D(),O(_t,{key:0})):G("",!0),V(Z,{name:"mc-fade"},{default:$((()=>[o(ke)?(D(),W("div",{key:0,ref_key:"selectionElRef",ref:Te,class:"selection-action",style:J(o(Ce)),onClick:t[0]||(t[0]=e=>ke.value=!1)},[(D(!0),W(X,null,K(o(_e),(e=>(D(),W("button",{key:e.label,onClick:e.onClick,class:"btn-no-style font-code"},I(e.label),9,xt)))),128))],4)):G("",!0)])),_:1}),(D(),O(Q,{to:"body"},[V(Ee,{ref_key:"ctxMenuRef",ref:fe,options:o(we)},null,8,["options"])])),V(n,{draggable:"",modelValue:o(h),"onUpdate:modelValue":t[4]||(t[4]=e=>ee(h)?h.value=e:null),title:`${e.$t("actions.paste")} HTML`,width:"600",top:"10vh","append-to":".page-craft-root"},{footer:$((()=>[B("div",Lt,[V(a,{onClick:t[2]||(t[2]=e=>h.value=!1)},{default:$((()=>[N(I(e.$t("actions.cancel")),1)])),_:1}),V(a,{type:"primary",onClick:t[3]||(t[3]=e=>o(k)(o(E)))},{default:$((()=>[N(I(e.$t("actions.import")),1)])),_:1})])])),default:$((()=>[o(h)?(D(),O(Se,{key:0,modelValue:o(E),"onUpdate:modelValue":t[1]||(t[1]=e=>ee(E)?E.value=e:null),style:{height:"500px"}},null,8,["modelValue"])):G("",!0)])),_:1},8,["modelValue","title"]),(D(),O(Q,{to:".page-craft-root"},[V(Et,{visible:o(xe),"onUpdate:visible":t[5]||(t[5]=e=>ee(xe)?xe.value=e:null),"editing-node":o(Le),"is-root":o(Me),onOnSave:o(Re)},null,8,["visible","editing-node","is-root","onOnSave"])])),V(i,{to:"indicatorBarTeleportDest"},{default:$((()=>[o(v)?G("",!0):(D(),W(X,{key:0},[V(te,{options:o(g)},{default:$((()=>{var e,t,a,n;return[B("button",{class:"vp-button",title:`${null==(e=o(m).curCompInStore)?void 0:e.basePath}\n${null==(t=o(m).curCompInStore)?void 0:t.title}`},[Rt,N(" "+I((null==(n=null==(a=o(m).curCompInStore)?void 0:a.title)?void 0:n.slice(0,10))||"Default"),1)],8,Mt)]})),_:1},8,["options"]),V(s,{width:"180",trigger:"hover"},{reference:$((()=>[B("button",Pt,[Ht,N(" "+I(e.$t("common.options")),1)])])),default:$((()=>[(D(!0),W(X,null,K(o(F),(e=>(D(),W("div",{key:e.flag,class:"toggle-list"},[B("div",Ut,[V(l,{modelValue:o(H)[e.flag],"onUpdate:modelValue":t=>o(H)[e.flag]=t,label:e.title,size:"small"},null,8,["modelValue","onUpdate:modelValue","label"]),e.desc?(D(),O(s,{key:0,trigger:"hover"},{reference:$((()=>[Dt])),default:$((()=>[B("span",Ot,I(e.desc),1)])),_:2},1024)):G("",!0)])])))),128)),V(r,{modelValue:o(H).bgTransparentPercent,"onUpdate:modelValue":t[6]||(t[6]=e=>o(H).bgTransparentPercent=e),step:1,size:"small"},null,8,["modelValue"]),B("div",$t,[B("button",{class:"vp-button primary",title:"(alt+w)",onClick:t[7]||(t[7]=e=>o(A).isShowSettings=!o(A).isShowSettings)},I(e.$t("common.settings")),1),B("button",{class:"vp-button",onClick:He},"Playground")])])),_:1})],64)),B("div",Nt,[B("button",{class:"vp-button",title:"Undo (ctrl+z)",disabled:!o(L).undoStack.length,onClick:t[8]||(t[8]=(...e)=>o(R)&&o(R)(...e))},Bt,8,It),B("button",{class:"vp-button",title:"Redo (ctrl+shift+z)",disabled:!o(L).redoStack.length,onClick:t[9]||(t[9]=(...e)=>o(P)&&o(P)(...e))},zt,8,Vt)]),o(v)?G("",!0):(D(),W("span",Ft))])),_:1}),B("div",{ref_key:"mainPlaygroundRef",ref:d,class:ae([o(z),"page-craft-mc"]),contenteditable:o(H).contentEditable,onMousedown:t[10]||(t[10]=(...e)=>o(Ae)&&o(Ae)(...e)),onMouseleave:t[11]||(t[11]=(...e)=>o(pe)&&o(pe)(...e)),onMouseup:t[12]||(t[12]=(...e)=>o(pe)&&o(pe)(...e)),onDragover:t[13]||(t[13]=ne(((...e)=>o(me)&&o(me)(...e)),["prevent","stop"])),onDragleave:t[14]||(t[14]=ne(((...e)=>o(ve)&&o(ve)(...e)),["prevent","stop"])),onDrop:t[15]||(t[15]=ne(((...e)=>o(ge)&&o(ge)(...e)),["prevent","stop"])),style:J(o(q))},null,46,qt),jt,o(be)?(D(),W("div",{key:1,class:"mc-digging-wrap",style:J({top:o(ye)+"px",left:o(be)+"px"})},[B("div",{class:"mc-digging-inner",style:J({width:`${o(he)}%`,height:`${o(he)}%`})},null,4)],4)):G("",!0)],32)}}});export{Wt as _,Ze as a,Ke as b,Je as c,qe as d,Ve as e,lt as f,Ie as g,ze as h,Fe as i,Be as j,ot as k,tt as l,je as r,Ye as u};
