const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./howler-BstJNG8i.js","./index-Dcsrw7an.js","./index-D1IODQGS.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n);import{r as a,I as n,ah as l,x as o,K as s,a as r,q as i,D as c,ac as u,H as d,ai as p,a1 as A,aj as m,a6 as v,ak as g,N as y,J as b,u as h,al as f,c as w,O as S,am as C,an as T,ao as _,y as E,G as k,ap as x,aq as L,d as M,t as R,_ as P,i as H,o as U,p as D,M as O,Q as $,f as N,e as I,P as B,ar as V,as as z,at as F,au as j,b as q,g as W,n as G,F as J,ae as Y,m as X,T as K,Y as Z,X as Q,V as ee,h as te,w as ae,ab as ne,av as le,aw as oe,R as se,S as re,ax as ie,ay as ce,az as ue}from"./index-Dcsrw7an.js";/* empty css                  *//* empty css                        *//* empty css                  *//* empty css                   *//* empty css                    */import{g as de,a as pe,b as Ae}from"./index-BSUZN_B5.js";import{A as me}from"./enum-CdO7LyZZ.js";import{u as ve,a as ge}from"./use-beforeunload-HobKYt9I.js";import{n as ye,f as be}from"./humanfs-api-Dvdi9RO8.js";import{p as he}from"./index-vcidOvW8.js";import{V as fe}from"./index-CQE1pfcY.js";import{u as we}from"./use-model-wrapper-D-qKYU8I.js";import{_ as Se}from"./index.vue_vue_type_style_index_0_lang-Df9XRKpL.js";import{_ as Ce}from"./index.vue_vue_type_style_index_0_lang-BKM7gDo_.js";import{_ as Te}from"./QuickContextMenu.vue_vue_type_script_setup_true_lang-D5SzNeNJ.js";function _e(e,{volume:t=1,playbackRate:r=1,soundEnabled:i=!0,interrupt:c=!1,autoplay:u=!1,onload:d,...p}={}){const A=a(null),m=a(!1),v=a(null),g=a(null);function y(){var e;"function"==typeof d&&d.call(this),v.value=1e3*(v.value||(null==(e=g.value)?void 0:e.duration())||0),!0===u&&(m.value=!0)}n((async()=>{const a=await l((()=>import("./howler-BstJNG8i.js").then((e=>e.h))),__vite__mapDeps([0,1,2]),import.meta.url);A.value=a.default.Howl,g.value=new A.value({src:o(e),volume:o(t),rate:o(r),onload:y,...p})})),s((()=>[e]),(()=>{A.value&&A.value&&g&&g.value&&(g.value=new A.value({src:o(e),volume:o(t),rate:o(r),onload:y,...p}))})),s((()=>[o(t),o(r)]),(()=>{g.value&&(g.value.volume(o(t)),g.value.rate(o(r)))}));return{play:e=>{void 0===e&&(e={}),g.value&&(i||e.forceSoundEnabled)&&(c&&g.value.stop(),e.playbackRate&&g.value.rate(e.playbackRate),g.value.play(e.id),g.value.once("end",(()=>{g.value&&g.value&&!g.value.playing()&&(m.value=!1)})),m.value=!0)},sound:g,isPlaying:m,duration:v,pause:e=>{g.value&&(g.value.pause("number"==typeof e?e:void 0),m.value=!1)},stop:e=>{g.value&&(g.value.stop("number"==typeof e?e:void 0),m.value=!1)}}}const Ee=""+new URL("open-UeZQ83h4.ogg",import.meta.url).href,ke=""+new URL("close1-BakA0P2g.ogg",import.meta.url).href,xe=""+new URL("select_pattern_mix-DXw_mqqO.ogg",import.meta.url).href,Le=""+new URL("wood_mix-zCSPzndQ.ogg",import.meta.url).href,Me=""+new URL("grass_mix-BApjfdS6.ogg",import.meta.url).href,Re=""+new URL("loading_middle2-D1wQur0C.ogg",import.meta.url).href,Pe=""+new URL("shoot2-Bgro1KOW.ogg",import.meta.url).href,He=""+new URL("brushing_generic2-B670JkA0.ogg",import.meta.url).href,Ue=""+new URL("bell-XX7Mxd8B.ogg",import.meta.url).href,De=""+new URL("fill1-B_y51Az1.ogg",import.meta.url).href,Oe=""+new URL("guitar-BG0qG-kv.ogg",import.meta.url).href,$e=""+new URL("bass-FEG0pYKb.ogg",import.meta.url).href,Ne=e=>{const t=r(),{play:a}=_e(Ee,{volume:1,soundEnabled:t.enableSoundFx}),{play:n}=_e(ke,{volume:1,soundEnabled:t.enableSoundFx});s(e,(e=>{e?a():n()}))},Ie=e=>{const t=r(),{play:a}=_e(Re,{volume:1,soundEnabled:t.enableSoundFx}),{play:n}=_e(Pe,{volume:1,soundEnabled:t.enableSoundFx});s(e,(e=>{e?a():n()}))},Be=()=>{const e=r(),{play:t,stop:a}=_e(xe,{volume:1,soundEnabled:e.enableSoundFx,sprite:{id_0:[0,500],id_1:[600,539],id_2:[1196,539],id_3:[1878,576],id_4:[2472,696]}});return{play:()=>{t({id:`id_${Math.floor(5*Math.random())}`})},stop:a}},Ve=()=>{const e=r();return _e(He,{volume:1,soundEnabled:e.enableSoundFx})},ze=()=>{const e=r();return _e(De,{volume:1,soundEnabled:e.enableSoundFx})},Fe=()=>_e("data:audio/mpeg;base64,SUQzAwAAAAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+7BgAAAG0WjNZT8gCAAACXCgAAEaeXdl+P2AAAAAJcMAAACyFElJrUoQua0XwehGG+h6Hqur9jT6jV8dsQxYdMdQeFI2GIUZxgQYFyzquOpwHMMbRXTDgepjGJZunp6fPUocuH78ofx/JZjG3IdyWXZXDcbtzD/w/3k21td7T3gQlphuvclmMrn4g5cP5SiWY08vyjdvVJY3T26j/v/L8pRGIcnJtyH8sbz1SWNxiWczz/DDeGGH509Pbwjcvt//591nnn+sMOfhhh/7z7rPPP9YYfnSWN59qSiWY0lJSYfnnnnhzeeffwwz/WH50+eqenqcUOcH/8McRn+cyBNBHBCRCKGZCKLZTSSiVbZLDvG8ZZJyCtIxyWo0sI+gWAQQvg3j/KQCBRWDVSsVdNTUysfOkYgcmGhGIMHAQCAUUMEGxpVp37bg0xypLRacyta1QTMPzMjuZb3Vy/mtRhg70K4a8XclOOsssf/H/9WBKgtovRl9qWQy7UPWrsts73///3909mV27tP3v45dlNbKZ3397/9dlcvwl+WHcOc7uls1cd6/W8df+u///r9a5nSWM4pE5/lTCpU3q1+sqbuNarGbwl9KJQ/eQ7iYWQ39kqdWtASxAAAGlAAACr6qQCckkkZdcvW6zhQLMuLKJp+xoqGy/Wqq2us6UAzbJpcwVUEvRtBLEsi+jXn3CxU1VhYZ9rTlP1dwiNFqamce2saX+XZBhMztNn2W2ZTKsn2v2sY5FZb96Zd2TVq+Ebzwp61NTXLVXKU45XJVD3KbKxarbyypddl1NLsNW7/eXs7s7hyxdjMetUErprWeN3DX/ruuZf/7sGBLAAZOaNRXYwAEAAAJcOAAARp5oz+n4Y2QAAAlwAAABJ/jc3VrZZ2O93Kb1bLfO481/7x/dnG5V1Q1KtSu4LOYdi0SeZ5d1m4wmeitJuT3bGuarVpIkSSAE3JJIH8nTCV53qEoxQMieO40R9G8r4JiCRUCK+YmpqwF7ZCqxca7jBMEHOkUjFmKXqPZR5QJ82eSZ+ZLB3YdZc/VaBZVnDUWlsCDrhyPsO0Oz3VpWR8Qh0Nko5Hw8kW5ODofwOpVBahPgWPYj4qtLYx6jaBq6ZHNDJf2LzFKeH0ZNmA5gquSzQnWQ3lGnxyDUsD4fTey+iejq6NmFEZcrOn1tJbWurjno3aMtXjd6ON2cs0hbAZLlyvFqU5JpeMkzYkk3KgWB8dSAOzC8bhskN9vrWQbtbbbNO0w5Y0ugMCBWYY7HbqEBa50RUhrE19QEEJLvM3BAy0KmJd1SIVMXSbElckaYBgbINcRLQGl9lqsbNTwhLRkwpfYnoagtdryyqHqbK7DTvU8MzuoanpmGr/NzPw4olst203crapyKP7bNGqBsJblVTm1rmz/SX3tVPM1yMVPYGgkSJU8ybW/zPp6r+nzzXmWqqeiWz/2Oyt9U8zTzMtVU3bSKMtwURoob/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////uwYKMAD/lpSmsYM3JGgAlwAAABAAABLgAAACAAACXAAAAE////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+P//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+7BApwAP/ABLgAAACE6ACXAAAAEAAAEuAAAAIAAAJcAAAAT/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",{volume:1,soundEnabled:r().enableSoundFx}),je=/\.comp$/i;let qe=1;const We=(e,t)=>localStorage.getItem(e+"__"+t)||"",Ge=async(e,t,a)=>{await be.createFile({path:ye(e+"/"+t),file:a,isOverride:!0})},Je=async(e,t,a)=>await be.getFile({path:ye(e+"/"+t),mode:a}),Ye=e=>{const{files:t,basePath:a,isLoading:n,emit:l}=e;r();const{t:o}=c(),s=async e=>{const t=`${e.name}.comp`,n=ye(a.value+"/"+t);await be.createDir({path:n});const l={id:e.id||de(),timeCreated:e.timestamp};await Ge(n,"index.json",JSON.stringify(l)),await Ge(n,"index.html",e.html),await Ge(n,"index.scss",e.style),e.cover&&await Ge(n,"cover.base64",e.cover)},i=async e=>{if(!e.meta)throw new Error("item must has meta");const t=ye(a.value+"/"+e.name),n=await Je(t,"index.html"),l=await Je(t,"index.scss");return{id:e.meta.id,name:e.name.replace(je,""),timestamp:e.meta.timeCreated,html:n,style:l,cover:e.meta.cover}};return{handleCreateComponent:async()=>{try{const e=await((e="",a="",n="")=>window.$mcUtils.showInputPrompt({title:e,value:a,placeholder:n,validateFn:e=>{if(t.value.find((t=>t.name===e)))return o("msgs.name_already_exists")}}))(o("actions.add_component"),`Component${qe}`,o("msgs.please_enter_the_nam")),a=`${e}.comp`;if((e=>{if(console.log(e,t.value),t.value.some((t=>t.name===e)))return window.$message.error("Filename already exists, please rename it!"),!0})(a))return;n.value=!0;const r=he(e||"my-component"),i=de();await s({id:i,name:e,timestamp:Date.now(),html:`<div class="${r}"></div>`,style:`.${r} {\n}\n`}),qe++,l("refresh"),setTimeout((()=>{var e;null==(e=document.querySelector(`.mc-comp-item[data-name="${a}"]`))||e.click()}),100)}finally{n.value=!1}},importComponentAllJson:async e=>{for(let t=0;t<e.length;t++)await s(e[t])},exportComponentAllJson:async e=>{const t=await d("","PageCraftAllComponents");if(!t)return;const a=[];for(let n=0;n<e.length;n++)a.push(await i(e[n]));window.$mcUtils.handleExportFile(t,JSON.stringify(a,null,2),".json")},importComponentJson:s,exportComponentJson:i}},Xe=()=>{const e=r(),t=async t=>{if(!e.curCompInStore)return We(u.DEFAULT_CANVAS,t);const{path:a}=e.curCompInStore;return await Je(a,t)},a=async(t,a)=>{if(!e.curCompInStore)return n=u.DEFAULT_CANVAS,l=t,o=a,localStorage.setItem(n+"__"+l,o);var n,l,o;const{path:s}=e.curCompInStore;return await be.writeFile({path:ye(s+"/"+t),file:a})};return{openComponent:(t,a)=>{e.curCompInStore=((e,t)=>{if(!e.meta)throw new Error("item has no meta");return{id:e.meta.id,title:e.name.replace(je,""),path:t,basePath:e.basePath}})(t,a)},loadCurCompHtml:async()=>await t("index.html"),saveCurCompHtml:async e=>await a("index.html",e),loadCurCompStyle:async()=>await t("index.scss"),saveCurCompStyle:async e=>await a("index.scss",e)}},Ke=e=>{const t=i("component_is_migrated_v2",!1),l=a(!1),o=async()=>{if(t.value||l.value)return;l.value=!0;const a=(JSON.parse(localStorage.getItem(u.COMP_INDEX_LIST)||"null")||[]).map((({name:e})=>((e,t={})=>new p({blockType:A.COMPONENT,title:e,data:new m(t)}))(e,JSON.parse(We(u.COMP_META,e)||"{}"))));for(let e=0;e<a.length;e++){const t=a[e],{title:n,data:{timestamp:l,stared:o,cover:s}}=t,r=ye((o?"/@Migrated/Stared":"/@Migrated")+"/"+`${n}.comp`),i={id:de(),timeCreated:l};await Ge(r,"index.json",JSON.stringify(i)),await Ge(r,"index.html",We(u.COMP_HTML,n)),await Ge(r,"index.scss",We(u.COMP_STYLE,n)),s&&await Ge(r,"cover.base64",s)}t.value=!0,e("refresh")};n((async()=>{await o()}))},Ze={indent_size:"2",indent_char:" ",max_preserve_newlines:"1",preserve_newlines:!0,keep_array_indentation:!1,break_chained_methods:!1,indent_scripts:"normal",brace_style:"collapse",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!1,end_with_newline:!1,wrap_line_length:"110",indent_inner_html:!1,comma_first:!1,e4x:!1,indent_empty_lines:!1},Qe=e=>window.html_beautify(e,Ze),et=(e,t={})=>window.css_beautify(e,Ze),tt=async(e,t)=>{const{html:a,style:n}=e,{isInline:l=!1,inlineWithStyleTag:o=!1}=t||{};let s="";l&&(s+="-inline",o&&(s+="-with-style-tag"));const r=await d(e.name?e.name+s:""),i=n?et(await v(n)):"";let c;l?(c=window.$juice(`<style>${i}</style>\n${a}`),o&&(c=`<style>${i}</style>${c}`),c=Qe(c)):c=`<!doctype html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport"\n        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">\n  <meta http-equiv="X-UA-Compatible" content="ie=edge">\n  <title>${r}</title>\n  <style>\n    ${i}\n  </style>\n</head>\n<body>\n${a}\n</body>\n</html>\n`,g(r,c,".html")},at=async(e,t=2)=>{const{html:a,style:n}=e,l=await d(e.name),o=`\n<style lang="scss" scoped>\n${n}\n</style>\n`;let s="";s=3===t?`<script lang="ts">\nimport {defineComponent} from 'vue'\n\nexport default defineComponent({\n  name: '${l}',\n})\n<\/script>\n\n<template>\n${a}\n</template>\n\n${o}\n`:`<template>\n${a}\n</template>\n\n<script>\nexport default {\n  name: '${l}',\n}\n<\/script>\n\n${o}\n`,s.trim(),g(l,s,".vue")},nt=e=>new Promise(((t,a)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=e=>{a(e)},n.readAsDataURL(e)})),lt=".page-craft-mc",ot=(e="my_channel",t)=>{const a=y();return n((()=>{const n=new BroadcastChannel(e);t&&(n.onmessage=e=>{t(e)}),a.value=n})),b((()=>{a.value&&a.value.close()})),{channelRef:a}},st=["img","iframe","video","audio","source","track","embed","object","picture","script","link"],rt=(e,t)=>{const{innerText:a="",className:n=""}=t||{},l=a||"",o=e.data.tag,s=document.createElement(o);return st.includes(o)?(["audio","video"].includes(o)&&(s.controls=!0),s.src=l):"input"===o?s.setAttribute("placeholder",l):["br","hr"].includes(o)||(s.innerHTML=l),n&&(s.className=n),s},it=async e=>{const t=await navigator.clipboard.readText();return"src"in e?e.src=t:e.innerHTML=t,t},ct=(e,t=0)=>({label:e,key:e,type:me.INPUT,props:{clearable:!0,type:t>0?"textarea":void 0,rows:t}}),ut=e=>({label:e,key:e,type:me.SWITCH,props:{checkedValue:"true"}}),dt={src:{label:"src",key:"src",type:me.INPUT,props:{clearable:!0}},alt:ct("alt"),href:{label:"href",key:"href",type:me.INPUT,props:{clearable:!0}},target:{label:"target",key:"target",type:me.SELECT,options:pe(["_blank","_self","_parent","_top"]),props:{clearable:!0}},rel:{label:"rel",key:"rel",type:me.SELECT,options:pe(["nofollow noopener noreferrer","nofollow"]),props:{clearable:!0}},poster:{label:"poster",key:"poster",type:me.INPUT,props:{clearable:!0}},placeholder:ct("placeholder",1),name:ct("name"),inputType:{label:"type",key:"type",type:me.SELECT,options:pe(["text","email","number","password","tel","button","submit","checkbox","radio","color","date","datetime","time","datetime-local","month","week","file","image","range","reset","search","url","hidden"]),props:{filterable:!0,clearable:!0}},frameborder:{label:"frameborder",key:"frameborder",type:me.SELECT,options:pe(["0"]),props:{clearable:!0}},srcdoc:ct("srcdoc",2),required:ut("required"),disabled:ut("disabled"),readonly:ut("readonly"),title:ct("title",1),tabindex:{label:"tabindex",key:"tabindex",type:me.INPUT_NUMBER},id:ct("id"),className:ct("class"),dir:{label:"dir",key:"dir",type:me.SELECT,options:pe(["ltr","rtl","auto"]),props:{clearable:!0}},style:ct("style",1)},pt=e=>"cols"in e?(e.children=e.children.map(pt),e):Array.isArray(e)?e=e.map(pt):{...e,key:`customProps.${e.key}`},At=(e=[])=>{e=[dt.className,...e,[dt.title,dt.id,dt.dir],dt.style];const t=[],a=e=>{"cols"in e?e.children.forEach((e=>a(e))):Array.isArray(e)?e.forEach((e=>a(e))):t.push(e.key)};return e.forEach(a),{getCustomProps:e=>{const a={};return t.forEach((t=>{a[t]=e.getAttribute(t)})),a},updateElement(e,a){t.forEach((t=>{((e,t,a)=>{a?e.getAttribute(t)!==a&&e.setAttribute(t,a):e.removeAttribute(t)})(e,t,a.customProps[t])}))},customFormItems:e}},mt={a:At([dt.href,[dt.target,dt.rel]]),input:At([dt.placeholder,[dt.inputType,dt.name,dt.required,dt.disabled,dt.readonly]]),textarea:At([[dt.name,dt.required,dt.disabled,dt.readonly]]),button:At([[dt.disabled,dt.tabindex]]),video:At([dt.src,dt.poster]),img:At([dt.src,dt.alt]),iframe:At([dt.src,dt.frameborder,dt.srcdoc])},vt=At();st.forEach((e=>{mt[e]||(mt[e]=At([dt.src]))}));const gt=e=>{if(!e)return{tagName:"",innerHTML:"",outerHTML:"",customProps:null};const t=mt[e.tagName.toLowerCase()]||vt;return{tagName:e.tagName||"",innerHTML:e.innerHTML||"",outerHTML:e.outerHTML||"",customProps:t.getCustomProps(e)}};class yt{constructor(e){t(this,"currentPosition"),t(this,"currentTarget"),t(this,"preSelectTarget"),t(this,"targetElement"),t(this,"crossX"),this.currentPosition=null,this.currentTarget=null,this.preSelectTarget=null,this.targetElement=e;const a=document.querySelector(".line-helper-x");a||console.error("crossX is not exist!"),this.crossX=a}hideLine(){this.crossX.classList.remove("visible")}drawLine(e){const t=e.target;if(!t)return;const a=this.targetElement,n=this.crossX,l=function(e,t,a){const n=e.getBoundingClientRect(),l=Math.round((n.bottom-n.top)/3);return{top:a<n.top+l,middle:a>=n.top+l&&a<=n.top+2*l,bottom:a>n.top+2*l}}(t,e.clientX,e.clientY),o=t.getBoundingClientRect();if(l.top&&a!==t){if("top"===this.currentPosition&&this.currentTarget===t)return;this.currentPosition="top",this.currentTarget=t,n.style.top=o.top+"px",n.style.left=o.left+"px",n.style.width=o.width+"px",n.style.height="3px",n.classList.add("visible")}else if(l.bottom&&a!==t){if("bottom"===this.currentPosition&&this.currentTarget===t)return;this.currentPosition="bottom",this.currentTarget=t,n.style.top=o.bottom+"px",n.style.left=o.left+"px",n.style.width=o.width+"px",n.style.height="3px",n.classList.add("visible")}else this.currentPosition="middle",this.currentTarget=t,this.preSelectTarget=t,n.style.top=o.top+"px",n.style.left=o.left+"px",n.style.width=o.width+"px",n.style.height=o.height+"px",n.classList.add("visible")}}const bt=e=>{const{t:t}=c(),{mainPlaygroundRef:l,saveData:o,indicatorOptions:s,copyHtml:i,recordUndo:u}=e,d=h(),p=a(0),m=a(null),v=a(0),g=a(0),f=a(!1),S=a(!1);Ne((()=>f.value));const x=y();n((()=>{l.value.addEventListener("contextmenu",V),l.value.addEventListener("pointerdown",U),l.value.addEventListener("pointerup",D),x.value=new yt(l.value)})),b((()=>{l.value.removeEventListener("contextmenu",V),l.value.removeEventListener("pointerdown",U),l.value.removeEventListener("pointerup",D)}));const L=a(null),M=a(null),R=a(!1),P=a();T(P,(e=>{R.value&&setTimeout((()=>{R.value=!1}))}));const H=a(!1),U=e=>{2!==e.button&&(H.value=!0,window.getSelection().removeAllRanges())},D=e=>{if(!H.value)return;const t=window.getSelection();if(L.value=t,!t)return;if(!t.toString())return;const a=t.getRangeAt(0).getBoundingClientRect();M.value=_({x:a.left,y:a.top+a.height,width:a.width,height:a.height}),R.value=!0,H.value=!1},O=[...["b","i","u","del","code","mark","kbd","a","sup","sub","small","big","span","div","br"].map((e=>({label:e,onClick:()=>{u();const t=document.createElement(e);"br"===e?(e=>{try{if(window.getSelection){const t=window.getSelection();if(t){const a=t.getRangeAt(0);a.collapse(!1),a.insertNode(e)}}}catch(t){window.$message.error(t.message),console.error(t)}})(t):(e=>{try{if(window.getSelection){const t=window.getSelection();t&&t.rangeCount&&(t.getRangeAt(0).cloneRange().surroundContents(e),t.removeAllRanges())}}catch(t){window.$message.error(t.message),console.error(t)}})(t),o(),j()}})))],$=async(e,t="beforeend",a)=>{u(),a||(a=await navigator.clipboard.readText()),e.insertAdjacentHTML(t,a),o(),j()},N=(e,t="append",a)=>{u(),a||(a=rt(d.currentBlock,d)),e[t](a),o(),j()},I=a(null),B=a(),V=e=>{var t;const a=null==(t=L.value)?void 0:t.toString();!s.enableRightClick||a||e.ctrlKey||(e.preventDefault(),d.currentBlock.actionType===C.DEBUG&&console.log("[handleContextMenu]",e),I.value=e.target,B.value.showMenu(e))},z=w((()=>{const e=I.value;if(!e)return[];const a=e===l.value,n={label:"✏️ "+t("actions.edit_element"),props:{onClick:async()=>{f.value=!0,S.value=a}}},s=a?[n]:[n,{label:`📄 ${t("actions.copy")} HTML`,props:{onClick:async()=>{i(e)}}},{label:"✂️ "+t("actions.cut"),props:{onClick:async()=>{var t;Ae(e.outerHTML),u(),null==(t=e.parentNode)||t.removeChild(e),o(),q()}}},{label:"❌ "+t("actions.remove_element"),props:{onClick:async()=>{var t;u(),null==(t=e.parentNode)||t.removeChild(e),o(),q()}}}];return[d.currentBlock.blockType===A.HTML_ELEMENT&&{label:`➕ ${t("actions.insert")} ${d.currentBlock.title}`,children:a?void 0:["before","prepend","append","after"].map((a=>({label:`${t("actions.insert")} ${a}`,props:{onClick:async()=>{N(e,a)}}}))),props:{onClick:async()=>{N(e),contextMenuEtc.showRightMenu.value=!1}}},...s,{label:`📃 ${t("actions.paste")} outerHTML`,children:a?void 0:["beforebegin","afterbegin","beforeend","afterend"].map((a=>({label:`${t("actions.paste_at")} ${a}`,props:{onClick:async()=>{await $(e,a)}}}))),props:{onClick:async()=>{await $(e),contextMenuEtc.showRightMenu.value=!1}}},{label:"🎈 "+t("actions.paste_replace_value"),props:{onClick:async()=>{await(async e=>{u(),await it(e),o(),j()})(e),contextMenuEtc.showRightMenu.value=!1}}},{split:!0},{label:"💻 "+t("actions.print_to_console"),props:{onClick:async()=>{console.log(I.value)}}}].filter(Boolean)})),F=w((()=>s.enableSelection||d.currentBlock.actionType===C.DEBUG||d.currentBlock.actionType===C.PASTE_REPLACE)),{play:j}=(()=>{const e=r(),{play:t}=_e(Le,{volume:1,soundEnabled:e.enableSoundFx,sprite:{id_0:[0,300],id_1:[420,300],id_2:[900,300],id_3:[1420,300]}});return{play:()=>t({id:`id_${Math.floor(4*Math.random())}`})}})(),{play:q}=(()=>{const e=r(),{play:t}=_e(Me,{volume:1,soundEnabled:e.enableSoundFx,sprite:{id_0:[0,400],id_1:[400,500],id_2:[900,400],id_3:[1400,600]}});return{play:()=>t({id:`id_${Math.floor(4*Math.random())}`})}})(),W=async(e,t,a)=>{t||(t=d.currentBlock),t.actionType!==C.CURSOR&&t.actionType!==C.DEBUG&&t.actionType!==C.DRAG&&u(),a=a||d,await(async(e,t,a,n)=>{let l=t.target||n.value;if(e.blockType===A.ACTIONS){if(e.actionType===C.PASTE_REPLACE)return void(await it(l));if(e.actionType===C.DEBUG){console.log("[event]",t);const e=t.target;for(var o=e.previousSibling;o&&1!==o.nodeType;)o=o.previousSibling;for(var s=e.nextSibling;s&&1!==s.nodeType;)s=s.nextSibling;return console.log({sibling1:o,sibling2:s}),void console.log("[targetEl]",l)}if(e.actionType===C.DELETE){if(l===n.value)return;l.parentNode.removeChild(l)}}else if(e.blockType===A.HTML_ELEMENT){const t=rt(e,a);l.appendChild(t)}})(t,e,a,l),t.actionType===C.DELETE?q():t.actionType!==C.DEBUG&&t.actionType!==C.CURSOR&&j(),o()},G=()=>{clearInterval(m.value),p.value=0,v.value=0,g.value=0},J=w((()=>(p.value/300*100).toFixed(2))),Y=y(null),X=a(null);return{isSelectMode:F,handleBlockClick:W,handleMouseDown:e=>{if(!d.selecting&&0===e.button){if(d.currentBlock.actionType===C.DELETE)return G(),m.value=setInterval((()=>{if(p.value>300)return G(),void W(e);p.value+=50}),50),v.value=e.x,g.value=e.y,void e.preventDefault();Y.value=null,d.currentBlock.actionType!==C.DRAG?W(e):e.target&&(Y.value=e.target,Y.value.draggable=!0)}},handleMouseUp:e=>{d.currentBlock.actionType===C.DELETE&&G(),Y.value&&(Y.value.draggable=!1,Y.value.removeAttribute("draggable"))},handleDragOver:e=>{x.value.drawLine(e)},handleDragLeave:e=>{x.value.hideLine()},handleDrop:async e=>{var t;x.value.hideLine();const a=e.target||l.value,n=x.value.currentPosition,s=async e=>{u(),"top"===n?await $(a,"beforebegin",e):"bottom"===n?await $(a,"afterend",e):await $(a,"beforeend",e),o(),j()};if(Y.value)return Y.value.draggable=!1,Y.value.removeAttribute("draggable"),await s(Y.value.outerHTML),e.ctrlKey||null==(t=Y.value.parentNode)||t.removeChild(Y.value),void(Y.value=null);const r=window.$draggingComponentExportData;if(r)return window.$draggingComponentExportData=null,await s(r.html),void E.emit(k.ON_ADD_STYLE,{code:r.style,isAppend:!0});const i=e.dataTransfer.getData("data-block");if(!i)return console.warn("drag item must be a BlockItem",e),void window.$message.warning("drag item not supported");const c=JSON.parse(i);if(c.blockType===A.HTML_ELEMENT){const e=rt(c,d);N(a,"top"===n?"before":"bottom"===n?"after":"appendChild",e)}else console.warn("block is unable to insert",c)},waitingProgress:J,cursorX:v,cursorY:g,ctxMenuRef:B,ctxMenuOptions:z,selectionActionStyle:M,selectionElRef:P,isShowSelectionAction:R,selectionPopupOptions:O,isShowElementEdit:f,editingNode:I,isEditingRoot:S,updateEditingElement:({el:e,data:t})=>{if(!e)return;u(),((e,t)=>{if(!t.customProps)return void console.error("[updateHtmlElement] data.customProps is not exist!");if(e.outerHTML!==t.outerHTML?e.outerHTML=t.outerHTML:e.innerHTML!==t.innerHTML&&(e.innerHTML=t.innerHTML),!e.outerHTML)return void console.warn("[updateHtmlElement] data.outerHTML is empty!");const a=mt[null==e?void 0:e.tagName.toLowerCase()]||vt;a&&a.updateElement(e,t)})(e,t);const a=X.value;"function"==typeof a&&a(),o()}}};class ht{constructor(e=10){t(this,"undoStack",[]),t(this,"redoStack",[]),t(this,"maxStackSize",100),this.maxStackSize=e}get lastUndo(){return this.undoStack[this.undoStack.length-1]||null}get lastRedo(){return this.redoStack[this.redoStack.length-1]||null}recordUndo(e){this.lastRedo!==e&&(this.undoStack.push(e),this.undoStack.length>this.maxStackSize&&this.undoStack.shift(),this.redoStack=[])}undo(e){return this.undoStack.length>0?(this.redoStack.push(e),this.undoStack.pop()):null}redo(e){return this.redoStack.length>0?(this.undoStack.push(e),this.redoStack.pop()):null}clear(){this.undoStack=[],this.redoStack=[]}getCount(){return this.undoStack.length+this.redoStack.length}}const ft=e=>{const{t:t}=c(),{mainPlaygroundRef:l,emit:o}=e;h();const u=r(),d=a(!1),{loadCurCompHtml:p,saveCurCompHtml:A,saveCurCompStyle:m,loadCurCompStyle:g}=Xe(),y=a(new ht(10));ve((()=>y.value.getCount()>0));const{play:f}=(()=>{const e=r();return _e(Ue,{volume:1,soundEnabled:e.enableSoundFx})})(),{play:w}=ze();n((()=>{H(),E.on(k.SYNC_STORAGE_DATA,_),E.on(k.IMPORT_SUCCESS,H)})),b((()=>{E.off(k.SYNC_STORAGE_DATA,_),E.off(k.IMPORT_SUCCESS,H)}));const C=e=>{const a=e?e.outerHTML:l.value.innerHTML;Ae(Qe(a)),window.$message.success(t("msgs.copy_success")),_(),f()},T=a(""),_=async e=>{var t;const a=l.value.innerHTML;await A(a),null==(t=R.value)||t.postMessage(null),e&&e()},M=a(!1),{channelRef:R}=ot("mainPlaygroundUpdate",(e=>{M.value=!0,console.log("[mainPlaygroundUpdate]"),u.$hydrate({runHooks:!0}),H(),S((()=>{M.value=!1}))}));s((()=>u.curCompInStore),(()=>{var e;M.value?console.warn("isSelfUpdating"):(H(),null==(e=R.value)||e.postMessage(null))}));const P=(e="")=>{l.value&&(l.value.innerHTML=e)},H=async()=>{const e=await p();P(e),y.value.clear(),w()},U=i(x.VARIABLES_STYLE,""),D=async({insertVariableCode:e=!0}={})=>{var t;await L();const a=await p()||"";let n=await g();e&&(n=U.value+n);return{name:(null==(t=u.curCompInStore)?void 0:t.title)||"",html:Qe(a),style:et(n),timestamp:Date.now()}},O=e=>{N(),P(e),_(),w()},$=[{label:`📤 ${t("actions.export")}`,children:[{label:`💚 ${t("actions.export")} Vue 2 SFC`,props:{onClick:async()=>{await at(await D({insertVariableCode:!1}))}}},{label:`💚 ${t("actions.export")} Vue 3 SFC`,props:{onClick:async()=>{await at(await D({insertVariableCode:!1}),3)}}},{label:`📑 ${t("actions.export")} HTML`,props:{onClick:async()=>{tt(await D())}}},{label:`📧 ${t("actions.export")} Email HTML`,props:{onClick:async()=>{tt(await D(),{isInline:!0})}}},{label:`📧 ${t("actions.export")} Email HTML (With Style Tag)`,props:{onClick:async()=>{tt(await D(),{isInline:!0,inlineWithStyleTag:!0})}}}]},{split:!0},{label:`📄 ${t("actions.paste")} HTML...`,props:{onClick:async()=>{d.value=!0}}},{label:`📄 ${t("actions.copy")} HTML`,props:{onClick:async()=>{C()}}},{label:"📄 "+t("actions.copy_compiled_css"),props:{onClick:async()=>{const e=await g(),t=et(await v(e));window.$qlUtils.copy(t)}}},{split:!0},{label:"❌ "+t("actions.clear_all_html"),props:{onClick:async()=>{window.$dialog.confirm(t("msgs.confirm_clear_curren"),t("actions.confirm"),{type:"warning"}).then((()=>{O(""),E.emit(k.IMPORT_SUCCESS,""),window.$message.success(t("actions.done")+"!")})).catch()}}}];ge((async()=>{tt(await D())}));const N=()=>{const e=l.value.innerHTML;y.value.recordUndo(e)},{play:I}=(()=>{const e=r();return _e(Oe,{volume:1,soundEnabled:e.enableSoundFx})})(),{play:B}=(()=>{const e=r();return _e($e,{volume:1,soundEnabled:e.enableSoundFx})})();return{htmlMenuOptions:$,isShowImportDialog:d,setPlaygroundHtml:P,pasteHtmlText:T,handleImportHtml:O,saveData:_,copyHtml:C,undoRedo:y,recordUndo:N,handleUndo:()=>{if(!y.value.undoStack.length)return;I();const e=l.value.innerHTML,t=y.value.undo(e);P(t),_()},handleRedo:()=>{if(!y.value.redoStack.length)return;B();const e=l.value.innerHTML,t=y.value.redo(e);P(t),_()}}},wt=M({name:"ElementEditDialog",components:{AutoFormElPlus:Ce,ViewPortWindow:Se},props:{editingNode:{type:Object,default:null},visible:{type:Boolean,default:!1},isRoot:{type:Boolean,default:!1}},emits:["onSave","update:visible"],setup(e,{emit:t}){const{isRoot:n,editingNode:l}=R(e),o=we(e,t,"visible"),r=a(!0),i=a(),c=a(gt(null)),u=a({}),d=a([]);s(o,(e=>{e?p():(c.value=gt(null),d.value=[])})),s(l,(e=>{p()}));const p=()=>{var e;c.value=gt(l.value),d.value=(e=l.value)?(mt[null==e?void 0:e.tagName.toLowerCase()]||vt).customFormItems.map(pt):[],n.value&&(r.value=!0)},A=w((()=>n.value?[{type:me.MONACO_EDITOR,key:"innerHTML",label:"innerHTML"}]:r.value?[...d.value,{label:"innerHTML",key:"innerHTML",type:me.MONACO_EDITOR}]:[{label:"outerHTML",key:"outerHTML",type:me.MONACO_EDITOR,props:{style:"height: 400px; border-bottom: 1px solid rgba(91, 85, 85, 0.3)"}}]));return{mVisible:o,dataForm:c,autoFormRef:i,formRules:u,formItems:A,handleResize:()=>{window.dispatchEvent(new Event("resize"))},handleSubmit:()=>{t("onSave",{el:l.value,data:c.value}),o.value=!1},handleCancel:()=>{o.value=!1},isEditInnerHTML:r}}}),St={class:"action-row vp-bg"},Ct={class:"flex-row-center-gap"},Tt={type:"submit",class:"vp-button primary"};const _t=P(wt,[["render",function(e,t,a,n,l,o){const s=V,r=H("AutoFormElPlus"),i=H("ViewPortWindow");return U(),D(i,{visible:e.mVisible,"onUpdate:visible":t[3]||(t[3]=t=>e.mVisible=t),"allow-maximum":"",wid:"element_editor",onResize:e.handleResize,"init-win-options":{width:"400px",height:"500px"}},{titleBarLeft:O((()=>[$(N(`${e.$t("actions.edit_element")} <${e.dataForm.tagName}>`),1)])),titleBarRightControls:O((()=>[I("button",{onClick:t[0]||(t[0]=(...t)=>e.autoFormRef.submitForm&&e.autoFormRef.submitForm(...t))},N(e.$t("actions.ok")),1)])),default:O((()=>[B(r,{ref:"autoFormRef","form-schema":{model:e.dataForm,rules:e.formRules,props:{labelPosition:"top"},formItems:e.formItems},onOnSubmit:e.handleSubmit,class:"element-edit-form font-code","hide-actions":""},{default:O((()=>[I("div",St,[B(s,{modelValue:e.isEditInnerHTML,"onUpdate:modelValue":t[1]||(t[1]=t=>e.isEditInnerHTML=t),title:`${e.$t("actions.toggle")} innerHTML/outerHTML`,disabled:e.isRoot,"active-text":"innerHTML","inactive-text":"outerHTML"},null,8,["modelValue","title","disabled"]),I("div",Ct,[I("button",{type:"button",class:"vp-button",onClick:t[2]||(t[2]=(...t)=>e.handleCancel&&e.handleCancel(...t))},N(e.$t("actions.cancel")),1),I("button",Tt,N(e.$t("actions.ok")),1)])])])),_:1},8,["form-schema","onOnSubmit"])])),_:1},8,["visible","onResize"])}],["__scopeId","data-v-4d6b5a1d"]]),Et={key:0,class:"mc-indicator-info font-code"},kt=P(M({__name:"IndicatorInfo",props:{parentClass:{default:lt}},setup(e){const t=e,{parentClass:l}=R(t),o=a(null);n((()=>{l.value&&(o.value=document.querySelector(l.value))}));const{x:s,y:r}=z({type:"client"}),{element:i}=F({x:s,y:r}),c=f(j(i)),u=w((()=>!(o.value&&!o.value.contains(i.value)||o.value===i.value))),d=w((()=>i.value&&u.value?{display:"block",width:`${c.width}px`,height:`${c.height}px`,left:`${c.left}px`,top:`${c.top}px`,transition:"all 0.05s linear"}:{display:"none"})),p=w((()=>{if(i.value&&u.value){let e=`${i.value.localName}`,t=i.value.className||"";return"string"!=typeof t&&(console.warn("className",t),t=""),t=t.trim().split(" ").join("."),t&&(e+=`.${t}`),e}return""}));return(e,t)=>(U(),q(J,null,[p.value?(U(),q("div",Et,N(p.value),1)):W("",!0),I("div",{style:G(d.value),class:"mc-indicator-box"},null,4)],64))}}),[["__scopeId","data-v-03bdb481"]]),xt=["onClick"],Lt={class:"dialog-footer"},Mt=["title"],Rt=I("span",{class:"mdi mdi-xml"},null,-1),Pt={class:"vp-button"},Ht=I("span",{class:"mdi mdi-cog"},null,-1),Ut={class:"flex-row-center-gap"},Dt=I("span",{class:"mdi mdi-help-circle-outline"},null,-1),Ot={style:{"font-size":"14px"}},$t={class:"flex-row-center-gap"},Nt={class:"vp-button-group"},It=["disabled"],Bt=[I("span",{class:"mdi mdi-undo-variant"},null,-1)],Vt=["disabled"],zt=[I("span",{class:"mdi mdi-redo-variant"},null,-1)],Ft={key:1,style:{"border-right":"1px solid",opacity:"0.3"}},jt=["contenteditable"],qt=I("div",{class:"line-helper-x"},null,-1),Wt=M({name:"MainPlayground",emits:[],setup(e,{emit:t}){const n=t,l=ne(),i=le(),d=a(),p=h(),m=r(),v=w((()=>"PlaygroundPage"===i.name)),{htmlMenuOptions:g,isShowImportDialog:y,setPlaygroundHtml:b,pasteHtmlText:T,handleImportHtml:_,saveData:E,copyHtml:k,undoRedo:x,recordUndo:L,handleUndo:M,handleRedo:R}=ft({mainPlaygroundRef:d,emit:n}),{indicatorOptions:P,mainCanvasClass:V,toggleList:z,backgroundStyle:F}=(()=>{const{t:e}=c(),t=h();Fe();const n=a(!1),{channelRef:l}=ot("indicatorUpdate",(e=>{n.value=!0,Object.assign(o,e.data),S((()=>{n.value=!1}))})),o=f(JSON.parse(localStorage.getItem(u.INDICATOR_OPTIONS)||"null")||{enableDevHelpClass:!0,enableExpand:!0,enableSelection:!1,fullWidth:!1,bgDark:!1,bgTransparentPercent:100,centeredElementsY:!1,centeredElementsX:!1,showStyleEditor:!1,contentEditable:!1,enableRightClick:!0});s(o,(()=>{var e;if(n.value)return void console.warn("isSelfUpdating");const t={...o};localStorage.setItem(u.INDICATOR_OPTIONS,JSON.stringify(t)),null==(e=l.value)||e.postMessage(t)}),{deep:!0});const r=e=>{e.preventDefault(),window.$message.warning("Prevent link click")};s((()=>t.currentBlock),(e=>{console.log(e.actionType);const t=`${lt} a`;e.actionType!==C.CURSOR?document.querySelectorAll(t).forEach((e=>{e.addEventListener("click",r)})):setTimeout((()=>{document.querySelectorAll(t).forEach((e=>{e.removeEventListener("click",r)}))}),500)}));const i=w((()=>{const e=t.currentBlock;return{"page-craft-mc--dev":o.enableDevHelpClass,"page-craft-mc--cursor-insert":e.blockType!==A.ACTIONS,"page-craft-mc--cursor-pickaxe":e.actionType===C.DELETE,"page-craft-mc--cursor-arrow":!1,"page-craft-mc--cursor-sword":e.actionType===C.DEBUG,"page-craft-mc--cursor-drag":e.actionType===C.DRAG,"page-craft-mc--cursor-oaksign":e.actionType===C.PASTE_REPLACE,"page-craft-mc--expand":o.enableExpand,"page-craft-mc--full-width":o.fullWidth,"page-craft-mc--centered-y":o.centeredElementsY,"page-craft-mc--centered-x":o.centeredElementsX,_dark:o.bgDark}})),d=[{flag:"enableDevHelpClass",title:e("common.outline"),desc:e("msgs.add_1px_outline_per")+" (alt+z)"},{flag:"enableExpand",title:e("common.padding"),desc:e("msgs.pad_each_element_wit")+" (alt+x)"},{flag:"contentEditable",title:e("msgs.content_editable"),desc:e("msgs.enable_html_contente")},{flag:"enableSelection",title:e("msgs.enable_hover"),desc:e("msgs.add_cursor_hover_loc")},{flag:"enableRightClick",title:e("msgs.enable_right_click"),desc:""},{flag:"centeredElementsY",title:e("msgs.centered")+" Y",desc:""},{flag:"centeredElementsX",title:e("msgs.centered")+" X",desc:""},{flag:"fullWidth",title:e("msgs.full_width"),desc:""},{flag:"bgDark",title:e("msgs.dark_bg"),desc:""}],p=w((()=>o.bgDark?{backgroundColor:`rgba(30, 30, 30,${o.bgTransparentPercent/100})`}:{backgroundColor:`rgba(255,255,255,${o.bgTransparentPercent/100})`}));return{indicatorOptions:o,mainCanvasClass:i,toggleList:d,backgroundStyle:p}})(),{isSelectMode:j,handleMouseDown:de,handleMouseUp:pe,handleDragOver:Ae,handleDragLeave:me,handleDrop:ve,waitingProgress:ge,cursorX:ye,cursorY:be,ctxMenuRef:he,ctxMenuOptions:we,selectionActionStyle:Se,selectionElRef:Ce,isShowSelectionAction:_e,selectionPopupOptions:Ee,isShowElementEdit:ke,editingNode:xe,isEditingRoot:Le,updateEditingElement:Me}=bt({mainPlaygroundRef:d,saveData:E,indicatorOptions:P,copyHtml:k,recordUndo:L}),Re=e=>{const t=e.key.toLowerCase();e.ctrlKey&&e.shiftKey&&"z"===t?R():e.ctrlKey&&"z"===t&&M()};Y(document,"keydown",(e=>{const t=e.key.toLowerCase();e.altKey&&"x"===t?P.enableExpand=!P.enableExpand:e.altKey&&"z"===t&&(P.enableDevHelpClass=!P.enableDevHelpClass)}));const Pe=()=>{const e=l.resolve({name:"PlaygroundPage"}).href;console.log(e),window.__TAURI__?new oe("PlaygroundPage",{url:e}):window.open(e)},He=()=>{_(T.value),y.value=!1};return(e,t)=>{const a=se,n=re,l=ie,s=ce,r=ue,i=H("portal");return U(),q("div",{tabindex:"0",onKeyup:Re,class:"page-craft-mc-wrap"},[o(j)?(U(),D(kt,{key:0})):W("",!0),B(K,{name:"mc-fade"},{default:O((()=>[o(_e)?(U(),q("div",{key:0,ref_key:"selectionElRef",ref:Ce,class:"selection-action",style:G(o(Se)),onClick:t[0]||(t[0]=e=>_e.value=!1)},[(U(!0),q(J,null,X(o(Ee),(e=>(U(),q("button",{key:e.label,onClick:e.onClick,class:"btn-no-style font-code"},N(e.label),9,xt)))),128))],4)):W("",!0)])),_:1}),(U(),D(Z,{to:"body"},[B(Te,{ref_key:"ctxMenuRef",ref:he,options:o(we)},null,8,["options"])])),B(n,{draggable:"",modelValue:o(y),"onUpdate:modelValue":t[3]||(t[3]=e=>Q(y)?y.value=e:null),title:`${e.$t("actions.paste")} HTML`,width:"600",top:"10vh","append-to":".page-craft-root"},{footer:O((()=>[I("div",Lt,[B(a,{onClick:t[2]||(t[2]=e=>y.value=!1)},{default:O((()=>[$(N(e.$t("actions.cancel")),1)])),_:1}),B(a,{type:"primary",onClick:He},{default:O((()=>[$(N(e.$t("actions.import"))+" HTML ",1)])),_:1})])])),default:O((()=>[o(y)?(U(),D(fe,{key:0,modelValue:o(T),"onUpdate:modelValue":t[1]||(t[1]=e=>Q(T)?T.value=e:null),style:{height:"500px"}},null,8,["modelValue"])):W("",!0)])),_:1},8,["modelValue","title"]),(U(),D(Z,{to:".page-craft-root"},[B(_t,{visible:o(ke),"onUpdate:visible":t[4]||(t[4]=e=>Q(ke)?ke.value=e:null),"editing-node":o(xe),"is-root":o(Le),onOnSave:o(Me)},null,8,["visible","editing-node","is-root","onOnSave"])])),B(i,{to:"indicatorBarTeleportDest"},{default:O((()=>[o(v)?W("",!0):(U(),q(J,{key:0},[B(ee,{options:o(g)},{default:O((()=>{var e,t,a,n;return[I("button",{class:"vp-button",title:`${null==(e=o(m).curCompInStore)?void 0:e.basePath}\n${null==(t=o(m).curCompInStore)?void 0:t.title}`},[Rt,$(" "+N((null==(n=null==(a=o(m).curCompInStore)?void 0:a.title)?void 0:n.slice(0,10))||"Default"),1)],8,Mt)]})),_:1},8,["options"]),B(s,{width:"180",trigger:"hover",persistent:!1},{reference:O((()=>[I("button",Pt,[Ht,$(" "+N(e.$t("common.options")),1)])])),default:O((()=>[(U(!0),q(J,null,X(o(z),(e=>(U(),q("div",{key:e.flag,class:"toggle-list"},[I("div",Ut,[B(l,{modelValue:o(P)[e.flag],"onUpdate:modelValue":t=>o(P)[e.flag]=t,label:e.title,size:"small"},null,8,["modelValue","onUpdate:modelValue","label"]),e.desc?(U(),D(s,{key:0,trigger:"hover"},{reference:O((()=>[Dt])),default:O((()=>[I("span",Ot,N(e.desc),1)])),_:2},1024)):W("",!0)])])))),128)),B(r,{modelValue:o(P).bgTransparentPercent,"onUpdate:modelValue":t[5]||(t[5]=e=>o(P).bgTransparentPercent=e),step:1,size:"small"},null,8,["modelValue"]),I("div",$t,[I("button",{class:"vp-button primary",title:"(alt+w)",onClick:t[6]||(t[6]=e=>o(p).isShowSettings=!o(p).isShowSettings)},N(e.$t("common.settings")),1),I("button",{class:"vp-button",onClick:Pe},"Playground")])])),_:1})],64)),I("div",Nt,[I("button",{class:"vp-button",title:"Undo (ctrl+z)",disabled:!o(x).undoStack.length,onClick:t[7]||(t[7]=(...e)=>o(M)&&o(M)(...e))},Bt,8,It),I("button",{class:"vp-button",title:"Redo (ctrl+shift+z)",disabled:!o(x).redoStack.length,onClick:t[8]||(t[8]=(...e)=>o(R)&&o(R)(...e))},zt,8,Vt)]),o(v)?W("",!0):(U(),q("span",Ft))])),_:1}),I("div",{ref_key:"mainPlaygroundRef",ref:d,class:te([o(V),"page-craft-mc"]),contenteditable:o(P).contentEditable,onMousedown:t[9]||(t[9]=(...e)=>o(de)&&o(de)(...e)),onMouseleave:t[10]||(t[10]=(...e)=>o(pe)&&o(pe)(...e)),onMouseup:t[11]||(t[11]=(...e)=>o(pe)&&o(pe)(...e)),onDragover:t[12]||(t[12]=ae(((...e)=>o(Ae)&&o(Ae)(...e)),["prevent","stop"])),onDragleave:t[13]||(t[13]=ae(((...e)=>o(me)&&o(me)(...e)),["prevent","stop"])),onDrop:t[14]||(t[14]=ae(((...e)=>o(ve)&&o(ve)(...e)),["prevent","stop"])),style:G(o(F))},null,46,jt),qt,o(ye)?(U(),q("div",{key:1,class:"mc-digging-wrap",style:G({top:o(be)+"px",left:o(ye)+"px"})},[I("div",{class:"mc-digging-inner",style:G({width:`${o(ge)}%`,height:`${o(ge)}%`})},null,4)],4)):W("",!0)],32)}}});export{lt as C,Wt as _,Ke as a,Xe as b,Ge as c,Fe as d,Be as e,nt as f,Ne as g,Ve as h,ze as i,Ie as j,ot as k,et as l,je as r,Ye as u};
