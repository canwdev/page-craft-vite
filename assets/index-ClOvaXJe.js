import{d as e,U as a,ab as s,r as l,q as o,L as r,c as i,I as t,o as n,p as u,M as p,Q as m,f as d,x as v,e as c,b,P as f,W as w,X as h,k as _,l as k,v as x,g,$ as y,a0 as C,_ as R}from"./index-Dcsrw7an.js";import{_ as B}from"./index.vue_vue_type_style_index_0_lang-Df9XRKpL.js";import{u as I}from"./use-remote-options-CrKSz0Lf.js";const P=e=>(y("data-v-cb1e1f83"),e=e(),C(),e),j=P((()=>c("span",{class:"mdi mdi-web"},null,-1))),E=[P((()=>c("span",{class:"mdi mdi-cellphone"},null,-1)))],L={key:0,class:"iframe-browser-inner-wrap"},U={class:"iframe-browser-address-bar-wrap"},F={class:"button-wrap"},S=[P((()=>c("span",{class:"mdi mdi-bookmark-box"},null,-1)))],A=[P((()=>c("span",{class:"mdi mdi-arrow-left-bottom"},null,-1)))],W=["src"],M=R(e({name:"IframeBrowser",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(e,{emit:y}){const C=a(e,"visible",y),R=s(),P=l(!1),M=l(),T=l(""),q=R.resolve({name:"PlaygroundPage"}).href,G=o(r.PAGECRAFT_IFRAME_BROWSER_URL,q,localStorage,{listenToStorageChanges:!1}),K=i((()=>P.value?"(Loading...)":""));t((()=>{G.value&&O()}));const O=()=>{T.value="",T.value=G.value,P.value=!0},Q=()=>{P.value=!1},V=e=>{P.value=!1,console.error("[handleIframeError]",e)},{options:X}=I({fetchFn:async()=>{const e=await fetch("./bookmarks.json");return await e.json()},mapFn:e=>({label:e.label||e.value,iconClass:"mdi mdi-bookmark",value:e.value,props:{onClick:e.children?void 0:()=>{G.value=e.value,O()}}})}),$=l(!1),z=l(),D=()=>{z.value.setPos("width","385px"),z.value.setPos("height","727px")};return(e,a)=>(n(),u(B,{ref_key:"iframeWinRef",ref:z,class:"iframe-browser-vp-window",visible:v(C),"onUpdate:visible":a[5]||(a[5]=e=>h(C)?C.value=e:null),wid:"iframe_browser","allow-maximum":"","init-win-options":{width:"350px",height:"500px"}},{titleBarLeft:p((()=>[j,m(" Iframe Browser "+d(v(K)),1)])),titleBarRightControls:p((()=>[c("button",{onClick:D},E)])),default:p((()=>[v(C)?(n(),b("div",L,[c("div",U,[c("div",F,[c("button",{class:"vp-button",onClick:a[0]||(a[0]=e=>$.value=!0)},S),f(w,{options:v(X),visible:v($),"onUpdate:visible":a[1]||(a[1]=e=>h($)?$.value=e:null),title:"Shortcuts"},null,8,["options","visible"])]),_(c("input",{class:"vp-input iframe-browser-input font-code","onUpdate:modelValue":a[2]||(a[2]=e=>h(G)?G.value=e:null),placeholder:"input url (https://)",type:"text",onKeyup:a[3]||(a[3]=k((e=>O()),["enter"]))},null,544),[[x,v(G)]]),c("button",{class:"vp-button",onClick:a[4]||(a[4]=e=>O())},A)]),c("iframe",{ref_key:"iframeRef",ref:M,onLoad:Q,onError:V,class:"iframe-browser-inner-iframe",src:v(T),frameborder:"0"},null,40,W)])):g("",!0)])),_:1},8,["visible"]))}}),[["__scopeId","data-v-cb1e1f83"]]);export{M as default};
