import{d as X,N as S,O as tn,P as co,Q as Bt,R as Le,S as nn,r as D,U as ye,V as O,W as xe,X as W,Y as je,Z as L,$ as N,a0 as B,a1 as I,a2 as J,a3 as ke,a4 as fe,a5 as Qe,a6 as on,a7 as A,a8 as Et,a9 as et,aa as uo,ab as fo,ac as ho,ad as go,ae as vo,af as At,ag as rn,ah as yt,ai as an,aj as bo,ak as ct,al as yo,am as po,an as mo,ao as ut,ap as ko,j as Co,aq as xo,ar as zt,as as _o,at as So,au as Lt,av as ft,aw as wo,ax as Ro,ay as Ae,w as be,az as ce,aA as jt,aB as $o,aC as To,aD as No,aE as Mt,aF as Do,aG as Po,aH as Je,aI as ln,t as sn,s as dn,I as cn,_ as pt,o as M,c as oe,a as z,b as Ze,x as un,n as se,e as G,aJ as fn,q as ue,J as Ce,F as Ne,f as hn,A as gn,C as vn,E as bn,y as bt,i as Io,p as Ko,v as Fo,T as Oo,aK as Bo,z as ht}from"./index-47670616.js";import{f as Eo,i as Ao,e as zo,I as Lo,_ as jo}from"./translate-e591830c.js";import{_ as yn,u as Mo,a as Uo,b as Ho}from"./use-file-drop-91daeab8.js";function pn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const Vo=X({name:"Switcher",render(){return S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},S("path",{d:"M12 8l10 8l-10 8z"}))}}),Go=e=>{const{borderColor:t,primaryColor:n,baseColor:r,textColorDisabled:a,inputColorDisabled:s,textColor2:d,opacityDisabled:u,borderRadius:c,fontSizeSmall:f,fontSizeMedium:h,fontSizeLarge:w,heightSmall:m,heightMedium:g,heightLarge:C,lineHeight:l}=e;return Object.assign(Object.assign({},co),{labelLineHeight:l,buttonHeightSmall:m,buttonHeightMedium:g,buttonHeightLarge:C,fontSizeSmall:f,fontSizeMedium:h,fontSizeLarge:w,boxShadow:`inset 0 0 0 1px ${t}`,boxShadowActive:`inset 0 0 0 1px ${n}`,boxShadowFocus:`inset 0 0 0 1px ${n}, 0 0 0 2px ${Bt(n,{alpha:.2})}`,boxShadowHover:`inset 0 0 0 1px ${n}`,boxShadowDisabled:`inset 0 0 0 1px ${t}`,color:r,colorDisabled:s,colorActive:"#0000",textColor:d,textColorDisabled:a,dotColorActive:n,dotColorDisabled:t,buttonBorderColor:t,buttonBorderColorActive:n,buttonBorderColorHover:t,buttonColor:r,buttonColorActive:r,buttonTextColor:d,buttonTextColorActive:n,buttonTextColorHover:n,opacityDisabled:u,buttonBoxShadowFocus:`inset 0 0 0 1px ${n}, 0 0 0 2px ${Bt(n,{alpha:.3})}`,buttonBoxShadowHover:"inset 0 0 0 1px #0000",buttonBoxShadow:"inset 0 0 0 1px #0000",buttonBorderRadius:c})},qo={name:"Radio",common:tn,self:Go},Yo=qo,Wo={name:String,value:{type:[String,Number,Boolean],default:"on"},checked:{type:Boolean,default:void 0},defaultChecked:Boolean,disabled:{type:Boolean,default:void 0},label:String,size:String,onUpdateChecked:[Function,Array],"onUpdate:checked":[Function,Array],checkedValue:{type:Boolean,default:void 0}},mn=Le("n-radio-group");function Jo(e){const t=nn(e,{mergedSize(R){const{size:P}=e;if(P!==void 0)return P;if(d){const{mergedSizeRef:{value:$}}=d;if($!==void 0)return $}return R?R.mergedSize.value:"medium"},mergedDisabled(R){return!!(e.disabled||d!=null&&d.disabledRef.value||R!=null&&R.disabled.value)}}),{mergedSizeRef:n,mergedDisabledRef:r}=t,a=D(null),s=D(null),d=ye(mn,null),u=D(e.defaultChecked),c=O(e,"checked"),f=xe(c,u),h=W(()=>d?d.valueRef.value===e.value:f.value),w=W(()=>{const{name:R}=e;if(R!==void 0)return R;if(d)return d.nameRef.value}),m=D(!1);function g(){if(d){const{doUpdateValue:R}=d,{value:P}=e;L(R,P)}else{const{onUpdateChecked:R,"onUpdate:checked":P}=e,{nTriggerFormInput:$,nTriggerFormChange:T}=t;R&&L(R,!0),P&&L(P,!0),$(),T(),u.value=!0}}function C(){r.value||h.value||g()}function l(){C()}function v(){m.value=!1}function k(){m.value=!0}return{mergedClsPrefix:d?d.mergedClsPrefixRef:je(e).mergedClsPrefixRef,inputRef:a,labelRef:s,mergedName:w,mergedDisabled:r,uncontrolledChecked:u,renderSafeChecked:h,focus:m,mergedSize:n,handleRadioInputChange:l,handleRadioInputBlur:v,handleRadioInputFocus:k}}const Xo=N("radio-group",`
 display: inline-block;
 font-size: var(--n-font-size);
`,[B("splitor",`
 display: inline-block;
 vertical-align: bottom;
 width: 1px;
 transition:
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 background: var(--n-button-border-color);
 `,[I("checked",{backgroundColor:"var(--n-button-border-color-active)"}),I("disabled",{opacity:"var(--n-opacity-disabled)"})]),I("button-group",`
 white-space: nowrap;
 height: var(--n-height);
 line-height: var(--n-height);
 `,[N("radio-button",{height:"var(--n-height)",lineHeight:"var(--n-height)"}),B("splitor",{height:"var(--n-height)"})]),N("radio-button",`
 vertical-align: bottom;
 outline: none;
 position: relative;
 user-select: none;
 -webkit-user-select: none;
 display: inline-block;
 box-sizing: border-box;
 padding-left: 14px;
 padding-right: 14px;
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 color: var(--n-button-text-color);
 border-top: 1px solid var(--n-button-border-color);
 border-bottom: 1px solid var(--n-button-border-color);
 `,[N("radio-input",`
 pointer-events: none;
 position: absolute;
 border: 0;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 opacity: 0;
 z-index: 1;
 `),B("state-border",`
 z-index: 1;
 pointer-events: none;
 position: absolute;
 box-shadow: var(--n-button-box-shadow);
 transition: box-shadow .3s var(--n-bezier);
 left: -1px;
 bottom: -1px;
 right: -1px;
 top: -1px;
 `),J("&:first-child",`
 border-top-left-radius: var(--n-button-border-radius);
 border-bottom-left-radius: var(--n-button-border-radius);
 border-left: 1px solid var(--n-button-border-color);
 `,[B("state-border",`
 border-top-left-radius: var(--n-button-border-radius);
 border-bottom-left-radius: var(--n-button-border-radius);
 `)]),J("&:last-child",`
 border-top-right-radius: var(--n-button-border-radius);
 border-bottom-right-radius: var(--n-button-border-radius);
 border-right: 1px solid var(--n-button-border-color);
 `,[B("state-border",`
 border-top-right-radius: var(--n-button-border-radius);
 border-bottom-right-radius: var(--n-button-border-radius);
 `)]),ke("disabled",`
 cursor: pointer;
 `,[J("&:hover",[B("state-border",`
 transition: box-shadow .3s var(--n-bezier);
 box-shadow: var(--n-button-box-shadow-hover);
 `),ke("checked",{color:"var(--n-button-text-color-hover)"})]),I("focus",[J("&:not(:active)",[B("state-border",{boxShadow:"var(--n-button-box-shadow-focus)"})])])]),I("checked",`
 background: var(--n-button-color-active);
 color: var(--n-button-text-color-active);
 border-color: var(--n-button-border-color-active);
 `),I("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `)])]);function Zo(e,t,n){var r;const a=[];let s=!1;for(let d=0;d<e.length;++d){const u=e[d],c=(r=u.type)===null||r===void 0?void 0:r.name;c==="RadioButton"&&(s=!0);const f=u.props;if(c!=="RadioButton"){a.push(u);continue}if(d===0)a.push(u);else{const h=a[a.length-1].props,w=t===h.value,m=h.disabled,g=t===f.value,C=f.disabled,l=(w?2:0)+(m?0:1),v=(g?2:0)+(C?0:1),k={[`${n}-radio-group__splitor--disabled`]:m,[`${n}-radio-group__splitor--checked`]:w},R={[`${n}-radio-group__splitor--disabled`]:C,[`${n}-radio-group__splitor--checked`]:g},P=l<v?R:k;a.push(S("div",{class:[`${n}-radio-group__splitor`,P]}),u)}}return{children:a,isButtonGroup:s}}const Qo=Object.assign(Object.assign({},fe.props),{name:String,value:[String,Number,Boolean],defaultValue:{type:[String,Number,Boolean],default:null},size:String,disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),er=X({name:"RadioGroup",props:Qo,setup(e){const t=D(null),{mergedSizeRef:n,mergedDisabledRef:r,nTriggerFormChange:a,nTriggerFormInput:s,nTriggerFormBlur:d,nTriggerFormFocus:u}=nn(e),{mergedClsPrefixRef:c,inlineThemeDisabled:f,mergedRtlRef:h}=je(e),w=fe("Radio","-radio-group",Xo,Yo,e,c),m=D(e.defaultValue),g=O(e,"value"),C=xe(g,m);function l(T){const{onUpdateValue:y,"onUpdate:value":F}=e;y&&L(y,T),F&&L(F,T),m.value=T,a(),s()}function v(T){const{value:y}=t;y&&(y.contains(T.relatedTarget)||u())}function k(T){const{value:y}=t;y&&(y.contains(T.relatedTarget)||d())}Qe(mn,{mergedClsPrefixRef:c,nameRef:O(e,"name"),valueRef:C,disabledRef:r,mergedSizeRef:n,doUpdateValue:l});const R=on("Radio",h,c),P=A(()=>{const{value:T}=n,{common:{cubicBezierEaseInOut:y},self:{buttonBorderColor:F,buttonBorderColorActive:Z,buttonBorderRadius:ne,buttonBoxShadow:re,buttonBoxShadowFocus:H,buttonBoxShadowHover:_e,buttonColorActive:Ke,buttonTextColor:Q,buttonTextColorActive:ae,buttonTextColorHover:le,opacityDisabled:Fe,[Et("buttonHeight",T)]:p,[Et("fontSize",T)]:K}}=w.value;return{"--n-font-size":K,"--n-bezier":y,"--n-button-border-color":F,"--n-button-border-color-active":Z,"--n-button-border-radius":ne,"--n-button-box-shadow":re,"--n-button-box-shadow-focus":H,"--n-button-box-shadow-hover":_e,"--n-button-color-active":Ke,"--n-button-text-color":Q,"--n-button-text-color-hover":le,"--n-button-text-color-active":ae,"--n-height":p,"--n-opacity-disabled":Fe}}),$=f?et("radio-group",A(()=>n.value[0]),P,e):void 0;return{selfElRef:t,rtlEnabled:R,mergedClsPrefix:c,mergedValue:C,handleFocusout:k,handleFocusin:v,cssVars:f?void 0:P,themeClass:$==null?void 0:$.themeClass,onRender:$==null?void 0:$.onRender}},render(){var e;const{mergedValue:t,mergedClsPrefix:n,handleFocusin:r,handleFocusout:a}=this,{children:s,isButtonGroup:d}=Zo(uo(fo(this)),t,n);return(e=this.onRender)===null||e===void 0||e.call(this),S("div",{onFocusin:r,onFocusout:a,ref:"selfElRef",class:[`${n}-radio-group`,this.rtlEnabled&&`${n}-radio-group--rtl`,this.themeClass,d&&`${n}-radio-group--button-group`],style:this.cssVars},s)}}),tr=X({name:"RadioButton",props:Wo,setup:Jo,render(){const{mergedClsPrefix:e}=this;return S("label",{class:[`${e}-radio-button`,this.mergedDisabled&&`${e}-radio-button--disabled`,this.renderSafeChecked&&`${e}-radio-button--checked`,this.focus&&[`${e}-radio-button--focus`]]},S("input",{ref:"inputRef",type:"radio",class:`${e}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),S("div",{class:`${e}-radio-button__state-border`}),ho(this.$slots.default,t=>!t&&!this.label?null:S("div",{ref:"labelRef",class:`${e}-radio__label`},t||this.label)))}}),nr=e=>{const{baseColor:t,textColor2:n,bodyColor:r,cardColor:a,dividerColor:s,actionColor:d,scrollbarColor:u,scrollbarColorHover:c,invertedColor:f}=e;return{textColor:n,textColorInverted:"#FFF",color:r,colorEmbedded:d,headerColor:a,headerColorInverted:f,footerColor:d,footerColorInverted:f,headerBorderColor:s,headerBorderColorInverted:f,footerBorderColor:s,footerBorderColorInverted:f,siderBorderColor:s,siderBorderColorInverted:f,siderColor:a,siderColorInverted:f,siderToggleButtonBorder:`1px solid ${s}`,siderToggleButtonColor:t,siderToggleButtonIconColor:n,siderToggleButtonIconColorInverted:n,siderToggleBarColor:At(r,u),siderToggleBarColorHover:At(r,c),__invertScrollbar:"true"}},or=go({name:"Layout",common:tn,peers:{Scrollbar:vo},self:nr}),kn=or,rr=Le("n-layout-sider"),Cn={type:String,default:"static"},ar=N("layout",`
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 flex: auto;
 overflow: hidden;
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[N("layout-scroll-container",`
 overflow-x: hidden;
 box-sizing: border-box;
 height: 100%;
 `),I("absolute-positioned",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),lr={embedded:Boolean,position:Cn,nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,onScroll:Function,contentStyle:{type:[String,Object],default:""},hasSider:Boolean,siderPlacement:{type:String,default:"left"}},xn=Le("n-layout");function _n(e){return X({name:e?"LayoutContent":"Layout",props:Object.assign(Object.assign({},fe.props),lr),setup(t){const n=D(null),r=D(null),{mergedClsPrefixRef:a,inlineThemeDisabled:s}=je(t),d=fe("Layout","-layout",ar,kn,t,a);function u(l,v){if(t.nativeScrollbar){const{value:k}=n;k&&(v===void 0?k.scrollTo(l):k.scrollTo(l,v))}else{const{value:k}=r;k&&k.scrollTo(l,v)}}Qe(xn,t);let c=0,f=0;const h=l=>{var v;const k=l.target;c=k.scrollLeft,f=k.scrollTop,(v=t.onScroll)===null||v===void 0||v.call(t,l)};rn(()=>{if(t.nativeScrollbar){const l=n.value;l&&(l.scrollTop=f,l.scrollLeft=c)}});const w={display:"flex",flexWrap:"nowrap",width:"100%",flexDirection:"row"},m={scrollTo:u},g=A(()=>{const{common:{cubicBezierEaseInOut:l},self:v}=d.value;return{"--n-bezier":l,"--n-color":t.embedded?v.colorEmbedded:v.color,"--n-text-color":v.textColor}}),C=s?et("layout",A(()=>t.embedded?"e":""),g,t):void 0;return Object.assign({mergedClsPrefix:a,scrollableElRef:n,scrollbarInstRef:r,hasSiderStyle:w,mergedTheme:d,handleNativeElScroll:h,cssVars:s?void 0:g,themeClass:C==null?void 0:C.themeClass,onRender:C==null?void 0:C.onRender},m)},render(){var t;const{mergedClsPrefix:n,hasSider:r}=this;(t=this.onRender)===null||t===void 0||t.call(this);const a=r?this.hasSiderStyle:void 0,s=[this.themeClass,e&&`${n}-layout-content`,`${n}-layout`,`${n}-layout--${this.position}-positioned`];return S("div",{class:s,style:this.cssVars},this.nativeScrollbar?S("div",{ref:"scrollableElRef",class:`${n}-layout-scroll-container`,style:[this.contentStyle,a],onScroll:this.handleNativeElScroll},this.$slots):S(yt,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentStyle:[this.contentStyle,a]}),this.$slots))}})}const ir=_n(!1),sr=_n(!0),dr=N("layout-sider",`
 flex-shrink: 0;
 box-sizing: border-box;
 position: relative;
 z-index: 1;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 min-width .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-color);
 display: flex;
 justify-content: flex-end;
`,[I("bordered",[B("border",`
 content: "";
 position: absolute;
 top: 0;
 bottom: 0;
 width: 1px;
 background-color: var(--n-border-color);
 transition: background-color .3s var(--n-bezier);
 `)]),B("left-placement",[I("bordered",[B("border",`
 right: 0;
 `)])]),I("right-placement",`
 justify-content: flex-start;
 `,[I("bordered",[B("border",`
 left: 0;
 `)]),I("collapsed",[N("layout-toggle-button",[N("base-icon",`
 transform: rotate(180deg);
 `)]),N("layout-toggle-bar",[J("&:hover",[B("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),B("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])])]),N("layout-toggle-button",`
 left: 0;
 transform: translateX(-50%) translateY(-50%);
 `,[N("base-icon",`
 transform: rotate(0);
 `)]),N("layout-toggle-bar",`
 left: -28px;
 transform: rotate(180deg);
 `,[J("&:hover",[B("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),B("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})])])]),I("collapsed",[N("layout-toggle-bar",[J("&:hover",[B("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),B("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])]),N("layout-toggle-button",[N("base-icon",`
 transform: rotate(0);
 `)])]),N("layout-toggle-button",`
 transition:
 color .3s var(--n-bezier),
 right .3s var(--n-bezier),
 left .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 cursor: pointer;
 width: 24px;
 height: 24px;
 position: absolute;
 top: 50%;
 right: 0;
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 font-size: 18px;
 color: var(--n-toggle-button-icon-color);
 border: var(--n-toggle-button-border);
 background-color: var(--n-toggle-button-color);
 box-shadow: 0 2px 4px 0px rgba(0, 0, 0, .06);
 transform: translateX(50%) translateY(-50%);
 z-index: 1;
 `,[N("base-icon",`
 transition: transform .3s var(--n-bezier);
 transform: rotate(180deg);
 `)]),N("layout-toggle-bar",`
 cursor: pointer;
 height: 72px;
 width: 32px;
 position: absolute;
 top: calc(50% - 36px);
 right: -28px;
 `,[B("top, bottom",`
 position: absolute;
 width: 4px;
 border-radius: 2px;
 height: 38px;
 left: 14px;
 transition: 
 background-color .3s var(--n-bezier),
 transform .3s var(--n-bezier);
 `),B("bottom",`
 position: absolute;
 top: 34px;
 `),J("&:hover",[B("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),B("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})]),B("top, bottom",{backgroundColor:"var(--n-toggle-bar-color)"}),J("&:hover",[B("top, bottom",{backgroundColor:"var(--n-toggle-bar-color-hover)"})])]),B("border",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 width: 1px;
 transition: background-color .3s var(--n-bezier);
 `),N("layout-sider-scroll-container",`
 flex-grow: 1;
 flex-shrink: 0;
 box-sizing: border-box;
 height: 100%;
 opacity: 0;
 transition: opacity .3s var(--n-bezier);
 max-width: 100%;
 `),I("show-content",[N("layout-sider-scroll-container",{opacity:1})]),I("absolute-positioned",`
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 `)]),cr=X({name:"LayoutToggleButton",props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:e}=this;return S("div",{class:`${e}-layout-toggle-button`,onClick:this.onClick},S(an,{clsPrefix:e},{default:()=>S(bo,null)}))}}),ur=X({props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:e}=this;return S("div",{onClick:this.onClick,class:`${e}-layout-toggle-bar`},S("div",{class:`${e}-layout-toggle-bar__top`}),S("div",{class:`${e}-layout-toggle-bar__bottom`}))}}),fr={position:Cn,bordered:Boolean,collapsedWidth:{type:Number,default:48},width:{type:[Number,String],default:272},contentStyle:{type:[String,Object],default:""},collapseMode:{type:String,default:"transform"},collapsed:{type:Boolean,default:void 0},defaultCollapsed:Boolean,showCollapsedContent:{type:Boolean,default:!0},showTrigger:{type:[Boolean,String],default:!1},nativeScrollbar:{type:Boolean,default:!0},inverted:Boolean,scrollbarProps:Object,triggerStyle:[String,Object],collapsedTriggerStyle:[String,Object],"onUpdate:collapsed":[Function,Array],onUpdateCollapsed:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,onExpand:[Function,Array],onCollapse:[Function,Array],onScroll:Function},hr=X({name:"LayoutSider",props:Object.assign(Object.assign({},fe.props),fr),setup(e){const t=ye(xn),n=D(null),r=D(null),a=A(()=>ct(c.value?e.collapsedWidth:e.width)),s=A(()=>e.collapseMode!=="transform"?{}:{minWidth:ct(e.width)}),d=A(()=>t?t.siderPlacement:"left"),u=D(e.defaultCollapsed),c=xe(O(e,"collapsed"),u);function f(T,y){if(e.nativeScrollbar){const{value:F}=n;F&&(y===void 0?F.scrollTo(T):F.scrollTo(T,y))}else{const{value:F}=r;F&&F.scrollTo(T,y)}}function h(){const{"onUpdate:collapsed":T,onUpdateCollapsed:y,onExpand:F,onCollapse:Z}=e,{value:ne}=c;y&&L(y,!ne),T&&L(T,!ne),u.value=!ne,ne?F&&L(F):Z&&L(Z)}let w=0,m=0;const g=T=>{var y;const F=T.target;w=F.scrollLeft,m=F.scrollTop,(y=e.onScroll)===null||y===void 0||y.call(e,T)};rn(()=>{if(e.nativeScrollbar){const T=n.value;T&&(T.scrollTop=m,T.scrollLeft=w)}}),Qe(rr,{collapsedRef:c,collapseModeRef:O(e,"collapseMode")});const{mergedClsPrefixRef:C,inlineThemeDisabled:l}=je(e),v=fe("Layout","-layout-sider",dr,kn,e,C);function k(T){var y,F;T.propertyName==="max-width"&&(c.value?(y=e.onAfterLeave)===null||y===void 0||y.call(e):(F=e.onAfterEnter)===null||F===void 0||F.call(e))}const R={scrollTo:f},P=A(()=>{const{common:{cubicBezierEaseInOut:T},self:y}=v.value,{siderToggleButtonColor:F,siderToggleButtonBorder:Z,siderToggleBarColor:ne,siderToggleBarColorHover:re}=y,H={"--n-bezier":T,"--n-toggle-button-color":F,"--n-toggle-button-border":Z,"--n-toggle-bar-color":ne,"--n-toggle-bar-color-hover":re};return e.inverted?(H["--n-color"]=y.siderColorInverted,H["--n-text-color"]=y.textColorInverted,H["--n-border-color"]=y.siderBorderColorInverted,H["--n-toggle-button-icon-color"]=y.siderToggleButtonIconColorInverted,H.__invertScrollbar=y.__invertScrollbar):(H["--n-color"]=y.siderColor,H["--n-text-color"]=y.textColor,H["--n-border-color"]=y.siderBorderColor,H["--n-toggle-button-icon-color"]=y.siderToggleButtonIconColor),H}),$=l?et("layout-sider",A(()=>e.inverted?"a":"b"),P,e):void 0;return Object.assign({scrollableElRef:n,scrollbarInstRef:r,mergedClsPrefix:C,mergedTheme:v,styleMaxWidth:a,mergedCollapsed:c,scrollContainerStyle:s,siderPlacement:d,handleNativeElScroll:g,handleTransitionend:k,handleTriggerClick:h,inlineThemeDisabled:l,cssVars:P,themeClass:$==null?void 0:$.themeClass,onRender:$==null?void 0:$.onRender},R)},render(){var e;const{mergedClsPrefix:t,mergedCollapsed:n,showTrigger:r}=this;return(e=this.onRender)===null||e===void 0||e.call(this),S("aside",{class:[`${t}-layout-sider`,this.themeClass,`${t}-layout-sider--${this.position}-positioned`,`${t}-layout-sider--${this.siderPlacement}-placement`,this.bordered&&`${t}-layout-sider--bordered`,n&&`${t}-layout-sider--collapsed`,(!n||this.showCollapsedContent)&&`${t}-layout-sider--show-content`],onTransitionend:this.handleTransitionend,style:[this.inlineThemeDisabled?void 0:this.cssVars,{maxWidth:this.styleMaxWidth,width:ct(this.width)}]},this.nativeScrollbar?S("div",{class:`${t}-layout-sider-scroll-container`,onScroll:this.handleNativeElScroll,style:[this.scrollContainerStyle,{overflow:"auto"},this.contentStyle],ref:"scrollableElRef"},this.$slots):S(yt,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",style:this.scrollContainerStyle,contentStyle:this.contentStyle,theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,builtinThemeOverrides:this.inverted&&this.cssVars.__invertScrollbar==="true"?{colorHover:"rgba(255, 255, 255, .4)",color:"rgba(255, 255, 255, .3)"}:void 0}),this.$slots),r?r==="bar"?S(ur,{clsPrefix:t,style:n?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):S(cr,{clsPrefix:t,style:n?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):null,this.bordered?S("div",{class:`${t}-layout-sider__border`}):null)}}),gr=Object.assign(Object.assign({},fe.props),{trigger:String,xScrollable:Boolean,onScroll:Function}),vr=X({name:"Scrollbar",props:gr,setup(){const e=D(null);return Object.assign(Object.assign({},{scrollTo:(...n)=>{var r;(r=e.value)===null||r===void 0||r.scrollTo(n[0],n[1])},scrollBy:(...n)=>{var r;(r=e.value)===null||r===void 0||r.scrollBy(n[0],n[1])}}),{scrollbarInstRef:e})},render(){return S(yt,Object.assign({ref:"scrollbarInstRef"},this.$props),this.$slots)}}),br=vr,Sn=Le("n-tree-select"),Me=Le("n-tree"),yr=X({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function},setup(e){const{renderSwitcherIconRef:t}=ye(Me,null);return()=>{const{clsPrefix:n}=e;return S("span",{"data-switcher":!0,class:[`${n}-tree-node-switcher`,e.expanded&&`${n}-tree-node-switcher--expanded`,e.hide&&`${n}-tree-node-switcher--hide`],onClick:e.onClick},S("div",{class:`${n}-tree-node-switcher__icon`},S(yo,null,{default:()=>{if(e.loading)return S(po,{clsPrefix:n,key:"loading",radius:85,strokeWidth:20});const{value:r}=t;return r?r({expanded:e.expanded,selected:e.selected}):S(an,{clsPrefix:n,key:"switcher"},{default:()=>S(Vo,null)})}})))}}}),pr=X({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=ye(Me);function n(a){const{onCheck:s}=e;if(s)return s(a)}function r(a){e.indeterminate?n(!1):n(a)}return{handleUpdateValue:r,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:n,indeterminate:r,disabled:a,focusable:s,handleUpdateValue:d}=this;return S("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],"data-checkbox":!0},S(mo,{focusable:s,disabled:a,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:n,indeterminate:r,onUpdateChecked:d}))}}),mr=X({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:n,renderSuffixRef:r,labelFieldRef:a}=ye(Me),s=D(null);function d(c){const{onClick:f}=e;f&&f(c)}function u(c){d(c)}return{selfRef:s,renderLabel:t,renderPrefix:n,renderSuffix:r,labelField:a,handleClick:u}},render(){const{clsPrefix:e,labelField:t,nodeProps:n,checked:r=!1,selected:a=!1,renderLabel:s,renderPrefix:d,renderSuffix:u,handleClick:c,onDragstart:f,tmNode:{rawNode:h,rawNode:{prefix:w,suffix:m,[t]:g}}}=this;return S("span",Object.assign({},n,{ref:"selfRef",class:[`${e}-tree-node-content`,n==null?void 0:n.class],onClick:c,draggable:f===void 0?void 0:!0,onDragstart:f}),d||w?S("div",{class:`${e}-tree-node-content__prefix`},d?d({option:h,selected:a,checked:r}):ut(w)):null,S("div",{class:`${e}-tree-node-content__text`},s?s({option:h,selected:a,checked:r}):ut(g)),u||m?S("div",{class:`${e}-tree-node-content__suffix`},u?u({option:h,selected:a,checked:r}):ut(m)):null)}});function Ut({position:e,offsetLevel:t,indent:n,el:r}){const a={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")a.left=0,a.top=0,a.bottom=0,a.borderRadius="inherit",a.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const s=e==="before"?"top":"bottom";a[s]=0,a.left=`${r.offsetLeft+6-t*n}px`,a.height="2px",a.backgroundColor="var(--n-drop-mark-color)",a.transformOrigin=s,a.borderRadius="1px",a.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return S("div",{style:a})}function kr({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function Cr(e){return A(()=>e.leafOnly?"child":e.checkStrategy)}function ve(e,t){return!!e.rawNode[t]}function wn(e,t,n,r){e==null||e.forEach(a=>{n(a),wn(a[t],t,n,r),r(a)})}function xr(e,t,n,r,a){const s=new Set,d=new Set,u=[];return wn(e,r,c=>{if(u.push(c),a(t,c)){d.add(c[n]);for(let f=u.length-2;f>=0;--f)if(!s.has(u[f][n]))s.add(u[f][n]);else return}},()=>{u.pop()}),{expandedKeys:Array.from(s),highlightKeySet:d}}if(ko&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function _r(e,t,n,r,a){const s=new Set,d=new Set,u=new Set,c=[],f=[],h=[];function w(g){g.forEach(C=>{if(h.push(C),t(n,C)){s.add(C[r]),u.add(C[r]);for(let v=h.length-2;v>=0;--v){const k=h[v][r];if(!d.has(k))d.add(k),s.has(k)&&s.delete(k);else break}}const l=C[a];l&&w(l),h.pop()})}w(e);function m(g,C){g.forEach(l=>{const v=l[r],k=s.has(v),R=d.has(v);if(!k&&!R)return;const P=l[a];if(P)if(k)C.push(l);else{c.push(v);const $=Object.assign(Object.assign({},l),{[a]:[]});C.push($),m(P,$[a])}else C.push(l)})}return m(e,f),{filteredTree:f,highlightKeySet:u,expandedKeys:c}}const Sr=X({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=ye(Me),{droppingNodeParentRef:n,droppingMouseNodeRef:r,draggingNodeRef:a,droppingPositionRef:s,droppingOffsetLevelRef:d,nodePropsRef:u,indentRef:c,blockLineRef:f,checkboxPlacementRef:h,checkOnClickRef:w,disabledFieldRef:m}=t,g=W(()=>!!e.tmNode.rawNode.checkboxDisabled),C=W(()=>ve(e.tmNode,m.value)),l=W(()=>t.disabledRef.value||C.value),v=A(()=>{const{value:p}=u;if(p)return p({option:e.tmNode.rawNode})}),k=D(null),R={value:null};Co(()=>{R.value=k.value.$el});function P(){const{tmNode:p}=e;if(!p.isLeaf&&!p.shallowLoaded){if(!t.loadingKeysRef.value.has(p.key))t.loadingKeysRef.value.add(p.key);else return;const{onLoadRef:{value:K}}=t;K&&K(p.rawNode).then(j=>{j!==!1&&t.handleSwitcherClick(p)}).finally(()=>{t.loadingKeysRef.value.delete(p.key)})}else t.handleSwitcherClick(p)}const $=W(()=>!C.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),T=W(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),y=W(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),F=W(()=>{const{value:p}=T;if(!p)return!1;const{value:K}=w;return typeof K=="boolean"?K:K(e.tmNode.rawNode)});function Z(p){const{value:K}=t.expandOnClickRef,{value:j}=$,{value:Se}=F;if(!j&&!K&&!Se||zt(p,"checkbox")||zt(p,"switcher"))return;const{tmNode:Ue}=e;j&&t.handleSelect(Ue),K&&!Ue.isLeaf&&P(),Se&&H(!y.value)}function ne(p){var K,j;f.value||(l.value||Z(p),(j=(K=v.value)===null||K===void 0?void 0:K.onClick)===null||j===void 0||j.call(K,p))}function re(p){var K,j;f.value&&(l.value||Z(p),(j=(K=v.value)===null||K===void 0?void 0:K.onClick)===null||j===void 0||j.call(K,p))}function H(p){t.handleCheck(e.tmNode,p)}function _e(p){t.handleDragStart({event:p,node:e.tmNode})}function Ke(p){p.currentTarget===p.target&&t.handleDragEnter({event:p,node:e.tmNode})}function Q(p){p.preventDefault(),t.handleDragOver({event:p,node:e.tmNode})}function ae(p){t.handleDragEnd({event:p,node:e.tmNode})}function le(p){p.currentTarget===p.target&&t.handleDragLeave({event:p,node:e.tmNode})}function Fe(p){p.preventDefault(),s.value!==null&&t.handleDrop({event:p,node:e.tmNode,dropPosition:s.value})}return{showDropMark:W(()=>{const{value:p}=a;if(!p)return;const{value:K}=s;if(!K)return;const{value:j}=r;if(!j)return;const{tmNode:Se}=e;return Se.key===j.key}),showDropMarkAsParent:W(()=>{const{value:p}=n;if(!p)return!1;const{tmNode:K}=e,{value:j}=s;return j==="before"||j==="after"?p.key===K.key:!1}),pending:W(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:W(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:W(()=>{var p;return(p=t.highlightKeySetRef.value)===null||p===void 0?void 0:p.has(e.tmNode.key)}),checked:y,indeterminate:W(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:W(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:W(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:l,checkable:T,mergedCheckOnClick:F,checkboxDisabled:g,selectable:$,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:f,nodeProps:v,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:s,droppingOffsetLevel:d,indent:c,checkboxPlacement:h,contentInstRef:k,contentElRef:R,handleCheck:H,handleDrop:Fe,handleDragStart:_e,handleDragEnter:Ke,handleDragOver:Q,handleDragEnd:ae,handleDragLeave:le,handleLineClick:re,handleContentClick:ne,handleSwitcherClick:P}},render(){const{tmNode:e,clsPrefix:t,checkable:n,expandOnClick:r,selectable:a,selected:s,checked:d,highlight:u,draggable:c,blockLine:f,indent:h,disabled:w,pending:m,internalScrollable:g,nodeProps:C,checkboxPlacement:l}=this,v=c&&!w?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,k=g?pn(e.key):void 0,R=l==="right",P=n?S(pr,{right:R,focusable:this.checkboxFocusable,disabled:w||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return S("div",Object.assign({class:`${t}-tree-node-wrapper`},v),S("div",Object.assign({},f?C:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:s,[`${t}-tree-node--checkable`]:n,[`${t}-tree-node--highlight`]:u,[`${t}-tree-node--pending`]:m,[`${t}-tree-node--disabled`]:w,[`${t}-tree-node--selectable`]:a,[`${t}-tree-node--clickable`]:a||r||this.mergedCheckOnClick},C==null?void 0:C.class],"data-key":k,draggable:c&&f,onClick:this.handleLineClick,onDragstart:c&&f&&!w?this.handleDragStart:void 0}),xo(e.level,S("div",{class:`${t}-tree-node-indent`},S("div",{style:{width:`${h}px`}}))),S(yr,{clsPrefix:t,expanded:this.expanded,selected:s,loading:this.loading,hide:e.isLeaf,onClick:this.handleSwitcherClick}),R?null:P,S(mr,{ref:"contentInstRef",clsPrefix:t,checked:d,selected:s,onClick:this.handleContentClick,nodeProps:f?void 0:C,onDragstart:c&&!f&&!w?this.handleDragStart:void 0,tmNode:e}),c?this.showDropMark?Ut({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:h}):this.showDropMarkAsParent?Ut({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:h}):null:null,R?P:null))}}),Rn=Sr;function wr({props:e,fNodesRef:t,mergedExpandedKeysRef:n,mergedSelectedKeysRef:r,handleSelect:a,handleSwitcherClick:s}){const{value:d}=r,u=ye(Sn,null),c=u?u.pendingNodeKeyRef:D(d.length?d[d.length-1]:null);function f(h){if(!e.keyboard)return;const{value:w}=c;if(w===null){if((h.key==="ArrowDown"||h.key==="ArrowUp")&&h.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(h.key)&&w===null){const{value:m}=t;let g=0;for(;g<m.length;){if(!m[g].disabled){c.value=m[g].key;break}g+=1}}}else{const{value:m}=t;let g=m.findIndex(C=>C.key===w);if(!~g)return;if(h.key==="Enter")a(m[g]);else if(h.key==="ArrowDown")for(h.preventDefault(),g+=1;g<m.length;){if(!m[g].disabled){c.value=m[g].key;break}g+=1}else if(h.key==="ArrowUp")for(h.preventDefault(),g-=1;g>=0;){if(!m[g].disabled){c.value=m[g].key;break}g-=1}else if(h.key==="ArrowLeft"){const C=m[g];if(C.isLeaf||!n.value.includes(w)){const l=C.getParent();l&&(c.value=l.key)}else s(C)}else if(h.key==="ArrowRight"){const C=m[g];if(C.isLeaf)return;if(!n.value.includes(w))s(C);else for(g+=1;g<m.length;){if(!m[g].disabled){c.value=m[g].key;break}g+=1}}}}return{pendingNodeKeyRef:c,handleKeydown:f}}const Rr=X({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return S(So,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>S("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:_o(this.height)}},this.nodes.map(t=>S(Rn,{clsPrefix:e,tmNode:t})))})}}),$r=N("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[J("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),J(">",[N("tree-node",[J("&:first-child",{marginTop:0})])]),N("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 height: 0;
 `),N("tree-motion-wrapper",[I("expand",[Lt({duration:"0.2s"})]),I("collapse",[Lt({duration:"0.2s",reverse:!0})])]),N("tree-node-wrapper",`
 box-sizing: border-box;
 padding: 3px 0;
 `),N("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[I("highlight",[N("tree-node-content",[B("text",{borderBottomColor:"var(--n-node-text-color-disabled)"})])]),I("disabled",[N("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),ke("disabled",[I("clickable",[N("tree-node-content",`
 cursor: pointer;
 `)])])]),I("block-node",[N("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),ke("block-line",[N("tree-node",[ke("disabled",[N("tree-node-content",[J("&:hover",{backgroundColor:"var(--n-node-color-hover)"})]),I("selectable",[N("tree-node-content",[J("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),I("pending",[N("tree-node-content",`
 background-color: var(--n-node-color-hover);
 `)]),I("selected",[N("tree-node-content",{backgroundColor:"var(--n-node-color-active)"})])])])]),I("block-line",[N("tree-node",[ke("disabled",[J("&:hover",{backgroundColor:"var(--n-node-color-hover)"}),I("pending",`
 background-color: var(--n-node-color-hover);
 `),I("selectable",[ke("selected",[J("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),I("selected",{backgroundColor:"var(--n-node-color-active)"})]),I("disabled",`
 cursor: not-allowed;
 `)])]),N("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: 24px;
 width: 24px;
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[B("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[N("icon",[ft()]),N("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[ft()]),N("base-icon",[ft()])]),I("hide",{visibility:"hidden"}),I("expanded",{transform:"rotate(90deg)"})]),N("tree-node-checkbox",`
 display: inline-flex;
 height: 24px;
 width: 16px;
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 margin-right: 4px;
 `,[I("right","margin-left: 4px;")]),I("checkable",[N("tree-node-content",`
 padding: 0 6px;
 `)]),N("tree-node-content",`
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: 24px;
 box-sizing: border-box;
 line-height: 1.5;
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 text-decoration-color: #0000;
 text-decoration-line: underline;
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[J("&:last-child",{marginBottom:0}),B("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),B("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),B("suffix",`
 display: inline-flex;
 `)]),B("empty","margin: auto;")]);var Tr=globalThis&&globalThis.__awaiter||function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(d){d(s)})}return new(n||(n=Promise))(function(s,d){function u(h){try{f(r.next(h))}catch(w){d(w)}}function c(h){try{f(r.throw(h))}catch(w){d(w)}}function f(h){h.done?s(h.value):a(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Xe=30;function Nr(e,t,n,r){return{getIsGroup(){return!1},getKey(s){return s[e]},getChildren:r||(s=>s[t]),getDisabled(s){return!!(s[n]||s.checkboxDisabled)}}}const Dr={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},Pr=Object.assign(Object.assign(Object.assign(Object.assign({},fe.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},indent:{type:Number,default:16},allowDrop:{type:Function,default:kr},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Dr),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Ir=X({name:"Tree",props:Pr,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n,mergedRtlRef:r}=je(e),a=on("Tree",r,t),s=fe("Tree","-tree",$r,wo,e,t),d=D(null),u=D(null),c=D(null);function f(){var o;return(o=c.value)===null||o===void 0?void 0:o.listElRef}function h(){var o;return(o=c.value)===null||o===void 0?void 0:o.itemsElRef}const w=A(()=>{const{filter:o}=e;if(o)return o;const{labelField:i}=e;return(b,x)=>{if(!b.length)return!0;const _=x[i];return typeof _=="string"?_.toLowerCase().includes(b.toLowerCase()):!1}}),m=A(()=>{const{pattern:o}=e;return o?!o.length||!w.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:_r(e.data,w.value,o,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),g=A(()=>Ro(e.showIrrelevantNodes?e.data:m.value.filteredTree,Nr(e.keyField,e.childrenField,e.disabledField,e.getChildren))),C=ye(Sn,null),l=e.internalTreeSelect?C.dataTreeMate:g,{watchProps:v}=e,k=D([]);v!=null&&v.includes("defaultCheckedKeys")?Ae(()=>{k.value=e.defaultCheckedKeys}):k.value=e.defaultCheckedKeys;const R=O(e,"checkedKeys"),P=xe(R,k),$=A(()=>l.value.getCheckedKeys(P.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),T=Cr(e),y=A(()=>$.value.checkedKeys),F=A(()=>{const{indeterminateKeys:o}=e;return o!==void 0?o:$.value.indeterminateKeys}),Z=D([]);v!=null&&v.includes("defaultSelectedKeys")?Ae(()=>{Z.value=e.defaultSelectedKeys}):Z.value=e.defaultSelectedKeys;const ne=O(e,"selectedKeys"),re=xe(ne,Z),H=D([]),_e=o=>{H.value=e.defaultExpandAll?l.value.getNonLeafKeys():o===void 0?e.defaultExpandedKeys:o};v!=null&&v.includes("defaultExpandedKeys")?Ae(()=>_e(void 0)):Ae(()=>_e(e.defaultExpandedKeys));const Ke=O(e,"expandedKeys"),Q=xe(Ke,H),ae=A(()=>g.value.getFlattenedNodes(Q.value)),{pendingNodeKeyRef:le,handleKeydown:Fe}=wr({props:e,mergedSelectedKeysRef:re,fNodesRef:ae,mergedExpandedKeysRef:Q,handleSelect:it,handleSwitcherClick:Dt});let p=null,K=null;const j=D(new Set),Se=A(()=>e.internalHighlightKeySet||m.value.highlightKeySet),Ue=xe(Se,j),He=D(new Set),Bn=A(()=>Q.value.filter(o=>!He.value.has(o)));let Rt=0;const Oe=D(null),Ve=D(null),Ge=D(null),qe=D(null),Ye=D(0),En=A(()=>{const{value:o}=Ve;return o?o.parent:null});be(O(e,"data"),()=>{He.value.clear(),le.value=null,Ee()},{deep:!1});let rt=!1;const at=()=>{rt=!0,ce(()=>{rt=!1})};let Be;be(O(e,"pattern"),(o,i)=>{if(e.showIrrelevantNodes)if(Be=void 0,o){const{expandedKeys:b,highlightKeySet:x}=xr(e.data,e.pattern,e.keyField,e.childrenField,w.value);j.value=x,at(),Re(b,te(b),{node:null,action:"filter"})}else j.value=new Set;else if(!o.length)Be!==void 0&&(at(),Re(Be,te(Be),{node:null,action:"filter"}));else{i.length||(Be=Q.value);const{expandedKeys:b}=m.value;b!==void 0&&(at(),Re(b,te(b),{node:null,action:"filter"}))}});function $t(o){return Tr(this,void 0,void 0,function*(){const{onLoad:i}=e;if(!i)return yield Promise.resolve();const{value:b}=He;if(!b.has(o.key)){b.add(o.key);try{(yield i(o.rawNode))===!1&&$e()}catch(x){console.error(x),$e()}b.delete(o.key)}})}Ae(()=>{var o;const{value:i}=g;if(!i)return;const{getNode:b}=i;(o=Q.value)===null||o===void 0||o.forEach(x=>{const _=b(x);_&&!_.shallowLoaded&&$t(_)})});const we=D(!1),he=D([]);be(Bn,(o,i)=>{if(!e.animated||rt){ce(We);return}const b=new Set(i);let x=null,_=null;for(const U of o)if(!b.has(U)){if(x!==null)return;x=U}const q=new Set(o);for(const U of i)if(!q.has(U)){if(_!==null)return;_=U}if(x===null&&_===null)return;const{virtualScroll:V}=e,de=(V?c.value.listElRef:d.value).offsetHeight,me=Math.ceil(de/Xe)+1;let ie;if(x!==null&&(ie=i),_!==null&&(ie===void 0?ie=o:ie=ie.filter(U=>U!==_)),we.value=!0,he.value=g.value.getFlattenedNodes(ie),x!==null){const U=he.value.findIndex(Y=>Y.key===x);if(~U){const Y=he.value[U].children;if(Y){const ge=jt(Y,o);he.value.splice(U+1,0,{__motion:!0,mode:"expand",height:V?ge.length*Xe:void 0,nodes:V?ge.slice(0,me):ge})}}}if(_!==null){const U=he.value.findIndex(Y=>Y.key===_);if(~U){const Y=he.value[U].children;if(!Y)return;we.value=!0;const ge=jt(Y,o);he.value.splice(U+1,0,{__motion:!0,mode:"collapse",height:V?ge.length*Xe:void 0,nodes:V?ge.slice(0,me):ge})}}});const An=A(()=>$o(ae.value)),zn=A(()=>we.value?he.value:ae.value);function We(){const{value:o}=u;o&&o.sync()}function Ln(){we.value=!1,e.virtualScroll&&ce(We)}function te(o){const{getNode:i}=l.value;return o.map(b=>{var x;return((x=i(b))===null||x===void 0?void 0:x.rawNode)||null})}function Re(o,i,b){const{"onUpdate:expandedKeys":x,onUpdateExpandedKeys:_}=e;H.value=o,x&&L(x,o,i,b),_&&L(_,o,i,b)}function Tt(o,i,b){const{"onUpdate:checkedKeys":x,onUpdateCheckedKeys:_}=e;k.value=o,_&&L(_,o,i,b),x&&L(x,o,i,b)}function jn(o,i){const{"onUpdate:indeterminateKeys":b,onUpdateIndeterminateKeys:x}=e;b&&L(b,o,i),x&&L(x,o,i)}function lt(o,i,b){const{"onUpdate:selectedKeys":x,onUpdateSelectedKeys:_}=e;Z.value=o,_&&L(_,o,i,b),x&&L(x,o,i,b)}function Mn(o){const{onDragenter:i}=e;i&&L(i,o)}function Un(o){const{onDragleave:i}=e;i&&L(i,o)}function Hn(o){const{onDragend:i}=e;i&&L(i,o)}function Vn(o){const{onDragstart:i}=e;i&&L(i,o)}function Gn(o){const{onDragover:i}=e;i&&L(i,o)}function qn(o){const{onDrop:i}=e;i&&L(i,o)}function Ee(){Yn(),pe()}function Yn(){Oe.value=null}function pe(){Ye.value=0,Ve.value=null,Ge.value=null,qe.value=null,$e()}function $e(){p&&(window.clearTimeout(p),p=null),K=null}function Nt(o,i){if(e.disabled||ve(o,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){it(o);return}const b=i?"check":"uncheck",{checkedKeys:x,indeterminateKeys:_}=l.value[b](o.key,y.value,{cascade:e.cascade,checkStrategy:T.value,allowNotLoaded:e.allowCheckingNotLoaded});Tt(x,te(x),{node:o.rawNode,action:b}),jn(_,te(_))}function Wn(o){if(e.disabled)return;const{key:i}=o,{value:b}=Q,x=b.findIndex(_=>_===i);if(~x){const _=Array.from(b);_.splice(x,1),Re(_,te(_),{node:o.rawNode,action:"collapse"})}else{const _=g.value.getNode(i);if(!_||_.isLeaf)return;let q;if(e.accordion){const V=new Set(o.siblings.map(({key:de})=>de));q=b.filter(de=>!V.has(de)),q.push(i)}else q=b.concat(i);Re(q,te(q),{node:o.rawNode,action:"expand"})}}function Dt(o){e.disabled||we.value||Wn(o)}function it(o){if(!(e.disabled||!e.selectable)){if(le.value=o.key,e.internalUnifySelectCheck){const{value:{checkedKeys:i,indeterminateKeys:b}}=$;e.multiple?Nt(o,!(i.includes(o.key)||b.includes(o.key))):Tt([o.key],te([o.key]),{node:o.rawNode,action:"check"})}if(e.multiple){const i=Array.from(re.value),b=i.findIndex(x=>x===o.key);~b?e.cancelable&&i.splice(b,1):~b||i.push(o.key),lt(i,te(i),{node:o.rawNode,action:~b?"unselect":"select"})}else re.value.includes(o.key)?e.cancelable&&lt([],[],{node:o.rawNode,action:"unselect"}):lt([o.key],te([o.key]),{node:o.rawNode,action:"select"})}}function Jn(o){if(p&&(window.clearTimeout(p),p=null),o.isLeaf)return;K=o.key;const i=()=>{if(K!==o.key)return;const{value:b}=Ge;if(b&&b.key===o.key&&!Q.value.includes(o.key)){const x=Q.value.concat(o.key);Re(x,te(x),{node:o.rawNode,action:"expand"})}p=null,K=null};o.shallowLoaded?p=window.setTimeout(()=>{i()},1e3):p=window.setTimeout(()=>{$t(o).then(()=>{i()})},1e3)}function Xn({event:o,node:i}){!e.draggable||e.disabled||ve(i,e.disabledField)||(Pt({event:o,node:i},!1),Mn({event:o,node:i.rawNode}))}function Zn({event:o,node:i}){!e.draggable||e.disabled||ve(i,e.disabledField)||Un({event:o,node:i.rawNode})}function Qn(o){o.target===o.currentTarget&&pe()}function eo({event:o,node:i}){Ee(),!(!e.draggable||e.disabled||ve(i,e.disabledField))&&Hn({event:o,node:i.rawNode})}function to({event:o,node:i}){!e.draggable||e.disabled||ve(i,e.disabledField)||(Rt=o.clientX,Oe.value=i,Vn({event:o,node:i.rawNode}))}function Pt({event:o,node:i},b=!0){var x;if(!e.draggable||e.disabled||ve(i,e.disabledField))return;const{value:_}=Oe;if(!_)return;const{allowDrop:q,indent:V}=e;b&&Gn({event:o,node:i.rawNode});const de=o.currentTarget,{height:me,top:ie}=de.getBoundingClientRect(),U=o.clientY-ie;let Y;q({node:i.rawNode,dropPosition:"inside",phase:"drag"})?U<=8?Y="before":U>=me-8?Y="after":Y="inside":U<=me/2?Y="before":Y="after";const{value:so}=An;let E,ee;const st=so(i.key);if(st===null){pe();return}let Kt=!1;Y==="inside"?(E=i,ee="inside"):Y==="before"?i.isFirstChild?(E=i,ee="before"):(E=ae.value[st-1],ee="after"):(E=i,ee="after"),!E.isLeaf&&Q.value.includes(E.key)&&(Kt=!0,ee==="after"&&(E=ae.value[st+1],E?ee="before":(E=i,ee="inside")));const Ft=E;if(Ge.value=Ft,!Kt&&_.isLastChild&&_.key===E.key&&(ee="after"),ee==="after"){let Ot=Rt-o.clientX,dt=0;for(;Ot>=V/2&&E.parent!==null&&E.isLastChild&&dt<1;)Ot-=V,dt+=1,E=E.parent;Ye.value=dt}else Ye.value=0;if((_.contains(E)||ee==="inside"&&((x=_.parent)===null||x===void 0?void 0:x.key)===E.key)&&!(_.key===Ft.key&&_.key===E.key)){pe();return}if(!q({node:E.rawNode,dropPosition:ee,phase:"drag"})){pe();return}if(_.key===E.key)$e();else if(K!==E.key)if(ee==="inside"){if(e.expandOnDragenter){if(Jn(E),!E.shallowLoaded&&K!==E.key){Ee();return}}else if(!E.shallowLoaded){Ee();return}}else $e();else ee!=="inside"&&$e();qe.value=ee,Ve.value=E}function no({event:o,node:i,dropPosition:b}){if(!e.draggable||e.disabled||ve(i,e.disabledField))return;const{value:x}=Oe,{value:_}=Ve,{value:q}=qe;if(!(!x||!_||!q)&&e.allowDrop({node:_.rawNode,dropPosition:q,phase:"drag"})&&x.key!==_.key){if(q==="before"){const V=x.getNext({includeDisabled:!0});if(V&&V.key===_.key){pe();return}}if(q==="after"){const V=x.getPrev({includeDisabled:!0});if(V&&V.key===_.key){pe();return}}qn({event:o,node:_.rawNode,dragNode:x.rawNode,dropPosition:b}),Ee()}}function oo(){We()}function ro(){We()}function ao(o){var i;if(e.virtualScroll||e.internalScrollable){const{value:b}=u;if(!((i=b==null?void 0:b.containerRef)===null||i===void 0)&&i.contains(o.relatedTarget))return;le.value=null}else{const{value:b}=d;if(b!=null&&b.contains(o.relatedTarget))return;le.value=null}}be(le,o=>{var i,b;if(o!==null){if(e.virtualScroll)(i=c.value)===null||i===void 0||i.scrollTo({key:o});else if(e.internalScrollable){const{value:x}=u;if(x===null)return;const _=(b=x.contentRef)===null||b===void 0?void 0:b.querySelector(`[data-key="${pn(o)}"]`);if(!_)return;x.scrollTo({el:_})}}}),Qe(Me,{loadingKeysRef:He,highlightKeySetRef:Ue,displayedCheckedKeysRef:y,displayedIndeterminateKeysRef:F,mergedSelectedKeysRef:re,mergedExpandedKeysRef:Q,mergedThemeRef:s,mergedCheckStrategyRef:T,nodePropsRef:O(e,"nodeProps"),disabledRef:O(e,"disabled"),checkableRef:O(e,"checkable"),selectableRef:O(e,"selectable"),expandOnClickRef:O(e,"expandOnClick"),onLoadRef:O(e,"onLoad"),draggableRef:O(e,"draggable"),blockLineRef:O(e,"blockLine"),indentRef:O(e,"indent"),cascadeRef:O(e,"cascade"),checkOnClickRef:O(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Ge,droppingNodeParentRef:En,draggingNodeRef:Oe,droppingPositionRef:qe,droppingOffsetLevelRef:Ye,fNodesRef:ae,pendingNodeKeyRef:le,disabledFieldRef:O(e,"disabledField"),internalScrollableRef:O(e,"internalScrollable"),internalCheckboxFocusableRef:O(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:O(e,"renderLabel"),renderPrefixRef:O(e,"renderPrefix"),renderSuffixRef:O(e,"renderSuffix"),renderSwitcherIconRef:O(e,"renderSwitcherIcon"),labelFieldRef:O(e,"labelField"),multipleRef:O(e,"multiple"),handleSwitcherClick:Dt,handleDragEnd:eo,handleDragEnter:Xn,handleDragLeave:Zn,handleDragStart:to,handleDrop:no,handleDragOver:Pt,handleSelect:it,handleCheck:Nt});function lo(o){var i;(i=c.value)===null||i===void 0||i.scrollTo(o)}const io={handleKeydown:Fe,scrollTo:lo,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:o}=$.value;return{keys:o,options:te(o)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:o}=$.value;return{keys:o,options:te(o)}}},It=A(()=>{const{common:{cubicBezierEaseInOut:o},self:{fontSize:i,nodeBorderRadius:b,nodeColorHover:x,nodeColorPressed:_,nodeColorActive:q,arrowColor:V,loadingColor:de,nodeTextColor:me,nodeTextColorDisabled:ie,dropMarkColor:U}}=s.value;return{"--n-arrow-color":V,"--n-loading-color":de,"--n-bezier":o,"--n-font-size":i,"--n-node-border-radius":b,"--n-node-color-active":q,"--n-node-color-hover":x,"--n-node-color-pressed":_,"--n-node-text-color":me,"--n-node-text-color-disabled":ie,"--n-drop-mark-color":U}}),Te=n?et("tree",void 0,It,e):void 0;return Object.assign(Object.assign({},io),{mergedClsPrefix:t,mergedTheme:s,rtlEnabled:a,fNodes:zn,aip:we,selfElRef:d,virtualListInstRef:c,scrollbarInstRef:u,handleFocusout:ao,handleDragLeaveTree:Qn,handleScroll:oo,getScrollContainer:f,getScrollContent:h,handleAfterEnter:Ln,handleResize:ro,cssVars:n?void 0:It,themeClass:Te==null?void 0:Te.themeClass,onRender:Te==null?void 0:Te.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:n}=this;if(!t.length&&n)return n();const{mergedClsPrefix:r,blockNode:a,blockLine:s,draggable:d,disabled:u,internalFocusable:c,checkable:f,handleKeydown:h,rtlEnabled:w,handleFocusout:m}=this,g=c&&!u,C=g?"0":void 0,l=[`${r}-tree`,w&&`${r}-tree--rtl`,f&&`${r}-tree--checkable`,(s||a)&&`${r}-tree--block-node`,s&&`${r}-tree--block-line`],v=R=>"__motion"in R?S(Rr,{height:R.height,nodes:R.nodes,clsPrefix:r,mode:R.mode,onAfterEnter:this.handleAfterEnter}):S(Rn,{key:R.key,tmNode:R,clsPrefix:r});if(this.virtualScroll){const{mergedTheme:R,internalScrollablePadding:P}=this,$=To(P||"0");return S(Mt,{ref:"scrollbarInstRef",onDragleave:d?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:l,theme:R.peers.Scrollbar,themeOverrides:R.peerOverrides.Scrollbar,tabindex:C,onKeydown:g?h:void 0,onFocusout:g?m:void 0},{default:()=>{var T;return(T=this.onRender)===null||T===void 0||T.call(this),S(No,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Xe,ignoreItemResize:this.aip,paddingTop:$.top,paddingBottom:$.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:$.left,paddingRight:$.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:y})=>v(y)})}})}const{internalScrollable:k}=this;return l.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),k?S(Mt,{class:l,tabindex:C,onKeydown:g?h:void 0,onFocusout:g?m:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}},{default:()=>S("div",{onDragleave:d?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(v))}):S("div",{class:l,tabindex:C,ref:"selfElRef",style:this.cssVars,onKeydown:g?h:void 0,onFocusout:g?m:void 0,onDragleave:d?this.handleDragLeaveTree:void 0},t.length?t.map(v):Do(this.$slots.empty,()=>[S(Po,{class:`${r}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}});var Kr=Array.isArray,mt=Kr,Fr=typeof Je=="object"&&Je&&Je.Object===Object&&Je,Or=Fr,Br=Or,Er=typeof self=="object"&&self&&self.Object===Object&&self,Ar=Br||Er||Function("return this")(),kt=Ar,zr=kt,Lr=zr.Symbol,Ct=Lr,Ht=Ct,$n=Object.prototype,jr=$n.hasOwnProperty,Mr=$n.toString,ze=Ht?Ht.toStringTag:void 0;function Ur(e){var t=jr.call(e,ze),n=e[ze];try{e[ze]=void 0;var r=!0}catch{}var a=Mr.call(e);return r&&(t?e[ze]=n:delete e[ze]),a}var Hr=Ur,Vr=Object.prototype,Gr=Vr.toString;function qr(e){return Gr.call(e)}var Yr=qr,Vt=Ct,Wr=Hr,Jr=Yr,Xr="[object Null]",Zr="[object Undefined]",Gt=Vt?Vt.toStringTag:void 0;function Qr(e){return e==null?e===void 0?Zr:Xr:Gt&&Gt in Object(e)?Wr(e):Jr(e)}var Tn=Qr;function ea(e){return e!=null&&typeof e=="object"}var ta=ea,na=Tn,oa=ta,ra="[object Symbol]";function aa(e){return typeof e=="symbol"||oa(e)&&na(e)==ra}var xt=aa,la=mt,ia=xt,sa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,da=/^\w*$/;function ca(e,t){if(la(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ia(e)?!0:da.test(e)||!sa.test(e)||t!=null&&e in Object(t)}var ua=ca;function fa(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _t=fa,ha=Tn,ga=_t,va="[object AsyncFunction]",ba="[object Function]",ya="[object GeneratorFunction]",pa="[object Proxy]";function ma(e){if(!ga(e))return!1;var t=ha(e);return t==ba||t==ya||t==va||t==pa}var ka=ma,Ca=kt,xa=Ca["__core-js_shared__"],_a=xa,gt=_a,qt=function(){var e=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Sa(e){return!!qt&&qt in e}var wa=Sa,Ra=Function.prototype,$a=Ra.toString;function Ta(e){if(e!=null){try{return $a.call(e)}catch{}try{return e+""}catch{}}return""}var Na=Ta,Da=ka,Pa=wa,Ia=_t,Ka=Na,Fa=/[\\^$.*+?()[\]{}|]/g,Oa=/^\[object .+?Constructor\]$/,Ba=Function.prototype,Ea=Object.prototype,Aa=Ba.toString,za=Ea.hasOwnProperty,La=RegExp("^"+Aa.call(za).replace(Fa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ja(e){if(!Ia(e)||Pa(e))return!1;var t=Da(e)?La:Oa;return t.test(Ka(e))}var Ma=ja;function Ua(e,t){return e==null?void 0:e[t]}var Ha=Ua,Va=Ma,Ga=Ha;function qa(e,t){var n=Ga(e,t);return Va(n)?n:void 0}var St=qa,Ya=St,Wa=Ya(Object,"create"),tt=Wa,Yt=tt;function Ja(){this.__data__=Yt?Yt(null):{},this.size=0}var Xa=Ja;function Za(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Qa=Za,el=tt,tl="__lodash_hash_undefined__",nl=Object.prototype,ol=nl.hasOwnProperty;function rl(e){var t=this.__data__;if(el){var n=t[e];return n===tl?void 0:n}return ol.call(t,e)?t[e]:void 0}var al=rl,ll=tt,il=Object.prototype,sl=il.hasOwnProperty;function dl(e){var t=this.__data__;return ll?t[e]!==void 0:sl.call(t,e)}var cl=dl,ul=tt,fl="__lodash_hash_undefined__";function hl(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ul&&t===void 0?fl:t,this}var gl=hl,vl=Xa,bl=Qa,yl=al,pl=cl,ml=gl;function De(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}De.prototype.clear=vl;De.prototype.delete=bl;De.prototype.get=yl;De.prototype.has=pl;De.prototype.set=ml;var kl=De;function Cl(){this.__data__=[],this.size=0}var xl=Cl;function _l(e,t){return e===t||e!==e&&t!==t}var Nn=_l,Sl=Nn;function wl(e,t){for(var n=e.length;n--;)if(Sl(e[n][0],t))return n;return-1}var nt=wl,Rl=nt,$l=Array.prototype,Tl=$l.splice;function Nl(e){var t=this.__data__,n=Rl(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Tl.call(t,n,1),--this.size,!0}var Dl=Nl,Pl=nt;function Il(e){var t=this.__data__,n=Pl(t,e);return n<0?void 0:t[n][1]}var Kl=Il,Fl=nt;function Ol(e){return Fl(this.__data__,e)>-1}var Bl=Ol,El=nt;function Al(e,t){var n=this.__data__,r=El(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var zl=Al,Ll=xl,jl=Dl,Ml=Kl,Ul=Bl,Hl=zl;function Pe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pe.prototype.clear=Ll;Pe.prototype.delete=jl;Pe.prototype.get=Ml;Pe.prototype.has=Ul;Pe.prototype.set=Hl;var Vl=Pe,Gl=St,ql=kt,Yl=Gl(ql,"Map"),Wl=Yl,Wt=kl,Jl=Vl,Xl=Wl;function Zl(){this.size=0,this.__data__={hash:new Wt,map:new(Xl||Jl),string:new Wt}}var Ql=Zl;function ei(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ti=ei,ni=ti;function oi(e,t){var n=e.__data__;return ni(t)?n[typeof t=="string"?"string":"hash"]:n.map}var ot=oi,ri=ot;function ai(e){var t=ri(this,e).delete(e);return this.size-=t?1:0,t}var li=ai,ii=ot;function si(e){return ii(this,e).get(e)}var di=si,ci=ot;function ui(e){return ci(this,e).has(e)}var fi=ui,hi=ot;function gi(e,t){var n=hi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var vi=gi,bi=Ql,yi=li,pi=di,mi=fi,ki=vi;function Ie(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ie.prototype.clear=bi;Ie.prototype.delete=yi;Ie.prototype.get=pi;Ie.prototype.has=mi;Ie.prototype.set=ki;var Ci=Ie,Dn=Ci,xi="Expected a function";function wt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(xi);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var d=e.apply(this,r);return n.cache=s.set(a,d)||s,d};return n.cache=new(wt.Cache||Dn),n}wt.Cache=Dn;var _i=wt,Si=_i,wi=500;function Ri(e){var t=Si(e,function(r){return n.size===wi&&n.clear(),r}),n=t.cache;return t}var $i=Ri,Ti=$i,Ni=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Di=/\\(\\)?/g,Pi=Ti(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ni,function(n,r,a,s){t.push(a?s.replace(Di,"$1"):r||n)}),t}),Ii=Pi;function Ki(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var Fi=Ki,Jt=Ct,Oi=Fi,Bi=mt,Ei=xt,Ai=1/0,Xt=Jt?Jt.prototype:void 0,Zt=Xt?Xt.toString:void 0;function Pn(e){if(typeof e=="string")return e;if(Bi(e))return Oi(e,Pn)+"";if(Ei(e))return Zt?Zt.call(e):"";var t=e+"";return t=="0"&&1/e==-Ai?"-0":t}var zi=Pn,Li=zi;function ji(e){return e==null?"":Li(e)}var Mi=ji,Ui=mt,Hi=ua,Vi=Ii,Gi=Mi;function qi(e,t){return Ui(e)?e:Hi(e,t)?[e]:Vi(Gi(e))}var In=qi,Yi=xt,Wi=1/0;function Ji(e){if(typeof e=="string"||Yi(e))return e;var t=e+"";return t=="0"&&1/e==-Wi?"-0":t}var Kn=Ji,Xi=In,Zi=Kn;function Qi(e,t){t=Xi(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Zi(t[n++])];return n&&n==r?e:void 0}var es=Qi,ts=es;function ns(e,t,n){var r=e==null?void 0:ts(e,t);return r===void 0?n:r}var os=ns;const rs=ln(os);var as=St,ls=function(){try{var e=as(Object,"defineProperty");return e({},"",{}),e}catch{}}(),is=ls,Qt=is;function ss(e,t,n){t=="__proto__"&&Qt?Qt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var ds=ss,cs=ds,us=Nn,fs=Object.prototype,hs=fs.hasOwnProperty;function gs(e,t,n){var r=e[t];(!(hs.call(e,t)&&us(r,n))||n===void 0&&!(t in e))&&cs(e,t,n)}var vs=gs,bs=9007199254740991,ys=/^(?:0|[1-9]\d*)$/;function ps(e,t){var n=typeof e;return t=t??bs,!!t&&(n=="number"||n!="symbol"&&ys.test(e))&&e>-1&&e%1==0&&e<t}var ms=ps,ks=vs,Cs=In,xs=ms,en=_t,_s=Kn;function Ss(e,t,n,r){if(!en(e))return e;t=Cs(t,e);for(var a=-1,s=t.length,d=s-1,u=e;u!=null&&++a<s;){var c=_s(t[a]),f=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(a!=d){var h=u[c];f=r?r(h,c,u):void 0,f===void 0&&(f=en(h)?h:xs(t[a+1])?[]:{})}ks(u,c,f),u=u[c]}return e}var ws=Ss,Rs=ws;function $s(e,t,n){return e==null?e:Rs(e,t,n)}var Ts=$s;const Ns=ln(Ts),Ds=X({name:"BatchTranslateItem",props:{dirItem:{type:Object,required:!0},filePathArr:{type:Array,default(){return[]}},translatePath:{type:String,default:""}},emits:["saveChanged"],setup(e,{emit:t}){const{dirItem:n,filePathArr:r,translatePath:a}=sn(e),s=()=>{let l=null;const v=(k,R,P=0)=>{const $=R[P];if(k)for(let T=0;T<k.length;T++){const y=k[T];if(y.label===$&&P===R.length-1)throw l=y,new Error("item found");y.children&&v(y.children,R,P+1)}};try{v(n.value.children,r.value)}catch{}return l},d=A(()=>s()),u=dn(null),c=D(null),f=D(!1),h=D(!1),w=()=>{const l=rs(u.value,a.value,null);return Array.isArray(l)?(h.value=!0,JSON.stringify(l,null,2)):(h.value=!1,l)},m=(l=c.value)=>{h.value&&l&&(l=JSON.parse(l)),Ns(u.value,a.value,l)};be(d,async l=>{if(!l){u.value=null,c.value=null,h.value=!1,ce(()=>{f.value=!1});return}const v=await l.entry.getFile(),k=await cn(v);u.value=JSON.parse(k),c.value=w(),ce(()=>{f.value=!1})},{immediate:!0}),be(c,()=>{f.value=!0}),be(a,l=>{c.value=w(),ce(()=>{f.value=!1})});const g=async()=>{try{if(!d.value)return;const l=d.value.entry;if(!l)return;const v=await l.getFile(),k=await l.createWritable(),R=JSON.stringify(u.value,null,2);await k.write(R),await k.close(),window.$message.success("Saved!")}catch(l){console.error(l),window.$message.error("Save Failed!"+l.message)}},C=D();return{currentItem:d,translateObj:u,translateText:c,isChanged:f,async saveChange({isEmit:l=!1}={}){f.value&&(m(),await g(),ce(()=>{f.value=!1}),l&&t("saveChanged"))},cancelChange(){c.value=w(),ce(()=>{f.value=!1})},createField(l){m(l),c.value=l,h.value=Array.isArray(l),ce(()=>{C.value.focus()})},isFieldArray:h,inputRef:C}}});const Ps={class:"translate-path font-code"},Is={key:0,style:{color:"hotpink","margin-bottom":"10px"}},Ks={key:2,style:{color:"darkgoldenrod"}};function Fs(e,t,n,r,a,s){const d=hn,u=gn,c=vn,f=bn;return M(),oe(f,{size:"small",class:"batch-translate-item",title:e.dirItem.label+"/"+e.filePathArr.join("/")},{"header-extra":z(()=>[Ze("span",Ps,un(e.translatePath),1)]),default:z(()=>[e.currentItem?e.translatePath?(M(),se(Ne,{key:1},[e.translateText!==null?(M(),oe(c,{key:0,align:"center"},{default:z(()=>[G(d,{ref:"inputRef",type:"textarea",size:"small",value:e.translateText,"onUpdate:value":t[0]||(t[0]=h=>e.translateText=h),placeholder:e.isFieldArray?"Input array":"Input text",rows:e.isFieldArray?8:1,style:{width:"450px"},class:fn({"font-code":e.isFieldArray})},null,8,["value","placeholder","rows","class"]),e.isChanged?(M(),oe(u,{key:0,size:"small",type:"primary",onClick:t[1]||(t[1]=h=>e.saveChange({isEmit:!0}))},{default:z(()=>[ue("Save")]),_:1})):Ce("",!0),e.isChanged?(M(),oe(u,{key:1,size:"small",onClick:e.cancelChange},{default:z(()=>[ue("Cancel")]),_:1},8,["onClick"])):Ce("",!0)]),_:1})):(M(),oe(c,{key:1},{default:z(()=>[G(u,{size:"small",onClick:t[2]||(t[2]=h=>e.createField("")),type:"primary"},{default:z(()=>[ue("Create text")]),_:1}),G(u,{size:"small",onClick:t[3]||(t[3]=h=>e.createField([]))},{default:z(()=>[ue("Create Array")]),_:1})]),_:1}))],64)):(M(),se("div",Ks,"Please select a translation field on the left")):(M(),se("div",Is," File does not exist, please create it on your local file system "))]),_:1},8,["title"])}const Fn=pt(Ds,[["render",Fs],["__scopeId","data-v-3b3f4283"]]),Os=X({name:"BatchTranslate",components:{BatchTranslateItem:Fn},props:{dirTree:{type:Array,default(){return[]}},filePathArr:{type:Array,default(){return[]}},translatePath:{type:String,default:""}},setup(e,{emit:t}){sn(e);const n=D();return{handleSaveChanged:async()=>{for(let a=0;a<n.value.length;a++)await n.value[a].saveChange()},itemsRef:n}}});const Bs={class:"batch-translate"};function Es(e,t,n,r,a,s){const d=Fn;return M(),se("div",Bs,[(M(!0),se(Ne,null,bt(e.dirTree.filter(u=>u.kind==="directory"),u=>(M(),oe(d,{ref_for:!0,ref:"itemsRef",key:u.key,"dir-item":u,"file-path-arr":e.filePathArr,"translate-path":e.translatePath,onSaveChanged:e.handleSaveChanged},null,8,["dir-item","file-path-arr","translate-path","onSaveChanged"]))),128))])}const On=pt(Os,[["render",Es],["__scopeId","data-v-19add45c"]]);let vt=0;const As=X({name:"VueI18nBatchTool",components:{BatchTranslate:On,DropZone:yn},setup(){const e=D([]),t=async(l,v=0,k=[],R=[])=>{vt++;let P=0;for await(const $ of l.values())if(P++,$.kind==="directory"){let T=[];k.push({key:`${vt}-D-${v}-${P}`,kind:$.kind,label:$.name,entry:$,parentDirs:R,children:T}),await t($,v+1,T,[...R,$.name])}else/\.json$/gi.test($.name)&&k.push({key:`${vt}-F-${v}-${P}`,kind:$.kind,label:$.name,entry:$,parentDirs:R,children:null});return k},n=dn(),r=async()=>{n.value=await window.showDirectoryPicker(),e.value=await t(n.value)},a=async()=>{e.value=await t(n.value)},s=D(null),d=D(null),u=D([]),c=D(""),f=async()=>{try{const l=s.value;if(!l)return;const v=await l.getFile(),k=await l.createWritable();w.value!=="text"&&(d.value=JSON.stringify(zo(m.value),null,2)),await k.write(d.value),await k.close(),await a(),window.$message.success("Saved!")}catch(l){console.error(l),window.$message.error("Save Failed!"+l.message)}},h=["text","gui","batch"],w=D("batch"),m=D([Eo()]),g=()=>{if(w.value!=="text"){if(!d.value){m.value=[];return}const l=JSON.parse(d.value);m.value=Lo.parseWithRoot(l)}};be(w,l=>{g()});const{metaTitle:C}=Io();return{metaTitle:C,iconTranslate:Ao,handlePickDir:r,dirTree:e,dirHandle:n,reloadPickedDir:a,nodeProps:({option:l})=>({async onClick(){if(l.kind==="file"){const v=l.entry;s.value=v;const k=await cn(await v.getFile());d.value=k,u.value=[...l.parentDirs,l.label],c.value="",g()}}}),currentEditText:d,currentEditEntry:s,handleSaveFile:f,editMode:w,editModeList:h,translateTreeRoot:m,currentFilePathArr:u,translatePath:c,handleKeyClick(l){console.log(l),c.value=l},...Mo({cb:async l=>{for(const v of l.dataTransfer.items)if(v.kind==="file"){const k=await v.getAsFileSystemHandle();k.kind==="directory"&&(n.value=k,e.value=await t(n.value))}}})}}});const zs={class:"_container"},Ls={class:"main-edit-wrap"};function js(e,t,n,r,a,s){const d=yn,u=Uo,c=gn,f=tr,h=er,w=vn,m=Ho,g=bn,C=Ir,l=br,v=hr,k=hn,R=jo,P=On,$=sr,T=ir;return M(),se("div",{class:"vue-i18n-copy-tool",onDragover:t[3]||(t[3]=ht((...y)=>e.fileDragover&&e.fileDragover(...y),["prevent","stop"])),onDragleave:t[4]||(t[4]=ht(y=>e.showDropzone=!1,["prevent","stop"])),onDrop:t[5]||(t[5]=ht((...y)=>e.fileDrop&&e.fileDrop(...y),["prevent","stop"]))},[G(Oo,{name:"mc-fade"},{default:z(()=>[Ko(G(d,{text:"Drop locale folder here"},null,512),[[Fo,e.showDropzone]])]),_:1}),G(g,{size:"small"},{default:z(()=>[G(m,{subtitle:"",onBack:t[1]||(t[1]=y=>e.$router.push({name:"HomeView"}))},{title:z(()=>[ue(un(e.metaTitle),1)]),avatar:z(()=>[G(u,{src:e.iconTranslate,style:{background:"none"}},null,8,["src"])]),extra:z(()=>[G(w,{align:"center"},{default:z(()=>[e.currentEditEntry?(M(),oe(c,{key:0,type:"primary",onClick:e.handleSaveFile},{default:z(()=>[ue("Save Changes")]),_:1},8,["onClick"])):Ce("",!0),ue(" Edit Mode:"),G(h,{size:"small",value:e.editMode,"onUpdate:value":t[0]||(t[0]=y=>e.editMode=y)},{default:z(()=>[(M(!0),se(Ne,null,bt(e.editModeList,y=>(M(),oe(f,{key:y,value:y,label:y.toUpperCase()},null,8,["value","label"]))),128))]),_:1},8,["value"]),G(c,{type:"primary",size:"small",onClick:e.handlePickDir},{default:z(()=>[ue(" Pick i18n Directory ")]),_:1},8,["onClick"]),e.dirHandle?(M(),oe(c,{key:1,size:"small",onClick:e.reloadPickedDir},{default:z(()=>[ue(" Refresh ")]),_:1},8,["onClick"])):Ce("",!0)]),_:1})]),_:1})]),_:1}),Ze("div",zs,[G(T,{style:{height:"100%"},"has-sider":""},{default:z(()=>[G(v,{"collapse-mode":"width","collapsed-width":0,width:300,"show-trigger":"arrow-circle","content-style":"padding: 10px;",bordered:""},{default:z(()=>[G(l,{style:{height:"100%"}},{default:z(()=>[G(C,{"block-line":"",data:e.dirTree,"node-props":e.nodeProps,"default-expand-all":"","expand-on-click":"",selectable:""},null,8,["data","node-props"])]),_:1})]),_:1}),G($,null,{default:z(()=>[Ze("div",Ls,[e.currentEditEntry?(M(),se(Ne,{key:0},[Ce("",!0),Ze("div",{class:fn(["edit-content-wrap",{"batch-mode":e.editMode==="batch"}])},[e.editMode==="text"?(M(),oe(k,{key:0,type:"textarea",value:e.currentEditText,"onUpdate:value":t[2]||(t[2]=y=>e.currentEditText=y),class:"font-code",style:{height:"100%"},placeholder:"Edit Text"},null,8,["value"])):(M(),se(Ne,{key:1},[G(l,{style:Bo([{height:"100%"},{width:e.editMode==="batch"?"500px":"100%"}])},{default:z(()=>[(M(!0),se(Ne,null,bt(e.translateTreeRoot,(y,F)=>(M(),oe(R,{key:F,item:y,"is-lite":e.editMode==="batch",onOnKeyClick:e.handleKeyClick},null,8,["item","is-lite","onOnKeyClick"]))),128))]),_:1},8,["style"]),e.editMode==="batch"?(M(),oe(l,{key:0,style:{height:"100%"}},{default:z(()=>[G(P,{"dir-tree":e.dirTree,"file-path-arr":e.currentFilePathArr.slice(1),"translate-path":e.translatePath},null,8,["dir-tree","file-path-arr","translate-path"])]),_:1})):Ce("",!0)],64))],2)],64)):Ce("",!0)])]),_:1})]),_:1})])],32)}const Vs=pt(As,[["render",js],["__scopeId","data-v-d1cf0184"]]);export{Vs as default};
