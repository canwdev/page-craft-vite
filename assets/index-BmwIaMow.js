import{d as a,Y as e,af as s,r as l,s as o,L as r,c as i,N as t,p as n,o as u,Q as p,e as d,g as m,y as v,f as c,k as f,U as b,a2 as w,a1 as h,l as k,v as g,V as _,h as x,a3 as y,_ as C}from"./index-BJklM7uy.js";import{u as R}from"./use-remote-options-Ev17mjgO.js";const B={key:0,class:"iframe-browser-inner-wrap"},E={class:"iframe-browser-address-bar-wrap"},I={class:"button-wrap"},L=["src"],P=C(a({name:"IframeBrowser",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(a,{emit:C}){const P=e(a,"visible",C),U=s(),j=l(!1),F=l(),S=l(""),A=U.resolve({name:"PlaygroundPage"}).href,T=o(r.PAGECRAFT_IFRAME_BROWSER_URL,A,localStorage,{listenToStorageChanges:!1}),V=i((()=>j.value?"(Loading...)":""));t((()=>{T.value&&W()}));const W=()=>{S.value="",S.value=T.value,j.value=!0},G=()=>{j.value=!1},K=a=>{j.value=!1,console.error("[handleIframeError]",a)},{options:M}=R({fetchFn:async()=>{const a=await fetch("./resources/bookmarks.json");return await a.json()},mapFn:a=>({label:a.label||a.value,iconClass:"mdi mdi-bookmark",value:a.value,props:{onClick:a.children?void 0:()=>{T.value=a.value,W()}}})}),N=l(!1),O=l(),Q=()=>{O.value.setPos("width","385px"),O.value.setPos("height","727px")};return(a,e)=>(u(),n(y,{ref_key:"iframeWinRef",ref:O,class:"iframe-browser-vp-window",visible:v(P),"onUpdate:visible":e[5]||(e[5]=a=>h(P)?P.value=a:null),wid:"iframe_browser","allow-maximum":"","init-win-options":{width:"350px",height:"500px"}},{titleBarLeft:p((()=>[e[6]||(e[6]=c("span",{class:"mdi mdi-web"},null,-1)),_(" Iframe Browser "+x(v(V)),1)])),titleBarRightControls:p((()=>[c("button",{onClick:Q},e[7]||(e[7]=[c("span",{class:"mdi mdi-cellphone"},null,-1)]))])),default:p((()=>[v(P)?(u(),d("div",B,[c("div",E,[c("div",I,[c("button",{class:"vp-button",onClick:e[0]||(e[0]=a=>N.value=!0)},e[8]||(e[8]=[c("span",{class:"mdi mdi-bookmark-box"},null,-1)])),b(w,{options:v(M),visible:v(N),"onUpdate:visible":e[1]||(e[1]=a=>h(N)?N.value=a:null),title:"Shortcuts"},null,8,["options","visible"])]),f(c("input",{class:"vp-input iframe-browser-input font-code","onUpdate:modelValue":e[2]||(e[2]=a=>h(T)?T.value=a:null),placeholder:"input url (https://)",type:"text",onKeyup:e[3]||(e[3]=k((a=>W()),["enter"]))},null,544),[[g,v(T)]]),c("button",{class:"vp-button",onClick:e[4]||(e[4]=a=>W())},e[9]||(e[9]=[c("span",{class:"mdi mdi-arrow-left-bottom"},null,-1)]))]),c("iframe",{ref_key:"iframeRef",ref:F,onLoad:G,onError:K,class:"iframe-browser-inner-iframe",src:v(S),frameborder:"0"},null,40,L)])):m("",!0)])),_:1},8,["visible"]))}}),[["__scopeId","data-v-9da141db"]]);export{P as default};
