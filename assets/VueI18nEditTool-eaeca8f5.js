import{_ as S,I as _,i as N,e as g}from"./translate-e591830c.js";import{_ as T,u as O,a as z,b as J}from"./use-file-drop-91daeab8.js";import{d as $,r as V,s as E,i as R,I as B,_ as j,o as d,n as h,e as i,a,p as P,v as W,T as H,q as c,x as L,c as y,J as M,b as D,F as x,y as A,z as m,A as Z,K as q,C as K,E as U,L as G,M as Q}from"./index-47670616.js";const k={types:[{description:"JSON",accept:{"application/JSON":[".json"]}}]},X=$({name:"VueI18nEditTool",components:{TranslateTreeItem:S,DropZone:T},setup(){const e=V(_.parseWithRoot()),t=E(),p=async o=>{const n=await B(o),s=JSON.parse(n);e.value=_.parseWithRoot(s)},f=async()=>{const[o]=await window.showOpenFilePicker(k);t.value=o;const n=await o.getFile();p(n)},v=async()=>{if(!t.value)return;const o=await t.value.createWritable(),n=JSON.stringify(g(e.value),null,2);await o.write(n),await o.close(),window.$message.success("Saved!")},w=async()=>{var r;console.log(e.value);const o=JSON.stringify(g(e.value),null,2),s=await(await window.showSaveFilePicker({suggestedName:(r=t.value)==null?void 0:r.name,...k})).createWritable();await s.write(o),await s.close(),window.$message.success("Saved!")},{metaTitle:u}=R();return{metaTitle:u,translateTreeRoot:e,fileHandle:t,handleImport:p,handleSelectFile:f,handleSaveFile:v,handleExport:w,loadDemo(){e.value=_.parseWithRoot({hello_world:{section_a:{test_str:"This is a test string","":"It's fast and cool"},section_b:{"":"Blur this input and it'll fill left blank automatically!"}}})},iconTranslate:N,...O({cb:async o=>{for(const n of o.dataTransfer.items)if(n.kind==="file"){const s=await n.getAsFileSystemHandle();if(s.kind!=="directory"){t.value=s;const r=await s.getFile();await p(r)}}}})}}});const Y=e=>(G("data-v-c0de5673"),e=e(),Q(),e),ee={class:"_container"},te=Y(()=>D("div",{style:{height:"500px"}},null,-1));function ne(e,t,p,f,v,w){const u=T,o=z,n=Z,s=q,r=K,b=J,I=U,F=S;return d(),h("div",{class:"vue-i18n-copy-tool",onDragover:t[1]||(t[1]=m((...l)=>e.fileDragover&&e.fileDragover(...l),["prevent","stop"])),onDragleave:t[2]||(t[2]=m(l=>e.showDropzone=!1,["prevent","stop"])),onDrop:t[3]||(t[3]=m((...l)=>e.fileDrop&&e.fileDrop(...l),["prevent","stop"]))},[i(H,{name:"mc-fade"},{default:a(()=>[P(i(u,{text:"Drop json file here"},null,512),[[W,e.showDropzone]])]),_:1}),i(I,{size:"small",style:{position:"sticky",top:"0","z-index":"100","margin-bottom":"10px"}},{default:a(()=>[i(b,{subtitle:"",onBack:t[0]||(t[0]=l=>e.$router.push({name:"HomeView"}))},{title:a(()=>[c(L(e.metaTitle),1)]),avatar:a(()=>[i(o,{src:e.iconTranslate,style:{background:"none"}},null,8,["src"])]),extra:a(()=>[i(r,null,{default:a(()=>[i(n,{type:"primary",onClick:e.handleSelectFile,size:"small"},{default:a(()=>[c(" Open JSON ")]),_:1},8,["onClick"]),e.fileHandle?(d(),y(n,{key:0,onClick:e.handleSaveFile,size:"small",type:"info"},{default:a(()=>[c("Save")]),_:1},8,["onClick"])):M("",!0),i(n,{onClick:e.handleExport,size:"small"},{default:a(()=>[c("Save as...")]),_:1},8,["onClick"]),i(s,{onPositiveClick:e.loadDemo},{trigger:a(()=>[i(n,{size:"small"},{default:a(()=>[c("Demo")]),_:1})]),default:a(()=>[c(" Load Demo? This will override editing content. ")]),_:1},8,["onPositiveClick"])]),_:1})]),_:1})]),_:1}),D("div",ee,[(d(!0),h(x,null,A(e.translateTreeRoot,(l,C)=>(d(),y(F,{key:C,item:l},null,8,["item"]))),128))]),te],32)}const ie=j(X,[["render",ne],["__scopeId","data-v-c0de5673"]]);export{ie as default};
