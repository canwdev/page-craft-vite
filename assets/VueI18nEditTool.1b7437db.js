import{_ as w,I as _,i as N,e as m}from"./translate.ca926d77.js";import{_ as g,u as O,a as V,b as $}from"./use-file-drop.acbd5faa.js";import{d as z,r as E,s as J,a4 as R,_ as B,o as d,m as f,e as i,a,n as j,v as P,T as W,c as v,a5 as x,b as y,F as H,p as A,q as u,x as c,y as L,a6 as Z,A as q,C as M,a7 as U,a8 as G}from"./index.5167f401.js";const h={types:[{description:"JSON",accept:{"application/JSON":[".json"]}}]},K=z({name:"VueI18nEditTool",components:{TranslateTreeItem:w,DropZone:g},setup(){const e=E(_.parseWithRoot()),t=J(),p=async o=>{const s=await R(o),n=JSON.parse(s);e.value=_.parseWithRoot(n)};return{translateTreeRoot:e,fileHandle:t,handleImport:p,handleSelectFile:async()=>{const[o]=await window.showOpenFilePicker(h);t.value=o;const s=await o.getFile();p(s)},handleSaveFile:async()=>{if(!t.value)return;const o=await t.value.createWritable(),s=JSON.stringify(m(e.value),null,2);await o.write(s),await o.close(),window.$message.success("Saved!")},handleExport:async()=>{var r;console.log(e.value);const o=JSON.stringify(m(e.value),null,2),n=await(await window.showSaveFilePicker({suggestedName:(r=t.value)==null?void 0:r.name,...h})).createWritable();await n.write(o),await n.close(),window.$message.success("Saved!")},loadDemo(){e.value=_.parseWithRoot({hello_world:{section_a:{test_str:"This is a test string","":"It's fast and cool"},section_b:{"":"Blur this input and it'll fill left blank automatically!"}}})},iconTranslate:N,...O({cb:async o=>{for(const s of o.dataTransfer.items)if(s.kind==="file"){const n=await s.getAsFileSystemHandle();if(n.kind!=="directory"){t.value=n;const r=await n.getFile();await p(r)}}}})}}});const Q=e=>(U("data-v-6b2e9612"),e=e(),G(),e),X=c(" Vue i18n Edit "),Y=c(" Open JSON "),ee=c("Save"),te=c("Save as..."),oe=c("Demo"),ne=c(" Load Demo? This will override editing content. "),ae={class:"_container"},se=Q(()=>y("div",{style:{height:"500px"}},null,-1));function ie(e,t,p,S,k,b){const o=g,s=V,n=L,r=Z,D=q,T=$,F=M,I=w;return d(),f("div",{class:"vue-i18n-copy-tool",onDragover:t[1]||(t[1]=u((...l)=>e.fileDragover&&e.fileDragover(...l),["prevent","stop"])),onDragleave:t[2]||(t[2]=u(l=>e.showDropzone=!1,["prevent","stop"])),onDrop:t[3]||(t[3]=u((...l)=>e.fileDrop&&e.fileDrop(...l),["prevent","stop"]))},[i(W,{name:"fade"},{default:a(()=>[j(i(o,{text:"Drop json file here"},null,512),[[P,e.showDropzone]])]),_:1}),i(F,{size:"small",style:{position:"sticky",top:"0","z-index":"100","margin-bottom":"10px"}},{default:a(()=>[i(T,{subtitle:"",onBack:t[0]||(t[0]=l=>e.$router.push({name:"HomeView"}))},{title:a(()=>[X]),avatar:a(()=>[i(s,{src:e.iconTranslate,style:{background:"none"}},null,8,["src"])]),extra:a(()=>[i(D,null,{default:a(()=>[i(n,{type:"primary",onClick:e.handleSelectFile,size:"small"},{default:a(()=>[Y]),_:1},8,["onClick"]),e.fileHandle?(d(),v(n,{key:0,onClick:e.handleSaveFile,size:"small",type:"info"},{default:a(()=>[ee]),_:1},8,["onClick"])):x("",!0),i(n,{onClick:e.handleExport,size:"small"},{default:a(()=>[te]),_:1},8,["onClick"]),i(r,{onPositiveClick:e.loadDemo},{trigger:a(()=>[i(n,{size:"small"},{default:a(()=>[oe]),_:1})]),default:a(()=>[ne]),_:1},8,["onPositiveClick"])]),_:1})]),_:1})]),_:1}),y("div",ae,[(d(!0),f(H,null,A(e.translateTreeRoot,(l,C)=>(d(),v(I,{key:C,item:l},null,8,["item"]))),128))]),se],32)}const pe=B(K,[["render",ie],["__scopeId","data-v-6b2e9612"]]);export{pe as default};
