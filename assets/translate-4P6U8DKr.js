import{d as O,W as M,ak as De,X as xe,b3 as yt,b4 as bt,am as _t,a5 as Le,ac as ie,r as T,g as j,b5 as Ct,b6 as wt,b7 as kt,b8 as Tt,aa as $t,a7 as Re,b9 as Rt,a0 as It,a2 as Vt,a3 as At,a4 as F,w as W,ae as St,ba as Mt,bb as X,aj as Ie,bc as Ve,aE as Ae,ap as Se,bd as Me,be as Pt,a6 as G,aK as Bt,l as u,m as A,x as S,bf as Ot,T as H,u as Ee,bg as Ce,bh as le,j as Nt,k as Y,y as C,q as c,n as h,bi as Dt,bj as ze,aX as He,aQ as we,G as se,z as R,aT as ke,aU as Fe,aV as je,U as L,F as D,E,J as Te,a as Ue,o as Ke,bk as xt,bl as ae,h as Ge,bm as Lt,bn as Et,H as _e,b1 as Je,aW as Ze,V as qe,L as Qe,s as zt,bo as Ht,S as Ft,a_ as jt,bp as Pe,bq as Ut,a$ as Kt,B as Gt,br as Jt,bs as Zt}from"./index-TK9ICx4B.js";const qt=O({name:"Remove",render(){return M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},M("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),Qt=e=>{const{borderRadius:t,boxShadow2:s,baseColor:l}=e;return Object.assign(Object.assign({},bt),{borderRadius:t,boxShadow:s,color:_t(l,"rgba(0, 0, 0, .85)"),textColor:l})},Wt=De({name:"Tooltip",common:xe,peers:{Popover:yt},self:Qt}),Xt=Wt,Yt=Object.assign(Object.assign({},wt),ie.props),en=O({name:"Tooltip",props:Yt,__popover__:!0,setup(e){const{mergedClsPrefixRef:t}=Le(e),s=ie("Tooltip","-tooltip",void 0,Xt,e,t),l=T(null);return Object.assign(Object.assign({},{syncPosition(){l.value.syncPosition()},setShow(m){l.value.setShow(m)}}),{popoverRef:l,mergedTheme:s,popoverThemeOverrides:j(()=>s.value.self)})},render(){const{mergedTheme:e,internalExtraClass:t}=this;return M(Ct,Object.assign(Object.assign({},this.$props),{theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:t.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),tn=e=>{const{textColorDisabled:t}=e;return{iconColorDisabled:t}},nn=De({name:"InputNumber",common:xe,peers:{Button:kt,Input:Tt},self:tn}),on=nn;function ln(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function an(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function ye(e){return e==null?!0:!Number.isNaN(e)}function Be(e,t){return e==null?"":t===void 0?String(e):e.toFixed(t)}function be(e){if(e===null)return null;if(typeof e=="number")return e;{const t=Number(e);return Number.isNaN(t)?null:t}}const sn=$t([Re("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),Re("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),Oe=800,Ne=100,rn=Object.assign(Object.assign({},ie.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),un=O({name:"InputNumber",props:rn,setup(e){const{mergedBorderedRef:t,mergedClsPrefixRef:s,mergedRtlRef:l}=Le(e),o=ie("InputNumber","-input-number",sn,on,e,s),{localeRef:m}=Rt("InputNumber"),v=It(e),{mergedSizeRef:y,mergedDisabledRef:g,mergedStatusRef:_}=v,f=T(null),$=T(null),I=T(null),i=T(e.defaultValue),b=Vt(e,"value"),r=At(b,i),p=T(""),P=n=>{const a=String(n).split(".")[1];return a?a.length:0},J=n=>{const a=[e.min,e.max,e.step,n].map(d=>d===void 0?0:P(d));return Math.max(...a)},ue=F(()=>{const{placeholder:n}=e;return n!==void 0?n:m.value.placeholder}),U=F(()=>{const n=be(e.step);return n!==null?n===0?1:Math.abs(n):1}),ee=F(()=>{const n=be(e.min);return n!==null?n:null}),te=F(()=>{const n=be(e.max);return n!==null?n:null}),V=n=>{const{value:a}=r;if(n===a){B();return}const{"onUpdate:value":d,onUpdateValue:w,onChange:N}=e,{nTriggerFormInput:x,nTriggerFormChange:K}=v;N&&G(N,n),w&&G(w,n),d&&G(d,n),i.value=n,x(),K()},k=({offset:n,doUpdateIfValid:a,fixPrecision:d,isInputing:w})=>{const{value:N}=p;if(w&&an(N))return!1;const x=(e.parse||ln)(N);if(x===null)return a&&V(null),null;if(ye(x)){const K=P(x),{precision:Q}=e;if(Q!==void 0&&Q<K&&!d)return!1;let z=parseFloat((x+n).toFixed(Q??J(x)));if(ye(z)){const{value:ge}=te,{value:he}=ee;if(ge!==null&&z>ge){if(!a||w)return!1;z=ge}if(he!==null&&z<he){if(!a||w)return!1;z=he}return e.validator&&!e.validator(z)?!1:(a&&V(z),z)}}return!1},B=()=>{const{value:n}=r;if(ye(n)){const{format:a,precision:d}=e;a?p.value=a(n):n===null||d===void 0||P(n)>d?p.value=Be(n,void 0):p.value=Be(n,d)}else p.value=String(n)};B();const nt=F(()=>k({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),de=F(()=>{const{value:n}=r;if(e.validator&&n===null)return!1;const{value:a}=U;return k({offset:-a,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),ce=F(()=>{const{value:n}=r;if(e.validator&&n===null)return!1;const{value:a}=U;return k({offset:+a,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function ot(n){const{onFocus:a}=e,{nTriggerFormFocus:d}=v;a&&G(a,n),d()}function lt(n){var a,d;if(n.target===((a=f.value)===null||a===void 0?void 0:a.wrapperElRef))return;const w=k({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(w!==!1){const K=(d=f.value)===null||d===void 0?void 0:d.inputElRef;K&&(K.value=String(w||"")),r.value===w&&B()}else B();const{onBlur:N}=e,{nTriggerFormBlur:x}=v;N&&G(N,n),x(),Bt(()=>{B()})}function at(n){const{onClear:a}=e;a&&G(a,n)}function pe(){const{value:n}=ce;if(!n){ve();return}const{value:a}=r;if(a===null)e.validator||V($e());else{const{value:d}=U;k({offset:d,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function me(){const{value:n}=de;if(!n){fe();return}const{value:a}=r;if(a===null)e.validator||V($e());else{const{value:d}=U;k({offset:-d,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const st=ot,it=lt;function $e(){if(e.validator)return null;const{value:n}=ee,{value:a}=te;return n!==null?Math.max(0,n):a!==null?Math.min(0,a):0}function rt(n){at(n),V(null)}function ut(n){var a,d,w;!((a=I.value)===null||a===void 0)&&a.$el.contains(n.target)&&n.preventDefault(),!((d=$.value)===null||d===void 0)&&d.$el.contains(n.target)&&n.preventDefault(),(w=f.value)===null||w===void 0||w.activate()}let Z=null,q=null,ne=null;function fe(){ne&&(window.clearTimeout(ne),ne=null),Z&&(window.clearInterval(Z),Z=null)}function ve(){oe&&(window.clearTimeout(oe),oe=null),q&&(window.clearInterval(q),q=null)}function dt(){fe(),ne=window.setTimeout(()=>{Z=window.setInterval(()=>{me()},Ne)},Oe),Ve("mouseup",document,fe,{once:!0})}let oe=null;function ct(){ve(),oe=window.setTimeout(()=>{q=window.setInterval(()=>{pe()},Ne)},Oe),Ve("mouseup",document,ve,{once:!0})}const pt=()=>{q||pe()},mt=()=>{Z||me()};function ft(n){var a,d;if(n.key==="Enter"){if(n.target===((a=f.value)===null||a===void 0?void 0:a.wrapperElRef))return;k({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((d=f.value)===null||d===void 0||d.deactivate())}else if(n.key==="ArrowUp"){if(!ce.value||e.keyboard.ArrowUp===!1)return;n.preventDefault(),k({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&pe()}else if(n.key==="ArrowDown"){if(!de.value||e.keyboard.ArrowDown===!1)return;n.preventDefault(),k({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&me()}}function vt(n){p.value=n,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&k({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}W(r,()=>{B()});const gt={focus:()=>{var n;return(n=f.value)===null||n===void 0?void 0:n.focus()},blur:()=>{var n;return(n=f.value)===null||n===void 0?void 0:n.blur()},select:()=>{var n;return(n=f.value)===null||n===void 0?void 0:n.select()}},ht=St("InputNumber",l,s);return Object.assign(Object.assign({},gt),{rtlEnabled:ht,inputInstRef:f,minusButtonInstRef:$,addButtonInstRef:I,mergedClsPrefix:s,mergedBordered:t,uncontrolledValue:i,mergedValue:r,mergedPlaceholder:ue,displayedValueInvalid:nt,mergedSize:y,mergedDisabled:g,displayedValue:p,addable:ce,minusable:de,mergedStatus:_,handleFocus:st,handleBlur:it,handleClear:rt,handleMouseDown:ut,handleAddClick:pt,handleMinusClick:mt,handleAddMousedown:ct,handleMinusMousedown:dt,handleKeyDown:ft,handleUpdateDisplayedValue:vt,mergedTheme:o,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:j(()=>{const{self:{iconColorDisabled:n}}=o.value,[a,d,w,N]=Mt(n);return{textColorTextDisabled:`rgb(${a}, ${d}, ${w})`,opacityDisabled:`${N}`}})})},render(){const{mergedClsPrefix:e,$slots:t}=this,s=()=>M(Me,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>Ae(t["minus-icon"],()=>[M(Se,{clsPrefix:e},{default:()=>M(qt,null)})])}),l=()=>M(Me,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>Ae(t["add-icon"],()=>[M(Se,{clsPrefix:e},{default:()=>M(Pt,null)})])});return M("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},M(X,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var o;return this.showButton&&this.buttonPlacement==="both"?[s(),Ie(t.prefix,m=>m?M("span",{class:`${e}-input-number-prefix`},m):null)]:(o=t.prefix)===null||o===void 0?void 0:o.call(t)},suffix:()=>{var o;return this.showButton?[Ie(t.suffix,m=>m?M("span",{class:`${e}-input-number-suffix`},m):null),this.buttonPlacement==="right"?s():null,l()]:(o=t.suffix)===null||o===void 0?void 0:o.call(t)}}))}}),dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},cn=S("g",{fill:"none"},[S("path",{d:"M10 2.5a.5.5 0 0 0-1 0V9H2.5a.5.5 0 0 0 0 1H9v6.5a.5.5 0 0 0 1 0V10h6.5a.5.5 0 0 0 0-1H10V2.5z",fill:"currentColor"})],-1),pn=[cn],mn=O({name:"Add20Regular",render:function(t,s){return u(),A("svg",dn,pn)}}),fn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},vn=S("g",{fill:"none"},[S("path",{d:"M3 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5zm2-1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H5zm5 2a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 10 6z",fill:"currentColor"})],-1),gn=[vn],hn=O({name:"AddSquare20Regular",render:function(t,s){return u(),A("svg",fn,gn)}}),yn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},bn=S("g",{fill:"none"},[S("path",{d:"M11.5 4a1.5 1.5 0 0 0-3 0h-1a2.5 2.5 0 0 1 5 0H17a.5.5 0 0 1 0 1h-.554L15.15 16.23A2 2 0 0 1 13.163 18H6.837a2 2 0 0 1-1.987-1.77L3.553 5H3a.5.5 0 0 1-.492-.41L2.5 4.5A.5.5 0 0 1 3 4h8.5zm3.938 1H4.561l1.282 11.115a1 1 0 0 0 .994.885h6.326a1 1 0 0 0 .993-.885L15.438 5zM8.5 7.5c.245 0 .45.155.492.359L9 7.938v6.125c0 .241-.224.437-.5.437c-.245 0-.45-.155-.492-.359L8 14.062V7.939c0-.242.224-.438.5-.438zm3 0c.245 0 .45.155.492.359l.008.079v6.125c0 .241-.224.437-.5.437c-.245 0-.45-.155-.492-.359L11 14.062V7.939c0-.242.224-.438.5-.438z",fill:"currentColor"})],-1),_n=[bn],We=O({name:"Delete20Regular",render:function(t,s){return u(),A("svg",yn,_n)}}),Cn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},wn=S("g",{fill:"none"},[S("path",{d:"M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM8 3c.374 0 .875.356 1.313 1.318c.094.208.181.436.26.682H6.427a6.19 6.19 0 0 1 .26-.682C7.125 3.356 7.627 3 8 3zm-2.223.904c-.15.332-.283.7-.393 1.096H4a5.017 5.017 0 0 1 2.038-1.6a5.45 5.45 0 0 0-.261.504zM5.163 6A12.055 12.055 0 0 0 5 8c0 .699.057 1.373.163 2H3.416A4.983 4.983 0 0 1 3 8c0-.711.148-1.388.416-2h1.747zm.221 5c.11.396.242.764.393 1.096c.079.174.166.343.26.504A5.017 5.017 0 0 1 4 11h1.384zm1.043 0h3.146a6.195 6.195 0 0 1-.26.682C8.875 12.644 8.373 13 8 13c-.374 0-.875-.356-1.313-1.318a6.195 6.195 0 0 1-.26-.682zm3.394-1H6.18A10.936 10.936 0 0 1 6 8c0-.714.064-1.39.179-2H9.82c.115.61.179 1.286.179 2s-.064 1.39-.179 2zm.795 1H12a5.018 5.018 0 0 1-2.038 1.6c.095-.161.182-.33.26-.504c.152-.332.284-.7.394-1.096zm1.968-1h-1.747A12.05 12.05 0 0 0 11 8c0-.699-.057-1.372-.163-2h1.747c.268.612.416 1.289.416 2c0 .711-.148 1.388-.416 2zM9.962 3.4A5.018 5.018 0 0 1 12 5h-1.384a7.526 7.526 0 0 0-.393-1.096a5.454 5.454 0 0 0-.26-.504z",fill:"currentColor"})],-1),kn=[wn],Tn=O({name:"Globe16Regular",render:function(t,s){return u(),A("svg",Cn,kn)}}),re=Ot("i18nToolSettings",{state:()=>({isFoldersMode:!0,autoPasteTrimQuotes:!0,autoPasteTextConvertMode:H.TEXT,ignoreFolders:["node_modules",".git",".idea",".vscode",".DS_Store"]}),getters:{ignoreFoldersMap(){const e={};return this.ignoreFolders.forEach(t=>{e[t]=!0}),e}},persist:{key:"ls_key_i18n_tool_settings"}}),$n=O({name:"I18nToolSettings",props:{visible:{type:Boolean,default:!1}},setup(e,{emit:t}){const{t:s}=Ee(),l=Ce(e,t,"visible"),o=re(),m=j(()=>[{label:s("common.i18njson_editing_too"),key:"json_editing",children:[{label:"自动粘贴: 移除首尾引号",subtitle:"Trim: ` | ' | \"",key:"autoPasteTrimQuotes",store:o,type:le.SWITCH},{label:"自动粘贴: 文本转换器模式",key:"autoPasteTextConvertMode",store:o,type:le.SELECT,selectOptions:[{label:"Disabled",value:H.DISABLED},{label:"Number",value:H.NUMBER},...Nt]}]},{label:s("common.i18njson_batch_tool"),key:"json_editing",children:[{label:s("common.folders_mode"),key:"isFoldersMode",store:o,type:le.SWITCH},{label:"ignoreFolders",key:"ignoreFolders",store:o,type:le.DYNAMIC_TAGS}]}]);return{mVisible:l,optionList:m}}});function Rn(e,t,s,l,o,m){const v=Dt,y=ze;return u(),C(y,{show:e.mVisible,"onUpdate:show":t[0]||(t[0]=g=>e.mVisible=g),preset:"dialog",title:e.$t("common.settings"),style:{"padding-left":"10px","padding-right":"10px"},"show-icon":!1},{default:c(()=>[h(v,{"option-list":e.optionList},null,8,["option-list"])]),_:1},8,["show","title"])}const Qn=Y($n,[["render",Rn]]),In=O({name:"DialogTextEdit",components:{VueMonaco:He},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"Text edit"},placeholder:{type:String,default:"Input text"},text:{type:String,default:""},isTextarea:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},type:{type:String,default:"text"}},emits:["onSave","update:modelValue","update:visible"],setup(e,{emit:t}){const{text:s}=we(e),l=Ce(e,t,"visible"),o=T(),m=T("");return W(s,v=>{m.value=v},{immediate:!0}),W(l,v=>{v&&setTimeout(()=>{var y;(y=o.value)==null||y.focus()})}),{inputRef:o,mVisible:l,editingText:m,handleSave(){t("onSave",m.value)}}}});function Vn(e,t,s,l,o,m){const v=He,y=X,g=ze;return u(),C(g,{style:{width:"700px"},preset:"dialog","negative-text":e.$t("actions.cancel"),"positive-text":e.$t("actions.done"),title:e.title,onPositiveClick:e.handleSave,onNegativeClick:t[2]||(t[2]=_=>e.mVisible=!1),onClose:t[3]||(t[3]=_=>e.mVisible=!1),show:e.mVisible},{default:c(()=>[e.mVisible?(u(),A(se,{key:0},[e.isTextarea?(u(),C(v,{key:0,ref:"inputRef",modelValue:e.editingText,"onUpdate:modelValue":t[0]||(t[0]=_=>e.editingText=_),language:"json",style:{height:"500px"}},null,8,["modelValue"])):(u(),C(y,{key:1,ref:"inputRef",type:e.type,value:e.editingText,"onUpdate:value":t[1]||(t[1]=_=>e.editingText=_),class:"font-code",rows:e.isTextarea?25:null,placeholder:e.placeholder,autofocus:"",clearable:e.clearable},null,8,["type","value","rows","placeholder","clearable"]))],64)):R("",!0)]),_:1},8,["negative-text","positive-text","title","onPositiveClick","show"])}const Xe=Y(In,[["render",Vn]]),An=e=>{const t=re(),s=T(null);return W(e,o=>{if(o==null){s.value=null;return}s.value=typeof o},{immediate:!0}),{autoPasteConvertMode:j(()=>{const o=s.value;return o==="number"?H.NUMBER:o==="string"?t.autoPasteTextConvertMode===H.HTML?H.HTML:H.TEXT:o==="object"?H.JSON:t.autoPasteTextConvertMode}),valType:s}},Sn=O({name:"FieldEdit",components:{ClipboardPaste20Regular:ke},props:{modelValue:{type:[String,Number,Array]}},emits:["onValueBlur","previewArray","update:modelValue"],setup(e,{emit:t}){const s=Ce(e,t),l=re(),o=()=>{t("onValueBlur")},{valType:m,autoPasteConvertMode:v}=An(s),y=async()=>{let f=await Fe();s.value=je(f,v.value,{isTrimQuotes:l.autoPasteTrimQuotes}),setTimeout(()=>{o()})},g=T();return{intSettingsStore:l,mValue:s,valType:m,handleValueBlur:o,handlePaste:y,autoPasteConvertMode:v,focus:()=>{setTimeout(()=>{g.value.focus()})},valueInputRef:g}}}),Mn={class:"item-value-edit-wrap"};function Pn(e,t,s,l,o,m){const v=un,y=Te,g=X,_=L("ClipboardPaste20Regular");return u(),A("div",Mn,[e.valType==="number"?(u(),C(v,{key:0,ref:"valueInputRef",value:e.mValue,"onUpdate:value":t[0]||(t[0]=f=>e.mValue=f),placeholder:"number value",size:"small",class:"item-value-edit jssl_value",onBlur:e.handleValueBlur},null,8,["value","onBlur"])):e.valType==="object"?(u(),C(y,{key:1,title:e.mValue,size:"small",class:"item-value-edit _button",onClick:t[1]||(t[1]=f=>e.$emit("previewArray"))},{default:c(()=>[E(" 📝 "+D(e.$t("common.array")),1)]),_:1},8,["title"])):(u(),C(g,{key:2,ref:"valueInputRef",type:"textarea",rows:"1",size:"small",class:"item-value-edit",value:e.mValue,"onUpdate:value":t[2]||(t[2]=f=>e.mValue=f),placeholder:"text value",onBlur:e.handleValueBlur},null,8,["value","onBlur"])),h(y,{onClick:e.handlePaste,secondary:"",size:"small",type:"info",title:`Auto Paste [${e.autoPasteConvertMode}]`},{icon:c(()=>[h(_)]),_:1},8,["onClick","title"])])}const Ye=Y(Sn,[["render",Pn]]),Bn=O({name:"TranslateItem",components:{FieldEdit:Ye,ClipboardPaste20Regular:ke,Delete20Regular:We},props:{item:{type:Object,default:null},treeItem:{type:Object,default:null},isLite:{type:Boolean,default:!1},index:{type:Number,required:!0}},emits:["onRemove","previewArray","onKeyClick"],setup(e,{emit:t}){const{t:s}=Ee(),l=Ue(),{item:o,treeItem:m,index:v}=we(e),y=j(()=>{if(!m.value)return"";const r=[];let p=m.value;for(;p;)r.push(p.namespace),p=p.parent||null;return r.reverse().join(".")}),g=j(()=>{if(!o.value||!o.value.value&&!o.value.key)return"";let r=o.value.key;y.value&&(r=y.value+"."+r);const p=new RegExp(Et+".","g");return r=r.replace(p,""),r}),_=T(!1),f=()=>{var p;_.value=!1;const r=((p=m.value)==null?void 0:p.translates)||[];for(let P=0;P<r.length;P++){const J=r[P];if(v.value!==P&&J.key===o.value.key){_.value=!0;break}}},$=T(null),I=r=>{let p="";r===ae.ORIGINAL?p=`$t('${g.value}')`:r===ae.TEMPLATE?p=`{{ $t('${g.value}') }}`:r===ae.VHTML?p=`v-html="$t('${g.value}')"`:r===ae.DOLLART&&(p=`this.$t('${g.value}')`),$.value=r,l.trLastCopyMode=r,Ge(p),window.$message.success(s("msgs.copy_success")+p)},i=()=>{o.value.key||(o.value.key=Lt(o.value.value),f())},b=T();return Ke(()=>{o.value&&(l.trAutoAddGuid!==null&&o.value.key===l.trAutoAddGuid?(l.trAutoAddGuid=null,o.value.key="",i(),setTimeout(()=>{I(l.trLastCopyMode)})):l.trIsManualAdd&&(b.value&&b.value.focus(),l.trIsManualAdd=!1))}),{copyModeOptions:xt,namespacePrefix:y,nameDisplay:g,highlightCopyMode:$,handleCopy:I,handleValueBlur:i,handleKeyBlur(){f()},handleInputKeyClick(r){t("onKeyClick",g.value,r)},isKeyDuplicated:_,valueInputRef:b}}}),On=["data-id"],Nn={key:0,class:"mc-error-tip-button",title:"Key duplicated, may cause bug!"};function Dn(e,t,s,l,o,m){const v=X,y=Ye,g=Te,_=Ze,f=L("Delete20Regular"),$=qe,I=Qe;return e.item?(u(),A("div",{key:0,"data-id":e.item.key,class:Je(["translate-item",{isLite:e.isLite,isKeyDuplicated:e.isKeyDuplicated}])},[h(I,{size:"small",justify:"space-between"},{default:c(()=>[h(I,{size:"small",align:"center"},{default:c(()=>[e.isKeyDuplicated?(u(),A("div",Nn,"!")):R("",!0),h(v,{size:"small",class:"font-code translate-item-input jssl_key",value:e.item.key,"onUpdate:value":t[0]||(t[0]=i=>e.item.key=i),placeholder:"key",onClick:e.handleInputKeyClick,onBlur:e.handleKeyBlur,readonly:e.isLite},null,8,["value","onClick","onBlur","readonly"]),e.isLite?R("",!0):(u(),C(y,{key:1,ref:"valueInputRef",modelValue:e.item.value,"onUpdate:modelValue":t[1]||(t[1]=i=>e.item.value=i),onOnValueBlur:e.handleValueBlur,onPreviewArray:t[2]||(t[2]=i=>e.$emit("previewArray",e.item))},null,8,["modelValue","onOnValueBlur"])),!e.isLite&&e.nameDisplay?(u(),C(_,{key:2,size:"small"},{default:c(()=>[(u(!0),A(se,null,_e(e.copyModeOptions,i=>(u(),C(g,{key:i.value,title:i.desc,size:"small",secondary:i.value!==e.highlightCopyMode,type:"success",onClick:b=>e.handleCopy(i.value)},{default:c(()=>[E(D(i.label),1)]),_:2},1032,["title","secondary","onClick"]))),128))]),_:1})):R("",!0),e.isLite?R("",!0):(u(),C($,{key:3,onPositiveClick:t[3]||(t[3]=i=>e.$emit("onRemove"))},{trigger:c(()=>[h(g,{tertiary:"",size:"small",type:"error"},{icon:c(()=>[h(f)]),_:1})]),default:c(()=>[E(" "+D(e.$t("msgs.remove_item")),1)]),_:1}))]),_:1}),h(I)]),_:1})],10,On)):R("",!0)}const et=Y(Bn,[["render",Dn]]),xn=()=>{const e=T(!1),t=zt(null),s=T("");return W(e,l=>{l||(t.value=null,s.value="")}),{isShowArrayEdit:e,curTranslateItem:t,currentArrayString:s,handlePreviewArray(l){t.value=l,s.value=JSON.stringify(l.value,null,2),e.value=!0},handleSaveArray(l){if(t.value)try{t.value.value=JSON.parse(l||"[]"),e.value=!1}catch(o){console.error(o),window.$message.error(o.message)}}}},Ln=O({name:"TranslateTreeItem",components:{Delete20Regular:We,TranslateItem:et,DialogTextEdit:Xe,AddSquare20Regular:hn,Add20Regular:mn,ClipboardPaste20Regular:ke,Copy20Regular:Ht,Globe16Regular:Tn},props:{item:{type:Object,default:null},isRoot:{type:Boolean,default:!0},isLite:{type:Boolean,default:!1},index:{type:Number,required:!0},title:{type:String,default:""}},emits:["onRemove","onKeyClick"],setup(e){const{item:t,index:s}=we(e),l=Ue(),o=re(),m=()=>{l.trIsManualAdd=!0,t.value.children.push(jt({parent:t.value}))},v=()=>{l.trIsManualAdd=!0,t.value.translates.push(Pe())},y=async()=>{let i=await Fe();i=je(i,o.autoPasteTextConvertMode,{isTrimQuotes:o.autoPasteTrimQuotes}),l.trAutoAddGuid=Ut(),t.value.translates.push(Pe({key:l.trAutoAddGuid,value:i}))},g=T(!0),_=j(()=>{if(!t.value)return"";const i=[];let b=t.value;for(;b;)i.push(b.namespace),b=b.parent||null;return i.pop(),i.shift(),i.reverse().join(".")}),f=T(!1),$=()=>{var b,r;f.value=!1;const i=((r=(b=t.value)==null?void 0:b.parent)==null?void 0:r.children)||[];for(let p=0;p<i.length;p++){const P=i[p];if(s.value!==p&&P.namespace===t.value.namespace){f.value=!0;break}}},I=T();return Ke(()=>{l.trIsManualAdd&&(I.value&&I.value.focus(),l.trIsManualAdd=!1)}),{intSettingsStore:o,handleAddChildren:m,handleAddTranslate:v,handleAutoAdd:y,handleGetJSON(){const i=Ft([t.value]);console.log(i),Ge(JSON.stringify(i,null,2)),window.$message.success("JSON Copied")},handleRemoveTreeItem(i){const b=[...t.value.children];b.splice(i,1),t.value.children=b},handleRemoveItem(i){const b=[...t.value.translates];b.splice(i,1),t.value.translates=b},isExpand:g,isKeyDuplicated:f,checkDuplicatedGroupKey:$,namespacePrefix:_,namespaceInputRef:I,...xn()}}}),tt=e=>(Jt("data-v-8f395003"),e=e(),Zt(),e),En={class:"group-header"},zn=tt(()=>S("div",{class:"mc-error-tip-button"},"!",-1)),Hn={key:0,style:{color:"darkseagreen"}},Fn={key:0},jn={key:0,class:"tr-list"},Un={class:"actions-wrap"},Kn=tt(()=>S("div",{class:"split-line"},null,-1)),Gn={class:"actions-wrap"},Jn={class:"namespace-display"};function Zn(e,t,s,l,o,m){const v=en,y=L("Globe16Regular"),g=Kt,_=X,f=L("Copy20Regular"),$=Te,I=L("Delete20Regular"),i=qe,b=Ze,r=Qe,p=et,P=L("Add20Regular"),J=L("ClipboardPaste20Regular"),ue=L("TranslateTreeItem",!0),U=L("AddSquare20Regular"),ee=Xe,te=Gt;return e.item?(u(),C(te,{key:0,size:"small",class:Je(["tree-item",{isKeyDuplicated:e.isKeyDuplicated}])},{default:c(()=>[S("div",En,[e.isKeyDuplicated?(u(),C(v,{key:0,trigger:"hover"},{trigger:c(()=>[zn]),default:c(()=>[E(" Group namespace duplicated, may cause bug! ")]),_:1})):R("",!0),e.isRoot?(u(),C(_,{key:1,ref:"namespaceInputRef",size:"small",class:"font-code",value:e.title||e.item.namespace,disabled:"",style:{flex:"1"}},{prefix:c(()=>[h(g,{color:"red",size:"16"},{default:c(()=>[h(y)]),_:1})]),_:1},8,["value"])):(u(),C(_,{key:2,ref:"namespaceInputRef",size:"small",class:"font-code",value:e.item.namespace,"onUpdate:value":t[0]||(t[0]=V=>e.item.namespace=V),placeholder:"namespace",style:{flex:"1"},readonly:e.isLite,onBlur:e.checkDuplicatedGroupKey},{prefix:c(()=>[h(g,{color:"darkseagreen",size:"16",title:e.namespacePrefix},{default:c(()=>[h(y)]),_:1},8,["title"]),e.isLite?R("",!0):(u(),A("span",Hn,D(e.namespacePrefix+(e.namespacePrefix?".":"")),1))]),_:1},8,["value","readonly","onBlur"])),e.isLite?R("",!0):(u(),C(r,{key:3,style:{"margin-left":"10px"},align:"center"},{default:c(()=>[h(b,null,{default:c(()=>[h($,{size:"small",tertiary:"",type:"info",onClick:e.handleGetJSON,title:`${e.$t("actions.copy")} JSON`},{icon:c(()=>[h(f)]),_:1},8,["onClick","title"]),e.isRoot?R("",!0):(u(),C(i,{key:0,onPositiveClick:t[1]||(t[1]=V=>e.$emit("onRemove"))},{trigger:c(()=>[h($,{tertiary:"",type:"error",size:"small"},{icon:c(()=>[h(I)]),_:1})]),default:c(()=>[E(" "+D(e.$t("msgs.remove_group")),1)]),_:1})),h($,{size:"small",secondary:"",onClick:t[2]||(t[2]=V=>e.isExpand=!e.isExpand),title:"Toggle Expand"},{default:c(()=>[E(D(e.isExpand?"👀":"🙈"),1)]),_:1})]),_:1})]),_:1}))]),e.isExpand?(u(),A("div",Fn,[e.item.translates&&e.item.translates.length?(u(),A("div",jn,[(u(!0),A(se,null,_e(e.item.translates,(V,k)=>(u(),C(p,{item:V,"tree-item":e.item,key:k,index:k,"is-lite":e.isLite,onPreviewArray:e.handlePreviewArray,onOnRemove:B=>e.handleRemoveItem(k),onOnKeyClick:t[3]||(t[3]=(...B)=>e.$emit("onKeyClick",...B))},null,8,["item","tree-item","index","is-lite","onPreviewArray","onOnRemove"]))),128))])):R("",!0),S("div",Un,[e.isLite?R("",!0):(u(),C(b,{key:0},{default:c(()=>[h($,{size:"small",title:"Add translate item",type:"info",onClick:e.handleAddTranslate},{icon:c(()=>[h(P)]),default:c(()=>[E(" "+D(e.$t("common.field")),1)]),_:1},8,["onClick"]),h($,{size:"small",type:"info",secondary:"",onClick:e.handleAutoAdd,title:`Auto Paste (${e.intSettingsStore.autoPasteTextConvertMode}) and copy key`},{icon:c(()=>[h(J)]),default:c(()=>[E(" Auto Paste ")]),_:1},8,["onClick","title"])]),_:1}))]),Kn,e.item.children&&e.item.children.length?(u(!0),A(se,{key:1},_e(e.item.children,(V,k)=>(u(),C(ue,{item:V,key:k,index:k,"is-root":!1,"is-lite":e.isLite,onOnRemove:B=>e.handleRemoveTreeItem(k),onPreviewArray:e.handlePreviewArray,onOnKeyClick:t[4]||(t[4]=(...B)=>e.$emit("onKeyClick",...B))},null,8,["item","index","is-lite","onOnRemove","onPreviewArray"]))),128)):R("",!0),S("div",Gn,[S("span",Jn,D(e.namespacePrefix?e.namespacePrefix+".":"")+D(e.item.namespace),1),e.isLite?R("",!0):(u(),C($,{key:0,type:"primary",onClick:e.handleAddChildren,title:"Add translate children group"},{icon:c(()=>[h(U)]),default:c(()=>[E(" "+D(e.$t("common.group")),1)]),_:1},8,["onClick"]))])])):R("",!0),h(ee,{"is-textarea":"",title:e.$t("common.array_detail"),placeholder:"Array JSON String",visible:e.isShowArrayEdit,"onUpdate:visible":t[5]||(t[5]=V=>e.isShowArrayEdit=V),text:e.currentArrayString,onOnSave:e.handleSaveArray},null,8,["title","visible","text","onOnSave"])]),_:1},8,["class"])):R("",!0)}const Wn=Y(Ln,[["render",Zn],["__scopeId","data-v-8f395003"]]),Xn="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.5%201C9.78557%201%2011.0423%201.38123%2012.1112%202.09546C13.1801%202.80969%2014.0132%203.82483%2014.5052%205.01257C14.8972%205.95898%2015.0586%206.98108%2014.9811%207.99524C14.8962%209.10645%2014.5267%2010.1801%2013.9046%2011.1112C13.1903%2012.1802%2012.1752%2013.0133%2010.9874%2013.5052C9.79973%2013.9972%208.4928%2014.126%207.23192%2013.8751C5.97104%2013.6243%204.81285%2013.0052%203.90381%2012.0962C2.99476%2011.1871%202.3757%2010.0289%202.12489%208.76807C1.8741%207.5072%202.00282%206.20032%202.49478%205.01257C2.98675%203.82483%203.81987%202.80969%204.88879%202.09546C5.95772%201.38123%207.21443%201%208.5%201ZM13.394%205C12.7527%203.75281%2011.6613%202.79626%2010.3412%202.32373C10.7845%203.16357%2011.106%204.0647%2011.294%205H13.394ZM13.9765%207.99524C13.9918%207.83081%2013.9997%207.66553%2014%207.5C13.999%206.99255%2013.9273%206.48767%2013.787%206H11.445C11.477%206.33105%2011.5%206.66406%2011.5%207C11.4997%207.12598%2011.4971%207.25195%2011.4921%207.37769C11.4917%207.38623%2011.4914%207.39417%2011.4911%207.40271C11.4834%207.58289%2011.4709%207.76331%2011.4536%207.94263C11.4192%208.29749%2011.366%208.65039%2011.294%209H13.787C13.8815%208.67139%2013.9449%208.33496%2013.9765%207.99524ZM10.4408%207.99524C10.4428%207.97815%2010.4447%207.96106%2010.4466%207.94397C10.4808%207.63074%2010.4987%207.31567%2010.5%207C10.4933%206.66553%2010.4679%206.33167%2010.424%206H6.576C6.53207%206.33167%206.5067%206.66553%206.5%207C6.50274%207.67334%206.5809%208.34412%206.733%209H10.267C10.3439%208.66833%2010.4019%208.33289%2010.4408%207.99524ZM10.249%205C10.1607%204.60352%2010.0465%204.21399%209.90597%203.83447C9.67117%203.2019%209.36551%202.59644%208.994%202.03003C8.83%202.01599%208.666%202%208.5%202C8.39551%202%208.29182%202.00635%208.18843%202.01453C8.12755%202.01929%208.06677%202.02478%208.00599%202.03003L8%202.03918C7.40887%202.94299%206.98573%203.9458%206.75101%205H10.249ZM5.70601%205C5.89779%204.0647%206.22313%203.16174%206.672%202.31897C5.34599%202.78979%204.24946%203.74866%203.606%205H5.70601ZM3.213%206C3.07269%206.48767%203.00101%206.99255%203%207.5C3.00101%208.00745%203.07269%208.51233%203.213%209H5.70601C5.57043%208.34192%205.50142%207.67188%205.5%207C5.5%206.66406%205.52301%206.33105%205.55501%206H3.213ZM5.96701%2010H3.60701C3.98501%2010.7384%204.52472%2011.382%205.18594%2011.8829C5.84715%2012.3838%206.61285%2012.729%207.42601%2012.8931C6.78598%2012.0142%206.2932%2011.0371%205.96701%2010ZM8.5%2012.644C9.13943%2011.8531%209.63927%2010.959%209.97799%2010H7.022C7.36075%2010.959%207.86058%2011.8531%208.5%2012.644ZM11.033%2010C10.7068%2011.0371%2010.214%2012.0142%209.574%2012.8931C10.3872%2012.729%2011.1528%2012.3838%2011.8141%2011.8829C12.4753%2011.382%2013.015%2010.7384%2013.393%2010H11.033Z'%20fill='%23689f57'/%3e%3c/svg%3e";export{We as D,Qn as _,Wn as a,Ye as b,Xe as c,Xn as i,re as u};
