import{u as a}from"./useIDBKeyval-BIf4fra4.js";import{c as e,E as n}from"./index-D7imv_Md.js";const s=(s,t)=>{const{data:i,set:l}=a(s,[]),o=e((()=>i.value.length?[...i.value.sort(((a,e)=>e.lastOpened-a.lastOpened)).map((a=>{const{handle:e,lastOpened:s,alias:o}=a;return{label:o||e.name+` (${n(s).format("HH:mm:ss")})`,key:`open_${s}`,props:{onClick:()=>(async a=>{await async function(a){const e={};return"granted"===await a.queryPermission(e)||"granted"===await a.requestPermission(e)}(a)&&t(a)})(e)},children:[{label:"Set Alias",key:`alias_${s}`,props:{onClick:()=>(async a=>{const e=[...i.value],n=e.findIndex((e=>e===a));if(-1!==n){let a=e[n];const s=await window.$mcUtils.showInputPrompt({title:`Set Alias: ${a.handle.name}`,value:a.alias||a.handle.name,allowEmpty:!0});a={...a,alias:s},e.splice(n,1,a),await l(e)}})(a)}},{label:"Remove",key:`remove_${s}`,props:{onClick:()=>(async a=>{const e=[...i.value],n=e.findIndex((e=>e===a));-1!==n&&(e.splice(n,1),await l(e))})(a)}}]}})),{label:"ðŸ§¹ Clear History",props:{onClick:()=>{window.$dialog.confirm("Confirm clear history?","",{type:"warning"}).then((()=>{i.value=[]})).catch()}}}]:[]));return{openedHistory:i,setOpenedHistory:l,appendHistory:async a=>{const e=[...i.value];e.push({handle:a,lastOpened:Date.now(),alias:""}),await l(e.slice(0,20))},historyMenuOptions:o}};export{s as u};
