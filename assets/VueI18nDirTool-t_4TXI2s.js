import{u as at,D as Fo,b as wn,c as $n,a as Rt,_ as xn,i as Do}from"./translate-MgIgyKya.js";import{d as ne,Y as k,Z as Io,$ as Oo,a0 as Ao,a1 as nn,a2 as rt,a3 as O,a4 as z,a5 as Te,r as I,a6 as Nt,a7 as Pt,a8 as Tn,m as G,a9 as Ft,aa as Dt,ab as X,ac as ie,ad as Rn,ae as Eo,af as Re,ag as qe,ah as j,ai as pt,aj as re,ak as Ko,al as Lo,M as Bo,am as _t,an as Mo,ao as ce,o as It,ap as zo,aq as on,ar as Nn,as as jo,at as an,au as Ee,av as Vo,aw as Ho,ax as He,w as ge,ay as kt,az as rn,aA as Uo,aB as Ue,aC as ln,aD as Go,aE as qo,aF as fe,aG as sn,aH as Wo,aI as dn,c as P,x as W,B as Q,aJ as nt,aK as Ot,aL as Yo,aM as xt,aN as Tt,l as At,g as Et,aO as Pn,aP as Jo,i as Fn,aQ as Xo,U as Kt,aR as Zo,b as Ye,W as We,e as ae,z as D,y as A,C as _e,I as Z,J as $e,H as q,N as Lt,X as Dn,aS as Qo,P as In,E as On,K as ot,aT as An,aU as ea,F as En,G as Kn,aV as Ln,h as ta,j as cn,aW as na,k as oa,S as aa,V as ra,R as la,aX as ia,A as un,D as Ct,aY as sa,aZ as da,a_ as ca}from"./index-ve-9jXjp.js";import{d as Bt,_ as Bn,u as ua,a as fa,c as ha,b as va}from"./use-meta-RFB9Km7d.js";import{_ as ga,a as ya}from"./Tabs-N8_fWUVR.js";function Mn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const ba=ne({name:"Switcher",render(){return k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},k("path",{d:"M12 8l10 8l-10 8z"}))}}),ma=e=>{const{baseColor:t,textColor2:n,bodyColor:a,cardColor:r,dividerColor:l,actionColor:u,scrollbarColor:h,scrollbarColorHover:f,invertedColor:s}=e;return{textColor:n,textColorInverted:"#FFF",color:a,colorEmbedded:u,headerColor:r,headerColorInverted:s,footerColor:u,footerColorInverted:s,headerBorderColor:l,headerBorderColorInverted:s,footerBorderColor:l,footerBorderColorInverted:s,siderBorderColor:l,siderBorderColorInverted:s,siderColor:r,siderColorInverted:s,siderToggleButtonBorder:`1px solid ${l}`,siderToggleButtonColor:t,siderToggleButtonIconColor:n,siderToggleButtonIconColorInverted:n,siderToggleBarColor:nn(a,h),siderToggleBarColorHover:nn(a,f),__invertScrollbar:"true"}},pa=Io({name:"Layout",common:Oo,peers:{Scrollbar:Ao},self:ma}),zn=pa,_a=rt("n-layout-sider"),jn={type:String,default:"static"},ka=O("layout",`
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 flex: auto;
 overflow: hidden;
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[O("layout-scroll-container",`
 overflow-x: hidden;
 box-sizing: border-box;
 height: 100%;
 `),z("absolute-positioned",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),Ca={embedded:Boolean,position:jn,nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,onScroll:Function,contentClass:String,contentStyle:{type:[String,Object],default:""},hasSider:Boolean,siderPlacement:{type:String,default:"left"}},Vn=rt("n-layout");function Hn(e){return ne({name:e?"LayoutContent":"Layout",props:Object.assign(Object.assign({},Te.props),Ca),setup(t){const n=I(null),a=I(null),{mergedClsPrefixRef:r,inlineThemeDisabled:l}=Nt(t),u=Te("Layout","-layout",ka,zn,t,r);function h(g,c){if(t.nativeScrollbar){const{value:d}=n;d&&(c===void 0?d.scrollTo(g):d.scrollTo(g,c))}else{const{value:d}=a;d&&d.scrollTo(g,c)}}Pt(Vn,t);let f=0,s=0;const _=g=>{var c;const d=g.target;f=d.scrollLeft,s=d.scrollTop,(c=t.onScroll)===null||c===void 0||c.call(t,g)};Tn(()=>{if(t.nativeScrollbar){const g=n.value;g&&(g.scrollTop=s,g.scrollLeft=f)}});const T={display:"flex",flexWrap:"nowrap",width:"100%",flexDirection:"row"},m={scrollTo:h},p=G(()=>{const{common:{cubicBezierEaseInOut:g},self:c}=u.value;return{"--n-bezier":g,"--n-color":t.embedded?c.colorEmbedded:c.color,"--n-text-color":c.textColor}}),v=l?Ft("layout",G(()=>t.embedded?"e":""),p,t):void 0;return Object.assign({mergedClsPrefix:r,scrollableElRef:n,scrollbarInstRef:a,hasSiderStyle:T,mergedTheme:u,handleNativeElScroll:_,cssVars:l?void 0:p,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender},m)},render(){var t;const{mergedClsPrefix:n,hasSider:a}=this;(t=this.onRender)===null||t===void 0||t.call(this);const r=a?this.hasSiderStyle:void 0,l=[this.themeClass,e&&`${n}-layout-content`,`${n}-layout`,`${n}-layout--${this.position}-positioned`];return k("div",{class:l,style:this.cssVars},this.nativeScrollbar?k("div",{ref:"scrollableElRef",class:[`${n}-layout-scroll-container`,this.contentClass],style:[this.contentStyle,r],onScroll:this.handleNativeElScroll},this.$slots):k(Dt,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:this.contentClass,contentStyle:[this.contentStyle,r]}),this.$slots))}})}const Sa=Hn(!1),wa=Hn(!0),$a=O("layout-sider",`
 flex-shrink: 0;
 box-sizing: border-box;
 position: relative;
 z-index: 1;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 min-width .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-color);
 display: flex;
 justify-content: flex-end;
`,[z("bordered",[X("border",`
 content: "";
 position: absolute;
 top: 0;
 bottom: 0;
 width: 1px;
 background-color: var(--n-border-color);
 transition: background-color .3s var(--n-bezier);
 `)]),X("left-placement",[z("bordered",[X("border",`
 right: 0;
 `)])]),z("right-placement",`
 justify-content: flex-start;
 `,[z("bordered",[X("border",`
 left: 0;
 `)]),z("collapsed",[O("layout-toggle-button",[O("base-icon",`
 transform: rotate(180deg);
 `)]),O("layout-toggle-bar",[ie("&:hover",[X("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),X("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])])]),O("layout-toggle-button",`
 left: 0;
 transform: translateX(-50%) translateY(-50%);
 `,[O("base-icon",`
 transform: rotate(0);
 `)]),O("layout-toggle-bar",`
 left: -28px;
 transform: rotate(180deg);
 `,[ie("&:hover",[X("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),X("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})])])]),z("collapsed",[O("layout-toggle-bar",[ie("&:hover",[X("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),X("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])]),O("layout-toggle-button",[O("base-icon",`
 transform: rotate(0);
 `)])]),O("layout-toggle-button",`
 transition:
 color .3s var(--n-bezier),
 right .3s var(--n-bezier),
 left .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 cursor: pointer;
 width: 24px;
 height: 24px;
 position: absolute;
 top: 50%;
 right: 0;
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 font-size: 18px;
 color: var(--n-toggle-button-icon-color);
 border: var(--n-toggle-button-border);
 background-color: var(--n-toggle-button-color);
 box-shadow: 0 2px 4px 0px rgba(0, 0, 0, .06);
 transform: translateX(50%) translateY(-50%);
 z-index: 1;
 `,[O("base-icon",`
 transition: transform .3s var(--n-bezier);
 transform: rotate(180deg);
 `)]),O("layout-toggle-bar",`
 cursor: pointer;
 height: 72px;
 width: 32px;
 position: absolute;
 top: calc(50% - 36px);
 right: -28px;
 `,[X("top, bottom",`
 position: absolute;
 width: 4px;
 border-radius: 2px;
 height: 38px;
 left: 14px;
 transition: 
 background-color .3s var(--n-bezier),
 transform .3s var(--n-bezier);
 `),X("bottom",`
 position: absolute;
 top: 34px;
 `),ie("&:hover",[X("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),X("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})]),X("top, bottom",{backgroundColor:"var(--n-toggle-bar-color)"}),ie("&:hover",[X("top, bottom",{backgroundColor:"var(--n-toggle-bar-color-hover)"})])]),X("border",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 width: 1px;
 transition: background-color .3s var(--n-bezier);
 `),O("layout-sider-scroll-container",`
 flex-grow: 1;
 flex-shrink: 0;
 box-sizing: border-box;
 height: 100%;
 opacity: 0;
 transition: opacity .3s var(--n-bezier);
 max-width: 100%;
 `),z("show-content",[O("layout-sider-scroll-container",{opacity:1})]),z("absolute-positioned",`
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 `)]),xa=ne({name:"LayoutToggleButton",props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:e}=this;return k("div",{class:`${e}-layout-toggle-button`,onClick:this.onClick},k(Rn,{clsPrefix:e},{default:()=>k(Eo,null)}))}}),Ta=ne({props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:e}=this;return k("div",{onClick:this.onClick,class:`${e}-layout-toggle-bar`},k("div",{class:`${e}-layout-toggle-bar__top`}),k("div",{class:`${e}-layout-toggle-bar__bottom`}))}}),Ra={position:jn,bordered:Boolean,collapsedWidth:{type:Number,default:48},width:{type:[Number,String],default:272},contentClass:String,contentStyle:{type:[String,Object],default:""},collapseMode:{type:String,default:"transform"},collapsed:{type:Boolean,default:void 0},defaultCollapsed:Boolean,showCollapsedContent:{type:Boolean,default:!0},showTrigger:{type:[Boolean,String],default:!1},nativeScrollbar:{type:Boolean,default:!0},inverted:Boolean,scrollbarProps:Object,triggerClass:String,triggerStyle:[String,Object],collapsedTriggerClass:String,collapsedTriggerStyle:[String,Object],"onUpdate:collapsed":[Function,Array],onUpdateCollapsed:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,onExpand:[Function,Array],onCollapse:[Function,Array],onScroll:Function},Na=ne({name:"LayoutSider",props:Object.assign(Object.assign({},Te.props),Ra),setup(e){const t=Re(Vn),n=I(null),a=I(null),r=G(()=>pt(f.value?e.collapsedWidth:e.width)),l=G(()=>e.collapseMode!=="transform"?{}:{minWidth:pt(e.width)}),u=G(()=>t?t.siderPlacement:"left"),h=I(e.defaultCollapsed),f=qe(j(e,"collapsed"),h);function s(L,S){if(e.nativeScrollbar){const{value:K}=n;K&&(S===void 0?K.scrollTo(L):K.scrollTo(L,S))}else{const{value:K}=a;K&&K.scrollTo(L,S)}}function _(){const{"onUpdate:collapsed":L,onUpdateCollapsed:S,onExpand:K,onCollapse:ee}=e,{value:b}=f;S&&re(S,!b),L&&re(L,!b),h.value=!b,b?K&&re(K):ee&&re(ee)}let T=0,m=0;const p=L=>{var S;const K=L.target;T=K.scrollLeft,m=K.scrollTop,(S=e.onScroll)===null||S===void 0||S.call(e,L)};Tn(()=>{if(e.nativeScrollbar){const L=n.value;L&&(L.scrollTop=m,L.scrollLeft=T)}}),Pt(_a,{collapsedRef:f,collapseModeRef:j(e,"collapseMode")});const{mergedClsPrefixRef:v,inlineThemeDisabled:g}=Nt(e),c=Te("Layout","-layout-sider",$a,zn,e,v);function d(L){var S,K;L.propertyName==="max-width"&&(f.value?(S=e.onAfterLeave)===null||S===void 0||S.call(e):(K=e.onAfterEnter)===null||K===void 0||K.call(e))}const F={scrollTo:s},N=G(()=>{const{common:{cubicBezierEaseInOut:L},self:S}=c.value,{siderToggleButtonColor:K,siderToggleButtonBorder:ee,siderToggleBarColor:b,siderToggleBarColorHover:R}=S,B={"--n-bezier":L,"--n-toggle-button-color":K,"--n-toggle-button-border":ee,"--n-toggle-bar-color":b,"--n-toggle-bar-color-hover":R};return e.inverted?(B["--n-color"]=S.siderColorInverted,B["--n-text-color"]=S.textColorInverted,B["--n-border-color"]=S.siderBorderColorInverted,B["--n-toggle-button-icon-color"]=S.siderToggleButtonIconColorInverted,B.__invertScrollbar=S.__invertScrollbar):(B["--n-color"]=S.siderColor,B["--n-text-color"]=S.textColor,B["--n-border-color"]=S.siderBorderColor,B["--n-toggle-button-icon-color"]=S.siderToggleButtonIconColor),B}),E=g?Ft("layout-sider",G(()=>e.inverted?"a":"b"),N,e):void 0;return Object.assign({scrollableElRef:n,scrollbarInstRef:a,mergedClsPrefix:v,mergedTheme:c,styleMaxWidth:r,mergedCollapsed:f,scrollContainerStyle:l,siderPlacement:u,handleNativeElScroll:p,handleTransitionend:d,handleTriggerClick:_,inlineThemeDisabled:g,cssVars:N,themeClass:E==null?void 0:E.themeClass,onRender:E==null?void 0:E.onRender},F)},render(){var e;const{mergedClsPrefix:t,mergedCollapsed:n,showTrigger:a}=this;return(e=this.onRender)===null||e===void 0||e.call(this),k("aside",{class:[`${t}-layout-sider`,this.themeClass,`${t}-layout-sider--${this.position}-positioned`,`${t}-layout-sider--${this.siderPlacement}-placement`,this.bordered&&`${t}-layout-sider--bordered`,n&&`${t}-layout-sider--collapsed`,(!n||this.showCollapsedContent)&&`${t}-layout-sider--show-content`],onTransitionend:this.handleTransitionend,style:[this.inlineThemeDisabled?void 0:this.cssVars,{maxWidth:this.styleMaxWidth,width:pt(this.width)}]},this.nativeScrollbar?k("div",{class:[`${t}-layout-sider-scroll-container`,this.contentClass],onScroll:this.handleNativeElScroll,style:[this.scrollContainerStyle,{overflow:"auto"},this.contentStyle],ref:"scrollableElRef"},this.$slots):k(Dt,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",style:this.scrollContainerStyle,contentStyle:this.contentStyle,contentClass:this.contentClass,theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,builtinThemeOverrides:this.inverted&&this.cssVars.__invertScrollbar==="true"?{colorHover:"rgba(255, 255, 255, .4)",color:"rgba(255, 255, 255, .3)"}:void 0}),this.$slots),a?a==="bar"?k(Ta,{clsPrefix:t,class:n?this.collapsedTriggerClass:this.triggerClass,style:n?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):k(xa,{clsPrefix:t,class:n?this.collapsedTriggerClass:this.triggerClass,style:n?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):null,this.bordered?k("div",{class:`${t}-layout-sider__border`}):null)}}),Pa=Object.assign(Object.assign({},Te.props),{trigger:String,xScrollable:Boolean,onScroll:Function,size:Number}),Fa=ne({name:"Scrollbar",props:Pa,setup(){const e=I(null);return Object.assign(Object.assign({},{scrollTo:(...n)=>{var a;(a=e.value)===null||a===void 0||a.scrollTo(n[0],n[1])},scrollBy:(...n)=>{var a;(a=e.value)===null||a===void 0||a.scrollBy(n[0],n[1])}}),{scrollbarInstRef:e})},render(){return k(Dt,Object.assign({ref:"scrollbarInstRef"},this.$props),this.$slots)}}),Da=Fa,Un=rt("n-tree-select"),Je=rt("n-tree"),Ia=ne({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=Re(Je,null);return()=>{const{clsPrefix:n,expanded:a,hide:r,indent:l,onClick:u}=e;return k("span",{"data-switcher":!0,class:[`${n}-tree-node-switcher`,a&&`${n}-tree-node-switcher--expanded`,r&&`${n}-tree-node-switcher--hide`],style:{width:`${l}px`},onClick:u},k("div",{class:`${n}-tree-node-switcher__icon`},k(Ko,null,{default:()=>{if(e.loading)return k(Lo,{clsPrefix:n,key:"loading",radius:85,strokeWidth:20});const{value:h}=t;return h?h({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):k(Rn,{clsPrefix:n,key:"switcher"},{default:()=>k(ba,null)})}})))}}}),Oa=ne({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Re(Je);function n(r){const{onCheck:l}=e;l&&l(r)}function a(r){n(r)}return{handleUpdateValue:a,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:n,indeterminate:a,disabled:r,focusable:l,indent:u,handleUpdateValue:h}=this;return k("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${u}px`},"data-checkbox":!0},k(Bo,{focusable:l,disabled:r,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:n,indeterminate:a,onUpdateChecked:h}))}}),Aa=ne({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:n,renderSuffixRef:a,labelFieldRef:r}=Re(Je),l=I(null);function u(f){const{onClick:s}=e;s&&s(f)}function h(f){u(f)}return{selfRef:l,renderLabel:t,renderPrefix:n,renderSuffix:a,labelField:r,handleClick:h}},render(){const{clsPrefix:e,labelField:t,nodeProps:n,checked:a=!1,selected:r=!1,renderLabel:l,renderPrefix:u,renderSuffix:h,handleClick:f,onDragstart:s,tmNode:{rawNode:_,rawNode:{prefix:T,suffix:m,[t]:p}}}=this;return k("span",Object.assign({},n,{ref:"selfRef",class:[`${e}-tree-node-content`,n==null?void 0:n.class],onClick:f,draggable:s===void 0?void 0:!0,onDragstart:s}),u||T?k("div",{class:`${e}-tree-node-content__prefix`},u?u({option:_,selected:r,checked:a}):_t(T)):null,k("div",{class:`${e}-tree-node-content__text`},l?l({option:_,selected:r,checked:a}):_t(p)),h||m?k("div",{class:`${e}-tree-node-content__suffix`},h?h({option:_,selected:r,checked:a}):_t(m)):null)}});function fn({position:e,offsetLevel:t,indent:n,el:a}){const r={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")r.left=0,r.top=0,r.bottom=0,r.borderRadius="inherit",r.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const l=e==="before"?"top":"bottom";r[l]=0,r.left=`${a.offsetLeft+6-t*n}px`,r.height="2px",r.backgroundColor="var(--n-drop-mark-color)",r.transformOrigin=l,r.borderRadius="1px",r.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return k("div",{style:r})}function Ea({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function Ka(e){return G(()=>e.leafOnly?"child":e.checkStrategy)}function we(e,t){return!!e.rawNode[t]}function Gn(e,t,n,a){e==null||e.forEach(r=>{n(r),Gn(r[t],t,n,a),a(r)})}function La(e,t,n,a,r){const l=new Set,u=new Set,h=[];return Gn(e,a,f=>{if(h.push(f),r(t,f)){u.add(f[n]);for(let s=h.length-2;s>=0;--s)if(!l.has(h[s][n]))l.add(h[s][n]);else return}},()=>{h.pop()}),{expandedKeys:Array.from(l),highlightKeySet:u}}if(Mo&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Ba(e,t,n,a,r){const l=new Set,u=new Set,h=new Set,f=[],s=[],_=[];function T(p){p.forEach(v=>{if(_.push(v),t(n,v)){l.add(v[a]),h.add(v[a]);for(let c=_.length-2;c>=0;--c){const d=_[c][a];if(!u.has(d))u.add(d),l.has(d)&&l.delete(d);else break}}const g=v[r];g&&T(g),_.pop()})}T(e);function m(p,v){p.forEach(g=>{const c=g[a],d=l.has(c),F=u.has(c);if(!d&&!F)return;const N=g[r];if(N)if(d)v.push(g);else{f.push(c);const E=Object.assign(Object.assign({},g),{[r]:[]});v.push(E),m(N,E[r])}else v.push(g)})}return m(e,s),{filteredTree:s,highlightKeySet:h,expandedKeys:f}}const Ma=ne({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Re(Je),{droppingNodeParentRef:n,droppingMouseNodeRef:a,draggingNodeRef:r,droppingPositionRef:l,droppingOffsetLevelRef:u,nodePropsRef:h,indentRef:f,blockLineRef:s,checkboxPlacementRef:_,checkOnClickRef:T,disabledFieldRef:m,showLineRef:p,renderSwitcherIconRef:v,overrideDefaultNodeClickBehaviorRef:g}=t,c=ce(()=>!!e.tmNode.rawNode.checkboxDisabled),d=ce(()=>we(e.tmNode,m.value)),F=ce(()=>t.disabledRef.value||d.value),N=G(()=>{const{value:w}=h;if(w)return w({option:e.tmNode.rawNode})}),E=I(null),L={value:null};It(()=>{L.value=E.value.$el});function S(){const w=()=>{const{tmNode:M}=e;if(!M.isLeaf&&!M.shallowLoaded){if(!t.loadingKeysRef.value.has(M.key))t.loadingKeysRef.value.add(M.key);else return;const{onLoadRef:{value:Y}}=t;Y&&Y(M.rawNode).then(te=>{te!==!1&&t.handleSwitcherClick(M)}).finally(()=>{t.loadingKeysRef.value.delete(M.key)})}else t.handleSwitcherClick(M)};v.value?setTimeout(w,0):w()}const K=ce(()=>!d.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),ee=ce(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),b=ce(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),R=ce(()=>{const{value:w}=ee;if(!w)return!1;const{value:M}=T,{tmNode:Y}=e;return typeof M=="boolean"?!Y.disabled&&M:M(e.tmNode.rawNode)});function B(w){const{value:M}=t.expandOnClickRef,{value:Y}=K,{value:te}=R;if(!Y&&!M&&!te||on(w,"checkbox")||on(w,"switcher"))return;const{tmNode:de}=e;Y&&t.handleSelect(de),M&&!de.isLeaf&&S(),te&&V(!b.value)}function oe(w){var M,Y;if(!F.value){const te=g.value;let de=!1;if(te)switch(te({option:e.tmNode.rawNode})){case"toggleCheck":de=!0,V(!b.value);break;case"toggleSelect":de=!0,t.handleSelect(e.tmNode);break;case"toggleExpand":de=!0,S(),de=!0;break;case"none":de=!0,de=!0;return}de||B(w)}(Y=(M=N.value)===null||M===void 0?void 0:M.onClick)===null||Y===void 0||Y.call(M,w)}function ke(w){s.value||oe(w)}function x(w){s.value&&oe(w)}function V(w){t.handleCheck(e.tmNode,w)}function se(w){t.handleDragStart({event:w,node:e.tmNode})}function dt(w){w.currentTarget===w.target&&t.handleDragEnter({event:w,node:e.tmNode})}function me(w){w.preventDefault(),t.handleDragOver({event:w,node:e.tmNode})}function Ce(w){t.handleDragEnd({event:w,node:e.tmNode})}function ze(w){w.currentTarget===w.target&&t.handleDragLeave({event:w,node:e.tmNode})}function ct(w){w.preventDefault(),l.value!==null&&t.handleDrop({event:w,node:e.tmNode,dropPosition:l.value})}const ut=G(()=>{const{clsPrefix:w}=e,{value:M}=f;if(p.value){const Y=[];let te=e.tmNode.parent;for(;te;)te.isLastChild?Y.push(k("div",{class:`${w}-tree-node-indent`},k("div",{style:{width:`${M}px`}}))):Y.push(k("div",{class:[`${w}-tree-node-indent`,`${w}-tree-node-indent--show-line`]},k("div",{style:{width:`${M}px`}}))),te=te.parent;return Y.reverse()}else return zo(e.tmNode.level,k("div",{class:`${e.clsPrefix}-tree-node-indent`},k("div",{style:{width:`${M}px`}})))});return{showDropMark:ce(()=>{const{value:w}=r;if(!w)return;const{value:M}=l;if(!M)return;const{value:Y}=a;if(!Y)return;const{tmNode:te}=e;return te.key===Y.key}),showDropMarkAsParent:ce(()=>{const{value:w}=n;if(!w)return!1;const{tmNode:M}=e,{value:Y}=l;return Y==="before"||Y==="after"?w.key===M.key:!1}),pending:ce(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:ce(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:ce(()=>{var w;return(w=t.highlightKeySetRef.value)===null||w===void 0?void 0:w.has(e.tmNode.key)}),checked:b,indeterminate:ce(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:ce(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:ce(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:F,checkable:ee,mergedCheckOnClick:R,checkboxDisabled:c,selectable:K,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:s,nodeProps:N,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:l,droppingOffsetLevel:u,indent:f,checkboxPlacement:_,showLine:p,contentInstRef:E,contentElRef:L,indentNodes:ut,handleCheck:V,handleDrop:ct,handleDragStart:se,handleDragEnter:dt,handleDragOver:me,handleDragEnd:Ce,handleDragLeave:ze,handleLineClick:x,handleContentClick:ke,handleSwitcherClick:S}},render(){const{tmNode:e,clsPrefix:t,checkable:n,expandOnClick:a,selectable:r,selected:l,checked:u,highlight:h,draggable:f,blockLine:s,indent:_,indentNodes:T,disabled:m,pending:p,internalScrollable:v,nodeProps:g,checkboxPlacement:c}=this,d=f&&!m?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,F=v?Mn(e.key):void 0,N=c==="right",E=n?k(Oa,{indent:_,right:N,focusable:this.checkboxFocusable,disabled:m||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return k("div",Object.assign({class:`${t}-tree-node-wrapper`},d),k("div",Object.assign({},s?g:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:l,[`${t}-tree-node--checkable`]:n,[`${t}-tree-node--highlight`]:h,[`${t}-tree-node--pending`]:p,[`${t}-tree-node--disabled`]:m,[`${t}-tree-node--selectable`]:r,[`${t}-tree-node--clickable`]:r||a||this.mergedCheckOnClick},g==null?void 0:g.class],"data-key":F,draggable:f&&s,onClick:this.handleLineClick,onDragstart:f&&s&&!m?this.handleDragStart:void 0}),T,e.isLeaf&&this.showLine?k("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},k("div",{style:{width:`${_}px`}})):k(Ia,{clsPrefix:t,expanded:this.expanded,selected:l,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:_,onClick:this.handleSwitcherClick}),N?null:E,k(Aa,{ref:"contentInstRef",clsPrefix:t,checked:u,selected:l,onClick:this.handleContentClick,nodeProps:s?void 0:g,onDragstart:f&&!s&&!m?this.handleDragStart:void 0,tmNode:e}),f?this.showDropMark?fn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:_}):this.showDropMarkAsParent?fn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:_}):null:null,N?E:null))}}),qn=Ma;function za({props:e,fNodesRef:t,mergedExpandedKeysRef:n,mergedSelectedKeysRef:a,mergedCheckedKeysRef:r,handleCheck:l,handleSelect:u,handleSwitcherClick:h}){const{value:f}=a,s=Re(Un,null),_=s?s.pendingNodeKeyRef:I(f.length?f[f.length-1]:null);function T(m){var p;if(!e.keyboard)return{enterBehavior:null};const{value:v}=_;let g=null;if(v===null){if((m.key==="ArrowDown"||m.key==="ArrowUp")&&m.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(m.key)&&v===null){const{value:c}=t;let d=0;for(;d<c.length;){if(!c[d].disabled){_.value=c[d].key;break}d+=1}}}else{const{value:c}=t;let d=c.findIndex(F=>F.key===v);if(!~d)return{enterBehavior:null};if(m.key==="Enter"){const F=c[d];switch(g=((p=e.overrideDefaultNodeClickBehavior)===null||p===void 0?void 0:p.call(e,{option:F.rawNode}))||null,g){case"toggleCheck":l(F,!r.value.includes(F.key));break;case"toggleSelect":u(F);break;case"toggleExpand":h(F);break;case"none":break;case"default":default:g="default",u(F)}}else if(m.key==="ArrowDown")for(m.preventDefault(),d+=1;d<c.length;){if(!c[d].disabled){_.value=c[d].key;break}d+=1}else if(m.key==="ArrowUp")for(m.preventDefault(),d-=1;d>=0;){if(!c[d].disabled){_.value=c[d].key;break}d-=1}else if(m.key==="ArrowLeft"){const F=c[d];if(F.isLeaf||!n.value.includes(v)){const N=F.getParent();N&&(_.value=N.key)}else h(F)}else if(m.key==="ArrowRight"){const F=c[d];if(F.isLeaf)return{enterBehavior:null};if(!n.value.includes(v))h(F);else for(d+=1;d<c.length;){if(!c[d].disabled){_.value=c[d].key;break}d+=1}}}return{enterBehavior:g}}return{pendingNodeKeyRef:_,handleKeydown:T}}const ja=ne({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return k(jo,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>k("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Nn(this.height)}},this.nodes.map(t=>k(qn,{clsPrefix:e,tmNode:t})))})}}),St=Vo(),Va=O("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[ie("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),ie(">",[O("tree-node",[ie("&:first-child","margin-top: 0;")])]),O("tree-motion-wrapper",[z("expand",[an({duration:"0.2s"})]),z("collapse",[an({duration:"0.2s",reverse:!0})])]),O("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),O("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[z("highlight",[O("tree-node-content",[X("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),z("disabled",[O("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Ee("disabled",[z("clickable",[O("tree-node-content",`
 cursor: pointer;
 `)])])]),z("block-node",[O("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Ee("block-line",[O("tree-node",[Ee("disabled",[O("tree-node-content",[ie("&:hover","background: var(--n-node-color-hover);")]),z("selectable",[O("tree-node-content",[ie("&:active","background: var(--n-node-color-pressed);")])]),z("pending",[O("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),z("selected",[O("tree-node-content","background: var(--n-node-color-active);")])]),z("selected",[O("tree-node-content","background: var(--n-node-color-active);")])])]),z("block-line",[O("tree-node",[Ee("disabled",[ie("&:hover","background: var(--n-node-color-hover);"),z("pending",`
 background: var(--n-node-color-hover);
 `),z("selectable",[Ee("selected",[ie("&:active","background: var(--n-node-color-pressed);")])]),z("selected","background: var(--n-node-color-active);")]),z("selected","background: var(--n-node-color-active);"),z("disabled",`
 cursor: not-allowed;
 `)])]),O("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[z("show-line","position: relative",[ie("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),z("last-child",[ie("&::before",`
 bottom: 50%;
 `)]),z("is-leaf",[ie("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),Ee("show-line","height: 0;")]),O("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[X("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[O("icon",[St]),O("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[St]),O("base-icon",[St])]),z("hide","visibility: hidden;"),z("expanded","transform: rotate(90deg);")]),O("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),O("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ie("&:last-child","margin-bottom: 0;"),X("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),X("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),X("suffix",`
 display: inline-flex;
 `)]),X("empty","margin: auto;")]);var Ha=function(e,t,n,a){function r(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(_){try{s(a.next(_))}catch(T){u(T)}}function f(_){try{s(a.throw(_))}catch(T){u(T)}}function s(_){_.done?l(_.value):r(_.value).then(h,f)}s((a=a.apply(e,t||[])).next())})};function Ua(e,t,n,a){return{getIsGroup(){return!1},getKey(l){return l[e]},getChildren:a||(l=>l[t]),getDisabled(l){return!!(l[n]||l.checkboxDisabled)}}}const Ga={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},qa=Object.assign(Object.assign(Object.assign(Object.assign({},Te.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:Ea},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Ga),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Wa=ne({name:"Tree",props:qa,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n,mergedRtlRef:a}=Nt(e),r=Ho("Tree",a,t),l=Te("Tree","-tree",Va,Go,e,t),u=I(null),h=I(null),f=I(null);function s(){var o;return(o=f.value)===null||o===void 0?void 0:o.listElRef}function _(){var o;return(o=f.value)===null||o===void 0?void 0:o.itemsElRef}const T=G(()=>{const{filter:o}=e;if(o)return o;const{labelField:i}=e;return(y,C)=>{if(!y.length)return!0;const $=C[i];return typeof $=="string"?$.toLowerCase().includes(y.toLowerCase()):!1}}),m=G(()=>{const{pattern:o}=e;return o?!o.length||!T.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Ba(e.data,T.value,o,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),p=G(()=>qo(e.showIrrelevantNodes?e.data:m.value.filteredTree,Ua(e.keyField,e.childrenField,e.disabledField,e.getChildren))),v=Re(Un,null),g=e.internalTreeSelect?v.dataTreeMate:p,{watchProps:c}=e,d=I([]);c!=null&&c.includes("defaultCheckedKeys")?He(()=>{d.value=e.defaultCheckedKeys}):d.value=e.defaultCheckedKeys;const F=j(e,"checkedKeys"),N=qe(F,d),E=G(()=>g.value.getCheckedKeys(N.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),L=Ka(e),S=G(()=>E.value.checkedKeys),K=G(()=>{const{indeterminateKeys:o}=e;return o!==void 0?o:E.value.indeterminateKeys}),ee=I([]);c!=null&&c.includes("defaultSelectedKeys")?He(()=>{ee.value=e.defaultSelectedKeys}):ee.value=e.defaultSelectedKeys;const b=j(e,"selectedKeys"),R=qe(b,ee),B=I([]),oe=o=>{B.value=e.defaultExpandAll?g.value.getNonLeafKeys():o===void 0?e.defaultExpandedKeys:o};c!=null&&c.includes("defaultExpandedKeys")?He(()=>{oe(void 0)}):He(()=>{oe(e.defaultExpandedKeys)});const ke=j(e,"expandedKeys"),x=qe(ke,B),V=G(()=>p.value.getFlattenedNodes(x.value)),{pendingNodeKeyRef:se,handleKeydown:dt}=za({props:e,mergedCheckedKeysRef:N,mergedSelectedKeysRef:R,fNodesRef:V,mergedExpandedKeysRef:x,handleCheck:yt,handleSelect:bt,handleSwitcherClick:Xt});let me=null,Ce=null;const ze=I(new Set),ct=G(()=>e.internalHighlightKeySet||m.value.highlightKeySet),ut=qe(ct,ze),w=I(new Set),M=G(()=>x.value.filter(o=>!w.value.has(o)));let Y=0;const te=I(null),de=I(null),Xe=I(null),Ze=I(null),Qe=I(0),ro=G(()=>{const{value:o}=de;return o?o.parent:null});let ft=!1;ge(j(e,"data"),()=>{ft=!0,fe(()=>{ft=!1}),w.value.clear(),se.value=null,Ve()},{deep:!1});let ht=!1;const vt=()=>{ht=!0,fe(()=>{ht=!1})};let je;ge(j(e,"pattern"),(o,i)=>{if(e.showIrrelevantNodes)if(je=void 0,o){const{expandedKeys:y,highlightKeySet:C}=La(e.data,e.pattern,e.keyField,e.childrenField,T.value);ze.value=C,vt(),Pe(y,he(y),{node:null,action:"filter"})}else ze.value=new Set;else if(!o.length)je!==void 0&&(vt(),Pe(je,he(je),{node:null,action:"filter"}));else{i.length||(je=x.value);const{expandedKeys:y}=m.value;y!==void 0&&(vt(),Pe(y,he(y),{node:null,action:"filter"}))}});function Yt(o){return Ha(this,void 0,void 0,function*(){const{onLoad:i}=e;if(!i){yield Promise.resolve();return}const{value:y}=w;if(!y.has(o.key)){y.add(o.key);try{(yield i(o.rawNode))===!1&&Fe()}catch(C){console.error(C),Fe()}y.delete(o.key)}})}He(()=>{var o;const{value:i}=p;if(!i)return;const{getNode:y}=i;(o=x.value)===null||o===void 0||o.forEach(C=>{const $=y(C);$&&!$.shallowLoaded&&Yt($)})});const Ne=I(!1),Se=I([]);ge(M,(o,i)=>{if(!e.animated||ht){fe(et);return}if(ft)return;const y=Ue(l.value.self.nodeHeight),C=new Set(i);let $=null,J=null;for(const U of o)if(!C.has(U)){if($!==null)return;$=U}const ue=new Set(o);for(const U of i)if(!ue.has(U)){if(J!==null)return;J=U}if($===null&&J===null)return;const{virtualScroll:ve}=e,Ie=(ve?f.value.listElRef:u.value).offsetHeight,Oe=Math.ceil(Ie/y)+1;let ye;if($!==null&&(ye=i),J!==null&&(ye===void 0?ye=o:ye=ye.filter(U=>U!==J)),Ne.value=!0,Se.value=p.value.getFlattenedNodes(ye),$!==null){const U=Se.value.findIndex(be=>be.key===$);if(~U){const be=Se.value[U].children;if(be){const pe=sn(be,o);Se.value.splice(U+1,0,{__motion:!0,mode:"expand",height:ve?pe.length*y:void 0,nodes:ve?pe.slice(0,Oe):pe})}}}if(J!==null){const U=Se.value.findIndex(be=>be.key===J);if(~U){const be=Se.value[U].children;if(!be)return;Ne.value=!0;const pe=sn(be,o);Se.value.splice(U+1,0,{__motion:!0,mode:"collapse",height:ve?pe.length*y:void 0,nodes:ve?pe.slice(0,Oe):pe})}}});const lo=G(()=>Wo(V.value)),io=G(()=>Ne.value?Se.value:V.value);function et(){const{value:o}=h;o&&o.sync()}function so(){Ne.value=!1,e.virtualScroll&&fe(et)}function he(o){const{getNode:i}=g.value;return o.map(y=>{var C;return((C=i(y))===null||C===void 0?void 0:C.rawNode)||null})}function Pe(o,i,y){const{"onUpdate:expandedKeys":C,onUpdateExpandedKeys:$}=e;B.value=o,C&&re(C,o,i,y),$&&re($,o,i,y)}function Jt(o,i,y){const{"onUpdate:checkedKeys":C,onUpdateCheckedKeys:$}=e;d.value=o,$&&re($,o,i,y),C&&re(C,o,i,y)}function co(o,i){const{"onUpdate:indeterminateKeys":y,onUpdateIndeterminateKeys:C}=e;y&&re(y,o,i),C&&re(C,o,i)}function gt(o,i,y){const{"onUpdate:selectedKeys":C,onUpdateSelectedKeys:$}=e;ee.value=o,$&&re($,o,i,y),C&&re(C,o,i,y)}function uo(o){const{onDragenter:i}=e;i&&re(i,o)}function fo(o){const{onDragleave:i}=e;i&&re(i,o)}function ho(o){const{onDragend:i}=e;i&&re(i,o)}function vo(o){const{onDragstart:i}=e;i&&re(i,o)}function go(o){const{onDragover:i}=e;i&&re(i,o)}function yo(o){const{onDrop:i}=e;i&&re(i,o)}function Ve(){bo(),xe()}function bo(){te.value=null}function xe(){Qe.value=0,de.value=null,Xe.value=null,Ze.value=null,Fe()}function Fe(){me&&(window.clearTimeout(me),me=null),Ce=null}function yt(o,i){if(e.disabled||we(o,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){bt(o);return}const y=i?"check":"uncheck",{checkedKeys:C,indeterminateKeys:$}=g.value[y](o.key,S.value,{cascade:e.cascade,checkStrategy:L.value,allowNotLoaded:e.allowCheckingNotLoaded});Jt(C,he(C),{node:o.rawNode,action:y}),co($,he($))}function mo(o){if(e.disabled)return;const{key:i}=o,{value:y}=x,C=y.findIndex($=>$===i);if(~C){const $=Array.from(y);$.splice(C,1),Pe($,he($),{node:o.rawNode,action:"collapse"})}else{const $=p.value.getNode(i);if(!$||$.isLeaf)return;let J;if(e.accordion){const ue=new Set(o.siblings.map(({key:ve})=>ve));J=y.filter(ve=>!ue.has(ve)),J.push(i)}else J=y.concat(i);Pe(J,he(J),{node:o.rawNode,action:"expand"})}}function Xt(o){e.disabled||Ne.value||mo(o)}function bt(o){if(!(e.disabled||!e.selectable)){if(se.value=o.key,e.internalUnifySelectCheck){const{value:{checkedKeys:i,indeterminateKeys:y}}=E;e.multiple?yt(o,!(i.includes(o.key)||y.includes(o.key))):Jt([o.key],he([o.key]),{node:o.rawNode,action:"check"})}if(e.multiple){const i=Array.from(R.value),y=i.findIndex(C=>C===o.key);~y?e.cancelable&&i.splice(y,1):~y||i.push(o.key),gt(i,he(i),{node:o.rawNode,action:~y?"unselect":"select"})}else R.value.includes(o.key)?e.cancelable&&gt([],[],{node:o.rawNode,action:"unselect"}):gt([o.key],he([o.key]),{node:o.rawNode,action:"select"})}}function po(o){if(me&&(window.clearTimeout(me),me=null),o.isLeaf)return;Ce=o.key;const i=()=>{if(Ce!==o.key)return;const{value:y}=Xe;if(y&&y.key===o.key&&!x.value.includes(o.key)){const C=x.value.concat(o.key);Pe(C,he(C),{node:o.rawNode,action:"expand"})}me=null,Ce=null};o.shallowLoaded?me=window.setTimeout(()=>{i()},1e3):me=window.setTimeout(()=>{Yt(o).then(()=>{i()})},1e3)}function _o({event:o,node:i}){!e.draggable||e.disabled||we(i,e.disabledField)||(Zt({event:o,node:i},!1),uo({event:o,node:i.rawNode}))}function ko({event:o,node:i}){!e.draggable||e.disabled||we(i,e.disabledField)||fo({event:o,node:i.rawNode})}function Co(o){o.target===o.currentTarget&&xe()}function So({event:o,node:i}){Ve(),!(!e.draggable||e.disabled||we(i,e.disabledField))&&ho({event:o,node:i.rawNode})}function wo({event:o,node:i}){!e.draggable||e.disabled||we(i,e.disabledField)||(Y=o.clientX,te.value=i,vo({event:o,node:i.rawNode}))}function Zt({event:o,node:i},y=!0){var C;if(!e.draggable||e.disabled||we(i,e.disabledField))return;const{value:$}=te;if(!$)return;const{allowDrop:J,indent:ue}=e;y&&go({event:o,node:i.rawNode});const ve=o.currentTarget,{height:Ie,top:Oe}=ve.getBoundingClientRect(),ye=o.clientY-Oe;let U;J({node:i.rawNode,dropPosition:"inside",phase:"drag"})?ye<=8?U="before":ye>=Ie-8?U="after":U="inside":ye<=Ie/2?U="before":U="after";const{value:pe}=lo;let H,le;const Ae=pe(i.key);if(Ae===null){xe();return}let tt=!1;U==="inside"?(H=i,le="inside"):U==="before"?i.isFirstChild?(H=i,le="before"):(H=V.value[Ae-1],le="after"):(H=i,le="after"),!H.isLeaf&&x.value.includes(H.key)&&(tt=!0,le==="after"&&(H=V.value[Ae+1],H?le="before":(H=i,le="inside")));const en=H;if(Xe.value=en,!tt&&$.isLastChild&&$.key===H.key&&(le="after"),le==="after"){let tn=Y-o.clientX,mt=0;for(;tn>=ue/2&&H.parent!==null&&H.isLastChild&&mt<1;)tn-=ue,mt+=1,H=H.parent;Qe.value=mt}else Qe.value=0;if(($.contains(H)||le==="inside"&&((C=$.parent)===null||C===void 0?void 0:C.key)===H.key)&&!($.key===en.key&&$.key===H.key)){xe();return}if(!J({node:H.rawNode,dropPosition:le,phase:"drag"})){xe();return}if($.key===H.key)Fe();else if(Ce!==H.key)if(le==="inside"){if(e.expandOnDragenter){if(po(H),!H.shallowLoaded&&Ce!==H.key){Ve();return}}else if(!H.shallowLoaded){Ve();return}}else Fe();else le!=="inside"&&Fe();Ze.value=le,de.value=H}function $o({event:o,node:i,dropPosition:y}){if(!e.draggable||e.disabled||we(i,e.disabledField))return;const{value:C}=te,{value:$}=de,{value:J}=Ze;if(!(!C||!$||!J)&&e.allowDrop({node:$.rawNode,dropPosition:J,phase:"drag"})&&C.key!==$.key){if(J==="before"){const ue=C.getNext({includeDisabled:!0});if(ue&&ue.key===$.key){xe();return}}if(J==="after"){const ue=C.getPrev({includeDisabled:!0});if(ue&&ue.key===$.key){xe();return}}yo({event:o,node:$.rawNode,dragNode:C.rawNode,dropPosition:y}),Ve()}}function xo(){et()}function To(){et()}function Ro(o){var i;if(e.virtualScroll||e.internalScrollable){const{value:y}=h;if(!((i=y==null?void 0:y.containerRef)===null||i===void 0)&&i.contains(o.relatedTarget))return;se.value=null}else{const{value:y}=u;if(y!=null&&y.contains(o.relatedTarget))return;se.value=null}}ge(se,o=>{var i,y;if(o!==null){if(e.virtualScroll)(i=f.value)===null||i===void 0||i.scrollTo({key:o});else if(e.internalScrollable){const{value:C}=h;if(C===null)return;const $=(y=C.contentRef)===null||y===void 0?void 0:y.querySelector(`[data-key="${Mn(o)}"]`);if(!$)return;C.scrollTo({el:$})}}}),Pt(Je,{loadingKeysRef:w,highlightKeySetRef:ut,displayedCheckedKeysRef:S,displayedIndeterminateKeysRef:K,mergedSelectedKeysRef:R,mergedExpandedKeysRef:x,mergedThemeRef:l,mergedCheckStrategyRef:L,nodePropsRef:j(e,"nodeProps"),disabledRef:j(e,"disabled"),checkableRef:j(e,"checkable"),selectableRef:j(e,"selectable"),expandOnClickRef:j(e,"expandOnClick"),onLoadRef:j(e,"onLoad"),draggableRef:j(e,"draggable"),blockLineRef:j(e,"blockLine"),indentRef:j(e,"indent"),cascadeRef:j(e,"cascade"),checkOnClickRef:j(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Xe,droppingNodeParentRef:ro,draggingNodeRef:te,droppingPositionRef:Ze,droppingOffsetLevelRef:Qe,fNodesRef:V,pendingNodeKeyRef:se,showLineRef:j(e,"showLine"),disabledFieldRef:j(e,"disabledField"),internalScrollableRef:j(e,"internalScrollable"),internalCheckboxFocusableRef:j(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:j(e,"renderLabel"),renderPrefixRef:j(e,"renderPrefix"),renderSuffixRef:j(e,"renderSuffix"),renderSwitcherIconRef:j(e,"renderSwitcherIcon"),labelFieldRef:j(e,"labelField"),multipleRef:j(e,"multiple"),overrideDefaultNodeClickBehaviorRef:j(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:Xt,handleDragEnd:So,handleDragEnter:_o,handleDragLeave:ko,handleDragStart:wo,handleDrop:$o,handleDragOver:Zt,handleSelect:bt,handleCheck:yt});function No(o,i){var y,C;typeof o=="number"?(y=f.value)===null||y===void 0||y.scrollTo(o,i||0):(C=f.value)===null||C===void 0||C.scrollTo(o)}const Po={handleKeydown:dt,scrollTo:No,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:o}=E.value;return{keys:o,options:he(o)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:o}=E.value;return{keys:o,options:he(o)}}},Qt=G(()=>{const{common:{cubicBezierEaseInOut:o},self:{fontSize:i,nodeBorderRadius:y,nodeColorHover:C,nodeColorPressed:$,nodeColorActive:J,arrowColor:ue,loadingColor:ve,nodeTextColor:Ie,nodeTextColorDisabled:Oe,dropMarkColor:ye,nodeWrapperPadding:U,nodeHeight:be,lineHeight:pe,lineColor:H}}=l.value,le=kt(U,"top"),Ae=kt(U,"bottom"),tt=Nn(Ue(be)-Ue(le)-Ue(Ae));return{"--n-arrow-color":ue,"--n-loading-color":ve,"--n-bezier":o,"--n-font-size":i,"--n-node-border-radius":y,"--n-node-color-active":J,"--n-node-color-hover":C,"--n-node-color-pressed":$,"--n-node-text-color":Ie,"--n-node-text-color-disabled":Oe,"--n-drop-mark-color":ye,"--n-node-wrapper-padding":U,"--n-line-offset-top":`-${le}`,"--n-line-offset-bottom":`-${Ae}`,"--n-node-content-height":tt,"--n-line-height":pe,"--n-line-color":H}}),De=n?Ft("tree",void 0,Qt,e):void 0;return Object.assign(Object.assign({},Po),{mergedClsPrefix:t,mergedTheme:l,rtlEnabled:r,fNodes:io,aip:Ne,selfElRef:u,virtualListInstRef:f,scrollbarInstRef:h,handleFocusout:Ro,handleDragLeaveTree:Co,handleScroll:xo,getScrollContainer:s,getScrollContent:_,handleAfterEnter:so,handleResize:To,cssVars:n?void 0:Qt,themeClass:De==null?void 0:De.themeClass,onRender:De==null?void 0:De.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:n}=this;if(!t.length&&n)return n();const{mergedClsPrefix:a,blockNode:r,blockLine:l,draggable:u,disabled:h,internalFocusable:f,checkable:s,handleKeydown:_,rtlEnabled:T,handleFocusout:m,scrollbarProps:p}=this,v=f&&!h,g=v?"0":void 0,c=[`${a}-tree`,T&&`${a}-tree--rtl`,s&&`${a}-tree--checkable`,(l||r)&&`${a}-tree--block-node`,l&&`${a}-tree--block-line`],d=N=>"__motion"in N?k(ja,{height:N.height,nodes:N.nodes,clsPrefix:a,mode:N.mode,onAfterEnter:this.handleAfterEnter}):k(qn,{key:N.key,tmNode:N,clsPrefix:a});if(this.virtualScroll){const{mergedTheme:N,internalScrollablePadding:E}=this,L=kt(E||"0");return k(ln,Object.assign({},p,{ref:"scrollbarInstRef",onDragleave:u?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:c,theme:N.peers.Scrollbar,themeOverrides:N.peerOverrides.Scrollbar,tabindex:g,onKeydown:v?_:void 0,onFocusout:v?m:void 0}),{default:()=>{var S;return(S=this.onRender)===null||S===void 0||S.call(this),t.length?k(Uo,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Ue(N.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:L.top,paddingBottom:L.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:L.left,paddingRight:L.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:K})=>d(K)}):rn(this.$slots.empty,()=>[k(dn,{class:`${a}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:F}=this;return c.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),F?k(ln,Object.assign({},p,{class:c,tabindex:g,onKeydown:v?_:void 0,onFocusout:v?m:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>k("div",{onDragleave:u?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(d))}):k("div",{class:c,tabindex:g,ref:"selfElRef",style:this.cssVars,onKeydown:v?_:void 0,onFocusout:v?m:void 0,onDragleave:u?this.handleDragLeaveTree:void 0},t.length?t.map(d):rn(this.$slots.empty,()=>[k(dn,{class:`${a}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),Ya={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ja=Q("g",{fill:"none"},[Q("path",{d:"M6 2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.414a1.5 1.5 0 0 0-.44-1.06l-3.914-3.915A1.5 1.5 0 0 0 10.586 2H6zM5 4a1 1 0 0 1 1-1h4v3.5A1.5 1.5 0 0 0 11.5 8H15v8a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4zm9.793 3H11.5a.5.5 0 0 1-.5-.5V3.207L14.793 7z",fill:"currentColor"})],-1),Xa=[Ja],Za=ne({name:"Document20Regular",render:function(t,n){return P(),W("svg",Ya,Xa)}}),Qa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},er=Q("g",{fill:"none"},[Q("path",{d:"M7.167 3c.27 0 .535.073.765.21l.135.09l1.6 1.2H15.5a2.5 2.5 0 0 1 2.479 2.174l.016.162L18 7v7.5a2.5 2.5 0 0 1-2.336 2.495L15.5 17h-11a2.5 2.5 0 0 1-2.495-2.336L2 14.5v-9a2.5 2.5 0 0 1 2.336-2.495L4.5 3h2.667zm.99 4.034a1.5 1.5 0 0 1-.933.458l-.153.008L3 7.499V14.5a1.5 1.5 0 0 0 1.356 1.493L4.5 16h11a1.5 1.5 0 0 0 1.493-1.355L17 14.5V7a1.5 1.5 0 0 0-1.355-1.493L15.5 5.5H9.617l-1.46 1.534zM7.168 4H4.5a1.5 1.5 0 0 0-1.493 1.356L3 5.5v.999l4.071.001a.5.5 0 0 0 .302-.101l.06-.054L8.694 5.02L7.467 4.1a.5.5 0 0 0-.22-.093L7.167 4z",fill:"currentColor"})],-1),tr=[er],nr=ne({name:"Folder20Regular",render:function(t,n){return P(),W("svg",Qa,tr)}}),or={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},ar=Q("g",{fill:"none"},[Q("path",{d:"M5 3a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6.621a2 2 0 0 0-.586-1.414l-1.621-1.621A2 2 0 0 0 11.379 3H5zM4 5a1 1 0 0 1 1-1h1v1.5A1.5 1.5 0 0 0 7.5 7h2A1.5 1.5 0 0 0 11 5.5V4h.379a1 1 0 0 1 .707.293l1.621 1.621a1 1 0 0 1 .293.707V13a1 1 0 0 1-1 1v-3.5A1.5 1.5 0 0 0 11.5 9h-5A1.5 1.5 0 0 0 5 10.5V14a1 1 0 0 1-1-1V5zm3 .5V4h3v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5zm5 5V14H6v-3.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5zM8.5 17a3.489 3.489 0 0 1-2.45-1h7.45a2.5 2.5 0 0 0 2.5-2.5V6.05c.618.632 1 1.497 1 2.45v5a3.5 3.5 0 0 1-3.5 3.5h-5z",fill:"currentColor"})],-1),rr=[ar],lr=ne({name:"SaveMultiple20Regular",render:function(t,n){return P(),W("svg",or,rr)}});var ir=Array.isArray,Mt=ir,sr=typeof nt=="object"&&nt&&nt.Object===Object&&nt,dr=sr,cr=dr,ur=typeof self=="object"&&self&&self.Object===Object&&self,fr=cr||ur||Function("return this")(),zt=fr,hr=zt,vr=hr.Symbol,jt=vr,hn=jt,Wn=Object.prototype,gr=Wn.hasOwnProperty,yr=Wn.toString,Ge=hn?hn.toStringTag:void 0;function br(e){var t=gr.call(e,Ge),n=e[Ge];try{e[Ge]=void 0;var a=!0}catch{}var r=yr.call(e);return a&&(t?e[Ge]=n:delete e[Ge]),r}var mr=br,pr=Object.prototype,_r=pr.toString;function kr(e){return _r.call(e)}var Cr=kr,vn=jt,Sr=mr,wr=Cr,$r="[object Null]",xr="[object Undefined]",gn=vn?vn.toStringTag:void 0;function Tr(e){return e==null?e===void 0?xr:$r:gn&&gn in Object(e)?Sr(e):wr(e)}var Yn=Tr;function Rr(e){return e!=null&&typeof e=="object"}var Nr=Rr,Pr=Yn,Fr=Nr,Dr="[object Symbol]";function Ir(e){return typeof e=="symbol"||Fr(e)&&Pr(e)==Dr}var Vt=Ir,Or=Mt,Ar=Vt,Er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kr=/^\w*$/;function Lr(e,t){if(Or(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ar(e)?!0:Kr.test(e)||!Er.test(e)||t!=null&&e in Object(t)}var Br=Lr;function Mr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ht=Mr,zr=Yn,jr=Ht,Vr="[object AsyncFunction]",Hr="[object Function]",Ur="[object GeneratorFunction]",Gr="[object Proxy]";function qr(e){if(!jr(e))return!1;var t=zr(e);return t==Hr||t==Ur||t==Vr||t==Gr}var Wr=qr,Yr=zt,Jr=Yr["__core-js_shared__"],Xr=Jr,wt=Xr,yn=function(){var e=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Zr(e){return!!yn&&yn in e}var Qr=Zr,el=Function.prototype,tl=el.toString;function nl(e){if(e!=null){try{return tl.call(e)}catch{}try{return e+""}catch{}}return""}var ol=nl,al=Wr,rl=Qr,ll=Ht,il=ol,sl=/[\\^$.*+?()[\]{}|]/g,dl=/^\[object .+?Constructor\]$/,cl=Function.prototype,ul=Object.prototype,fl=cl.toString,hl=ul.hasOwnProperty,vl=RegExp("^"+fl.call(hl).replace(sl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gl(e){if(!ll(e)||rl(e))return!1;var t=al(e)?vl:dl;return t.test(il(e))}var yl=gl;function bl(e,t){return e==null?void 0:e[t]}var ml=bl,pl=yl,_l=ml;function kl(e,t){var n=_l(e,t);return pl(n)?n:void 0}var Ut=kl,Cl=Ut,Sl=Cl(Object,"create"),lt=Sl,bn=lt;function wl(){this.__data__=bn?bn(null):{},this.size=0}var $l=wl;function xl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Tl=xl,Rl=lt,Nl="__lodash_hash_undefined__",Pl=Object.prototype,Fl=Pl.hasOwnProperty;function Dl(e){var t=this.__data__;if(Rl){var n=t[e];return n===Nl?void 0:n}return Fl.call(t,e)?t[e]:void 0}var Il=Dl,Ol=lt,Al=Object.prototype,El=Al.hasOwnProperty;function Kl(e){var t=this.__data__;return Ol?t[e]!==void 0:El.call(t,e)}var Ll=Kl,Bl=lt,Ml="__lodash_hash_undefined__";function zl(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Bl&&t===void 0?Ml:t,this}var jl=zl,Vl=$l,Hl=Tl,Ul=Il,Gl=Ll,ql=jl;function Ke(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Ke.prototype.clear=Vl;Ke.prototype.delete=Hl;Ke.prototype.get=Ul;Ke.prototype.has=Gl;Ke.prototype.set=ql;var Wl=Ke;function Yl(){this.__data__=[],this.size=0}var Jl=Yl;function Xl(e,t){return e===t||e!==e&&t!==t}var Jn=Xl,Zl=Jn;function Ql(e,t){for(var n=e.length;n--;)if(Zl(e[n][0],t))return n;return-1}var it=Ql,ei=it,ti=Array.prototype,ni=ti.splice;function oi(e){var t=this.__data__,n=ei(t,e);if(n<0)return!1;var a=t.length-1;return n==a?t.pop():ni.call(t,n,1),--this.size,!0}var ai=oi,ri=it;function li(e){var t=this.__data__,n=ri(t,e);return n<0?void 0:t[n][1]}var ii=li,si=it;function di(e){return si(this.__data__,e)>-1}var ci=di,ui=it;function fi(e,t){var n=this.__data__,a=ui(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}var hi=fi,vi=Jl,gi=ai,yi=ii,bi=ci,mi=hi;function Le(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Le.prototype.clear=vi;Le.prototype.delete=gi;Le.prototype.get=yi;Le.prototype.has=bi;Le.prototype.set=mi;var pi=Le,_i=Ut,ki=zt,Ci=_i(ki,"Map"),Si=Ci,mn=Wl,wi=pi,$i=Si;function xi(){this.size=0,this.__data__={hash:new mn,map:new($i||wi),string:new mn}}var Ti=xi;function Ri(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Ni=Ri,Pi=Ni;function Fi(e,t){var n=e.__data__;return Pi(t)?n[typeof t=="string"?"string":"hash"]:n.map}var st=Fi,Di=st;function Ii(e){var t=Di(this,e).delete(e);return this.size-=t?1:0,t}var Oi=Ii,Ai=st;function Ei(e){return Ai(this,e).get(e)}var Ki=Ei,Li=st;function Bi(e){return Li(this,e).has(e)}var Mi=Bi,zi=st;function ji(e,t){var n=zi(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}var Vi=ji,Hi=Ti,Ui=Oi,Gi=Ki,qi=Mi,Wi=Vi;function Be(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Be.prototype.clear=Hi;Be.prototype.delete=Ui;Be.prototype.get=Gi;Be.prototype.has=qi;Be.prototype.set=Wi;var Yi=Be,Xn=Yi,Ji="Expected a function";function Gt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ji);var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],l=n.cache;if(l.has(r))return l.get(r);var u=e.apply(this,a);return n.cache=l.set(r,u)||l,u};return n.cache=new(Gt.Cache||Xn),n}Gt.Cache=Xn;var Xi=Gt,Zi=Xi,Qi=500;function es(e){var t=Zi(e,function(a){return n.size===Qi&&n.clear(),a}),n=t.cache;return t}var ts=es,ns=ts,os=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,as=/\\(\\)?/g,rs=ns(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(os,function(n,a,r,l){t.push(r?l.replace(as,"$1"):a||n)}),t}),ls=rs;function is(e,t){for(var n=-1,a=e==null?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r}var ss=is,pn=jt,ds=ss,cs=Mt,us=Vt,fs=1/0,_n=pn?pn.prototype:void 0,kn=_n?_n.toString:void 0;function Zn(e){if(typeof e=="string")return e;if(cs(e))return ds(e,Zn)+"";if(us(e))return kn?kn.call(e):"";var t=e+"";return t=="0"&&1/e==-fs?"-0":t}var hs=Zn,vs=hs;function gs(e){return e==null?"":vs(e)}var ys=gs,bs=Mt,ms=Br,ps=ls,_s=ys;function ks(e,t){return bs(e)?e:ms(e,t)?[e]:ps(_s(e))}var qt=ks,Cs=Vt,Ss=1/0;function ws(e){if(typeof e=="string"||Cs(e))return e;var t=e+"";return t=="0"&&1/e==-Ss?"-0":t}var Wt=ws,$s=qt,xs=Wt;function Ts(e,t){t=$s(t,e);for(var n=0,a=t.length;e!=null&&n<a;)e=e[xs(t[n++])];return n&&n==a?e:void 0}var Qn=Ts,Rs=Qn;function Ns(e,t,n){var a=e==null?void 0:Rs(e,t);return a===void 0?n:a}var Ps=Ns;const Fs=Ot(Ps);var Ds=Ut,Is=function(){try{var e=Ds(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Os=Is,Cn=Os;function As(e,t,n){t=="__proto__"&&Cn?Cn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Es=As,Ks=Es,Ls=Jn,Bs=Object.prototype,Ms=Bs.hasOwnProperty;function zs(e,t,n){var a=e[t];(!(Ms.call(e,t)&&Ls(a,n))||n===void 0&&!(t in e))&&Ks(e,t,n)}var js=zs,Vs=9007199254740991,Hs=/^(?:0|[1-9]\d*)$/;function Us(e,t){var n=typeof e;return t=t??Vs,!!t&&(n=="number"||n!="symbol"&&Hs.test(e))&&e>-1&&e%1==0&&e<t}var Gs=Us,qs=js,Ws=qt,Ys=Gs,Sn=Ht,Js=Wt;function Xs(e,t,n,a){if(!Sn(e))return e;t=Ws(t,e);for(var r=-1,l=t.length,u=l-1,h=e;h!=null&&++r<l;){var f=Js(t[r]),s=n;if(f==="__proto__"||f==="constructor"||f==="prototype")return e;if(r!=u){var _=h[f];s=a?a(_,f,h):void 0,s===void 0&&(s=Sn(_)?_:Ys(t[r+1])?[]:{})}qs(h,f,s),h=h[f]}return e}var Zs=Xs,Qs=Zs;function ed(e,t,n){return e==null?e:Qs(e,t,n)}var td=ed;const nd=Ot(td);function od(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var ad=od;function rd(e,t,n){var a=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var l=Array(r);++a<r;)l[a]=e[a+t];return l}var ld=rd,id=Qn,sd=ld;function dd(e,t){return t.length<2?e:id(e,sd(t,0,-1))}var cd=dd,ud=qt,fd=ad,hd=cd,vd=Wt;function gd(e,t){return t=ud(t,e),e=hd(e,t),e==null||delete e[vd(fd(t))]}var yd=gd,bd=yd;function md(e,t){return e==null?!0:bd(e,t)}var pd=md;const _d=Ot(pd),Me=Yo("i18nToolMain",{state:()=>({dirTree:[],filePathArr:[],translatePath:"",changedLabelMap:{}})}),eo=e=>{const t=Me(),n=at(),a=I(),r=async()=>{for(let u=0;u<a.value.length;u++)await a.value[u].saveChange({isSetValue:!0})};It(()=>{xt.on(Tt.ON_I18N_SAVE_ALL_CHANGES,r)}),At(()=>{xt.off(Tt.ON_I18N_SAVE_ALL_CHANGES,r)});const l=G(()=>n.isFoldersMode?t.dirTree.filter(u=>u.kind==="directory"):t.dirTree);return{handleSaveChanged:r,itemsRef:a,filePathArrFiltered:l}};async function kd(e,t){if(!t)return e;const n=t.split("/");let a=e;for(const r of n)a=await a.getDirectoryHandle(r,{create:!0});return console.log(`Folder "${t}" created successfully.`),a}async function Cd(e,t,n){console.log("[createFile] 获取文件的可写入流");const a=await e.getFileHandle(t,{create:!0}),r=await a.createWritable();return console.log("[createFile] 将数据写入文件"),await r.write(n),console.log("[createFile] 关闭文件写入流"),await r.close(),console.log(`[createFile] ${t} created and written successfully.`),a}const to=e=>{const t=Me(),n=at(),{t:a}=Et(),r=I(!1),{dirItem:l}=Pn(e),u=G(()=>n.isFoldersMode?t.filePathArr.slice(1):t.filePathArr),h=()=>{let p=null;const v=(g,c,d=0)=>{const F=c[d];if(g)for(let N=0;N<g.length;N++){const E=g[N];if(E.label===F&&d===c.length-1)throw p=E,new Error("item found");E.children&&v(E.children,c,d+1)}};try{v(l.value.children,u.value)}catch{}return p},f=G(()=>n.isFoldersMode?h():l.value),s=async p=>{try{if(r.value=!0,!f.value)return;const v=f.value.entry;if(!v)return;const g=await v.createWritable();await g.write(p),await g.close();const c=l.value.label+": "+v.name;console.log("[handleSaveFile]",c),window.$message.success(`${c} `+a("msgs.saved"))}catch(v){throw console.error(v),window.$message.error(a("msgs.error")+v.message),v}finally{r.value=!1}},_=()=>{const p=document.querySelector(".js_reload_btn");p&&p.click()},T=I(!1);return{isLoading:r,currentItem:f,handleSaveFile:s,isLocalCreated:T,handleCreateFile:async p=>{try{if(r.value=!0,!l.value)return;const v=l.value.entry;if(!v)return;const g=u.value.join("/"),c=g.substring(0,g.lastIndexOf("/")),d=await kd(v,c),F=JSON.stringify({},null,2),N=await Cd(d,g.substring(g.lastIndexOf("/")+1),F);window.$message.success("Created "+g),T.value=!0,typeof p=="function"&&await p(),setTimeout(()=>{_()})}catch(v){console.error(v),window.$message.error(v.message)}finally{r.value=!1}},handleReload:_,subFilePathArr:u}},Sd=ne({name:"SubGuiItem",components:{Delete20Regular:Fo,FieldEdit:wn,DialogTextEdit:$n,SaveMultiple20Regular:lr,ClipboardPaste20Regular:Jo},props:{dirItem:{type:Object,required:!0}},emits:["saveChanged"],setup(e,{emit:t}){Et();const n=Me(),a=at(),{isLoading:r,currentItem:l,handleSaveFile:u,isLocalCreated:h,handleCreateFile:f,handleReload:s,subFilePathArr:_}=to(e);let T=Fn(null);const m=I(null),p=I(!1),v=()=>Fs(T.value,n.translatePath,null),g=x=>{try{nd(T.value,n.translatePath,x)}catch(V){throw console.error(V),window.$message.error(V.message),V}},c=()=>{_d(T.value,n.translatePath),m.value=null,p.value=!0},d=()=>{T.value=null,m.value=null,fe(()=>{p.value=!1})};At(()=>{d()}),ge(l,async x=>{if(!x){d();return}const V=await x.entry.getFile(),se=await Kt(V);T.value=JSON.parse(se),m.value=v(),fe(()=>{p.value=!1})},{immediate:!0}),ge(m,()=>{p.value=!0}),ge(()=>n.translatePath,x=>{m.value=v(),fe(()=>{p.value=!1})});const F=I(),N=I(!1),E=x=>{g(x),m.value=x,N.value=!0,fe(()=>{F.value.focus()})},L=x=>(x=Zo(x,a.autoPasteTextConvertMode,{isTrimQuotes:a.autoPasteTrimQuotes}),x),S=async()=>{const x=await Xo();E(L(x))},K=async({isEmit:x=!1,isSetValue:V=!1}={})=>{p.value&&(V&&g(m.value),await u(JSON.stringify(T.value,null,2)),p.value=!1,x&&t("saveChanged"))},ee=()=>{if(N.value){c(),N.value=!1;return}m.value=v(),fe(()=>{p.value=!1})},b=I(!1),R=I("");return ge(b,x=>{x||(R.value="")}),{i18nMainStore:n,i18nSetStore:a,currentItem:l,translateObj:T,fieldValue:m,isChanged:p,createField:E,pasteCreateField:S,saveChange:K,cancelChange:ee,inputRef:F,isLocalCreated:h,handleCreateFile:f,handleReload:s,isShowArrayEdit:b,currentArrayString:R,handlePreviewArrayText:()=>{R.value=JSON.stringify(m.value,null,2),b.value=!0},handleSaveArray:x=>{try{m.value=JSON.parse(x),b.value=!1}catch(V){console.error(V),window.$message.error(V.message)}},handleDeleteField:()=>{c(),K()},isLoading:r,subFilePathArr:_}}}),wd={key:0,class:"mc-loading-container"},$d={class:"card-header"},xd={class:"card-title"},Td={class:"text-red"},Rd={class:"translate-path"},Nd={key:1,class:"tip-not-exist"},Pd={key:3,style:{color:"gray"}};function Fd(e,t,n,a,r,l){const u=Bt,h=We("Delete20Regular"),f=Lt,s=Dn,_=wn,T=We("SaveMultiple20Regular"),m=Qo,p=In,v=We("ClipboardPaste20Regular"),g=$n,c=On;return P(),ae(c,{size:"small",class:"batch-translate-item"},{default:D(()=>[e.isLoading?(P(),W("div",wd,[A(u,{size:"small"})])):_e("",!0),Q("div",$d,[Q("div",null,[Q("span",xd,[Q("span",Td,Z(e.dirItem.label),1),e.i18nSetStore.isFoldersMode?(P(),W($e,{key:0},[q(Z("/"+e.subFilePathArr.join("/")),1)],64)):_e("",!0)]),Q("span",Rd,Z(e.i18nMainStore.translatePath),1)]),e.currentItem&&e.fieldValue!==null?(P(),ae(s,{key:0,onPositiveClick:e.handleDeleteField},{trigger:D(()=>[A(f,{size:"small",tertiary:"",type:"error",title:"Delete Field"},{icon:D(()=>[A(h)]),_:1})]),default:D(()=>[q(" "+Z(e.$t("msgs.remove_item")),1)]),_:1},8,["onPositiveClick"])):_e("",!0)]),e.currentItem?e.i18nMainStore.translatePath?(P(),W($e,{key:2},[e.fieldValue!==null?(P(),ae(p,{key:0,align:"center",size:"small"},{default:D(()=>[A(_,{ref:"inputRef",modelValue:e.fieldValue,"onUpdate:modelValue":t[1]||(t[1]=d=>e.fieldValue=d),onPreviewArray:e.handlePreviewArrayText},null,8,["modelValue","onPreviewArray"]),e.isChanged?(P(),ae(m,{key:0},{default:D(()=>[A(f,{size:"small",type:"primary",onClick:t[2]||(t[2]=d=>e.saveChange({isEmit:!0,isSetValue:!0})),title:"Batch Save"},{icon:D(()=>[A(T)]),_:1}),A(f,{secondary:"",size:"small",onClick:e.cancelChange},{default:D(()=>[q(Z(e.$t("actions.cancel")),1)]),_:1},8,["onClick"])]),_:1})):_e("",!0)]),_:1})):(P(),ae(m,{key:1},{default:D(()=>[A(f,{size:"small",onClick:t[3]||(t[3]=d=>e.pasteCreateField()),type:"primary",title:`Auto Paste Create (${e.i18nSetStore.autoPasteTextConvertMode})`},{icon:D(()=>[A(v)]),_:1},8,["title"]),A(f,{size:"small",onClick:t[4]||(t[4]=d=>e.createField("")),type:"primary"},{default:D(()=>[q(Z(e.$t("actions.create_text")),1)]),_:1}),A(f,{size:"small",onClick:t[5]||(t[5]=d=>e.createField([]))},{default:D(()=>[q(Z(e.$t("actions.create_array")),1)]),_:1})]),_:1}))],64)):(P(),W("div",Pd,Z(e.$t("msgs.please_select_a_tran")),1)):(P(),W("div",Nd,[e.isLocalCreated?(P(),ae(f,{key:0,secondary:"",size:"small",onClick:e.handleReload},{default:D(()=>[q(Z(e.$t("actions.reload")),1)]),_:1},8,["onClick"])):(P(),W($e,{key:1},[q(" File does not exist, please "),Q("b",{style:{"text-decoration":"underline",cursor:"pointer"},onClick:t[0]||(t[0]=(...d)=>e.handleCreateFile&&e.handleCreateFile(...d))}," create it "),q(" on your local file system ")],64))])),e.isShowArrayEdit?(P(),ae(g,{key:4,"is-textarea":"",title:e.$t("common.array_detail"),placeholder:e.$t("common.array_json_string"),visible:e.isShowArrayEdit,"onUpdate:visible":t[6]||(t[6]=d=>e.isShowArrayEdit=d),text:e.currentArrayString,onOnSave:e.handleSaveArray},null,8,["title","placeholder","visible","text","onOnSave"])):_e("",!0)]),_:1})}const no=Ye(Sd,[["render",Fd]]),Dd=ne({name:"BatchTranslate",components:{SubGuiItem:no},props:{},setup(e,{emit:t}){const{handleSaveChanged:n,itemsRef:a,filePathArrFiltered:r}=eo();return{handleSaveChanged:n,itemsRef:a,filePathArrFiltered:r}}}),Id={class:"batch-translate"};function Od(e,t,n,a,r,l){const u=no;return P(),W("div",Id,[(P(!0),W($e,null,ot(e.filePathArrFiltered,h=>(P(),ae(u,{ref_for:!0,ref:"itemsRef",key:h.key,"dir-item":h,onSaveChanged:e.handleSaveChanged},null,8,["dir-item","onSaveChanged"]))),128))])}const Ad=Ye(Dd,[["render",Od],["__scopeId","data-v-8fa4c85c"]]),Ed=ne({name:"SubTextItem",components:{TranslateTreeItem:Rt,VueMonaco:An},props:{visible:{type:Boolean,default:!0},dirItem:{type:Object,required:!0},translatePath:{type:String,default:""}},emits:["saveChanged"],setup(e,{emit:t}){const{visible:n,dirItem:a}=Pn(e),r=Me(),{isLoading:l,currentItem:u,handleSaveFile:h,isLocalCreated:f,handleCreateFile:s,handleReload:_,subFilePathArr:T}=to(e),m=I(""),p=I(),v=()=>{setTimeout(()=>{p.value.getInstance().focus()},100)},g=G(()=>r.changedLabelMap[a.value.label]),c=S=>{r.changedLabelMap[a.value.label]=S};ge(m,()=>{c(!0)}),ge(n,S=>{S&&(fe(()=>{var K;(K=p.value)==null||K.resize()}),v())});const d=ea(500,!1,()=>{fe(()=>{var S;(S=p.value)==null||S.resize()})}),F=()=>{m.value="",fe(()=>{c(!1)})};It(()=>{window.addEventListener("resize",d),fe(()=>{d()})}),At(()=>{F(),window.removeEventListener("resize",d)});const N=async()=>{const S=await u.value.entry.getFile(),K=await Kt(S);m.value=K,await fe(()=>{var ee;c(!1),(ee=p.value)==null||ee.resize()})};return ge(u,async S=>{if(!S){F();return}await N()},{immediate:!0}),{isLoading:l,valueText:m,currentItem:u,vueMonacoRef:p,saveChange:async({isEmit:S=!1}={})=>{g.value&&(await h(m.value),c(!1),S&&t("saveChanged"))},isChanged:g,handleCreateFile:async()=>{await s()},subFilePathArr:T}}}),Kd={class:"sub-text-editor"},Ld={key:0,class:"mc-loading-container"},Bd={class:"editor-action-row"},Md={class:"editor-content-wrap"},zd={key:0,class:"tip-not-exist"};function jd(e,t,n,a,r,l){const u=Bt,h=Lt,f=An;return En((P(),W("div",Kd,[e.isLoading?(P(),W("div",Ld,[A(u,{size:"small"})])):_e("",!0),Q("div",Bd,[A(h,{size:"small",type:"primary",disabled:!e.isChanged,onClick:t[0]||(t[0]=s=>e.saveChange({isEmit:!0}))},{default:D(()=>[q(" Save All ")]),_:1},8,["disabled"]),q(" "+Z(e.subFilePathArr.join("/"))+" "+Z(e.dirItem.label),1)]),Q("div",Md,[e.currentItem?(P(),ae(f,{key:1,ref:"vueMonacoRef",modelValue:e.valueText,"onUpdate:modelValue":t[2]||(t[2]=s=>e.valueText=s),language:"json","show-line-numbers":""},null,8,["modelValue"])):(P(),W("div",zd,[q(" File does not exist, please "),Q("b",{style:{"text-decoration":"underline",cursor:"pointer"},onClick:t[1]||(t[1]=(...s)=>e.handleCreateFile&&e.handleCreateFile(...s))}," create it "),q(" on your local file system ")]))])],512)),[[Kn,e.visible]])}const oo=Ye(Ed,[["render",jd],["__scopeId","data-v-930c855b"]]),Vd=ne({name:"BatchText",components:{SubTextItem:oo},props:{},setup(e,{emit:t}){const n=Me(),{handleSaveChanged:a,itemsRef:r,filePathArrFiltered:l}=eo(),u=I("");return ge(l,h=>{if(!u.value){u.value=h[0].key;return}h.find(s=>s.key===u.value)||(u.value=h[0].key)},{immediate:!0}),{i18nMainStore:n,handleSaveChanged:a,itemsRef:r,filePathArrFiltered:l,currentTab:u}}}),Hd={class:"batch-text-editor"},Ud={class:"editor-tabs-wrap"},Gd={class:"editor-wrap"};function qd(e,t,n,a,r,l){const u=ga,h=ya,f=oo;return P(),W("div",Hd,[Q("div",Ud,[A(h,{size:"small",type:"card",animated:"",value:e.currentTab,"onUpdate:value":t[0]||(t[0]=s=>e.currentTab=s)},{default:D(()=>[(P(!0),W($e,null,ot(e.filePathArrFiltered,s=>(P(),ae(u,{style:{padding:"0"},name:s.key,tab:(e.i18nMainStore.changedLabelMap[s.label]?"* ":"")+s.label,key:s.key},null,8,["name","tab"]))),128))]),_:1},8,["value"])]),Q("div",Gd,[(P(!0),W($e,null,ot(e.filePathArrFiltered,s=>(P(),ae(f,{ref_for:!0,ref:"itemsRef",key:s.key,"dir-item":s,visible:s.key===e.currentTab,onSaveChanged:e.handleSaveChanged},null,8,["dir-item","visible","onSaveChanged"]))),128))])])}const Wd=Ye(Vd,[["render",qd],["__scopeId","data-v-ab2c01f3"]]),$t=(e={})=>({key:e.key,kind:e.kind,label:e.label,entry:e.entry,parentDirs:e.parentDirs,children:e.children||null,prefix:()=>k(ia,{size:18},{default:()=>k(e.kind==="directory"?nr:Za)})});var ao=(e=>(e.TEXT="text",e.GUI="gui",e.BATCH="batch",e))(ao||{});const Yd=[{label:"TEXT",value:"text"},{label:"SINGLE",value:"gui"},{label:"BATCH",value:"batch"}],Jd=ne({name:"VueI18nBatchTool",components:{TabLayout:Ln,BatchTextEditor:Wd,I18nToolSettings:xn,TranslateTreeItem:Rt,BatchTranslate:Ad,DropZone:Bn},setup(){const{t:e}=Et(),t=ta(),n=Me(),a=at(),r=I(!1),l=cn("vue_i18n_dir_tool_expanded_keys",[]),u=b=>!a.ignoreFoldersMap[b],h=async(b,R=0,B=[],oe=[],ke="")=>{for await(const x of b.values())if(x.kind==="directory"&&u(x.name)){let V=[];const se=`${ke}${R}-${x.name}`;B.push($t({key:se,kind:x.kind,label:x.name,entry:x,parentDirs:oe,children:V})),await h(x,R+1,V,[...oe,x.name],se+"_")}else if(/\.json$/gi.test(x.name)){const se=`${ke}${R}-${x.name}`;B.push($t({key:se,kind:x.kind,label:x.name,entry:x,parentDirs:oe,children:null}))}return B.sort((x,V)=>x.kind==="directory"&&V.kind==="file"?-1:x.kind==="file"&&V.kind==="directory"?1:0),B},f=async(b,R=[])=>{let B=0;for await(const oe of b.values())if(B++,oe.kind!=="directory"&&/\.json$/gi.test(oe.name)){const x=`${B}-${oe.kind}-${oe.name}`;R.push($t({key:x,kind:oe.kind,label:oe.name,entry:oe,parentDirs:[],children:null}))}return console.log("[readJsonFiles]",R),R},s=Fn(),_=async()=>{s.value=await window.showDirectoryPicker(),await T()},T=async()=>{try{r.value=!0;const b=s.value;let R=[];a.isFoldersMode?R=await h(b):R=await f(b),R.length||window.$message.error("The content is empty, please check the folder directory structure!"),n.dirTree=R}catch(b){console.error(b),window.$message.error(b.message)}finally{r.value=!1}},m=()=>{s.value=null,p.value=null,v.value=null,n.dirTree=[],n.filePathArr=[]},p=I(null),v=I(null),g=async()=>{try{r.value=!0;const b=p.value;if(!b)return;const R=await b.createWritable();if(c.value!=="text"&&(v.value=JSON.stringify(ra(d.value),null,2)),!v.value)throw new Error("editingTextValue is empty!");await R.write(v.value),await R.close(),await T(),window.$message.success(e("msgs.saved"))}catch(b){console.error(b),window.$message.error("Save Failed!"+b.message)}finally{r.value=!1}},c=cn("vue_i18n_dir_tool_edit_mode","batch"),d=I([na()]),F=()=>{if(c.value!=="text"){if(!v.value){d.value=[];return}const b=JSON.parse(v.value);d.value=la.parseWithRoot(b)}};ge(c,b=>{F()});const{metaTitle:N}=ua();oa(()=>{if(p.value&&c.value==="gui"){g();return}xt.emit(Tt.ON_I18N_SAVE_ALL_CHANGES)});const E=I();aa(()=>!!s.value);const L=I(!1);return{metaTitle:N,i18nMainStore:n,iconTranslate:Do,handlePickDir:_,handleCloseDir:m,dirHandle:s,reloadPickedDir:T,vueMonacoRef:E,nodeProps:({option:b})=>({async onClick(){try{if(r.value=!0,b.kind==="file"){const R=b.entry;p.value=R;const B=await Kt(await R.getFile());v.value=B,n.filePathArr=[...b.parentDirs,b.label],n.translatePath="",F()}}catch(R){console.error(R),window.$message.error(R.message)}finally{r.value=!1}}}),editingTextValue:v,currentEditEntry:p,handleSaveFile:g,editMode:c,EditMode:ao,editModeOptions:Yd,translateTreeRoot:d,handleKeyClick:(b,R)=>{const B=".translate-item";n.translatePath=b,Array.from(document.querySelectorAll(B)).forEach(ke=>{ke.classList.remove("active")}),R.target.closest(B).classList.add("active")},...fa({cb:async b=>{try{r.value=!0;for(const R of b.dataTransfer.items)if(R.kind==="file"){const B=await R.getAsFileSystemHandle();if(B.kind==="directory"){s.value=B,await T();break}else window.$message.error("Please drag and drop a folder here!")}}catch(R){console.error(R),window.$message.error(R.message)}finally{r.value=!1}}}),i18nSetStore:a,mainStore:t,isShowToolSettings:L,isLoading:r,expandedKeys:l}}}),Xd={key:0,class:"mc-loading-container position-fixed"},Zd={class:"vp-panel navbar-wrap"},Qd={class:"_container"},ec={class:"main-edit-wrap"},tc={key:1,class:"edit-content-wrap batch-mode"},nc={key:1,class:"null-intro"},oc={key:0,class:"intro-title"},ac={key:1,class:"font-code"},rc=["value"];function lc(e,t,n,a,r,l){const u=Bt,h=Bn,f=va,s=Lt,_=Ln,T=Dn,m=In,p=ha,v=Wa,g=Da,c=Na,d=We("BatchTextEditor"),F=On,N=Rt,E=We("BatchTranslate"),L=ca,S=wa,K=Sa,ee=xn;return P(),W("div",{class:"vue-i18n-dir-tool i18n-style",onDragover:t[9]||(t[9]=Ct((...b)=>e.fileDragover&&e.fileDragover(...b),["prevent","stop"])),onDragleave:t[10]||(t[10]=Ct(b=>e.showDropzone=!1,["prevent","stop"])),onDrop:t[11]||(t[11]=Ct((...b)=>e.fileDrop&&e.fileDrop(...b),["prevent","stop"]))},[A(un,{name:"mc-fade"},{default:D(()=>[e.isLoading?(P(),W("div",Xd,[A(u)])):_e("",!0)]),_:1}),A(un,{name:"mc-fade"},{default:D(()=>[En(A(h,{"position-fixed":"",text:e.$t("msgs.drag_folder_here")},null,8,["text"]),[[Kn,e.showDropzone]])]),_:1}),Q("div",Zd,[A(p,{subtitle:"",onBack:t[5]||(t[5]=b=>e.$router.push({name:"HomePage"}))},{title:D(()=>[q(Z(e.metaTitle),1)]),avatar:D(()=>[A(f,{src:e.iconTranslate,style:{background:"none"}},null,8,["src"])]),extra:D(()=>[A(m,{align:"center"},{default:D(()=>[A(s,{secondary:"",size:"small",onClick:t[0]||(t[0]=b=>e.isShowToolSettings=!0)},{default:D(()=>[q(Z(e.$t("common.settings")),1)]),_:1}),A(s,{secondary:"",size:"small",onClick:t[1]||(t[1]=b=>e.mainStore.isShowQuickLaunch=!0)},{default:D(()=>[q(Z(e.$t("common.tools")),1)]),_:1}),e.currentEditEntry&&e.editMode===e.EditMode.GUI?(P(),ae(s,{key:0,size:"small",secondary:"",type:"primary",onClick:e.handleSaveFile},{default:D(()=>[q(Z(e.$t("actions.save_changes")),1)]),_:1},8,["onClick"])):_e("",!0),q(" "+Z(e.$t("common.edit_mode"))+": ",1),A(_,{modelValue:e.editMode,"onUpdate:modelValue":t[2]||(t[2]=b=>e.editMode=b),horizontal:"","tab-list":e.editModeOptions},null,8,["modelValue","tab-list"]),e.dirHandle?(P(),ae(T,{key:1,onPositiveClick:t[3]||(t[3]=b=>e.handleCloseDir())},{trigger:D(()=>[A(s,{secondary:"",type:"primary",size:"small"},{default:D(()=>[q(" Close Folder ")]),_:1})]),default:D(()=>[q(" Confirm close folder? Unsaved contents will be lost. ")]),_:1})):(P(),ae(s,{key:2,type:"primary",size:"small",onClick:e.handlePickDir},{default:D(()=>[q(Z(e.$t("actions.pick_i18n_directory")),1)]),_:1},8,["onClick"])),e.dirHandle?(P(),ae(T,{key:3,onPositiveClick:t[4]||(t[4]=b=>e.reloadPickedDir())},{trigger:D(()=>[A(s,{secondary:"",size:"small",class:"js_reload_btn"},{default:D(()=>[q(Z(e.$t("actions.reload")),1)]),_:1})]),default:D(()=>[q(" "+Z(e.$t("msgs.confirm_reload_files")),1)]),_:1})):_e("",!0)]),_:1})]),_:1})]),Q("div",Qd,[A(K,{style:{height:"100%"},"has-sider":""},{default:D(()=>[A(c,{"collapse-mode":"width","collapsed-width":0,width:300,"show-trigger":"arrow-circle","content-style":"padding: 10px;",bordered:""},{default:D(()=>[A(g,{style:{height:"100%"}},{default:D(()=>[A(v,{"block-line":"",data:e.i18nMainStore.dirTree,"node-props":e.nodeProps,"default-expand-all":!1,"expand-on-click":"",selectable:"",class:"font-code","virtual-scroll":"","expanded-keys":e.expandedKeys,"onUpdate:expandedKeys":t[6]||(t[6]=b=>e.expandedKeys=b)},null,8,["data","node-props","expanded-keys"])]),_:1})]),_:1}),A(S,null,{default:D(()=>[Q("div",ec,[e.currentEditEntry?(P(),W($e,{key:0},[e.editMode===e.EditMode.TEXT?(P(),ae(d,{key:0})):(P(),W("div",tc,[A(g,{class:"gui-edit-gui",style:sa({width:e.editMode===e.EditMode.BATCH?"500px":"100%"})},{default:D(()=>[e.editMode===e.EditMode.BATCH?(P(),ae(F,{key:0,class:"action-row"},{default:D(()=>[A(s,{size:"tiny"},{default:D(()=>[q("Analyse")]),_:1})]),_:1})):_e("",!0),(P(!0),W($e,null,ot(e.translateTreeRoot,(b,R)=>(P(),ae(N,{key:R,index:R,item:b,"is-lite":e.editMode===e.EditMode.BATCH,title:e.i18nMainStore.filePathArr.join("/"),onOnKeyClick:e.handleKeyClick},null,8,["index","item","is-lite","title","onOnKeyClick"]))),128))]),_:1},8,["style"]),e.editMode===e.EditMode.BATCH?(P(),ae(g,{key:0,class:"gui-edit-batch"},{default:D(()=>[A(E)]),_:1})):_e("",!0)]))],64)):(P(),W("div",nc,[e.i18nMainStore.dirTree.length?(P(),W("div",oc,"👈 "+Z(e.$t("msgs.please_select_a_json")),1)):(P(),W("div",ac,[A(m,{align:"center",class:"intro-title"},{default:D(()=>[A(L,{size:"large",value:e.i18nSetStore.isFoldersMode,"onUpdate:value":t[7]||(t[7]=b=>e.i18nSetStore.isFoldersMode=b)},{checked:D(()=>[q(Z(e.$t("common.folders_mode")),1)]),unchecked:D(()=>[q(Z(e.$t("common.files_mode")),1)]),_:1},8,["value"]),q(" 📁 "+Z(e.$t("msgs.recommended_i18n_fol"))+": ",1)]),_:1}),Q("textarea",{class:da(["font-code",{_alt:!e.i18nSetStore.isFoldersMode}]),readonly:"",cols:"50",rows:"20",value:e.i18nSetStore.isFoldersMode?`└─[locales]    --> ${e.$t("msgs.drag_folder_here")}!
   ├─de-DE
   │  └─index.json
   ├─en-US
   │  └─index.json
   ├─es-ES
   │  └─index.json
   ├─fr-FR
   │  └─index.json
   ├─ja-JP
   │  └─index.json
   ├─kr-KR
   │  └─index.json
   ├─zh-CN
   │  └─index.json
   └─zh-TW
      └─index.json`:`└─[locales]    --> ${e.$t("msgs.drag_folder_here")}!
   ├─ ar.json
   ├─ cn.json
   ├─ de.json
   ├─ en.json
   ├─ es.json
   ├─ fr.json
   ├─ it.json
   ├─ jp.json
   └─ kr.json
`},null,10,rc)]))]))])]),_:1})]),_:1})]),A(ee,{visible:e.isShowToolSettings,"onUpdate:visible":t[8]||(t[8]=b=>e.isShowToolSettings=b)},null,8,["visible"])],32)}const uc=Ye(Jd,[["render",lc]]);export{uc as default};
