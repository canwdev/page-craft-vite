import{_ as e}from"./VueRender.vue_vue_type_script_lang-B7jagunM.js";import{u as a}from"./use-model-wrapper-C3eqSSDB.js";import{b7 as t,b8 as l,bZ as n,bY as i,d6 as s,bc as o,d as r,bf as d,b_ as u,b$ as p,r as c,be as m,bp as y,bo as v,e as g,bi as h,a2 as f,q as b,a9 as k,bm as T,aq as C,B as I,bq as S,_ as w,o as V,c as O,F as x,m as A,h as R,f as _,t as E,i as F,p as z,l as U,a5 as j,k as D,g as N,a as L,W as M,ax as P}from"./index-B_8g2bxo.js";import{A as B,_ as K,a as H,b as W}from"./AdvancedNumberInput-CDufGYGU.js";import{_ as q}from"./Select-B9LExM5-.js";import{a as $,N as Y,c as G}from"./Tag-DZeuv2Mx.js";import{A as J}from"./Add-BNHsnCDy.js";import{_ as Z}from"./Popover-BKGBJvpF.js";const Q=t({name:"DynamicTags",common:l,peers:{Input:n,Button:i,Tag:$,Space:s},self:()=>({inputWidth:"64px"})}),X=o("dynamic-tags",[o("input",{minWidth:"var(--n-input-width)"})]),ee=r({name:"DynamicTags",props:Object.assign(Object.assign(Object.assign({},m.props),G),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:e=>e},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),setup(e){const{mergedClsPrefixRef:a,inlineThemeDisabled:t}=d(e),{localeRef:l}=u("DynamicTags"),n=p(e),{mergedDisabledRef:i}=n,s=c(""),o=c(!1),r=c(!0),f=c(null),b=m("DynamicTags","-dynamic-tags",X,Q,e,a),k=c(e.defaultValue),T=y(e,"value"),C=v(T,k),w=g((()=>l.value.add)),V=g((()=>function(e){switch(e){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error(`${e} has no smaller size.`)}(e.size))),O=g((()=>i.value||!!e.max&&C.value.length>=e.max));function x(a){const{onChange:t,"onUpdate:value":l,onUpdateValue:i}=e,{nTriggerFormInput:s,nTriggerFormChange:o}=n;t&&S(t,a),i&&S(i,a),l&&S(l,a),k.value=a,s(),o()}function A(a){const t=null!=a?a:s.value;if(t){const a=C.value.slice(0);a.push(e.onCreate(t)),x(a)}o.value=!1,r.value=!0,s.value=""}const R=g((()=>{const{self:{inputWidth:e}}=b.value;return{"--n-input-width":e}})),_=t?h("dynamic-tags",void 0,R,e):void 0;return{mergedClsPrefix:a,inputInstRef:f,localizedAdd:w,inputSize:V,inputValue:s,showInput:o,inputForceFocused:r,mergedValue:C,mergedDisabled:i,triggerDisabled:O,handleInputKeyDown:function(e){if("Enter"===e.key)A()},handleAddClick:function(){o.value=!0,I((()=>{var e;null===(e=f.value)||void 0===e||e.focus(),r.value=!1}))},handleInputBlur:function(){A()},handleCloseClick:function(e){const a=C.value.slice(0);a.splice(e,1),x(a)},handleInputConfirm:A,mergedTheme:b,cssVars:t?void 0:R,themeClass:null==_?void 0:_.themeClass,onRender:null==_?void 0:_.onRender}},render(){const{mergedTheme:e,cssVars:a,mergedClsPrefix:t,onRender:l,renderTag:n}=this;return null==l||l(),f(C,{class:[`${t}-dynamic-tags`,this.themeClass],size:"small",style:a,theme:e.peers.Space,themeOverrides:e.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:e,tagClass:a,tagStyle:l,type:i,round:s,size:o,color:r,closable:d,mergedDisabled:u,showInput:p,inputValue:c,inputClass:m,inputStyle:y,inputSize:v,inputForceFocused:g,triggerDisabled:h,handleInputKeyDown:C,handleInputBlur:I,handleAddClick:S,handleCloseClick:w,handleInputConfirm:V,$slots:O}=this;return this.mergedValue.map(((t,p)=>n?n(t,p):f(Y,{key:p,theme:e.peers.Tag,themeOverrides:e.peerOverrides.Tag,class:a,style:l,type:i,round:s,size:o,color:r,closable:d,disabled:u,onClose:()=>{w(p)}},{default:()=>"string"==typeof t?t:t.label}))).concat(p?O.input?O.input({submit:V,deactivate:I}):f(b,Object.assign({placeholder:"",size:v,style:y,class:m,autosize:!0},this.inputProps,{ref:"inputInstRef",value:c,onUpdateValue:e=>{this.inputValue=e},theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,onKeydown:C,onBlur:I,internalForceFocus:g})):O.trigger?O.trigger({activate:S,disabled:h}):f(k,{dashed:!0,disabled:h,theme:e.peers.Button,themeOverrides:e.peerOverrides.Button,size:v,onClick:S},{icon:()=>f(T,{clsPrefix:t},{default:()=>f(J,null)})}))}})}}),ae=r({name:"RectSwitch",props:{modelValue:{type:[Boolean,String,Number],default:!1},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},setup:(e,{emit:t})=>({mValue:a(e,t)})}),te=["onClick"];const le=w(ae,[["render",function(e,a,t,l,n,i){return V(),O("div",{class:R(["rect-switch",{disabled:e.disabled}])},[(V(!0),O(x,null,A(e.options,(a=>(V(),O("div",{key:a.value,class:R(["r-item",{active:a.value===e.mValue}]),onClick:t=>e.mValue=a.value},_(a.label),11,te)))),128))],2)}]]);var ne=(e=>(e.SWITCH="switch",e.MULTIPLE_SWITCH="multiple_switch",e.SLIDER="slider",e.SELECT="select",e.INPUT="input",e.INPUT_NUMBER="input_number",e.COLOR_PICKER="color_picker",e.DYNAMIC_TAGS="dynamic_tags",e))(ne||{});const ie=["#258292","#3A6EA5","#F0C869","#E81123","#e91e63","#FFFFFF","#000000","#007aff","#a2845e","#8e8e93","#28cd41","#5856d6","#ff9500","#ff2d55","#af52de","#ff3b30","#5ac8fa","#ffcc00"],se=r({name:"ItemAction",components:{AdvancedNumberInput:B,VueRender:e,RectSwitch:le},props:{item:{type:Object,required:!0}},setup(e,{emit:a}){const{item:t}=E(e),l=g({get:()=>t.value.store?t.value.store[t.value.key]:t.value.value,set(e){t.value.store?t.value.store[t.value.key]=e:t.value.value=e}});return{StOptionType:ne,dynamicValue:l,swatches:ie}}}),oe={key:2,class:"option-slider-wrap"};const re=r({name:"OptionItem",components:{ItemAction:w(se,[["render",function(e,a,t,l,n,i){const s=K,o=F("RectSwitch"),r=H,d=q,u=b,p=W,c=ee,m=F("AdvancedNumberInput"),y=F("VueRender"),v=C;return V(),z(v,{class:"option-item-action",size:"small",align:"center"},{default:U((()=>[e.item.type===e.StOptionType.SWITCH?(V(),z(s,j({key:0,value:e.dynamicValue,"onUpdate:value":a[0]||(a[0]=a=>e.dynamicValue=a)},e.item.props),null,16,["value"])):e.item.type===e.StOptionType.MULTIPLE_SWITCH?(V(),z(o,j({key:1,options:e.item.options,modelValue:e.dynamicValue,"onUpdate:modelValue":a[1]||(a[1]=a=>e.dynamicValue=a)},e.item.props),null,16,["options","modelValue"])):e.item.type===e.StOptionType.SLIDER?(V(),O("div",oe,[D(r,j({class:"option-slider",value:e.dynamicValue,"onUpdate:value":a[2]||(a[2]=a=>e.dynamicValue=a)},e.item.props),null,16,["value"])])):e.item.type===e.StOptionType.SELECT?(V(),z(d,j({key:3,class:"option-select",value:e.dynamicValue,"onUpdate:value":a[3]||(a[3]=a=>e.dynamicValue=a),options:e.item.options,"value-field":"value","label-field":"label",size:"small"},e.item.props),null,16,["value","options"])):e.item.type===e.StOptionType.INPUT?(V(),z(u,j({key:4,class:"option-select option-input",value:e.dynamicValue,"onUpdate:value":a[4]||(a[4]=a=>e.dynamicValue=a),size:"small",type:"text",clearable:"",placeholder:e.item.placeholder||""},e.item.props),null,16,["value","placeholder"])):e.item.type===e.StOptionType.COLOR_PICKER?(V(),z(p,j({key:5,class:"option-select",value:e.dynamicValue,"onUpdate:value":a[5]||(a[5]=a=>e.dynamicValue=a),size:"small",swatches:e.swatches,"show-alpha":!1,actions:["clear"],modes:["hex"]},e.item.props),null,16,["value","swatches"])):e.item.type===e.StOptionType.DYNAMIC_TAGS?(V(),z(c,j({key:6,class:"dynamic-tags",value:e.dynamicValue,"onUpdate:value":a[6]||(a[6]=a=>e.dynamicValue=a),size:"small"},e.item.props),null,16,["value"])):e.item.type===e.StOptionType.INPUT_NUMBER?(V(),z(m,j({key:7,modelValue:e.dynamicValue,"onUpdate:modelValue":a[7]||(a[7]=a=>e.dynamicValue=a),disabled:e.item.disabled},e.item.props),null,16,["modelValue","disabled"])):N("",!0),e.item.actionRender?(V(),z(y,{key:8,"render-fn":e.item.actionRender},null,8,["render-fn"])):N("",!0)])),_:1})}]]),VueRender:e},props:{item:{type:Object,required:!0},foldedKeyMap:{type:Object,default:()=>({})}},setup(e,{emit:a}){const{item:t,foldedKeyMap:l}=E(e);return{isExpanded:g((()=>!l.value[t.value.key])),StOptionType:ne,handleItemClick:(e,a)=>{"function"==typeof a&&a(e,t.value)}}}}),de=["data-key"],ue={class:"panel-header vp-bg"},pe={class:"p-left"},ce={class:"item-label"},me={class:"p-right"},ye={style:{width:"20px",height:"20px"},xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},ve=[L("g",{fill:"none"},[L("path",{d:"M15.794 7.733a.75.75 0 0 1-.026 1.06l-5.25 5.001a.75.75 0 0 1-1.035 0l-5.25-5a.75.75 0 0 1 1.034-1.087l4.734 4.509l4.733-4.51a.75.75 0 0 1 1.06.027z",fill:"currentColor"})],-1)],ge={key:0,class:"panel-body"},he=["data-key","onClick"],fe={class:"o-left"},be={key:0,class:"item-icon"},ke={key:1,class:"item-icon"},Te=["src"],Ce={class:"item-title-wrap"},Ie={class:"item-label-wrap"},Se={class:"item-label"},we={style:{width:"16px",height:"16px"},xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ve=[L("g",{fill:"none"},[L("path",{d:"M10 2a8 8 0 1 1 0 16a8 8 0 0 1 0-16zm0 1a7 7 0 1 0 0 14a7 7 0 0 0 0-14zm0 10.5a.75.75 0 1 1 0 1.5a.75.75 0 0 1 0-1.5zm0-8a2.5 2.5 0 0 1 1.651 4.377l-.154.125l-.219.163l-.087.072a1.968 1.968 0 0 0-.156.149c-.339.36-.535.856-.535 1.614a.5.5 0 0 1-1 0c0-1.012.293-1.752.805-2.298a3.11 3.11 0 0 1 .356-.323l.247-.185l.118-.1A1.5 1.5 0 1 0 8.5 8a.5.5 0 0 1-1 .001A2.5 2.5 0 0 1 10 5.5z",fill:"currentColor"})],-1)],Oe=["innerHTML"],xe=["innerHTML"],Ae={class:"o-right"};const Re="option_ui_folded_key_map",_e=r({name:"OptionUI",components:{OptionItem:w(re,[["render",function(e,a,t,l,n,i){const s=F("ItemAction"),o=F("VueRender"),r=Z;return V(),O("div",{class:R(["c-panel-item",[e.item.cls]]),"data-key":e.item.key},[L("div",ue,[L("div",pe,[L("div",ce,_(e.item.label),1)]),L("div",me,[!e.item.hideExpandIcon&&e.item.children&&e.item.children.length?(V(),O("div",{key:0,class:R(["btn-no-style btn-toggle-expand",{expanded:e.isExpanded}]),onClick:a[0]||(a[0]=a=>e.$emit("onToggleExpand",e.item))},[(V(),O("svg",ye,ve))],2)):N("",!0),D(s,{item:e.item},null,8,["item"])])]),e.item.children&&e.item.children.length?M((V(),O("div",ge,[(V(!0),O(x,null,A(e.item.children,(a=>(V(),O("div",j({key:a.key,class:["sub-item",[{clickable:a.clickFn},a.cls]],"data-key":a.key,onClick:t=>e.handleItemClick(t,a.clickFn)},a.itemProps),[L("div",fe,[a.iconRender?(V(),O("div",be,[D(o,{"render-fn":a.iconRender},null,8,["render-fn"])])):a.icon?(V(),O("div",ke,[L("img",{src:a.icon,alt:"icon"},null,8,Te)])):N("",!0),L("div",Ce,[L("div",Ie,[L("span",Se,_(a.label),1),a.tips?(V(),z(r,{key:0,trigger:"hover"},{trigger:U((()=>[(V(),O("svg",we,Ve))])),default:U((()=>[L("span",{innerHTML:a.tips},null,8,Oe)])),_:2},1024)):N("",!0)]),a.subtitle?(V(),O("div",{key:0,class:"item-subtitle",innerHTML:a.subtitle},null,8,xe)):N("",!0)])]),L("div",Ae,[D(s,{item:a},null,8,["item"])])],16,he)))),128))],512)),[[P,e.isExpanded]]):N("",!0)],10,de)}]])},props:{optionList:{type:Array,default:()=>[]},expandId:{type:String,default:""}},setup(e,{emit:a}){const{expandId:t}=E(e),l=c(JSON.parse(localStorage.getItem(Re+t.value)||"null")||{});return{StOptionType:ne,foldedKeyMap:l,handleToggleExpand:e=>{l.value[e.key]?delete l.value[e.key]:l.value[e.key]=!0,localStorage.setItem(Re+t.value,JSON.stringify(l.value))}}}}),Ee={class:"option-ui"};const Fe=w(_e,[["render",function(e,a,t,l,n,i){const s=F("OptionItem");return V(),O("div",Ee,[(V(!0),O(x,null,A(e.optionList,(a=>M((V(),z(s,{item:a,key:a.key,"folded-key-map":e.foldedKeyMap,onOnToggleExpand:e.handleToggleExpand},null,8,["item","folded-key-map","onOnToggleExpand"])),[[P,!a.hidden]]))),128))])}]]);export{Fe as O,ne as S};
