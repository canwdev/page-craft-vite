import{d as e,q as a,L as t,c as l,r as n,K as r,I as s,bL as i,N as o,o as u,b as d,e as v,F as y,m as p,Q as b,f as m,x as c,g,k,bM as x,$ as h,a0 as f,E as $,_ as M}from"./index-Dcsrw7an.js";import{i as F,c as w,n as V,b as A,L as I,f as Y}from"./index-BWnbSkMo.js";const C={class:"fire-calc-wrapper vp-bg"},D={class:"vp-panel"},E={class:"group-grid"},L=["for"],S={key:0},_=["id","type","onUpdate:modelValue"],T={class:"group-grid group-grid--v2"},R=(e=>(h("data-v-be8ba970"),e=e(),f(),e))((()=>v("div",{class:"vp-panel"},[v("div",{class:"chart-area",id:"mainChart"})],-1))),P=M(e({__name:"index",setup(e){const h=a(t.FIRE_CALC_FORM_DATA,{currentValue:0,monthlySave:3e3,isTargetMode:!1,iterationMonths:12,targetValue:1e6,annualInterestRate:.025,yearEndAwards:0,age:0}),f=l((()=>[{label:"当前资产",key:"currentValue",type:"number"},{label:"月存入",key:"monthlySave",type:"number"},{label:"是否为目标存款模式",key:"isTargetMode",type:"checkbox"},h.value.isTargetMode?{label:"目标资产",key:"targetValue",type:"number"}:{label:"迭代月数",key:"iterationMonths",type:"number"},{label:"年利率",key:"annualInterestRate",type:"number"},{label:"年终奖",key:"yearEndAwards",type:"number"},{label:"年龄(选填)",key:"age",type:"number"}].filter(Boolean))),M=n([]),P=l((()=>{let e=h.value.currentValue,a=h.value.age;M.value=[],M.value.push({label:$().format("YYYY-MM-DD"),value:e,monthCount:0,age:h.value.age});let t=h.value.iterationMonths;h.value.isTargetMode&&(t=1/0);for(let l=0;l<t;l++){const t=l+1;if(t>1200)break;const n=$().add(t,"months"),r=11===n.month();if(r&&(a+=1,e+=Math.abs(e)*h.value.annualInterestRate||0,h.value.yearEndAwards&&(e+=h.value.yearEndAwards)),e+=h.value.monthlySave||0,M.value.push({label:`${n.format("YYYY-MM-DD")}`,value:e,dateMoment:n,isDecember:r,monthCount:t,age:a}),h.value.isTargetMode&&e>=h.value.targetValue)break}return e}));r(P,(()=>{q()}));const z=e=>{const a=e*h.value.annualInterestRate,t=a/12;return{piYearly:a,piMonthly:t,piDaily:t/30}},B=l((()=>{var e,a;const t=P.value,l=M.value.length-1,n=t-h.value.currentValue,r=(n/t*100).toFixed(2)+"%",s=null==(e=M.value[M.value.length-1])?void 0:e.age,{piYearly:i,piMonthly:o,piDaily:u}=z(t);return[{label:"结果资产",key:"resultValue",value:`${V(null==t?void 0:t.toFixed(2))} | ${A(t)}`,type:"text"},{label:"结果时间",key:"resultTimes",value:`${l}个月 = ${w(l)} | ${null==(a=M.value[M.value.length-1])?void 0:a.label}`,type:"text"},{label:"被动收入",key:"yearPassiveIncome",value:`年收 ${i.toFixed(2)} | 月收 ${o.toFixed(2)} | 日收 ${u.toFixed(2)}`,type:"text"},{label:"增长值",key:"increasedValue",value:n.toFixed(2),type:"number"},{label:"增长百分比",key:"increasedPercent",value:r,type:"text"},{label:"年龄",key:"resultAge",value:s,type:"text"}].filter(Boolean)}));function O(){j.value&&j.value.resize()}s((()=>{U(),q(),window.addEventListener("resize",O)})),i((()=>{j.value&&j.value.dispose(),window.removeEventListener("resize",O)}));const j=o(),U=()=>{var e=F(document.getElementById("mainChart"));e.setOption({title:{text:"预测图表"},legend:{},tooltip:{trigger:"axis",formatter(e){const[a]=e,t=a&&M.value[a.dataIndex],{piYearly:l,piMonthly:n,piDaily:r}=z(t.value);return`<div style="font-family: monospace">\n${a.marker}\n<div>日期：${t.label} (${w(t.monthCount)}) | ${t.monthCount||0}个月</div>\n<div>资产：${V(t.value.toFixed(2))}</div>\n<div>资产：${A(t.value)}</div>\n<div>被动收入：年收 ${l.toFixed(2)} | 月收 ${n.toFixed(2)} | 日收 ${r.toFixed(2)}</div>\n<div>年龄：${t.age}</div>\n</div>`},axisPointer:{type:"cross",label:{backgroundColor:"rgba(133,133,133,0.8)"}}},grid:{top:"10%",left:"1%",right:"2.5%",bottom:0,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],splitLine:{show:!0,lineStyle:{type:"dashed"}}},yAxis:{type:"value",minInterval:1,axisPointer:{snap:!0},splitLine:{show:!0,lineStyle:{type:"dashed"}}},series:[{type:"line",symbol:"circle",symbolSize:5,name:"Value",itemStyle:{color:"#FF9800"},smooth:!0,areaStyle:{color:new I(0,0,0,1,[{offset:0,color:"rgba(255,152,0,0.4)"},{offset:1,color:"rgba(255,255,255,0)"}])},data:[]}]}),j.value=e},q=()=>{const e=M.value||[];j.value.setOption({xAxis:{data:e.map((e=>e.label))},series:[{data:e.map((e=>e.value)),markPoint:{data:[{type:"max"},{type:"min"}]}}]})};return(e,a)=>(u(),d("div",C,[v("div",D,[v("div",E,[(u(!0),d(y,null,p(c(f),(e=>(u(),d("label",{for:e.key,key:e.key},[b(m(e.label||c(Y)(e.key))+": ",1),"checkbox"===e.type?(u(),d("br",S)):g("",!0),k(v("input",{class:"vp-input",id:e.key,type:e.type,"onUpdate:modelValue":a=>c(h)[e.key]=a},null,8,_),[[x,c(h)[e.key]]])],8,L)))),128))]),v("div",T,[(u(!0),d(y,null,p(c(B),(e=>(u(),d("div",{key:e.key},[b(m(e.label||c(Y)(e.key))+": ",1),v("b",null,m(e.value),1)])))),128))])]),R]))}}),[["__scopeId","data-v-be8ba970"]]);export{P as default};
