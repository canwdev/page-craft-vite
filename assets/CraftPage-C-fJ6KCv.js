const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DI_545Ax.js","./index-D7imv_Md.js","./index-CXkDE1gB.css","./index.vue_vue_type_style_index_0_lang-cU_mVrg2.js","./index-BR_HEkHY.js","./index.vue_vue_type_style_index_0_lang-DEuY5zHr.js","./set-CT1JW_BL.js","./index-CP_TvyA7.js","./use-model-wrapper-B0P8Zqss.js","./index-097aD3e1.css","./index-CIDsl98o.css","./el-switch-DXom7KbV.css","./el-checkbox-BFZaSjz7.css","./el-input-number-DHcnHmry.css","./use-beforeunload-walRddPp.js","./humanfs-api-Dvdi9RO8.js","./index-vcidOvW8.js","./index-ChBI-IfP.js","./index-Jyb0bir-.css","./QuickContextMenu.vue_vue_type_script_setup_true_lang-BpOU60Dx.js","./index-CiR87mzu.css","./TabLayout-CsB4Yfbx.js","./TabLayout-B_54VU1W.css","./use-remote-options-BfsfSPcO.js","./use-local-dir-CBTdfN0o.js","./file-history-CLLvp5b9.js","./useIDBKeyval-BIf4fra4.js","./index-BFbisPxq.css","./el-popconfirm-Crf0wTft.css","./el-loading-x7H6yciF.css"])))=>i.map(i=>d[i]);
import{d as t,t as e,u as i,a as n,r,c as a,_ as o,o as s,b as l,e as h,n as c,f as d,g as u,h as f,w as p,i as m,j as v,k as g,v as b,l as w,F as y,m as _,p as k,q as x,s as C,x as S,y as E,G as O,z as I,A as D,B as T,C as z,D as A,E as B,H as R,I as M,J as L,K as P,L as N,T as F,M as U,N as j,O as W,P as H,Q as $,R as Z,S as Y,U as V,V as X,W as K,X as q,Y as G,Z as J,$ as Q,a0 as tt,a1 as et,a2 as it,a3 as nt,a4 as rt,a5 as at,a6 as ot,a7 as st,a8 as lt,a9 as ht,aa as ct,ab as dt,ac as ut,ad as ft,ae as pt,af as mt,ag as vt,ah as gt}from"./index-D7imv_Md.js";/* empty css                      *//* empty css                        */import{c as bt,f as wt,s as yt,g as _t}from"./index-BR_HEkHY.js";import{u as kt}from"./use-model-wrapper-B0P8Zqss.js";import{V as xt}from"./index-ChBI-IfP.js";import{r as Ct,f as St,u as Et,c as Ot,a as It,b as Dt,d as Tt,e as zt,g as At,h as Bt,i as Rt,j as Mt,_ as Lt}from"./index.vue_vue_type_style_index_0_lang-cU_mVrg2.js";import{T as Pt}from"./TabLayout-CsB4Yfbx.js";import{u as Nt,a as Ft,b as Ut,c as jt}from"./use-local-dir-CBTdfN0o.js";import{n as Wt,f as Ht,g as $t}from"./humanfs-api-Dvdi9RO8.js";/* empty css                   */import{_ as Zt}from"./QuickContextMenu.vue_vue_type_script_setup_true_lang-BpOU60Dx.js";import{m as Yt}from"./index-CP_TvyA7.js";const Vt=t({name:"ToolItem",props:{item:{type:Object,required:!0},active:{type:Boolean,default:!1}},emits:["onDrop","onDragStart"],setup(t,{emit:o}){const{item:s}=e(t),l=i(),h=n(),c=r(!1);return{mainStore:l,settingsStore:h,color:a((()=>s.value.title&&bt.hex(s.value.title))),showDropzone:c,onDragover(t){c.value=!0},async onDrop(t){c.value=!1,o("onDrop",t)}}}}),Xt=["title"],Kt=["src"],qt={key:1,class:"item-text"};const Gt=o(Vt,[["render",function(t,e,i,n,r,a){return s(),l("div",{class:f([{active:t.active,blink:t.showDropzone},"mc-tool-item _mini font-code vp-button"]),title:t.item.title,draggable:"true",onDragstart:e[0]||(e[0]=e=>t.$emit("onDragStart",e)),onDragover:e[1]||(e[1]=p(((...e)=>t.onDragover&&t.onDragover(...e)),["prevent","stop"])),onDragleave:e[2]||(e[2]=p((e=>t.showDropzone=!1),["prevent","stop"])),onDrop:e[3]||(e[3]=p(((...e)=>t.onDrop&&t.onDrop(...e)),["prevent","stop"]))},[h("div",{style:c({backgroundColor:t.color}),class:"mc-tool-item-bg"},null,4),t.item.icon?(s(),l("img",{key:0,src:t.item.icon,alt:"icon"},null,8,Kt)):t.item.title?(s(),l("span",qt,d(t.item.title),1)):u("",!0)],42,Xt)}],["__scopeId","data-v-18e18044"]]),Jt=t({name:"BlockItemCard",props:{item:{type:Object,required:!0}},setup(t){const{item:r}=e(t),o=i(),s=n(),l=a((()=>r.value.id===o.currentBlock.id)),h=a((()=>r.value.title&&bt.hex(r.value.title)));return{mainStore:o,settingsStore:s,isActive:l,color:h,handleDragStart(t){t.dataTransfer.setData("data-block",JSON.stringify(r.value))}}}}),Qt=["title"],te=["src"],ee={key:1,class:"item-text"},ie={key:2,class:"item-subtext"};const ne=t({name:"InventoryList",components:{BlockItemCard:o(Jt,[["render",function(t,e,i,n,r,a){return s(),l("div",{class:f([{active:t.isActive},"mc-tool-item font-code vp-button"]),title:t.item.title,draggable:"true",onDragstart:e[0]||(e[0]=(...e)=>t.handleDragStart&&t.handleDragStart(...e))},[h("div",{style:c({backgroundColor:t.color}),class:"mc-tool-item-bg"},null,4),t.item.icon?(s(),l("img",{key:0,src:t.item.icon,alt:"icon"},null,8,te)):t.item.title?(s(),l("span",ee,d(t.item.title),1)):u("",!0),t.item.icon&&t.item.title?(s(),l("span",ie,d(t.item.title),1)):u("",!0)],42,Qt)}]])},props:{itemList:{type:Array,default:()=>[]},showFilter:{type:Boolean,default:!0},largeCard:{type:Boolean,default:!1}},emits:["onItemClick","contextmenu"],setup(t){const{itemList:i}=e(t),n=r(""),o=a((()=>{const t=n.value.toLowerCase();return n.value?i.value.filter((e=>e.title.toLowerCase().includes(t))):i.value}));return{filterText:n,itemListFiltered:o}}}),re={class:"inventory-list-wrap"},ae={key:0,class:"filter-row flex-row-center-gap"},oe=["placeholder"],se={key:1,style:{padding:"40px","text-align":"center","font-size":"20px"}};const le=o(ne,[["render",function(t,e,i,n,r,a){const o=m("BlockItemCard");return s(),l("div",re,[t.showFilter?(s(),l("div",ae,[v(t.$slots,"filterStart",{},void 0,!0),g(h("input",{class:"vp-input","onUpdate:modelValue":e[0]||(e[0]=e=>t.filterText=e),onKeyup:e[1]||(e[1]=w((e=>t.filterText=""),["esc"])),placeholder:"🔎 "+t.$t("msgs.filter_items")},null,40,oe),[[b,t.filterText]]),v(t.$slots,"filterEnd",{},void 0,!0)])):u("",!0),t.itemListFiltered.length?(s(),l("div",{key:2,class:f(["inventory-list scrollbar-mini",{_big:!1}])},[(s(!0),l(y,null,_(t.itemListFiltered,(e=>(s(),k(o,{key:e.id,class:"list-item",item:e,onClick:i=>t.$emit("onItemClick",e)},null,8,["item","onClick"])))),128))])):(s(),l("div",se,d(t.$t("msgs.no_items")),1)),v(t.$slots,"end",{},void 0,!0)])}],["__scopeId","data-v-0d2e7d3f"]]),he=t=>t.isDirectory&&!Ct.test(t.name);var ce=(t=>(t.name="name",t.nameDesc="nameDesc",t.birthTime="birthTime",t.birthTimeDesc="birthTimeDesc",t))(ce||{});const de={name:(t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()),nameDesc:(t,e)=>-t.name.toLowerCase().localeCompare(e.name.toLowerCase()),birthTime:(t,e)=>{var i,n;const r=(he(t)?1:2)-(he(e)?1:2);return 0!==r?r:((null==(i=t.meta)?void 0:i.timeCreated)||0)-((null==(n=e.meta)?void 0:n.timeCreated)||0)},birthTimeDesc:(t,e)=>{var i,n;const r=(he(t)?1:2)-(he(e)?1:2);return 0!==r?r:((null==(i=e.meta)?void 0:i.timeCreated)||0)-((null==(n=t.meta)?void 0:n.timeCreated)||0)}},ue=["draggable","title"],fe=["checked"],pe={class:"action-menu"},me={class:"title-wrap"},ve={key:0,class:"item-text-c"},ge={class:"meta-info"},be={key:0,class:"timestamp"},we=o(t({__name:"ComponentCard",props:{item:{},checked:{type:Boolean}},emits:["open","select","handleDragStart"],setup(t,{emit:i}){const r=i,o=t,{item:m}=e(o),g=n(),b=()=>{r("open",m.value)},y=a((()=>m.value.name.replace(Ct,""))),_=a((()=>Ct.test(m.value.name))),k=a((()=>{if(_.value)return bt.rgb(m.value.name).join(", ")}));let x;const I=C((t=>{m.value.meta&&m.value.meta.cover&&(x=t,E.emit(O.ON_COMP_HOVER,{event:x,item:m.value}))}),70),D=()=>{E.emit(O.ON_COMP_HOVER_OUT)},T=t=>{r("handleDragStart",t),D()};return(t,e)=>{var i,n,r,a;return s(),l("div",{tabindex:"0",class:f(["mc-comp-item btn-no-style",{checked:t.checked,active:S(m).meta&&S(g).curCompInStore&&S(m).meta.id===S(g).curCompInStore.id&&S(g).curCompInStore.basePath===S(m).basePath,hidden:S(m).hidden}]),onClick:p(b,["stop"]),onKeyup:w(b,["enter"]),style:c({"--block-color-rgb":S(k)}),onMousemove:e[2]||(e[2]=(...t)=>S(I)&&S(I)(...t)),onMouseleave:D,draggable:S(_),onDragstart:T,title:S(y)},[h("div",{style:c({backgroundColor:`rgb(${S(k)}, 0.24)`}),class:"mc-comp-item-bg"},null,4),h("input",{class:"file-checkbox",type:"checkbox",checked:t.checked,onClick:e[0]||(e[0]=p((e=>t.$emit("select",{item:S(m),event:e,toggle:!0})),["stop"])),onDblclick:e[1]||(e[1]=p((()=>{}),["stop"]))},null,40,fe),h("div",pe,[v(t.$slots,"actionMenu",{item:S(m)},void 0,!0)]),h("div",me,[S(y)?(s(),l("span",ve,d(S(_)?"":S(m).isDirectory?"📁":"📄")+" "+d(S(y)),1)):u("",!0)]),(null==(i=S(m).meta)?void 0:i.cover)?(s(),l("div",{key:0,class:"component-cover",style:c({backgroundImage:`url(${null==(n=S(m).meta)?void 0:n.cover})`})},null,4)):u("",!0),h("div",ge,[(null==(r=S(m).meta)?void 0:r.timeCreated)?(s(),l("span",be,d(S(wt)(null==(a=S(m).meta)?void 0:a.timeCreated)),1)):u("",!0)])],46,ue)}}}),[["__scopeId","data-v-bf84e95d"]]),ye=async t=>(await yt(300),document.hasFocus()?t:ye(t)),_e=async(t={})=>{const{onCaptureEnd:e,onCaptureStart:i,quality:n=.7,type:r="image/png",soundEffectUrl:a}=t;return await(null==i?void 0:i()),navigator.mediaDevices.getDisplayMedia({preferCurrentTab:!0,video:{frameRate:30}}).then(ye).then((async i=>{const o=(t=>{const e=document.createElement("video");return e.autoplay=!0,e.muted=!0,e.playsInline=!0,e.srcObject=t,e.setAttribute("style","position:fixed;top:0;left:0;pointer-events:none;visibility:hidden;"),e})(i);document.body.appendChild(o),a&&(t=>{const e=document.createElement("audio");e.loop=!1,e.src=t,e.play(),e.remove()})(a),await yt(300);const s=(t=>{var e;const i=null==(e=t.srcObject)?void 0:e.getTracks()[0].getSettings(),n=document.createElement("canvas");n.width=(null==i?void 0:i.width)??0,n.height=(null==i?void 0:i.height)??0;const r=n.getContext("2d");return null==r||r.drawImage(t,0,0),n})(o),l=s.toDataURL(r,n);return(t=>{var e;const i=null==(e=t.srcObject)?void 0:e.getTracks();null==i||i.forEach((t=>t.stop())),t.srcObject=null,t.remove()})(o),s.remove(),"function"==typeof e?await e(s,t):l}))};var ke={exports:{}};
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/const xe=T(ke.exports=function t(e,i,n){function r(o,s){if(!i[o]){if(!e[o]){var l="function"==typeof D&&D;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[o]={exports:{}};e[o][0].call(c.exports,(function(t){return r(e[o][1][t]||t)}),c,c.exports,t,e,i,n)}return i[o].exports}for(var a="function"==typeof D&&D,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){var n=t("./utils"),r=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t){for(var e,i,r,o,s,l,h,c=[],d=0,u=t.length,f=u,p="string"!==n.getTypeOf(t);d<t.length;)f=u-d,r=p?(e=t[d++],i=d<u?t[d++]:0,d<u?t[d++]:0):(e=t.charCodeAt(d++),i=d<u?t.charCodeAt(d++):0,d<u?t.charCodeAt(d++):0),o=e>>2,s=(3&e)<<4|i>>4,l=1<f?(15&i)<<2|r>>6:64,h=2<f?63&r:64,c.push(a.charAt(o)+a.charAt(s)+a.charAt(l)+a.charAt(h));return c.join("")},i.decode=function(t){var e,i,n,o,s,l,h=0,c=0,d="data:";if(t.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var u,f=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===a.charAt(64)&&f--,t.charAt(t.length-2)===a.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=r.uint8array?new Uint8Array(0|f):new Array(0|f);h<t.length;)e=a.indexOf(t.charAt(h++))<<2|(o=a.indexOf(t.charAt(h++)))>>4,i=(15&o)<<4|(s=a.indexOf(t.charAt(h++)))>>2,n=(3&s)<<6|(l=a.indexOf(t.charAt(h++))),u[c++]=e,64!==s&&(u[c++]=i),64!==l&&(u[c++]=n);return u}},{"./support":30,"./utils":32}],2:[function(t,e,i){var n=t("./external"),r=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function s(t,e,i,n,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=i,this.compression=n,this.compressedContent=r}s.prototype={getContentWorker:function(){var t=new r(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,i){return t.pipe(new a).pipe(new o("uncompressedSize")).pipe(e.compressWorker(i)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},e.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,i){var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,i){var n=t("./utils"),r=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,i,n){var a=r,o=n+i;t^=-1;for(var s=n;s<o;s++)t=t>>>8^a[255&(t^e[s])];return~t}(0|e,t,t.length,0):function(t,e,i,n){var a=r,o=n+i;t^=-1;for(var s=n;s<o;s++)t=t>>>8^a[255&(t^e.charCodeAt(s))];return~t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,e,i){var n=null;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,i){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako"),a=t("./utils"),o=t("./stream/GenericWorker"),s=n?"uint8array":"array";function l(t,e){o.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}i.magic="\b\0",a.inherits(l,o),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,t.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},i.compressWorker=function(t){return new l("Deflate",t)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,i){function n(t,e){var i,n="";for(i=0;i<e;i++)n+=String.fromCharCode(255&t),t>>>=8;return n}function r(t,e,i,r,o,c){var d,u,f=t.file,p=t.compression,m=c!==s.utf8encode,v=a.transformTo("string",c(f.name)),g=a.transformTo("string",s.utf8encode(f.name)),b=f.comment,w=a.transformTo("string",c(b)),y=a.transformTo("string",s.utf8encode(b)),_=g.length!==f.name.length,k=y.length!==b.length,x="",C="",S="",E=f.dir,O=f.date,I={crc32:0,compressedSize:0,uncompressedSize:0};e&&!i||(I.crc32=t.crc32,I.compressedSize=t.compressedSize,I.uncompressedSize=t.uncompressedSize);var D=0;e&&(D|=8),m||!_&&!k||(D|=2048);var T,z,A,B=0,R=0;E&&(B|=16),"UNIX"===o?(R=798,B|=(T=f.unixPermissions,z=E,A=T,T||(A=z?16893:33204),(65535&A)<<16)):(R=20,B|=function(t){return 63&(t||0)}(f.dosPermissions)),d=O.getUTCHours(),d<<=6,d|=O.getUTCMinutes(),d<<=5,d|=O.getUTCSeconds()/2,u=O.getUTCFullYear()-1980,u<<=4,u|=O.getUTCMonth()+1,u<<=5,u|=O.getUTCDate(),_&&(C=n(1,1)+n(l(v),4)+g,x+="up"+n(C.length,2)+C),k&&(S=n(1,1)+n(l(w),4)+y,x+="uc"+n(S.length,2)+S);var M="";return M+="\n\0",M+=n(D,2),M+=p.magic,M+=n(d,2),M+=n(u,2),M+=n(I.crc32,4),M+=n(I.compressedSize,4),M+=n(I.uncompressedSize,4),M+=n(v.length,2),M+=n(x.length,2),{fileRecord:h.LOCAL_FILE_HEADER+M+v+x,dirRecord:h.CENTRAL_FILE_HEADER+n(R,2)+M+n(w.length,2)+"\0\0\0\0"+n(B,4)+n(r,4)+v+x+w}}var a=t("../utils"),o=t("../stream/GenericWorker"),s=t("../utf8"),l=t("../crc32"),h=t("../signature");function c(t,e,i,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=i,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(c,o),c.prototype.push=function(t){var e=t.meta.percent||0,i=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:i?(e+100*(i-n-1))/i:100}}))},c.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var i=r(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(t){this.accumulate=!1;var e,i=this.streamFiles&&!t.file.dir,a=r(t,i,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),i)this.push({data:(e=t,h.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var i,r,o,s,l,c,d=this.bytesWritten-t,u=(i=this.dirRecords.length,r=d,o=t,s=this.zipComment,l=this.encodeFileName,c=a.transformTo("string",l(s)),h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(i,2)+n(i,2)+n(r,4)+n(o,4)+n(c.length,2)+c);this.push({data:u,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(t){var e=this._sources;if(!o.prototype.error.call(this,t))return!1;for(var i=0;i<e.length;i++)try{e[i].error(t)}catch(n){}return!0},c.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,i){var n=t("../compressions"),r=t("./ZipFileWorker");i.generateWorker=function(t,e,i){var a=new r(e.streamFiles,i,e.platform,e.encodeFileName),o=0;try{t.forEach((function(t,i){o++;var r=function(t,e){var i=t||e,r=n[i];if(!r)throw new Error(i+" is not a valid compression method !");return r}(i.options.compression,e.compression),s=i.options.compressionOptions||e.compressionOptions||{},l=i.dir,h=i.date;i._compressWorker(r,s).withStreamInfo("file",{name:t,dir:l,date:h,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(a)})),a.entriesCount=o}catch(s){a.error(s)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,i){var n=t("./utils"),r=t("./external"),a=t("./utf8"),o=t("./zipEntries"),s=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function h(t){return new r.Promise((function(e,i){var n=t.decompressed.getContentWorker().pipe(new s);n.on("error",(function(t){i(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var i=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var i=new o(e);return i.load(t),i})).then((function(t){var i=[r.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var a=0;a<n.length;a++)i.push(h(n[a]));return r.Promise.all(i)})).then((function(t){for(var r=t.shift(),a=r.files,o=0;o<a.length;o++){var s=a[o],l=s.fileNameStr,h=n.resolve(s.fileNameStr);i.file(h,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders}),s.dir||(i.file(h).unsafeOriginalName=l)}return r.zipComment.length&&(i.comment=r.zipComment),i}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,i){var n=t("../utils"),r=t("../stream/GenericWorker");function a(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(a,r),a.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},a.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,i){var n=t("readable-stream").Readable;function r(t,e,i){n.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),i&&i(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}t("../utils").inherits(r,n),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,e,i){e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,i){function n(t,e,i){var n,r=a.getTypeOf(e),s=a.extend(i||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=m(t)),s.createFolders&&(n=p(t))&&v.call(this,n,!0);var d="string"===r&&!1===s.binary&&!1===s.base64;i&&void 0!==i.binary||(s.binary=!d),(e instanceof h&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",r="string");var g=null;g=e instanceof h||e instanceof o?e:u.isNode&&u.isStream(e)?new f(t,e):a.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var b=new c(t,g,s);this.files[t]=b}var r=t("./utf8"),a=t("./utils"),o=t("./stream/GenericWorker"),s=t("./stream/StreamHelper"),l=t("./defaults"),h=t("./compressedObject"),c=t("./zipObject"),d=t("./generate"),u=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},v=function(t,e){return e=void 0!==e?e:l.createFolders,t=m(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function g(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,i,n;for(e in this.files)n=this.files[e],(i=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(i,n)},filter:function(t){var e=[];return this.forEach((function(i,n){t(i,n)&&e.push(n)})),e},file:function(t,e,i){if(1!==arguments.length)return t=this.root+t,n.call(this,t,e,i),this;if(g(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var a=this.files[this.root+t];return a&&!a.dir?a:null},folder:function(t){if(!t)return this;if(g(t))return this.filter((function(e,i){return i.dir&&t.test(e)}));var e=this.root+t,i=v.call(this,e),n=this.clone();return n.root=i.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var i=this.filter((function(e,i){return i.name.slice(0,t.length)===t})),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,i={};try{if((i=a.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");a.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var n=i.comment||this.comment||"";e=d.generateWorker(this,i,n)}catch(l){(e=new o("error")).error(l)}return new s(e,i.type||"string",i.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,i){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,i){var n=t("./DataReader");function r(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(r,n),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),r=t.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===e&&this.data[a+1]===i&&this.data[a+2]===n&&this.data[a+3]===r)return a-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),r=t.charCodeAt(3),a=this.readData(4);return e===a[0]&&i===a[1]&&n===a[2]&&r===a[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e,i){var n=t("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e,i){var n=t("./Uint8ArrayReader");function r(t){n.call(this,t)}t("../utils").inherits(r,n),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,i){var n=t("./DataReader");function r(t){n.call(this,t)}t("../utils").inherits(r,n),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e,i){var n=t("./ArrayReader");function r(t){n.call(this,t)}t("../utils").inherits(r,n),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,i){var n=t("../utils"),r=t("../support"),a=t("./ArrayReader"),o=t("./StringReader"),s=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new s(t):r.uint8array?new l(n.transformTo("uint8array",t)):new a(n.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,i){var n=t("./GenericWorker"),r=t("../utils");function a(t){n.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(a,n),a.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},e.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,i){var n=t("./GenericWorker"),r=t("../crc32");function a(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,n),a.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,i){var n=t("../utils"),r=t("./GenericWorker");function a(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(a,r),a.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},e.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,i){var n=t("../utils"),r=t("./GenericWorker");function a(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(a,r),a.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,i){function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],29:[function(t,e,i){var n=t("../utils"),r=t("./ConvertWorker"),a=t("./GenericWorker"),o=t("../base64"),s=t("../support"),l=t("../external"),h=null;if(s.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch(u){}function c(t,e){return new l.Promise((function(i,r){var a=[],s=t._internalType,l=t._outputType,h=t._mimeType;t.on("data",(function(t,i){a.push(t),e&&e(i)})).on("error",(function(t){a=[],r(t)})).on("end",(function(){try{var t=function(t,e,i){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",e),i);case"base64":return o.encode(e);default:return n.transformTo(t,e)}}(l,function(t,e){var i,n=0,r=null,a=0;for(i=0;i<e.length;i++)a+=e[i].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(a),i=0;i<e.length;i++)r.set(e[i],n),n+=e[i].length;return r;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(s,a),h);i(t)}catch(e){r(e)}a=[]})).resume()}))}function d(t,e,i){var o=e;switch(e){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=e,this._mimeType=i,n.checkSupport(o),this._worker=t.pipe(new r(o)),t.lock()}catch(s){this._worker=new a("error"),this._worker.error(s)}}d.prototype={accumulate:function(t){return c(this,t)},on:function(t,e){var i=this;return"data"===t?this._worker.on(t,(function(t){e.call(i,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(e,arguments,i)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(a){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(n),i.blob=0===r.getBlob("application/zip").size}catch(o){i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch(a){i.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,i){for(var n=t("./utils"),r=t("./support"),a=t("./nodejsUtils"),o=t("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function h(){o.call(this,"utf-8 decode"),this.leftOver=null}function c(){o.call(this,"utf-8 encode")}s[254]=s[254]=1,i.utf8encode=function(t){return r.nodebuffer?a.newBufferFrom(t,"utf-8"):function(t){var e,i,n,a,o,s=t.length,l=0;for(a=0;a<s;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(n-56320),a++),l+=i<128?1:i<2048?2:i<65536?3:4;for(e=r.uint8array?new Uint8Array(l):new Array(l),a=o=0;o<l;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(n-56320),a++),i<128?e[o++]=i:(i<2048?e[o++]=192|i>>>6:(i<65536?e[o++]=224|i>>>12:(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63),e[o++]=128|i>>>6&63),e[o++]=128|63&i);return e}(t)},i.utf8decode=function(t){return r.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,i,r,a,o=t.length,l=new Array(2*o);for(e=i=0;e<o;)if((r=t[e++])<128)l[i++]=r;else if(4<(a=s[r]))l[i++]=65533,e+=a-1;else{for(r&=2===a?31:3===a?15:7;1<a&&e<o;)r=r<<6|63&t[e++],a--;1<a?l[i++]=65533:r<65536?l[i++]=r:(r-=65536,l[i++]=55296|r>>10&1023,l[i++]=56320|1023&r)}return l.length!==i&&(l.subarray?l=l.subarray(0,i):l.length=i),n.applyFromCharCode(l)}(t=n.transformTo(r.uint8array?"uint8array":"array",t))},n.inherits(h,o),h.prototype.processChunk=function(t){var e=n.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var a=e;(e=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),e.set(a,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var o=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?e:i+s[t[i]]>e?i:e}(e),l=e;o!==e.length&&(r.uint8array?(l=e.subarray(0,o),this.leftOver=e.subarray(o,e.length)):(l=e.slice(0,o),this.leftOver=e.slice(o,e.length))),this.push({data:i.utf8decode(l),meta:t.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,n.inherits(c,o),c.prototype.processChunk=function(t){this.push({data:i.utf8encode(t.data),meta:t.meta})},i.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,i){var n=t("./support"),r=t("./base64"),a=t("./nodejsUtils"),o=t("./external");function s(t){return t}function l(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}t("setimmediate"),i.newBlob=function(t,e){i.checkSupport("blob");try{return new Blob([t],{type:e})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(a){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(t,e,i){var n=[],r=0,a=t.length;if(a<=i)return String.fromCharCode.apply(null,t);for(;r<a;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+i,a)))):n.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+i,a)))),r+=i;return n.join("")},stringifyByChar:function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(t){return!1}}()}};function c(t){var e=65536,n=i.getTypeOf(t),r=!0;if("uint8array"===n?r=h.applyCanBeUsed.uint8array:"nodebuffer"===n&&(r=h.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return h.stringifyByChunk(t,n,e)}catch(a){e=Math.floor(e/2)}return h.stringifyByChar(t)}function d(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}i.applyFromCharCode=c;var u={};u.string={string:s,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return u.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,a.allocBuffer(t.length))}},u.array={string:c,array:s,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return a.newBufferFrom(t)}},u.arraybuffer={string:function(t){return c(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:s,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return a.newBufferFrom(new Uint8Array(t))}},u.uint8array={string:c,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:s,nodebuffer:function(t){return a.newBufferFrom(t)}},u.nodebuffer={string:c,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return u.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:s},i.transformTo=function(t,e){if(e=e||"",!t)return e;i.checkSupport(t);var n=i.getTypeOf(e);return u[n][t](e)},i.resolve=function(t){for(var e=t.split("/"),i=[],n=0;n<e.length;n++){var r=e[n];"."===r||""===r&&0!==n&&n!==e.length-1||(".."===r?i.pop():i.push(r))}return i.join("/")},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&a.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var e,i,n="";for(i=0;i<(t||"").length;i++)n+="\\x"+((e=t.charCodeAt(i))<16?"0":"")+e.toString(16).toUpperCase();return n},i.delay=function(t,e,i){setImmediate((function(){t.apply(i||null,e||[])}))},i.inherits=function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i},i.extend=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===i[e]&&(i[e]=arguments[t][e]);return i},i.prepareContent=function(t,e,a,s,h){return o.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new o.Promise((function(e,i){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){i(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var c,d=i.getTypeOf(e);return d?("arraybuffer"===d?e=i.transformTo("uint8array",e):"string"===d&&(h?e=r.decode(e):a&&!0!==s&&(e=l(c=e,n.uint8array?new Uint8Array(c.length):new Array(c.length)))),e):o.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,i){var n=t("./reader/readerFor"),r=t("./utils"),a=t("./signature"),o=t("./zipEntry"),s=t("./support");function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var i=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(i),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",i=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=e-i;if(0<n)this.isSignature(e,a.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,e,i){var n=t("./reader/readerFor"),r=t("./utils"),a=t("./compressedObject"),o=t("./crc32"),s=t("./utf8"),l=t("./compressions"),h=t("./support");function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(Object.prototype.hasOwnProperty.call(l,e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,i,n,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<r;)e=t.readInt(2),i=t.readInt(2),n=t.readData(i),this.extraFields[e]={id:e,length:i,value:n};t.setIndex(r)},handleUTF8:function(){var t=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var i=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var a=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,i){function n(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var r=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),o=t("./utf8"),s=t("./compressedObject"),l=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var e=null,i="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(i=t.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),e=this._decompressWorker();var a=!this._dataBinary;a&&!n&&(e=e.pipe(new o.Utf8EncodeWorker)),!a&&n&&(e=e.pipe(new o.Utf8DecodeWorker))}catch(s){(e=new l("error")).error(s)}return new r(e,i,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof s&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(i,t,e)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<h.length;d++)n.prototype[h[d]]=c;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,i){(function(t){var i,n,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var a=0,o=new r(c),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),i=function(){s.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,i=function(){l.port2.postMessage(0)}}var h=[];function c(){var t,e;n=!0;for(var i=h.length;i;){for(e=h,h=[],t=-1;++t<i;)e[t]();i=h.length}n=!1}e.exports=function(t){1!==h.push(t)||n||i()}}).call(this,void 0!==I?I:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,i){var n=t("immediate");function r(){}var a={},o=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==r&&f(this,t)}function c(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function d(t,e,i){n((function(){var n;try{n=e(i)}catch(r){return a.reject(t,r)}n===t?a.reject(t,new TypeError("Cannot resolve promise with itself")):a.resolve(t,n)}))}function u(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var i=!1;function n(e){i||(i=!0,a.reject(t,e))}function r(e){i||(i=!0,a.resolve(t,e))}var o=p((function(){e(r,n)}));"error"===o.status&&n(o.value)}function p(t,e){var i={};try{i.value=t(e),i.status="success"}catch(n){i.status="error",i.value=n}return i}(e.exports=h).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){throw i}))}))},h.prototype.catch=function(t){return this.then(null,t)},h.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===o)return this;var i=new this.constructor(r);return this.state!==l?d(i,this.state===s?t:e,this.outcome):this.queue.push(new c(i,t,e)),i},c.prototype.callFulfilled=function(t){a.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){d(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){a.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){d(this.promise,this.onRejected,t)},a.resolve=function(t,e){var i=p(u,e);if("error"===i.status)return a.reject(t,i.value);var n=i.value;if(n)f(t,n);else{t.state=s,t.outcome=e;for(var r=-1,o=t.queue.length;++r<o;)t.queue[r].callFulfilled(e)}return t},a.reject=function(t,e){t.state=o,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},h.resolve=function(t){return t instanceof this?t:a.resolve(new this(r),t)},h.reject=function(t){var e=new this(r);return a.reject(e,t)},h.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var o=new Array(i),s=0,l=-1,h=new this(r);++l<i;)c(t[l],l);return h;function c(t,r){e.resolve(t).then((function(t){o[r]=t,++s!==i||n||(n=!0,a.resolve(h,o))}),(function(t){n||(n=!0,a.reject(h,t))}))}},h.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var o,s=-1,l=new this(r);++s<i;)o=t[s],e.resolve(o).then((function(t){n||(n=!0,a.resolve(l,t))}),(function(t){n||(n=!0,a.reject(l,t))}));return l}},{immediate:36}],38:[function(t,e,i){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,i){var n=t("./zlib/deflate"),r=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/messages"),s=t("./zlib/zstream"),l=Object.prototype.toString,h=0,c=-1,d=0,u=8;function f(t){if(!(this instanceof f))return new f(t);this.options=r.assign({level:c,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==h)throw new Error(o[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?a.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(i=n.deflateSetDictionary(this.strm,p))!==h)throw new Error(o[i]);this._dict_set=!0}}function p(t,e){var i=new f(e);if(i.push(t,!0),i.err)throw i.msg||o[i.err];return i.result}f.prototype.push=function(t,e){var i,o,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=a.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new r.Buf8(c),s.next_out=0,s.avail_out=c),1!==(i=n.deflate(s,o))&&i!==h)return this.onEnd(i),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(r.shrinkBuf(s.output,s.next_out))):this.onData(r.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==i);return 4===o?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===h):2!==o||(this.onEnd(h),!(s.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=f,i.deflate=p,i.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},i.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,i){var n=t("./zlib/inflate"),r=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/constants"),s=t("./zlib/messages"),l=t("./zlib/zstream"),h=t("./zlib/gzheader"),c=Object.prototype.toString;function d(t){if(!(this instanceof d))return new d(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==o.Z_OK)throw new Error(s[i]);this.header=new h,n.inflateGetHeader(this.strm,this.header)}function u(t,e){var i=new d(e);if(i.push(t,!0),i.err)throw i.msg||s[i.err];return i.result}d.prototype.push=function(t,e){var i,s,l,h,d,u,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?f.input=a.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(p),f.next_out=0,f.avail_out=p),(i=n.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(u="string"==typeof m?a.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,i=n.inflateSetDictionary(this.strm,u)),i===o.Z_BUF_ERROR&&!0===v&&(i=o.Z_OK,v=!1),i!==o.Z_STREAM_END&&i!==o.Z_OK)return this.onEnd(i),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&i!==o.Z_STREAM_END&&(0!==f.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(f.output,f.next_out),h=f.next_out-l,d=a.buf2string(f.output,l),f.next_out=h,f.avail_out=p-h,h&&r.arraySet(f.output,f.output,l,h,0),this.onData(d)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(v=!0)}while((0<f.avail_in||0===f.avail_out)&&i!==o.Z_STREAM_END);return i===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(f.avail_out=0))},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=d,i.inflate=u,i.inflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},i.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,i){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var a=0;a<n;a++)t[r+a]=e[i+a]},flattenChunks:function(t){var e,i,n,r,a,o;for(e=n=0,i=t.length;e<i;e++)n+=t[e].length;for(o=new Uint8Array(n),e=r=0,i=t.length;e<i;e++)a=t[e],o.set(a,r),r+=a.length;return o}},a={arraySet:function(t,e,i,n,r){for(var a=0;a<n;a++)t[r+a]=e[i+a]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(n)},{}],42:[function(t,e,i){var n=t("./common"),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(h){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){a=!1}for(var o=new n.Buf8(256),s=0;s<256;s++)o[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(t,e){if(e<65537&&(t.subarray&&a||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",o=0;o<e;o++)i+=String.fromCharCode(t[o]);return i}o[254]=o[254]=1,i.string2buf=function(t){var e,i,r,a,o,s=t.length,l=0;for(a=0;a<s;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(r-56320),a++),l+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(l),a=o=0;o<l;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(r-56320),a++),i<128?e[o++]=i:(i<2048?e[o++]=192|i>>>6:(i<65536?e[o++]=224|i>>>12:(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63),e[o++]=128|i>>>6&63),e[o++]=128|63&i);return e},i.buf2binstring=function(t){return l(t,t.length)},i.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,r=e.length;i<r;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,n,r,a,s=e||t.length,h=new Array(2*s);for(i=n=0;i<s;)if((r=t[i++])<128)h[n++]=r;else if(4<(a=o[r]))h[n++]=65533,i+=a-1;else{for(r&=2===a?31:3===a?15:7;1<a&&i<s;)r=r<<6|63&t[i++],a--;1<a?h[n++]=65533:r<65536?h[n++]=r:(r-=65536,h[n++]=55296|r>>10&1023,h[n++]=56320|1023&r)}return l(h,n)},i.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?e:i+o[t[i]]>e?i:e}},{"./common":41}],43:[function(t,e,i){e.exports=function(t,e,i,n){for(var r=65535&t,a=t>>>16&65535,o=0;0!==i;){for(i-=o=2e3<i?2e3:i;a=a+(r=r+e[n++]|0)|0,--o;);r%=65521,a%=65521}return r|a<<16}},{}],44:[function(t,e,i){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,i){var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e,i,r){var a=n,o=r+i;t^=-1;for(var s=r;s<o;s++)t=t>>>8^a[255&(t^e[s])];return~t}},{}],46:[function(t,e,i){var n,r=t("../utils/common"),a=t("./trees"),o=t("./adler32"),s=t("./crc32"),l=t("./messages"),h=0,c=4,d=0,u=-2,f=-1,p=4,m=2,v=8,g=9,b=286,w=30,y=19,_=2*b+1,k=15,x=3,C=258,S=C+x+1,E=42,O=113,I=1,D=2,T=3,z=4;function A(t,e){return t.msg=l[e],e}function B(t){return(t<<1)-(4<t?9:0)}function R(t){for(var e=t.length;0<=--e;)t[e]=0}function M(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function L(t,e){a._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,M(t.strm)}function P(t,e){t.pending_buf[t.pending++]=e}function N(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function F(t,e){var i,n,r=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-S?t.strstart-(t.w_size-S):0,h=t.window,c=t.w_mask,d=t.prev,u=t.strstart+C,f=h[a+o-1],p=h[a+o];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(h[(i=e)+o]===p&&h[i+o-1]===f&&h[i]===h[a]&&h[++i]===h[a+1]){a+=2,i++;do{}while(h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&a<u);if(n=C-(u-a),a=u-C,o<n){if(t.match_start=e,s<=(o=n))break;f=h[a+o-1],p=h[a+o]}}}while((e=d[e&c])>l&&0!=--r);return o<=t.lookahead?o:t.lookahead}function U(t){var e,i,n,a,l,h,c,d,u,f,p=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-S)){for(r.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=i=t.hash_size;n=t.head[--e],t.head[e]=p<=n?n-p:0,--i;);for(e=i=p;n=t.prev[--e],t.prev[e]=p<=n?n-p:0,--i;);a+=p}if(0===t.strm.avail_in)break;if(h=t.strm,c=t.window,d=t.strstart+t.lookahead,f=void 0,(u=a)<(f=h.avail_in)&&(f=u),i=0===f?0:(h.avail_in-=f,r.arraySet(c,h.input,h.next_in,f,d),1===h.state.wrap?h.adler=o(h.adler,c,f,d):2===h.state.wrap&&(h.adler=s(h.adler,c,f,d)),h.next_in+=f,h.total_in+=f,f),t.lookahead+=i,t.lookahead+t.insert>=x)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+x-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<S&&0!==t.strm.avail_in)}function j(t,e){for(var i,n;;){if(t.lookahead<S){if(U(t),t.lookahead<S&&e===h)return I;if(0===t.lookahead)break}if(i=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-S&&(t.match_length=F(t,i)),t.match_length>=x)if(n=a._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(L(t,!1),0===t.strm.avail_out))return I}return t.insert=t.strstart<x-1?t.strstart:x-1,e===c?(L(t,!0),0===t.strm.avail_out?T:z):t.last_lit&&(L(t,!1),0===t.strm.avail_out)?I:D}function W(t,e){for(var i,n,r;;){if(t.lookahead<S){if(U(t),t.lookahead<S&&e===h)return I;if(0===t.lookahead)break}if(i=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-S&&(t.match_length=F(t,i),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-x,n=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,n&&(L(t,!1),0===t.strm.avail_out))return I}else if(t.match_available){if((n=a._tr_tally(t,0,t.window[t.strstart-1]))&&L(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return I}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===c?(L(t,!0),0===t.strm.avail_out?T:z):t.last_lit&&(L(t,!1),0===t.strm.avail_out)?I:D}function H(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*_),this.dyn_dtree=new r.Buf16(2*(2*w+1)),this.bl_tree=new r.Buf16(2*(2*y+1)),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(k+1),this.heap=new r.Buf16(2*b+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*b+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Z(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=m,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?E:O,t.adler=2===e.wrap?0:1,e.last_flush=h,a._tr_init(e),d):A(t,u)}function Y(t){var e,i=Z(t);return i===d&&((e=t.state).window_size=2*e.w_size,R(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0),i}function V(t,e,i,n,a,o){if(!t)return u;var s=1;if(e===f&&(e=6),n<0?(s=0,n=-n):15<n&&(s=2,n-=16),a<1||g<a||i!==v||n<8||15<n||e<0||9<e||o<0||p<o)return A(t,u);8===n&&(n=9);var l=new $;return(t.state=l).strm=t,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+x-1)/x),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=o,l.method=i,Y(t)}n=[new H(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(U(t),0===t.lookahead&&e===h)return I;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,L(t,!1),0===t.strm.avail_out))return I;if(t.strstart-t.block_start>=t.w_size-S&&(L(t,!1),0===t.strm.avail_out))return I}return t.insert=0,e===c?(L(t,!0),0===t.strm.avail_out?T:z):(t.strstart>t.block_start&&(L(t,!1),t.strm.avail_out),I)})),new H(4,4,8,4,j),new H(4,5,16,8,j),new H(4,6,32,32,j),new H(4,4,16,16,W),new H(8,16,32,32,W),new H(8,16,128,128,W),new H(8,32,128,256,W),new H(32,128,258,1024,W),new H(32,258,258,4096,W)],i.deflateInit=function(t,e){return V(t,e,v,15,8,0)},i.deflateInit2=V,i.deflateReset=Y,i.deflateResetKeep=Z,i.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,d):u},i.deflate=function(t,e){var i,r,o,l;if(!t||!t.state||5<e||e<0)return t?A(t,u):u;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==c)return A(t,0===t.avail_out?-5:u);if(r.strm=t,i=r.last_flush,r.last_flush=e,r.status===E)if(2===r.wrap)t.adler=0,P(r,31),P(r,139),P(r,8),r.gzhead?(P(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),P(r,255&r.gzhead.time),P(r,r.gzhead.time>>8&255),P(r,r.gzhead.time>>16&255),P(r,r.gzhead.time>>24&255),P(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),P(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(P(r,255&r.gzhead.extra.length),P(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=s(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(P(r,0),P(r,0),P(r,0),P(r,0),P(r,0),P(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),P(r,3),r.status=O);else{var f=v+(r.w_bits-8<<4)<<8;f|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(f|=32),f+=31-f%31,r.status=O,N(r,f),0!==r.strstart&&(N(r,t.adler>>>16),N(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(t.adler=s(t.adler,r.pending_buf,r.pending-o,o)),M(t),o=r.pending,r.pending!==r.pending_buf_size));)P(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(t.adler=s(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=s(t.adler,r.pending_buf,r.pending-o,o)),M(t),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,P(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(t.adler=s(t.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=s(t.adler,r.pending_buf,r.pending-o,o)),M(t),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,P(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(t.adler=s(t.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&M(t),r.pending+2<=r.pending_buf_size&&(P(r,255&t.adler),P(r,t.adler>>8&255),t.adler=0,r.status=O)):r.status=O),0!==r.pending){if(M(t),0===t.avail_out)return r.last_flush=-1,d}else if(0===t.avail_in&&B(e)<=B(i)&&e!==c)return A(t,-5);if(666===r.status&&0!==t.avail_in)return A(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==h&&666!==r.status){var p=2===r.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(U(t),0===t.lookahead)){if(e===h)return I;break}if(t.match_length=0,i=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(L(t,!1),0===t.strm.avail_out))return I}return t.insert=0,e===c?(L(t,!0),0===t.strm.avail_out?T:z):t.last_lit&&(L(t,!1),0===t.strm.avail_out)?I:D}(r,e):3===r.strategy?function(t,e){for(var i,n,r,o,s=t.window;;){if(t.lookahead<=C){if(U(t),t.lookahead<=C&&e===h)return I;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){o=t.strstart+C;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<o);t.match_length=C-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(i=a._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(L(t,!1),0===t.strm.avail_out))return I}return t.insert=0,e===c?(L(t,!0),0===t.strm.avail_out?T:z):t.last_lit&&(L(t,!1),0===t.strm.avail_out)?I:D}(r,e):n[r.level].func(r,e);if(p!==T&&p!==z||(r.status=666),p===I||p===T)return 0===t.avail_out&&(r.last_flush=-1),d;if(p===D&&(1===e?a._tr_align(r):5!==e&&(a._tr_stored_block(r,0,0,!1),3===e&&(R(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),M(t),0===t.avail_out))return r.last_flush=-1,d}return e!==c?d:r.wrap<=0?1:(2===r.wrap?(P(r,255&t.adler),P(r,t.adler>>8&255),P(r,t.adler>>16&255),P(r,t.adler>>24&255),P(r,255&t.total_in),P(r,t.total_in>>8&255),P(r,t.total_in>>16&255),P(r,t.total_in>>24&255)):(N(r,t.adler>>>16),N(r,65535&t.adler)),M(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?d:1)},i.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==E&&69!==e&&73!==e&&91!==e&&103!==e&&e!==O&&666!==e?A(t,u):(t.state=null,e===O?A(t,-3):d):u},i.deflateSetDictionary=function(t,e){var i,n,a,s,l,h,c,f,p=e.length;if(!t||!t.state)return u;if(2===(s=(i=t.state).wrap)||1===s&&i.status!==E||i.lookahead)return u;for(1===s&&(t.adler=o(t.adler,e,p,0)),i.wrap=0,p>=i.w_size&&(0===s&&(R(i.head),i.strstart=0,i.block_start=0,i.insert=0),f=new r.Buf8(i.w_size),r.arraySet(f,e,p-i.w_size,i.w_size,0),e=f,p=i.w_size),l=t.avail_in,h=t.next_in,c=t.input,t.avail_in=p,t.next_in=0,t.input=e,U(i);i.lookahead>=x;){for(n=i.strstart,a=i.lookahead-(x-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+x-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++,--a;);i.strstart=n,i.lookahead=x-1,U(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=x-1,i.match_available=0,t.next_in=h,t.input=c,t.avail_in=l,i.wrap=s,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,i){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,i){e.exports=function(t,e){var i,n,r,a,o,s,l,h,c,d,u,f,p,m,v,g,b,w,y,_,k,x,C,S,E;i=t.state,n=t.next_in,S=t.input,r=n+(t.avail_in-5),a=t.next_out,E=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),l=i.dmax,h=i.wsize,c=i.whave,d=i.wnext,u=i.window,f=i.hold,p=i.bits,m=i.lencode,v=i.distcode,g=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;t:do{p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),w=m[f&g];e:for(;;){if(f>>>=y=w>>>24,p-=y,0==(y=w>>>16&255))E[a++]=65535&w;else{if(!(16&y)){if(!(64&y)){w=m[(65535&w)+(f&(1<<y)-1)];continue e}if(32&y){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}_=65535&w,(y&=15)&&(p<y&&(f+=S[n++]<<p,p+=8),_+=f&(1<<y)-1,f>>>=y,p-=y),p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),w=v[f&b];i:for(;;){if(f>>>=y=w>>>24,p-=y,!(16&(y=w>>>16&255))){if(!(64&y)){w=v[(65535&w)+(f&(1<<y)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(k=65535&w,p<(y&=15)&&(f+=S[n++]<<p,(p+=8)<y&&(f+=S[n++]<<p,p+=8)),l<(k+=f&(1<<y)-1)){t.msg="invalid distance too far back",i.mode=30;break t}if(f>>>=y,p-=y,(y=a-o)<k){if(c<(y=k-y)&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(C=u,(x=0)===d){if(x+=h-y,y<_){for(_-=y;E[a++]=u[x++],--y;);x=a-k,C=E}}else if(d<y){if(x+=h+d-y,(y-=d)<_){for(_-=y;E[a++]=u[x++],--y;);if(x=0,d<_){for(_-=y=d;E[a++]=u[x++],--y;);x=a-k,C=E}}}else if(x+=d-y,y<_){for(_-=y;E[a++]=u[x++],--y;);x=a-k,C=E}for(;2<_;)E[a++]=C[x++],E[a++]=C[x++],E[a++]=C[x++],_-=3;_&&(E[a++]=C[x++],1<_&&(E[a++]=C[x++]))}else{for(x=a-k;E[a++]=E[x++],E[a++]=E[x++],E[a++]=E[x++],2<(_-=3););_&&(E[a++]=E[x++],1<_&&(E[a++]=E[x++]))}break}}break}}while(n<r&&a<s);n-=_=p>>3,f&=(1<<(p-=_<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=a<s?s-a+257:257-(a-s),i.hold=f,i.bits=p}},{}],49:[function(t,e,i){var n=t("../utils/common"),r=t("./adler32"),a=t("./crc32"),o=t("./inffast"),s=t("./inftrees"),l=1,h=2,c=0,d=-2,u=1,f=852,p=592;function m(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=u,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(f),e.distcode=e.distdyn=new n.Buf32(p),e.sane=1,e.back=-1,c):d}function b(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,g(t)):d}function w(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?d:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,b(t))):d}function y(t,e){var i,n;return t?(n=new v,(t.state=n).window=null,(i=w(t,e))!==c&&(t.state=null),i):d}var _,k,x=!0;function C(t){if(x){var e;for(_=new n.Buf32(512),k=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(l,t.lens,0,288,_,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(h,t.lens,0,32,k,0,t.work,{bits:5}),x=!1}t.lencode=_,t.lenbits=9,t.distcode=k,t.distbits=5}function S(t,e,i,r){var a,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),r>=o.wsize?(n.arraySet(o.window,e,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r<(a=o.wsize-o.wnext)&&(a=r),n.arraySet(o.window,e,i-r,a,o.wnext),(r-=a)?(n.arraySet(o.window,e,i-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}i.inflateReset=b,i.inflateReset2=w,i.inflateResetKeep=g,i.inflateInit=function(t){return y(t,15)},i.inflateInit2=y,i.inflate=function(t,e){var i,f,p,v,g,b,w,y,_,k,x,E,O,I,D,T,z,A,B,R,M,L,P,N,F=0,U=new n.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return d;12===(i=t.state).mode&&(i.mode=13),g=t.next_out,p=t.output,w=t.avail_out,v=t.next_in,f=t.input,b=t.avail_in,y=i.hold,_=i.bits,k=b,x=w,L=c;t:for(;;)switch(i.mode){case u:if(0===i.wrap){i.mode=13;break}for(;_<16;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if(2&i.wrap&&35615===y){U[i.check=0]=255&y,U[1]=y>>>8&255,i.check=a(i.check,U,2,0),_=y=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&y)<<8)+(y>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&y)){t.msg="unknown compression method",i.mode=30;break}if(_-=4,M=8+(15&(y>>>=4)),0===i.wbits)i.wbits=M;else if(M>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<M,t.adler=i.check=1,i.mode=512&y?10:12,_=y=0;break;case 2:for(;_<16;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if(i.flags=y,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=y>>8&1),512&i.flags&&(U[0]=255&y,U[1]=y>>>8&255,i.check=a(i.check,U,2,0)),_=y=0,i.mode=3;case 3:for(;_<32;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}i.head&&(i.head.time=y),512&i.flags&&(U[0]=255&y,U[1]=y>>>8&255,U[2]=y>>>16&255,U[3]=y>>>24&255,i.check=a(i.check,U,4,0)),_=y=0,i.mode=4;case 4:for(;_<16;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}i.head&&(i.head.xflags=255&y,i.head.os=y>>8),512&i.flags&&(U[0]=255&y,U[1]=y>>>8&255,i.check=a(i.check,U,2,0)),_=y=0,i.mode=5;case 5:if(1024&i.flags){for(;_<16;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}i.length=y,i.head&&(i.head.extra_len=y),512&i.flags&&(U[0]=255&y,U[1]=y>>>8&255,i.check=a(i.check,U,2,0)),_=y=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(b<(E=i.length)&&(E=b),E&&(i.head&&(M=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,f,v,E,M)),512&i.flags&&(i.check=a(i.check,f,E,v)),b-=E,v+=E,i.length-=E),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===b)break t;for(E=0;M=f[v+E++],i.head&&M&&i.length<65536&&(i.head.name+=String.fromCharCode(M)),M&&E<b;);if(512&i.flags&&(i.check=a(i.check,f,E,v)),b-=E,v+=E,M)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===b)break t;for(E=0;M=f[v+E++],i.head&&M&&i.length<65536&&(i.head.comment+=String.fromCharCode(M)),M&&E<b;);if(512&i.flags&&(i.check=a(i.check,f,E,v)),b-=E,v+=E,M)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;_<16;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if(y!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}_=y=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;_<32;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}t.adler=i.check=m(y),_=y=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=g,t.avail_out=w,t.next_in=v,t.avail_in=b,i.hold=y,i.bits=_,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){y>>>=7&_,_-=7&_,i.mode=27;break}for(;_<3;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}switch(i.last=1&y,_-=1,3&(y>>>=1)){case 0:i.mode=14;break;case 1:if(C(i),i.mode=20,6!==e)break;y>>>=2,_-=2;break t;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}y>>>=2,_-=2;break;case 14:for(y>>>=7&_,_-=7&_;_<32;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if((65535&y)!=(y>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&y,_=y=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(E=i.length){if(b<E&&(E=b),w<E&&(E=w),0===E)break t;n.arraySet(p,f,v,E,g),b-=E,v+=E,w-=E,g+=E,i.length-=E;break}i.mode=12;break;case 17:for(;_<14;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if(i.nlen=257+(31&y),y>>>=5,_-=5,i.ndist=1+(31&y),y>>>=5,_-=5,i.ncode=4+(15&y),y>>>=4,_-=4,286<i.nlen||30<i.ndist){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;_<3;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}i.lens[j[i.have++]]=7&y,y>>>=3,_-=3}for(;i.have<19;)i.lens[j[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,P={bits:i.lenbits},L=s(0,i.lens,0,19,i.lencode,0,i.work,P),i.lenbits=P.bits,L){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;T=(F=i.lencode[y&(1<<i.lenbits)-1])>>>16&255,z=65535&F,!((D=F>>>24)<=_);){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if(z<16)y>>>=D,_-=D,i.lens[i.have++]=z;else{if(16===z){for(N=D+2;_<N;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if(y>>>=D,_-=D,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}M=i.lens[i.have-1],E=3+(3&y),y>>>=2,_-=2}else if(17===z){for(N=D+3;_<N;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}_-=D,M=0,E=3+(7&(y>>>=D)),y>>>=3,_-=3}else{for(N=D+7;_<N;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}_-=D,M=0,E=11+(127&(y>>>=D)),y>>>=7,_-=7}if(i.have+E>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;E--;)i.lens[i.have++]=M}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,P={bits:i.lenbits},L=s(l,i.lens,0,i.nlen,i.lencode,0,i.work,P),i.lenbits=P.bits,L){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,P={bits:i.distbits},L=s(h,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,P),i.distbits=P.bits,L){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(6<=b&&258<=w){t.next_out=g,t.avail_out=w,t.next_in=v,t.avail_in=b,i.hold=y,i.bits=_,o(t,x),g=t.next_out,p=t.output,w=t.avail_out,v=t.next_in,f=t.input,b=t.avail_in,y=i.hold,_=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;T=(F=i.lencode[y&(1<<i.lenbits)-1])>>>16&255,z=65535&F,!((D=F>>>24)<=_);){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if(T&&!(240&T)){for(A=D,B=T,R=z;T=(F=i.lencode[R+((y&(1<<A+B)-1)>>A)])>>>16&255,z=65535&F,!(A+(D=F>>>24)<=_);){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}y>>>=A,_-=A,i.back+=A}if(y>>>=D,_-=D,i.back+=D,i.length=z,0===T){i.mode=26;break}if(32&T){i.back=-1,i.mode=12;break}if(64&T){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&T,i.mode=22;case 22:if(i.extra){for(N=i.extra;_<N;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}i.length+=y&(1<<i.extra)-1,y>>>=i.extra,_-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;T=(F=i.distcode[y&(1<<i.distbits)-1])>>>16&255,z=65535&F,!((D=F>>>24)<=_);){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if(!(240&T)){for(A=D,B=T,R=z;T=(F=i.distcode[R+((y&(1<<A+B)-1)>>A)])>>>16&255,z=65535&F,!(A+(D=F>>>24)<=_);){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}y>>>=A,_-=A,i.back+=A}if(y>>>=D,_-=D,i.back+=D,64&T){t.msg="invalid distance code",i.mode=30;break}i.offset=z,i.extra=15&T,i.mode=24;case 24:if(i.extra){for(N=i.extra;_<N;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}i.offset+=y&(1<<i.extra)-1,y>>>=i.extra,_-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===w)break t;if(E=x-w,i.offset>E){if((E=i.offset-E)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}O=E>i.wnext?(E-=i.wnext,i.wsize-E):i.wnext-E,E>i.length&&(E=i.length),I=i.window}else I=p,O=g-i.offset,E=i.length;for(w<E&&(E=w),w-=E,i.length-=E;p[g++]=I[O++],--E;);0===i.length&&(i.mode=21);break;case 26:if(0===w)break t;p[g++]=i.length,w--,i.mode=21;break;case 27:if(i.wrap){for(;_<32;){if(0===b)break t;b--,y|=f[v++]<<_,_+=8}if(x-=w,t.total_out+=x,i.total+=x,x&&(t.adler=i.check=i.flags?a(i.check,p,x,g-x):r(i.check,p,x,g-x)),x=w,(i.flags?y:m(y))!==i.check){t.msg="incorrect data check",i.mode=30;break}_=y=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;_<32;){if(0===b)break t;b--,y+=f[v++]<<_,_+=8}if(y!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}_=y=0}i.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;default:return d}return t.next_out=g,t.avail_out=w,t.next_in=v,t.avail_in=b,i.hold=y,i.bits=_,(i.wsize||x!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&S(t,t.output,t.next_out,x-t.avail_out)?(i.mode=31,-4):(k-=t.avail_in,x-=t.avail_out,t.total_in+=k,t.total_out+=x,i.total+=x,i.wrap&&x&&(t.adler=i.check=i.flags?a(i.check,p,x,t.next_out-x):r(i.check,p,x,t.next_out-x)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==k&&0===x||4===e)&&L===c&&(L=-5),L)},i.inflateEnd=function(t){if(!t||!t.state)return d;var e=t.state;return e.window&&(e.window=null),t.state=null,c},i.inflateGetHeader=function(t,e){var i;return t&&t.state&&2&(i=t.state).wrap?((i.head=e).done=!1,c):d},i.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?d:11===i.mode&&r(1,e,n,0)!==i.check?-3:S(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,c):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,i){var n=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,l,h,c,d,u){var f,p,m,v,g,b,w,y,_,k=u.bits,x=0,C=0,S=0,E=0,O=0,I=0,D=0,T=0,z=0,A=0,B=null,R=0,M=new n.Buf16(16),L=new n.Buf16(16),P=null,N=0;for(x=0;x<=15;x++)M[x]=0;for(C=0;C<l;C++)M[e[i+C]]++;for(O=k,E=15;1<=E&&0===M[E];E--);if(E<O&&(O=E),0===E)return h[c++]=20971520,h[c++]=20971520,u.bits=1,0;for(S=1;S<E&&0===M[S];S++);for(O<S&&(O=S),x=T=1;x<=15;x++)if(T<<=1,(T-=M[x])<0)return-1;if(0<T&&(0===t||1!==E))return-1;for(L[1]=0,x=1;x<15;x++)L[x+1]=L[x]+M[x];for(C=0;C<l;C++)0!==e[i+C]&&(d[L[e[i+C]]++]=C);if(b=0===t?(B=P=d,19):1===t?(B=r,R-=257,P=a,N-=257,256):(B=o,P=s,-1),x=S,g=c,D=C=A=0,m=-1,v=(z=1<<(I=O))-1,1===t&&852<z||2===t&&592<z)return 1;for(;;){for(w=x-D,_=d[C]<b?(y=0,d[C]):d[C]>b?(y=P[N+d[C]],B[R+d[C]]):(y=96,0),f=1<<x-D,S=p=1<<I;h[g+(A>>D)+(p-=f)]=w<<24|y<<16|_,0!==p;);for(f=1<<x-1;A&f;)f>>=1;if(0!==f?(A&=f-1,A+=f):A=0,C++,0==--M[x]){if(x===E)break;x=e[i+d[C]]}if(O<x&&(A&v)!==m){for(0===D&&(D=O),g+=S,T=1<<(I=x-D);I+D<E&&!((T-=M[I+D])<=0);)I++,T<<=1;if(z+=1<<I,1===t&&852<z||2===t&&592<z)return 1;h[m=A&v]=O<<24|I<<16|g-c}}return 0!==A&&(h[g+A]=x-D<<24|64<<16),u.bits=O,0}},{"../utils/common":41}],51:[function(t,e,i){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,i){var n=t("../utils/common"),r=0,a=1;function o(t){for(var e=t.length;0<=--e;)t[e]=0}var s=0,l=29,h=256,c=h+1+l,d=30,u=19,f=2*c+1,p=15,m=16,v=7,g=256,b=16,w=17,y=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(c+2));o(S);var E=new Array(2*d);o(E);var O=new Array(512);o(O);var I=new Array(256);o(I);var D=new Array(l);o(D);var T,z,A,B=new Array(d);function R(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function M(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function L(t){return t<256?O[t]:O[256+(t>>>7)]}function P(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function N(t,e,i){t.bi_valid>m-i?(t.bi_buf|=e<<t.bi_valid&65535,P(t,t.bi_buf),t.bi_buf=e>>m-t.bi_valid,t.bi_valid+=i-m):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function F(t,e,i){N(t,i[2*e],i[2*e+1])}function U(t,e){for(var i=0;i|=1&t,t>>>=1,i<<=1,0<--e;);return i>>>1}function j(t,e,i){var n,r,a=new Array(p+1),o=0;for(n=1;n<=p;n++)a[n]=o=o+i[n-1]<<1;for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=U(a[s]++,s))}}function W(t){var e;for(e=0;e<c;e++)t.dyn_ltree[2*e]=0;for(e=0;e<d;e++)t.dyn_dtree[2*e]=0;for(e=0;e<u;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*g]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function H(t){8<t.bi_valid?P(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function $(t,e,i,n){var r=2*e,a=2*i;return t[r]<t[a]||t[r]===t[a]&&n[e]<=n[i]}function Z(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&$(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!$(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function Y(t,e,i){var n,r,a,o,s=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],r=t.pending_buf[t.l_buf+s],s++,0===n?F(t,r,e):(F(t,(a=I[r])+h+1,e),0!==(o=_[a])&&N(t,r-=D[a],o),F(t,a=L(--n),i),0!==(o=k[a])&&N(t,n-=B[a],o)),s<t.last_lit;);F(t,g,e)}function V(t,e){var i,n,r,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=f,i=0;i<l;i++)0!==a[2*i]?(t.heap[++t.heap_len]=h=i,t.depth[i]=0):a[2*i+1]=0;for(;t.heap_len<2;)a[2*(r=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[r]=0,t.opt_len--,s&&(t.static_len-=o[2*r+1]);for(e.max_code=h,i=t.heap_len>>1;1<=i;i--)Z(t,a,i);for(r=l;i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Z(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,a[2*r]=a[2*i]+a[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,a[2*i+1]=a[2*n+1]=r,t.heap[1]=r++,Z(t,a,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,a,o,s,l=e.dyn_tree,h=e.max_code,c=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,m=e.stat_desc.extra_base,v=e.stat_desc.max_length,g=0;for(a=0;a<=p;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<f;i++)v<(a=l[2*l[2*(n=t.heap[i])+1]+1]+1)&&(a=v,g++),l[2*n+1]=a,h<n||(t.bl_count[a]++,o=0,m<=n&&(o=u[n-m]),s=l[2*n],t.opt_len+=s*(a+o),d&&(t.static_len+=s*(c[2*n+1]+o)));if(0!==g){do{for(a=v-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[v]--,g-=2}while(0<g);for(a=v;0!==a;a--)for(n=t.bl_count[a];0!==n;)h<(r=t.heap[--i])||(l[2*r+1]!==a&&(t.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),n--)}}(t,e),j(a,h,t.bl_count)}function X(t,e,i){var n,r,a=-1,o=e[1],s=0,l=7,h=4;for(0===o&&(l=138,h=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=o,o=e[2*(n+1)+1],++s<l&&r===o||(s<h?t.bl_tree[2*r]+=s:0!==r?(r!==a&&t.bl_tree[2*r]++,t.bl_tree[2*b]++):s<=10?t.bl_tree[2*w]++:t.bl_tree[2*y]++,a=r,h=(s=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4))}function K(t,e,i){var n,r,a=-1,o=e[1],s=0,l=7,h=4;for(0===o&&(l=138,h=3),n=0;n<=i;n++)if(r=o,o=e[2*(n+1)+1],!(++s<l&&r===o)){if(s<h)for(;F(t,r,t.bl_tree),0!=--s;);else 0!==r?(r!==a&&(F(t,r,t.bl_tree),s--),F(t,b,t.bl_tree),N(t,s-3,2)):s<=10?(F(t,w,t.bl_tree),N(t,s-3,3)):(F(t,y,t.bl_tree),N(t,s-11,7));a=r,h=(s=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4)}}o(B);var q=!1;function G(t,e,i,r){var a,o,l;N(t,(s<<1)+(r?1:0),3),o=e,l=i,H(a=t),P(a,l),P(a,~l),n.arraySet(a.pending_buf,a.window,o,l,a.pending),a.pending+=l}i._tr_init=function(t){q||(function(){var t,e,i,n,r,a=new Array(p+1);for(n=i=0;n<l-1;n++)for(D[n]=i,t=0;t<1<<_[n];t++)I[i++]=n;for(I[i-1]=n,n=r=0;n<16;n++)for(B[n]=r,t=0;t<1<<k[n];t++)O[r++]=n;for(r>>=7;n<d;n++)for(B[n]=r<<7,t=0;t<1<<k[n]-7;t++)O[256+r++]=n;for(e=0;e<=p;e++)a[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,a[8]++;for(;t<=255;)S[2*t+1]=9,t++,a[9]++;for(;t<=279;)S[2*t+1]=7,t++,a[7]++;for(;t<=287;)S[2*t+1]=8,t++,a[8]++;for(j(S,c+1,a),t=0;t<d;t++)E[2*t+1]=5,E[2*t]=U(t,5);T=new R(S,_,h+1,c,p),z=new R(E,k,0,d,p),A=new R(new Array(0),x,0,u,v)}(),q=!0),t.l_desc=new M(t.dyn_ltree,T),t.d_desc=new M(t.dyn_dtree,z),t.bl_desc=new M(t.bl_tree,A),t.bi_buf=0,t.bi_valid=0,W(t)},i._tr_stored_block=G,i._tr_flush_block=function(t,e,i,n){var o,s,l=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return r;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<h;e++)if(0!==t.dyn_ltree[2*e])return a;return r}(t)),V(t,t.l_desc),V(t,t.d_desc),l=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),V(t,t.bl_desc),e=u-1;3<=e&&0===t.bl_tree[2*C[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),o=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=o&&(o=s)):o=s=i+5,i+4<=o&&-1!==e?G(t,e,i,n):4===t.strategy||s===o?(N(t,2+(n?1:0),3),Y(t,S,E)):(N(t,4+(n?1:0),3),function(t,e,i,n){var r;for(N(t,e-257,5),N(t,i-1,5),N(t,n-4,4),r=0;r<n;r++)N(t,t.bl_tree[2*C[r]+1],3);K(t,t.dyn_ltree,e-1),K(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,l+1),Y(t,t.dyn_ltree,t.dyn_dtree)),W(t),n&&H(t)},i._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(I[i]+h+1)]++,t.dyn_dtree[2*L(e)]++),t.last_lit===t.lit_bufsize-1},i._tr_align=function(t){var e;N(t,2,3),F(t,g,S),16===(e=t).bi_valid?(P(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":41}],53:[function(t,e,i){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,i){(function(t){!function(t,e){if(!t.setImmediate){var i,n,r,a,o=1,s={},l=!1,h=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,i="[object process]"==={}.toString.call(t.process)?function(t){process.nextTick((function(){u(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?(a="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",f,!1):t.attachEvent("onmessage",f),function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){u(t.data)},function(t){r.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(n=h.documentElement,function(t){var e=h.createElement("script");e.onreadystatechange=function(){u(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):function(t){setTimeout(u,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return s[o]=r,i(o),o++},c.clearImmediate=d}function d(t){delete s[t]}function u(t){if(l)setTimeout(u,0,t);else{var i=s[t];if(i){l=!0;try{!function(t){var i=t.callback,n=t.args;switch(n.length){case 0:i();break;case 1:i(n[0]);break;case 2:i(n[0],n[1]);break;case 3:i(n[0],n[1],n[2]);break;default:i.apply(e,n)}}(i)}finally{d(t),l=!1}}}}function f(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&u(+e.data.slice(a.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==I?I:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10));async function Ce(t,e=new xe,i=""){for await(const[n,r]of t.entries()){const t=i?`${i}/${n}`:n;if("file"===r.kind){const i=await r.getFile();e.file(t,i)}else"directory"===r.kind&&await Ce(r,e,t)}return e}async function Se(t){console.log("[exportZip]",t);(await Ce(t)).generateAsync({type:"blob"}).then((t=>{z.saveAs(t,"page_craft_all_components_export.zip")}))}async function Ee(t,e,i=""){const n=await xe.loadAsync(t);await async function(t,e,i=""){for(const r in t.files){const a=t.files[r],o=((i?`${i}/`:"")+r).split("/").filter((t=>t.length>0)),s=o.pop();let l=e;for(const t of o)try{l=await l.getDirectoryHandle(t,{create:!0})}catch(n){throw console.error("Error creating/accessing directory:",t,n),n}if(!a.dir)try{const t=await a.async("blob"),e=await l.getFileHandle(s,{create:!0}),i=await e.createWritable();await i.write(t),await i.close()}catch(n){throw console.error("Error writing file:",s,n),n}}}(n,e,i)}const Oe=({isLoading:t,selectedPaths:e,basePath:i,selectedItems:o,enablePaste:s,handlePaste:l,handleCut:h,handleCopy:c,selectedItemsSet:d,files:u,emit:f})=>{const{t:p}=A(),m=n(),{handleCreateComponent:v,importComponentAllJson:g,exportComponentAllJson:b,exportComponentJson:w}=Et({isLoading:t,files:u,basePath:i,emit:f}),y=t=>{if(u.value.some((e=>e.name===t)))return window.$message.error("Filename already exists, please rename it!"),!0},_=async()=>{try{const e=await window.$mcUtils.showInputPrompt({title:"Create Folder",value:`folder_${B(new Date).format("YYYYMMDD_HHmmss")}`});if(y(e))return;t.value=!0,await Ht.createDir({path:Wt(i.value+"/"+e)}),f("refresh")}finally{t.value=!1}},k=async()=>{try{const e=o.value[0],n=await window.$mcUtils.showInputPrompt({title:p("actions.rename"),value:e.name});if(y(n))return;t.value=!0,await Ht.renameEntry({fromPath:Wt(i.value+"/"+e.name),toPath:Wt(i.value+"/"+n)}),f("refresh")}finally{t.value=!1}},x=async()=>{try{t.value=!0,await Ht.deleteEntry({path:e.value})}finally{t.value=!1,f("refresh")}},C=()=>{window.$dialog.confirm(p("msgs.are_you_sure_to_dele")+" component(s) ?",p("actions.confirm"),{type:"warning"}).then((()=>{x()})).catch()},S=async()=>{try{t.value=!0;const e=await fetch("./preset-components.json"),i=await e.json();await g(i)}finally{t.value=!1,f("refresh")}},{getCoverOption:I,isShowImageCropper:D,cropperEditingSrc:T,handleCropperSave:z,handleCropperCancel:M}=(({exportComponentJson:t})=>{const e=r(!1),i=r(""),n=r(null),a=r(null),o=t=>{const{src:r="",onComplete:o,onCancel:s}=t;i.value=r,n.value=o,a.value=s,e.value=!0},s=()=>{e.value=!1,i.value="",a.value=null,n.value=null},l=async(t,e)=>{t.meta.cover=e;const i=Wt(t.basePath+"/"+t.name+"/cover.base64");e?await Ht.createFile({path:i,file:e,isOverride:!0}):await Ht.deleteEntry({path:i})};return{getCoverOption:e=>({label:"🖼️ Cover",children:[{label:"🖼️ Capture cover...",props:{onClick:async()=>{try{const i=await _e({async onCaptureStart(){E.emit(O.ON_COMP_PREVIEW,{item:await t(e),maximum:!0}),await yt(500)},quality:.7});o({src:i,onComplete(t){l(e,t)}}),E.emit(O.ON_COMP_PREVIEW_CLOSE,{maximum:!1})}catch(i){console.error(i),E.emit(O.ON_COMP_PREVIEW_CLOSE,{maximum:!1})}}}},{label:"🖼️ Upload cover",props:{onClick:async()=>{const[t]=await window.showOpenFilePicker({types:[{description:"🖼️ Cover Image",accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"]}}]}),i=await t.getFile(),n=await St(i);l(e,n)}}},e.meta.cover&&{label:"✏️ Edit cover",props:{onClick:async()=>{o({src:e.meta.cover,onComplete(t){l(e,t)}})}}},e.meta.cover&&{label:"❌ Remove cover",props:{onClick:async()=>{l(e,void 0)}}}].filter(Boolean)}),isShowImageCropper:e,cropperEditingSrc:i,handleCropperSave:t=>{"function"==typeof n.value&&n.value(t),s()},handleCropperCancel:()=>{"function"==typeof a.value&&n.value(),s()}}})({exportComponentJson:w}),L=a((()=>(o.value.length?o.value:u.value).filter((t=>Ct.test(t.name))))),P=a((()=>{const e=L.value;if(!o.value.length)return[{label:`➕ ${p("actions.add_component")}`,props:{onClick:v}},{label:"📁 Create Folder",props:{onClick:_}},{label:"🔃 Refresh",props:{onClick:()=>f("refresh")}},{label:"📋 Paste",props:{onClick:l},disabled:!s.value},{split:!0},{label:`🗃️ ${p("actions.import")}/${p("actions.export")}`,children:[{label:`📥 ${p("actions.import")} ${p("common.all_components")} JSON (Flat)`,props:{onClick:()=>{(async()=>{try{const e=await window.$mcUtils.handleImportJson();t.value=!0,await g(e),window.$message.success("Import success!"),f("refresh")}finally{t.value=!1}})()}}},{label:`📤 ${p("actions.export")} ${p("common.all_components")} JSON (Flat)`,props:{onClick:async()=>{await b(e)}},disabled:!e.length},{split:!0},{label:`🗜️ ${p("actions.import")} Current Folder Zip (Recursive)`,props:{onClick:async()=>{try{t.value=!0,await async function(t,e=""){const[i]=await window.showOpenFilePicker({types:[{description:"Zip Files",accept:{"application/zip":[".zip"]}}]}),n=await i.getFile();await Ee(n,t,e)}(Ht.getRoot(),i.value),f("refresh")}finally{t.value=!1}}}},{label:`📂 ${p("actions.import")} Folder (Recursive)`,props:{onClick:async()=>{try{t.value=!0,await async function(t,e=""){const i=await window.showDirectoryPicker();let n=t;if(e){const t=e.split("/").filter((t=>t.length>0));for(const e of t)n=await n.getDirectoryHandle(e,{create:!0})}await async function t(e,i){for await(const[n,r]of e)if("file"===r.kind){const t=await r.getFile(),e=await i.getFileHandle(n,{create:!0}),a=await e.createWritable();await a.write(t),await a.close()}else if("directory"===r.kind){const e=await i.getDirectoryHandle(n,{create:!0});await t(r,e)}}(i,n)}(Ht.getRoot(),i.value),f("refresh")}finally{t.value=!1}}}},{label:`📄 ${p("actions.import")} Files`,props:{onClick:async()=>{try{t.value=!0,await async function(t,e=""){const i=await window.showOpenFilePicker({multiple:!0});let n=t;if(e){const t=e.split("/").filter((t=>t.length>0));for(const e of t)n=await n.getDirectoryHandle(e,{create:!0})}for(const r of i){const t=await r.getFile(),e=await n.getFileHandle(t.name,{create:!0}),i=await e.createWritable();await i.write(t),await i.close()}}(Ht.getRoot(),i.value),f("refresh")}finally{t.value=!1}}}},{label:`🗜️ ${p("actions.export")} Current Folder Zip (Recursive)`,props:{onClick:async()=>{try{const t=await async function(t,e,i){const n=e.split("/").filter((t=>t.length));let r=t;for(const a of n){if("directory"!==r.kind)return null;{const t=await r.getDirectoryHandle(a,{create:!1}).catch((()=>null));if(!t&&n.indexOf(a)!==n.length-1)return null;if(!t)return null;r=t}}return r.kind===i?r:null}(Ht.getRoot(),i.value,"directory");if(!t)return void console.error("handle not found");await Se(t)}finally{t.value=!1}}}}]},{split:!0},{label:"📥 Append Preset",props:{onClick:()=>{u.value.length?window.$dialog.confirm("This action will override same name component, continue?",p("actions.confirm"),{type:"warning"}).then((()=>{S()})).catch():S()}}},{label:"🔰 "+p("common.default_board"),props:{class:m.curCompInStore?"":"active",onClick:async()=>{m.curCompInStore=null}}}];const n=1===o.value.length,r=n?o.value[0]:null,a=n&&!!r.meta;let d=!1;if(m.curCompInStore){const t=m.curCompInStore.id;d=a&&r.meta.id===t||!!e.find((e=>e.meta.id===t))}return[n&&{label:"📂 Open",props:{onClick:()=>f("open",r)}},a&&{label:"👀 "+p("actions.preview"),props:{onClick:async()=>{E.emit(O.ON_COMP_PREVIEW,{item:await w(r)})}}},a&&I(r),{split:!0},{label:`✂️ ${p("actions.cut")}`,props:{onClick:h},disabled:d},{label:`📄 ${p("actions.copy")}`,props:{onClick:c}},a&&{label:`📄 ${p("actions.duplicate")}...`,props:{onClick:()=>{(async e=>{try{const n=await window.$mcUtils.showInputPrompt({title:p("actions.duplicate"),value:e.name.replace(Ct,"")+"-1.comp"});if(y(n))return;t.value=!0;const r=Wt(i.value+"/"+e.name),a=Wt(i.value+"/"+n);await Ht.copyPaste({fromPaths:[r],toPathAbs:a});const o=_t(),s={...e.meta,id:o,timeCreated:Date.now()};await Ot(a,"index.json",JSON.stringify(s)),f("refresh"),setTimeout((()=>{var t;null==(t=document.querySelector(`.mc-comp-item[data-name="${n}"]`))||t.click()}),100)}finally{t.value=!1}})(r)}}},a?{label:`📤 ${p("actions.export")} JSON`,props:{onClick:()=>{(async t=>{const e=await R("",t.name);if(!e)return;const i=[await w(t)];window.$mcUtils.handleExportFile(e,JSON.stringify(i,null,2),".json")})(r)}}}:e.length?{label:`📤 ${p("actions.export")} JSON`,props:{onClick:async()=>{await b(e)}}}:null,{split:!0},n&&{label:"✏️ "+p("actions.rename"),props:{onClick:k},disabled:d},{label:"❌ "+p("actions.delete"),props:{onClick:C},disabled:d},d&&{html:`<div style="font-size: 12px; max-width: 150px; word-break: break-word">${p("msgs.bu_fen_xuan_xiang_bu")}</div>`,disabled:!0}].filter(Boolean)})),N=r(),F=a((()=>o.value.length>0));return{handleCreateFolder:_,handleRename:k,doDeleteSelected:x,confirmDelete:C,ctxMenuOptions:P,ctxMenuRef:N,handleShowCtxMenu:(t,e)=>{null!==t&&(void 0===t?o.value=[]:d.value.has(t)||(o.value=[t])),N.value.showMenu(e)},enableAction:F,handleCreateComponent:v,handleDragStart:async({item:t,event:e})=>{if(!Ct.test(t.name))return!1;window.$draggingComponentExportData=await w(t)},isShowImageCropper:D,cropperEditingSrc:T,handleCropperSave:z,handleCropperCancel:M}},Ie={key:0,class:"pop-window-content"},De=["src"],Te=o(t({__name:"PopFloat",setup(t){const e=r(),i=r(!1),n=r(null),o=r(0),h=r(0),d=r(0),f=r(0),p=r("");M((()=>{E.on(O.ON_COMP_HOVER,v),E.on(O.ON_COMP_HOVER_OUT,g),E.on(O.ON_COMP_HOVER_CLEAR,b)})),L((()=>{E.off(O.ON_COMP_HOVER,v),E.off(O.ON_COMP_HOVER_OUT,g),E.off(O.ON_COMP_HOVER_CLEAR,b)}));const m=()=>{setTimeout((()=>{e.value&&(d.value=e.value.offsetWidth,f.value=e.value.offsetHeight)}),100)};P(n,(t=>{p.value="",t&&t.meta.cover&&(p.value=t.meta.cover)}));const v=t=>{const{event:e,item:r}=t||{};n.value=r,o.value=e.clientX,h.value=e.clientY,i.value=!0},g=()=>{i.value=!1},b=()=>{n.value=null},w=a((()=>{let t=o.value+40,e=h.value+25;const i=window.innerWidth,n=window.innerHeight,r=i-(t+d.value);r<0&&(t+=r),t<o.value&&(t=o.value-d.value-10);const a=n-(e+f.value);return a<0&&(e+=a),e<h.value&&(e=h.value-f.value-10),{left:t+"px",top:e+"px"}}));return(t,r)=>(s(),k(F,{name:"mc-fade-scale"},{default:N((()=>[S(i)?(s(),l("div",{key:0,ref_key:"popWindowRef",ref:e,class:"pop-window vp-window",style:c(S(w))},[S(n)?(s(),l("div",Ie,[S(p)?(s(),l("img",{key:0,src:S(p),alt:"cover",class:"preview-cover",onLoad:m},null,40,De)):u("",!0)])):u("",!0)],4)):u("",!0)])),_:1}))}}),[["__scopeId","data-v-27c1b670"]]);
/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */
function ze(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Ae(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(i),!0).forEach((function(e){Me(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ze(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ne(n.key),n)}}function Me(t,e,i){return(e=Ne(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Le(t){return function(t){if(Array.isArray(t))return Pe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Pe(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pe(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Ne(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var Fe="undefined"!=typeof window&&void 0!==window.document,Ue=Fe?window:{},je=!(!Fe||!Ue.document.documentElement)&&"ontouchstart"in Ue.document.documentElement,We=!!Fe&&"PointerEvent"in Ue,He="cropper",$e="all",Ze="crop",Ye="move",Ve="zoom",Xe="e",Ke="w",qe="s",Ge="n",Je="ne",Qe="nw",ti="se",ei="sw",ii="".concat(He,"-crop"),ni="".concat(He,"-disabled"),ri="".concat(He,"-hidden"),ai="".concat(He,"-hide"),oi="".concat(He,"-invisible"),si="".concat(He,"-modal"),li="".concat(He,"-move"),hi="".concat(He,"Action"),ci="".concat(He,"Preview"),di="crop",ui="move",fi="none",pi="crop",mi="cropend",vi="cropmove",gi="cropstart",bi="dblclick",wi=We?"pointerdown":je?"touchstart":"mousedown",yi=We?"pointermove":je?"touchmove":"mousemove",_i=We?"pointerup pointercancel":je?"touchend touchcancel":"mouseup",ki="ready",xi="resize",Ci="wheel",Si="zoom",Ei="image/jpeg",Oi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ii=/^data:/,Di=/^data:image\/jpeg;base64,/,Ti=/^img|canvas$/i,zi={viewMode:0,dragMode:di,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ai=Number.isNaN||Ue.isNaN;function Bi(t){return"number"==typeof t&&!Ai(t)}var Ri=function(t){return t>0&&t<1/0};function Mi(t){return void 0===t}function Li(t){return"object"===Be(t)&&null!==t}var Pi=Object.prototype.hasOwnProperty;function Ni(t){if(!Li(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&Pi.call(i,"isPrototypeOf")}catch(n){return!1}}function Fi(t){return"function"==typeof t}var Ui=Array.prototype.slice;function ji(t){return Array.from?Array.from(t):Ui.call(t)}function Wi(t,e){return t&&Fi(e)&&(Array.isArray(t)||Bi(t.length)?ji(t).forEach((function(i,n){e.call(t,i,n,t)})):Li(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var Hi=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Li(t)&&i.length>0&&i.forEach((function(e){Li(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},$i=/\.\d*(?:0|9){12}\d*$/;function Zi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return $i.test(t)?Math.round(t*e)/e:t}var Yi=/^width|height|left|top|marginLeft|marginTop$/;function Vi(t,e){var i=t.style;Wi(e,(function(t,e){Yi.test(e)&&Bi(t)&&(t="".concat(t,"px")),i[e]=t}))}function Xi(t,e){if(e)if(Bi(t.length))Wi(t,(function(t){Xi(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function Ki(t,e){e&&(Bi(t.length)?Wi(t,(function(t){Ki(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function qi(t,e,i){e&&(Bi(t.length)?Wi(t,(function(t){qi(t,e,i)})):i?Xi(t,e):Ki(t,e))}var Gi=/([a-z\d])([A-Z])/g;function Ji(t){return t.replace(Gi,"$1-$2").toLowerCase()}function Qi(t,e){return Li(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Ji(e)))}function tn(t,e,i){Li(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(Ji(e)),i)}var en=/\s\s*/,nn=function(){var t=!1;if(Fe){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});Ue.addEventListener("test",i,n),Ue.removeEventListener("test",i,n)}return t}();function rn(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;e.trim().split(en).forEach((function(e){if(!nn){var a=t.listeners;a&&a[e]&&a[e][i]&&(r=a[e][i],delete a[e][i],0===Object.keys(a[e]).length&&delete a[e],0===Object.keys(a).length&&delete t.listeners)}t.removeEventListener(e,r,n)}))}function an(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;e.trim().split(en).forEach((function(e){if(n.once&&!nn){var a=t.listeners,o=void 0===a?{}:a;r=function(){delete o[e][i],t.removeEventListener(e,r,n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];i.apply(t,s)},o[e]||(o[e]={}),o[e][i]&&t.removeEventListener(e,o[e][i],n),o[e][i]=r,t.listeners=o}t.addEventListener(e,r,n)}))}function on(t,e,i){var n;return Fi(Event)&&Fi(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function sn(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var ln=Ue.location,hn=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function cn(t){var e=t.match(hn);return null!==e&&(e[1]!==ln.protocol||e[2]!==ln.hostname||e[3]!==ln.port)}function dn(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function un(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,r=t.translateX,a=t.translateY,o=[];Bi(r)&&0!==r&&o.push("translateX(".concat(r,"px)")),Bi(a)&&0!==a&&o.push("translateY(".concat(a,"px)")),Bi(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),Bi(i)&&1!==i&&o.push("scaleX(".concat(i,")")),Bi(n)&&1!==n&&o.push("scaleY(".concat(n,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function fn(t,e){var i=t.pageX,n=t.pageY,r={endX:i,endY:n};return e?r:Ae({startX:i,startY:n},r)}function pn(t){var e=t.aspectRatio,i=t.height,n=t.width,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=Ri(n),o=Ri(i);if(a&&o){var s=i*e;"contain"===r&&s>n||"cover"===r&&s<n?i=n/e:n=i*e}else a?i=n/e:o&&(n=i*e);return{width:n,height:i}}var mn=String.fromCharCode;var vn=/^data:.*,/;function gn(t){var e,i=new DataView(t);try{var n,r,a;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var o=i.byteLength,s=2;s+1<o;){if(255===i.getUint8(s)&&225===i.getUint8(s+1)){r=s;break}s+=1}if(r){var l=r+10;if("Exif"===function(t,e,i){var n="";i+=e;for(var r=e;r<i;r+=1)n+=mn(t.getUint8(r));return n}(i,r+4,4)){var h=i.getUint16(l);if(((n=18761===h)||19789===h)&&42===i.getUint16(l+2,n)){var c=i.getUint32(l+4,n);c>=8&&(a=l+c)}}}if(a){var d,u,f=i.getUint16(a,n);for(u=0;u<f;u+=1)if(d=a+12*u+2,274===i.getUint16(d,n)){d+=8,e=i.getUint16(d,n),i.setUint16(d,1,n);break}}}catch(p){e=1}return e}var bn={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper,r=Number(e.minContainerWidth),a=Number(e.minContainerHeight);Xi(n,ri),Ki(t,ri);var o={width:Math.max(i.offsetWidth,r>=0?r:200),height:Math.max(i.offsetHeight,a>=0?a:100)};this.containerData=o,Vi(n,{width:o.width,height:o.height}),Xi(t,ri),Ki(n,ri)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=Math.abs(e.rotate)%180==90,r=n?e.naturalHeight:e.naturalWidth,a=n?e.naturalWidth:e.naturalHeight,o=r/a,s=t.width,l=t.height;t.height*o>t.width?3===i?s=t.height*o:l=t.width/o:3===i?l=t.width/o:s=t.height*o;var h={aspectRatio:o,naturalWidth:r,naturalHeight:a,width:s,height:l};this.canvasData=h,this.limited=1===i||2===i,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(t.width-h.width)/2,h.top=(t.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=Hi({},h)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,r=this.canvasData,a=this.cropBoxData,o=i.viewMode,s=r.aspectRatio,l=this.cropped&&a;if(t){var h=Number(i.minCanvasWidth)||0,c=Number(i.minCanvasHeight)||0;o>1?(h=Math.max(h,n.width),c=Math.max(c,n.height),3===o&&(c*s>h?h=c*s:c=h/s)):o>0&&(h?h=Math.max(h,l?a.width:0):c?c=Math.max(c,l?a.height:0):l&&(h=a.width,(c=a.height)*s>h?h=c*s:c=h/s));var d=pn({aspectRatio:s,width:h,height:c});h=d.width,c=d.height,r.minWidth=h,r.minHeight=c,r.maxWidth=1/0,r.maxHeight=1/0}if(e)if(o>(l?0:1)){var u=n.width-r.width,f=n.height-r.height;r.minLeft=Math.min(0,u),r.minTop=Math.min(0,f),r.maxLeft=Math.max(0,u),r.maxTop=Math.max(0,f),l&&this.limited&&(r.minLeft=Math.min(a.left,a.left+(a.width-r.width)),r.minTop=Math.min(a.top,a.top+(a.height-r.height)),r.maxLeft=a.left,r.maxTop=a.top,2===o&&(r.width>=n.width&&(r.minLeft=Math.min(0,u),r.maxLeft=Math.max(0,u)),r.height>=n.height&&(r.minTop=Math.min(0,f),r.maxTop=Math.max(0,f))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=n.width,r.maxTop=n.height},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var r=function(t){var e=t.width,i=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:e};var r=n%90*Math.PI/180,a=Math.sin(r),o=Math.cos(r),s=e*o+i*a,l=e*a+i*o;return n>90?{width:l,height:s}:{width:s,height:l}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),a=r.width,o=r.height,s=i.width*(a/i.naturalWidth),l=i.height*(o/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(l-i.height)/2,i.width=s,i.height=l,i.aspectRatio=a/o,i.naturalWidth=a,i.naturalHeight=o,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,Vi(this.canvas,Hi({width:i.width,height:i.height},un({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),r=i.naturalHeight*(e.height/e.naturalHeight);Hi(i,{width:n,height:r,left:(e.width-n)/2,top:(e.height-r)/2}),Vi(this.image,Hi({width:i.width,height:i.height},un(Hi({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,r={width:e.width,height:e.height};i&&(e.height*i>e.width?r.height=r.width/i:r.width=r.height*i),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*n),r.height=Math.max(r.minHeight,r.height*n),r.left=e.left+(e.width-r.width)/2,r.top=e.top+(e.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=Hi({},r)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,r=this.canvasData,a=this.cropBoxData,o=this.limited,s=i.aspectRatio;if(t){var l=Number(i.minCropBoxWidth)||0,h=Number(i.minCropBoxHeight)||0,c=o?Math.min(n.width,r.width,r.width+r.left,n.width-r.left):n.width,d=o?Math.min(n.height,r.height,r.height+r.top,n.height-r.top):n.height;l=Math.min(l,n.width),h=Math.min(h,n.height),s&&(l&&h?h*s>l?h=l/s:l=h*s:l?h=l/s:h&&(l=h*s),d*s>c?d=c/s:c=d*s),a.minWidth=Math.min(l,c),a.minHeight=Math.min(h,d),a.maxWidth=c,a.maxHeight=d}e&&(o?(a.minLeft=Math.max(0,r.left),a.minTop=Math.max(0,r.top),a.maxLeft=Math.min(n.width,r.left+r.width)-a.width,a.maxTop=Math.min(n.height,r.top+r.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=n.width-a.width,a.maxTop=n.height-a.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&tn(this.face,hi,i.width>=e.width&&i.height>=e.height?Ye:$e),Vi(this.cropBox,Hi({width:i.width,height:i.height},un({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),on(this.element,pi,this.getData())}},wn={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=n,a.alt=r,this.viewBox.appendChild(a),this.viewBoxImage=a,i){var o=i;"string"==typeof i?o=t.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),this.previews=o,Wi(o,(function(t){var i=document.createElement("img");tn(t,ci,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=n,i.alt=r,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){Wi(this.previews,(function(t){var e=Qi(t,ci);Vi(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(Li(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Ji(e)))}(t,ci)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,r=i.height,a=t.width,o=t.height,s=i.left-e.left-t.left,l=i.top-e.top-t.top;this.cropped&&!this.disabled&&(Vi(this.viewBoxImage,Hi({width:a,height:o},un(Hi({translateX:-s,translateY:-l},t)))),Wi(this.previews,(function(e){var i=Qi(e,ci),h=i.width,c=i.height,d=h,u=c,f=1;n&&(u=r*(f=h/n)),r&&u>c&&(d=n*(f=c/r),u=c),Vi(e,{width:d,height:u}),Vi(e.getElementsByTagName("img")[0],Hi({width:a*f,height:o*f},un(Hi({translateX:-s*f,translateY:-l*f},t))))})))}},yn={bind:function(){var t=this.element,e=this.options,i=this.cropper;Fi(e.cropstart)&&an(t,gi,e.cropstart),Fi(e.cropmove)&&an(t,vi,e.cropmove),Fi(e.cropend)&&an(t,mi,e.cropend),Fi(e.crop)&&an(t,pi,e.crop),Fi(e.zoom)&&an(t,Si,e.zoom),an(i,wi,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&an(i,Ci,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&an(i,bi,this.onDblclick=this.dblclick.bind(this)),an(t.ownerDocument,yi,this.onCropMove=this.cropMove.bind(this)),an(t.ownerDocument,_i,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&an(window,xi,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;Fi(e.cropstart)&&rn(t,gi,e.cropstart),Fi(e.cropmove)&&rn(t,vi,e.cropmove),Fi(e.cropend)&&rn(t,mi,e.cropend),Fi(e.crop)&&rn(t,pi,e.crop),Fi(e.zoom)&&rn(t,Si,e.zoom),rn(i,wi,this.onCropStart),e.zoomable&&e.zoomOnWheel&&rn(i,Ci,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&rn(i,bi,this.onDblclick),rn(t.ownerDocument,yi,this.onCropMove),rn(t.ownerDocument,_i,this.onCropEnd),e.responsive&&rn(window,xi,this.onResize)}},_n={resize:function(){if(!this.disabled){var t,e,i=this.options,n=this.container,r=this.containerData,a=n.offsetWidth/r.width,o=n.offsetHeight/r.height,s=Math.abs(a-1)>Math.abs(o-1)?a:o;if(1!==s)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(Wi(t,(function(e,i){t[i]=e*s}))),this.setCropBoxData(Wi(e,(function(t,i){e[i]=t*s}))))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===fi||this.setDragMode((t=this.dragBox,e=ii,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?ui:di))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(Bi(e)&&1!==e||Bi(i)&&0!==i||t.ctrlKey))){var n,r=this.options,a=this.pointers;t.changedTouches?Wi(t.changedTouches,(function(t){a[t.identifier]=fn(t)})):a[t.pointerId||0]=fn(t),n=Object.keys(a).length>1&&r.zoomable&&r.zoomOnTouch?Ve:Qi(t.target,hi),Oi.test(n)&&!1!==on(this.element,gi,{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,n===Ze&&(this.cropping=!0,Xi(this.dragBox,si)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==on(this.element,vi,{originalEvent:t,action:e})&&(t.changedTouches?Wi(t.changedTouches,(function(t){Hi(i[t.identifier]||{},fn(t,!0))})):Hi(i[t.pointerId||0]||{},fn(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?Wi(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,qi(this.dragBox,si,this.cropped&&this.options.modal)),on(this.element,mi,{originalEvent:t,action:e}))}}},kn={change:function(t){var e,i=this.options,n=this.canvasData,r=this.containerData,a=this.cropBoxData,o=this.pointers,s=this.action,l=i.aspectRatio,h=a.left,c=a.top,d=a.width,u=a.height,f=h+d,p=c+u,m=0,v=0,g=r.width,b=r.height,w=!0;!l&&t.shiftKey&&(l=d&&u?d/u:1),this.limited&&(m=a.minLeft,v=a.minTop,g=m+Math.min(r.width,n.width,n.left+n.width),b=v+Math.min(r.height,n.height,n.top+n.height));var y=o[Object.keys(o)[0]],_={x:y.endX-y.startX,y:y.endY-y.startY},k=function(t){switch(t){case Xe:f+_.x>g&&(_.x=g-f);break;case Ke:h+_.x<m&&(_.x=m-h);break;case Ge:c+_.y<v&&(_.y=v-c);break;case qe:p+_.y>b&&(_.y=b-p)}};switch(s){case $e:h+=_.x,c+=_.y;break;case Xe:if(_.x>=0&&(f>=g||l&&(c<=v||p>=b))){w=!1;break}k(Xe),(d+=_.x)<0&&(s=Ke,h-=d=-d),l&&(u=d/l,c+=(a.height-u)/2);break;case Ge:if(_.y<=0&&(c<=v||l&&(h<=m||f>=g))){w=!1;break}k(Ge),u-=_.y,c+=_.y,u<0&&(s=qe,c-=u=-u),l&&(d=u*l,h+=(a.width-d)/2);break;case Ke:if(_.x<=0&&(h<=m||l&&(c<=v||p>=b))){w=!1;break}k(Ke),d-=_.x,h+=_.x,d<0&&(s=Xe,h-=d=-d),l&&(u=d/l,c+=(a.height-u)/2);break;case qe:if(_.y>=0&&(p>=b||l&&(h<=m||f>=g))){w=!1;break}k(qe),(u+=_.y)<0&&(s=Ge,c-=u=-u),l&&(d=u*l,h+=(a.width-d)/2);break;case Je:if(l){if(_.y<=0&&(c<=v||f>=g)){w=!1;break}k(Ge),u-=_.y,c+=_.y,d=u*l}else k(Ge),k(Xe),_.x>=0?f<g?d+=_.x:_.y<=0&&c<=v&&(w=!1):d+=_.x,_.y<=0?c>v&&(u-=_.y,c+=_.y):(u-=_.y,c+=_.y);d<0&&u<0?(s=ei,c-=u=-u,h-=d=-d):d<0?(s=Qe,h-=d=-d):u<0&&(s=ti,c-=u=-u);break;case Qe:if(l){if(_.y<=0&&(c<=v||h<=m)){w=!1;break}k(Ge),u-=_.y,c+=_.y,d=u*l,h+=a.width-d}else k(Ge),k(Ke),_.x<=0?h>m?(d-=_.x,h+=_.x):_.y<=0&&c<=v&&(w=!1):(d-=_.x,h+=_.x),_.y<=0?c>v&&(u-=_.y,c+=_.y):(u-=_.y,c+=_.y);d<0&&u<0?(s=ti,c-=u=-u,h-=d=-d):d<0?(s=Je,h-=d=-d):u<0&&(s=ei,c-=u=-u);break;case ei:if(l){if(_.x<=0&&(h<=m||p>=b)){w=!1;break}k(Ke),d-=_.x,h+=_.x,u=d/l}else k(qe),k(Ke),_.x<=0?h>m?(d-=_.x,h+=_.x):_.y>=0&&p>=b&&(w=!1):(d-=_.x,h+=_.x),_.y>=0?p<b&&(u+=_.y):u+=_.y;d<0&&u<0?(s=Je,c-=u=-u,h-=d=-d):d<0?(s=ti,h-=d=-d):u<0&&(s=Qe,c-=u=-u);break;case ti:if(l){if(_.x>=0&&(f>=g||p>=b)){w=!1;break}k(Xe),u=(d+=_.x)/l}else k(qe),k(Xe),_.x>=0?f<g?d+=_.x:_.y>=0&&p>=b&&(w=!1):d+=_.x,_.y>=0?p<b&&(u+=_.y):u+=_.y;d<0&&u<0?(s=Qe,c-=u=-u,h-=d=-d):d<0?(s=ei,h-=d=-d):u<0&&(s=Je,c-=u=-u);break;case Ye:this.move(_.x,_.y),w=!1;break;case Ve:this.zoom(function(t){var e=Ae({},t),i=0;return Wi(t,(function(t,n){delete e[n],Wi(e,(function(e){var n=Math.abs(t.startX-e.startX),r=Math.abs(t.startY-e.startY),a=Math.abs(t.endX-e.endX),o=Math.abs(t.endY-e.endY),s=Math.sqrt(n*n+r*r),l=(Math.sqrt(a*a+o*o)-s)/s;Math.abs(l)>Math.abs(i)&&(i=l)}))})),i}(o),t),w=!1;break;case Ze:if(!_.x||!_.y){w=!1;break}e=sn(this.cropper),h=y.startX-e.left,c=y.startY-e.top,d=a.minWidth,u=a.minHeight,_.x>0?s=_.y>0?ti:Je:_.x<0&&(h-=d,s=_.y>0?ei:Qe),_.y<0&&(c-=u),this.cropped||(Ki(this.cropBox,ri),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}w&&(a.width=d,a.height=u,a.left=h,a.top=c,this.action=s,this.renderCropBox()),Wi(o,(function(t){t.startX=t.endX,t.startY=t.endY}))}},xn={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Xi(this.dragBox,si),Ki(this.cropBox,ri),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Hi({},this.initialImageData),this.canvasData=Hi({},this.initialCanvasData),this.cropBoxData=Hi({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Hi(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ki(this.dragBox,si),Xi(this.cropBox,ri)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Wi(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ki(this.cropper,ni)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Xi(this.cropper,ni)),this},destroy:function(){var t=this.element;return t[He]?(t[He]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=i.left,r=i.top;return this.moveTo(Mi(t)?t:n+Number(t),Mi(e)?e:r+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(Bi(t)&&(i.left=t,n=!0),Bi(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,r=this.canvasData,a=r.width,o=r.height,s=r.naturalWidth,l=r.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var h=s*t,c=l*t;if(!1===on(this.element,Si,{ratio:t,oldRatio:a/s,originalEvent:i}))return this;if(i){var d=this.pointers,u=sn(this.cropper),f=d&&Object.keys(d).length?function(t){var e=0,i=0,n=0;return Wi(t,(function(t){var r=t.startX,a=t.startY;e+=r,i+=a,n+=1})),{pageX:e/=n,pageY:i/=n}}(d):{pageX:i.pageX,pageY:i.pageY};r.left-=(h-a)*((f.pageX-u.left-r.left)/a),r.top-=(c-o)*((f.pageY-u.top-r.top)/o)}else Ni(e)&&Bi(e.x)&&Bi(e.y)?(r.left-=(h-a)*((e.x-r.left)/a),r.top-=(c-o)*((e.y-r.top)/o)):(r.left-=(h-a)/2,r.top-=(c-o)/2);r.width=h,r.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return Bi(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,Bi(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(Bi(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(Bi(t)&&(i.scaleX=t,n=!0),Bi(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,r=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){t={x:a.left-r.left,y:a.top-r.top,width:a.width,height:a.height};var o=n.width/n.naturalWidth;if(Wi(t,(function(e,i){t[i]=e/o})),e){var s=Math.round(t.y+t.height),l=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=l-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=n.rotate||0),i.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,r={};if(this.ready&&!this.disabled&&Ni(t)){var a=!1;e.rotatable&&Bi(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,a=!0),e.scalable&&(Bi(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,a=!0),Bi(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=i.width/i.naturalWidth;Bi(t.x)&&(r.left=t.x*o+n.left),Bi(t.y)&&(r.top=t.y*o+n.top),Bi(t.width)&&(r.width=t.width*o),Bi(t.height)&&(r.height=t.height*o),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?Hi({},this.containerData):{}},getImageData:function(){return this.sized?Hi({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&Wi(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&Ni(t)&&(Bi(t.left)&&(e.left=t.left),Bi(t.top)&&(e.top=t.top),Bi(t.width)?(e.width=t.width,e.height=t.width/i):Bi(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,r=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&Ni(t)&&(Bi(t.left)&&(n.left=t.left),Bi(t.top)&&(n.top=t.top),Bi(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),Bi(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),r&&(e?n.height=n.width/r:i&&(n.width=n.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,n){var r=e.aspectRatio,a=e.naturalWidth,o=e.naturalHeight,s=e.rotate,l=void 0===s?0:s,h=e.scaleX,c=void 0===h?1:h,d=e.scaleY,u=void 0===d?1:d,f=i.aspectRatio,p=i.naturalWidth,m=i.naturalHeight,v=n.fillColor,g=void 0===v?"transparent":v,b=n.imageSmoothingEnabled,w=void 0===b||b,y=n.imageSmoothingQuality,_=void 0===y?"low":y,k=n.maxWidth,x=void 0===k?1/0:k,C=n.maxHeight,S=void 0===C?1/0:C,E=n.minWidth,O=void 0===E?0:E,I=n.minHeight,D=void 0===I?0:I,T=document.createElement("canvas"),z=T.getContext("2d"),A=pn({aspectRatio:f,width:x,height:S}),B=pn({aspectRatio:f,width:O,height:D},"cover"),R=Math.min(A.width,Math.max(B.width,p)),M=Math.min(A.height,Math.max(B.height,m)),L=pn({aspectRatio:r,width:x,height:S}),P=pn({aspectRatio:r,width:O,height:D},"cover"),N=Math.min(L.width,Math.max(P.width,a)),F=Math.min(L.height,Math.max(P.height,o)),U=[-N/2,-F/2,N,F];return T.width=Zi(R),T.height=Zi(M),z.fillStyle=g,z.fillRect(0,0,R,M),z.save(),z.translate(R/2,M/2),z.rotate(l*Math.PI/180),z.scale(c,u),z.imageSmoothingEnabled=w,z.imageSmoothingQuality=_,z.drawImage.apply(z,[t].concat(Le(U.map((function(t){return Math.floor(Zi(t))}))))),z.restore(),T}(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(t.rounded),r=n.x,a=n.y,o=n.width,s=n.height,l=i.width/Math.floor(e.naturalWidth);1!==l&&(r*=l,a*=l,o*=l,s*=l);var h=o/s,c=pn({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=pn({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),u=pn({aspectRatio:h,width:t.width||(1!==l?i.width:o),height:t.height||(1!==l?i.height:s)}),f=u.width,p=u.height;f=Math.min(c.width,Math.max(d.width,f)),p=Math.min(c.height,Math.max(d.height,p));var m=document.createElement("canvas"),v=m.getContext("2d");m.width=Zi(f),m.height=Zi(p),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,f,p);var g=t.imageSmoothingEnabled,b=void 0===g||g,w=t.imageSmoothingQuality;v.imageSmoothingEnabled=b,w&&(v.imageSmoothingQuality=w);var y,_,k,x,C,S,E=i.width,O=i.height,I=r,D=a;I<=-o||I>E?(I=0,y=0,k=0,C=0):I<=0?(k=-I,I=0,C=y=Math.min(E,o+I)):I<=E&&(k=0,C=y=Math.min(o,E-I)),y<=0||D<=-s||D>O?(D=0,_=0,x=0,S=0):D<=0?(x=-D,D=0,S=_=Math.min(O,s+D)):D<=O&&(x=0,S=_=Math.min(s,O-D));var T=[I,D,y,_];if(C>0&&S>0){var z=f/o;T.push(k*z,x*z,C*z,S*z)}return v.drawImage.apply(v,[i].concat(Le(T.map((function(t){return Math.floor(Zi(t))}))))),m},setAspectRatio:function(t){var e=this.options;return this.disabled||Mi(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var r=t===di,a=e.movable&&t===ui;t=r||a?t:fi,e.dragMode=t,tn(i,hi,t),qi(i,ii,r),qi(i,li,a),e.cropBoxMovable||(tn(n,hi,t),qi(n,ii,r),qi(n,li,a))}return this}},Cn=Ue.Cropper,Sn=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!Ti.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Hi({},zi,Ni(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,i,n;return e=t,n=[{key:"noConflict",value:function(){return window.Cropper=Cn,t}},{key:"setDefaults",value:function(t){Hi(zi,Ni(t)&&t)}}],(i=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[He]){if(e[He]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(Ii.test(t))Di.test(t)?this.read((r=t.replace(vn,""),a=atob(r),o=new ArrayBuffer(a.length),Wi(s=new Uint8Array(o),(function(t,e){s[e]=a.charCodeAt(e)})),o)):this.clone();else{var r,a,o,s,l=new XMLHttpRequest,h=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=h,l.onerror=h,l.ontimeout=h,l.onprogress=function(){l.getResponseHeader("content-type")!==Ei&&l.abort()},l.onload=function(){e.read(l.response)},l.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&cn(t)&&i.crossOrigin&&(t=dn(t)),l.open("GET",t,!0),l.responseType="arraybuffer",l.withCredentials="use-credentials"===i.crossOrigin,l.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,n=gn(t),r=0,a=1,o=1;if(n>1){this.url=function(t,e){for(var i=[],n=new Uint8Array(t);n.length>0;)i.push(mn.apply(null,ji(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,Ei);var s=function(t){var e=0,i=1,n=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:n}}(n);r=s.rotate,a=s.scaleX,o=s.scaleY}e.rotatable&&(i.rotate=r),e.scalable&&(i.scaleX=a,i.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.options.checkCrossOrigin&&cn(e)&&(i||(i="anonymous"),n=dn(e)),this.crossOrigin=i,this.crossOriginUrl=n;var r=document.createElement("img");i&&(r.crossOrigin=i),r.src=n||e,r.alt=t.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),Xi(r,ai),t.parentNode.insertBefore(r,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=Ue.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ue.navigator.userAgent),n=function(e,i){Hi(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=Hi({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var r=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){n(r.width,r.height),i||a.removeChild(r)},r.src=e.src,i||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(r))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,n=t.parentNode,r=document.createElement("div");r.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var a=r.querySelector(".".concat(He,"-container")),o=a.querySelector(".".concat(He,"-canvas")),s=a.querySelector(".".concat(He,"-drag-box")),l=a.querySelector(".".concat(He,"-crop-box")),h=l.querySelector(".".concat(He,"-face"));this.container=n,this.cropper=a,this.canvas=o,this.dragBox=s,this.cropBox=l,this.viewBox=a.querySelector(".".concat(He,"-view-box")),this.face=h,o.appendChild(i),Xi(t,ri),n.insertBefore(a,t.nextSibling),Ki(i,ai),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,Xi(l,ri),e.guides||Xi(l.getElementsByClassName("".concat(He,"-dashed")),ri),e.center||Xi(l.getElementsByClassName("".concat(He,"-center")),ri),e.background&&Xi(a,"".concat(He,"-bg")),e.highlight||Xi(h,oi),e.cropBoxMovable&&(Xi(h,li),tn(h,hi,$e)),e.cropBoxResizable||(Xi(l.getElementsByClassName("".concat(He,"-line")),ri),Xi(l.getElementsByClassName("".concat(He,"-point")),ri)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),Fi(e.ready)&&an(t,ki,e.ready,{once:!0}),on(t,ki)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),Ki(this.element,ri)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&Re(e.prototype,i),n&&Re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();Hi(Sn.prototype,bn,wn,yn,_n,kn,xn);const En=t({name:"DialogImageCropper",props:{visible:{type:Boolean,default:!1},src:{type:String,default:null}},emits:["onSave","onCancel","update:visible"],setup(t,{emit:i}){e(t);const n=kt(t,i,"visible"),a=r(),o=U();return P(n,(t=>{t?j((()=>{o.value=new Sn(a.value,{modal:!1,autoCropArea:.1})})):o.value=null})),{mVisible:n,imgRef:a,handleSave(){const t=o.value.getCroppedCanvas();i("onSave",t.toDataURL("image/png",1))},handleCancel(){i("onCancel")}}}}),On=["src"],In={class:"dialog-footer"};const Dn=o(En,[["render",function(t,e,i,n,r,a){const o=$,c=Z;return s(),k(c,{fullscreen:"","positive-text":t.$t("actions.done"),title:"Image Cropper",modelValue:t.mVisible,"onUpdate:modelValue":e[1]||(e[1]=e=>t.mVisible=e),onKeyup:w(t.handleSave,["enter"])},{footer:N((()=>[h("div",In,[W(o,{onClick:t.handleCancel},{default:N((()=>[H(d(t.$t("actions.cancel")),1)])),_:1},8,["onClick"]),W(o,{type:"primary",onClick:t.handleSave},{default:N((()=>[H(d(t.$t("actions.save")),1)])),_:1},8,["onClick"])])])),default:N((()=>[t.mVisible?(s(),l("div",{key:0,onDblclick:e[0]||(e[0]=p(((...e)=>t.handleSave&&t.handleSave(...e)),["stop"]))},[h("img",{ref:"imgRef",class:"cropping-image",src:t.src},null,8,On)],32)):u("",!0)])),_:1},8,["positive-text","modelValue","onKeyup"])}],["__scopeId","data-v-67219c7e"]]),Tn=t=>(J("data-v-ebfb062e"),t=t(),Q(),t),zn={class:"explorer-actions vp-panel"},An={class:"action-group"},Bn=["title"],Rn=[Tn((()=>h("i",{class:"fa fa-file-o","aria-hidden":"true"},null,-1)))],Mn=[Tn((()=>h("i",{class:"fa fa-folder-o","aria-hidden":"true"},null,-1)))],Ln=Tn((()=>h("div",{class:"split-line"},null,-1))),Pn=["disabled"],Nn=[Tn((()=>h("i",{class:"fa fa-scissors","aria-hidden":"true"},null,-1)))],Fn=["disabled"],Un=[Tn((()=>h("i",{class:"fa fa-files-o","aria-hidden":"true"},null,-1)))],jn=["disabled"],Wn=[Tn((()=>h("i",{class:"fa fa-clipboard","aria-hidden":"true"},null,-1)))],Hn=["disabled"],$n=[Tn((()=>h("i",{class:"fa fa-pencil-square-o","aria-hidden":"true"},null,-1)))],Zn=["disabled"],Yn=[Tn((()=>h("i",{class:"fa fa-trash-o","aria-hidden":"true"},null,-1)))],Vn=Tn((()=>h("div",{class:"split-line"},null,-1))),Xn=[Tn((()=>h("i",{class:"fa fa-folder-open-o","aria-hidden":"true"},null,-1)))],Kn={class:"action-group"},qn={class:"action-button-wrap"},Gn=[Tn((()=>h("i",{class:"fa fa-sort","aria-hidden":"true"},null,-1)))],Jn=[Tn((()=>h("i",{class:"fa fa-check-square-o","aria-hidden":"true"},null,-1)))],Qn=[Tn((()=>h("i",{class:"fa fa-bars","aria-hidden":"true"},null,-1)))],tr={class:"explorer-grid-view"},er=o(t({__name:"ComponentList",props:{files:{},isLoading:{type:Boolean},basePath:{}},emits:["open","update:isLoading","refresh"],setup(t,{emit:i}){const o=i,c=t,{basePath:d,files:u}=e(c),f=Y(c,"isLoading",o),m=n(),{showSortMenu:v,sortOptions:b,filteredFiles:w}=(t=>{const e=r(!1),i=x("mc_explorer_component_sort_type",ce.birthTimeDesc,localStorage,{listenToStorageChanges:!1});return{isGridView:e,showSortMenu:r(!1),sortOptions:a((()=>[{label:"Name ▲",value:ce.name},{label:"Name ▼",value:ce.nameDesc},{label:"Created Time ▲",value:ce.birthTime},{label:"Created Time ▼",value:ce.birthTimeDesc}].map((t=>({label:t.label,props:{class:i.value===t.value?"active":"",onClick:()=>{i.value=t.value}}}))))),filteredFiles:a((()=>t.value.sort(de[i.value])))}})(u),{selectedItems:C,selectedItemsSet:E,explorerContentRef:O,toggleSelect:I,toggleSelectAll:D,selectedPaths:T,selectionArea:z}=Nt({filteredFiles:w,basePath:d});M((()=>{z.value.on("beforestart",(({event:t})=>{var e;return!(null==(e=t.target)?void 0:e.closest(".mc-comp-item"))}))}));const{enablePaste:A,handleCut:B,handleCopy:R,handlePaste:L}=Ft({selectedPaths:T,basePath:d,isLoading:f,emit:o}),{handleCreateFolder:P,handleRename:U,confirmDelete:j,ctxMenuOptions:H,ctxMenuRef:$,handleShowCtxMenu:Z,enableAction:J,handleCreateComponent:Q,handleDragStart:tt,isShowImageCropper:et,cropperEditingSrc:it,handleCropperSave:nt,handleCropperCancel:rt}=Oe({isLoading:f,selectedPaths:T,basePath:d,selectedItems:C,enablePaste:A,handlePaste:L,handleCut:B,handleCopy:R,selectedItemsSet:E,files:u,emit:o});It(o);const{openComponent:at}=Dt(),ot=t=>{var e,i;const n=Wt(d.value+"/"+t.name);Ct.test(n)?t.meta.id===(null==(e=m.curCompInStore)?void 0:e.id)&&t.basePath===(null==(i=m.curCompInStore)?void 0:i.basePath)||at(t,n):o("open",t)},{handleOpenLocalDir:st,localDirHistoryOptions:lt}=Ut({emit:o});return(t,e)=>{const i=G;return g((s(),l("div",{class:"comp-list-wrap",onContextmenu:e[15]||(e[15]=p((()=>{}),["prevent"]))},[h("div",zn,[h("div",An,[h("button",{class:"vp-button",onClick:e[0]||(e[0]=t=>S(Q)()),title:t.$t("actions.add_component")},Rn,8,Bn),h("button",{class:"vp-button",onClick:e[1]||(e[1]=(...t)=>S(P)&&S(P)(...t)),title:"Create Folder"},Mn),Ln,h("button",{class:"vp-button",disabled:!S(J),onClick:e[2]||(e[2]=(...t)=>S(B)&&S(B)(...t)),title:"Cut"},Nn,8,Pn),h("button",{class:"vp-button",disabled:!S(J),onClick:e[3]||(e[3]=(...t)=>S(R)&&S(R)(...t)),title:"Copy"},Un,8,Fn),h("button",{class:"vp-button",disabled:!S(A),onClick:e[4]||(e[4]=(...t)=>S(L)&&S(L)(...t)),title:"Paste"},Wn,8,jn),h("button",{class:"vp-button",disabled:1!==S(C).length,onClick:e[5]||(e[5]=(...t)=>S(U)&&S(U)(...t)),title:"Rename"},$n,8,Hn),h("button",{class:"vp-button",disabled:!S(J),onClick:e[6]||(e[6]=(...t)=>S(j)&&S(j)(...t)),title:"Delete"},Yn,8,Zn),Vn,W(V,{options:S(lt)},{default:N((()=>[h("button",{class:"vp-button",title:"Open Local Folder",onClick:e[7]||(e[7]=(...t)=>S(st)&&S(st)(...t))},Xn)])),_:1},8,["options"])]),h("div",Kn,[h("div",qn,[h("button",{class:"vp-button",title:"Toggle Sort",onClick:e[8]||(e[8]=t=>v.value=!0)},Gn),W(F,{name:"fade-scale"},{default:N((()=>[W(X,{visible:S(v),"onUpdate:visible":e[9]||(e[9]=t=>K(v)?v.value=t:null),options:S(b)},null,8,["visible","options"])])),_:1})]),h("button",{class:"vp-button",onClick:e[10]||(e[10]=(...t)=>S(D)&&S(D)(...t)),title:"Toggle Select All"},Jn),h("button",{class:"vp-button",onClick:e[11]||(e[11]=t=>S(Z)(null,t)),title:"Menu"},Qn)])]),h("div",{ref_key:"explorerContentRef",ref:O,class:"explorer-content",onClick:e[12]||(e[12]=t=>C.value=[]),onContextmenu:e[13]||(e[13]=p((t=>S(Z)(void 0,t)),["prevent","stop"]))},[h("div",tr,[(s(!0),l(y,null,_(S(w),(t=>(s(),k(we,{class:"selectable",item:t,key:t.name,"data-name":t.name,checked:S(E).has(t),onOpen:ot,onSelect:S(I),onContextmenu:p((e=>S(Z)(t,e)),["prevent","stop"]),onHandleDragStart:e=>S(tt)({item:t,event:e})},null,8,["item","data-name","checked","onSelect","onContextmenu","onHandleDragStart"])))),128))]),(s(),k(q,{to:"body"},[W(Zt,{options:S(H),ref_key:"ctxMenuRef",ref:$},null,8,["options"])]))],544),W(Te),W(Dn,{visible:S(et),"onUpdate:visible":e[14]||(e[14]=t=>K(et)?et.value=t:null),src:S(it),onOnSave:S(nt),onOnCancel:S(rt)},null,8,["visible","src","onOnSave","onOnCancel"])],32)),[[i,S(f)]])}}}),[["__scopeId","data-v-ebfb062e"]]),ir={class:"mc-component-explorer"},nr={class:"explorer-header vp-panel"},rr={class:"nav-address"},ar={class:"nav-wrap"},or=["disabled"],sr=[h("i",{class:"fa fa-chevron-left","aria-hidden":"true"},null,-1)],lr=["disabled"],hr=[h("i",{class:"fa fa-chevron-right","aria-hidden":"true"},null,-1)],cr=["disabled"],dr=[h("i",{class:"fa fa-level-up","aria-hidden":"true"},null,-1)],ur={class:"input-wrap"},fr=["placeholder"],pr=[h("i",{class:"fa fa-refresh","aria-hidden":"true"},null,-1)],mr={key:0,class:"fa fa-star","aria-hidden":"true"},vr={key:1,class:"fa fa-star-o","aria-hidden":"true"},gr={key:0,class:"star-list"},br=["onClick","title","onContextmenu"],wr={class:"explorer-content-wrap scrollbar-mini"},yr=t({name:"InventoryModal",components:{TabLayout:Pt,ViewPortWindow:xt,InventoryList:le,ComponentExplorer:t({__name:"ComponentExplorer",setup(t){const{isLoading:e,filteredFiles:i,handleOpen:n,handleRefresh:r,basePathNormalized:a,starList:o,handleOpenPath:c,backHistory:f,goBack:m,forwardHistory:v,goForward:w,allowUp:k,goUp:x,basePath:C,toggleStar:E,isStared:O,filterText:I}=jt({getListFn:async()=>{const t=await Ht.getList({path:C.value}),e=[];for(const i in t){const n=t[i];let r;Ct.test(n.name)&&(r=await Ht.getFile({path:Wt(C.value+"/"+n.name+"/index.json"),mode:"json"})||{},r.cover=await Ht.getFile({path:Wt(C.value+"/"+n.name+"/cover.base64")})),e.push({...n,meta:r,basePath:C.value})}return e},openEntryFn:async({path:t})=>{const e=await Ht.getFile({path:t});console.log(e)}});return M((()=>{r()})),(t,D)=>(s(),l("div",ir,[h("div",nr,[h("div",rr,[h("div",ar,[h("button",{disabled:S(f).length<=1,class:"btn-action vp-button",onClick:D[0]||(D[0]=(...t)=>S(m)&&S(m)(...t)),title:"Back"},sr,8,or),h("button",{disabled:S(v).length<=0,class:"btn-action vp-button",onClick:D[1]||(D[1]=(...t)=>S(w)&&S(w)(...t)),title:"Forward"},hr,8,lr),h("button",{class:"btn-action vp-button",disabled:!S(k),onClick:D[2]||(D[2]=(...t)=>S(x)&&S(x)(...t)),title:"Up"},dr,8,cr)]),h("div",ur,[g(h("input",{placeholder:`Filter name in ${S(C)}`,"onUpdate:modelValue":D[3]||(D[3]=t=>K(I)?I.value=t:null),class:"input-addr vp-input"},null,8,fr),[[b,S(I)]]),h("button",{class:"vp-button btn-action",onClick:D[4]||(D[4]=(...t)=>S(r)&&S(r)(...t))},pr),h("button",{class:"vp-button btn-action",onClick:D[5]||(D[5]=(...t)=>S(E)&&S(E)(...t))},[S(O)?(s(),l("i",mr)):(s(),l("i",vr))])]),S(o).length?(s(),l("div",gr,[(s(!0),l(y,null,_(S(o),((t,e)=>(s(),l("div",{key:t},[h("button",{onClick:e=>S(c)(t),class:"vp-button",title:t,onContextmenu:p((()=>S(o).splice(e,1)),["prevent"])},d(S($t)(t)),41,br)])))),128))])):u("",!0)])]),h("div",wr,[W(er,{"is-loading":S(e),"onUpdate:isLoading":D[6]||(D[6]=t=>K(e)?e.value=t:null),files:S(i),onOpen:S(n),onRefresh:S(r),"base-path":S(a)},null,8,["is-loading","files","onOpen","onRefresh","base-path"])])]))}})},props:{visible:{type:Boolean,default:!1}},emits:["onItemClick","update:visible"],setup(t,{emit:e}){A();const r=kt(t,e,"visible"),a=i(),o=n(),{play:s}=Tt();return P((()=>o.inventoryTab),(()=>{s()})),{mainStore:a,settingsStore:o,mVisible:r,BlockType:tt,TabType:et,actionBlockItemList:it,htmlBlockItemList:nt,colorHash:bt,playSfxPop:s}}}),_r={key:0,class:"fa fa-caret-square-o-down","aria-hidden":"true"},kr={key:1,class:"fa fa-caret-square-o-up","aria-hidden":"true"};const xr=o(yr,[["render",function(t,e,i,n,r,a){const o=m("InventoryList"),c=m("ComponentExplorer"),p=m("TabLayout"),v=m("ViewPortWindow");return s(),k(v,{class:f(["inventory-modal",{_topLayout:t.settingsStore.enableTopLayout,_docked:t.settingsStore.isInvDocked}]),visible:t.mVisible,"onUpdate:visible":e[4]||(e[4]=e=>t.mVisible=e),wid:"inv","init-win-options":{height:"400px"},"allow-move":!t.settingsStore.isInvDocked},{titleBarLeft:N((()=>[H(" 📦 "+d(t.$t("common.inventory_list")),1)])),titleBarRightControls:N((()=>[h("button",{onClick:e[0]||(e[0]=e=>t.settingsStore.isInvDocked=!t.settingsStore.isInvDocked)},[t.settingsStore.isInvDocked?(s(),l("i",kr)):(s(),l("i",_r))])])),default:N((()=>[W(p,{modelValue:t.settingsStore.inventoryTab,"onUpdate:modelValue":e[3]||(e[3]=e=>t.settingsStore.inventoryTab=e),options:[{label:`Tools (${t.actionBlockItemList.length})`,value:t.TabType.TOOLS},{label:`HTML (${t.htmlBlockItemList.length})`,value:t.TabType.HTML_ELEMENTS},{label:t.$t("common.components"),value:t.TabType.COMPONENTS}]},{default:N((()=>[t.settingsStore.inventoryTab===t.TabType.TOOLS?(s(),k(o,{key:0,"item-list":t.actionBlockItemList,onOnItemClick:e[1]||(e[1]=e=>t.$emit("onItemClick",e))},null,8,["item-list"])):t.settingsStore.inventoryTab===t.TabType.HTML_ELEMENTS?(s(),k(o,{key:1,"item-list":t.htmlBlockItemList,onOnItemClick:e[2]||(e[2]=e=>t.$emit("onItemClick",e))},null,8,["item-list"])):t.settingsStore.inventoryTab===t.TabType.COMPONENTS?(s(),k(c,{key:2})):u("",!0)])),_:1},8,["modelValue","options"])])),_:1},8,["visible","class","allow-move"])}],["__scopeId","data-v-ab008dc9"]]),Cr=t({name:"VStyle",render(){var t,e;return rt("style",null==(e=(t=this.$slots).default)?void 0:e.call(t))}}),Sr=t({name:"DomPreview",components:{VStyle:Cr},props:{id:{type:String,default:""},style:{type:String,default:""}},emits:["styleCompiled"],setup(t,{emit:i}){const{style:n,id:o}=e(t),s=r(""),l=a((()=>o.value?o.value:"dom_preview_temp_id"));return P(n,(async t=>{try{s.value=await at(`div[data-app-name="${l.value}"] { ${t} }`)}catch(e){console.error(e),s.value=""}j((()=>{i("styleCompiled")}))}),{immediate:!0}),{styleRewrote:s,mId:l}}}),Er=["data-app-name"];const Or=t({name:"PopWindow",components:{ViewPortWindow:xt,DomPreview:o(Sr,[["render",function(t,e,i,n,r,a){const o=m("VStyle");return s(),l("div",{"data-app-name":t.mId},[W(o,{id:t.mId},{default:N((()=>[H(d(t.styleRewrote),1)])),_:1},8,["id"]),v(t.$slots,"default")],8,Er)}]])},emits:["update:visible"],setup(t,{emit:e}){const i=r(!1),n=r(null);M((()=>{E.on(O.ON_COMP_PREVIEW,o),E.on(O.ON_COMP_PREVIEW_CLOSE,s)})),L((()=>{E.off(O.ON_COMP_PREVIEW,o),E.off(O.ON_COMP_PREVIEW_CLOSE,s)}));const a=r(),o=t=>{const{item:e,maximum:r=!1}=t||{};n.value=e,a.value.isMaximized=r,i.value=!0},s=t=>{const{maximum:e=!1}=t||{};a.value.isMaximized=e,i.value=!1};return{previewWinRef:a,mVisible:i,previewData:n}}}),Ir=["innerHTML"];const Dr=o(Or,[["render",function(t,e,i,n,r,a){const o=m("DomPreview"),l=m("ViewPortWindow");return s(),k(l,{ref:"previewWinRef",class:"preview-dialog",visible:t.mVisible,"onUpdate:visible":e[0]||(e[0]=e=>t.mVisible=e),wid:"preview","allow-maximum":"","init-win-options":{width:"500px",height:"500px"}},{titleBarLeft:N((()=>{var e;return[H(d(t.$t("actions.preview"))+": "+d(null==(e=t.previewData)?void 0:e.name),1)]})),default:N((()=>[t.previewData&&t.mVisible?(s(),k(o,{key:0,id:t.previewData.id,style:c(t.previewData.style)},{default:N((()=>[h("div",{innerHTML:t.previewData.html},null,8,Ir)])),_:1},8,["id","style"])):u("",!0)])),_:1},8,["visible"])}],["__scopeId","data-v-c25a36ab"]]),Tr=["onKeyup"],zr=o(t({__name:"InputAutoTips",props:{modelValue:{},hid:{}},emits:["update:modelValue","onSelectTip","historyChanged"],setup(t,{emit:e}){const i=t,n=e,o=Y(i,"modelValue",n),d=x(`mc_input_history_${i.hid}`,[]),u=a((()=>{const t=new Set;return d.value.forEach((e=>{t.add(e.label)})),t}));P(d,(t=>{n("historyChanged",t)}),{immediate:!0});const f=()=>{const t=o.value;t&&!u.value.has(t)&&d.value.push({label:t,count:0})},m=r([]),v=()=>{let t=d.value;const e=o.value;e&&(t=t.filter((t=>t.label.toLowerCase().includes(e))).sort(((t,e)=>e.count-t.count)));const i=t.slice(0,9).map((t=>({label:`${t.label} (${t.count})`,props:{onClick:()=>{o.value=t.label,t.count++,n("onSelectTip",t.label),M()},onContextmenu:()=>{window.$dialog.confirm("Delete history item?","Delete",{type:"warning"}).then((()=>{const e=d.value.findIndex((e=>e.label===t.label));-1!==e&&(d.value.splice(e,1),v())})).catch()}}})));D(),i.length?m.value=[...i,{label:"🧹 Clear History",props:{onClick:()=>{window.$dialog.confirm("Confirm clear history?","",{type:"warning"}).then((()=>{d.value=[],v(),M()})).catch()}}}]:m.value=[]};ot(o,(()=>{v()}),{debounce:300,immediate:!0});const{menuRef:y,ctxMenuStyle:_,showMenuByPoint:E,isShow:O,updateCardSize:I}=st({getExtraSize(){const{height:t}=T.value.getBoundingClientRect();return{height:t,width:0}}}),D=C((()=>{I()}),300,!0),T=r(),z=r(),A=()=>{if(O.value)return;const t=z.value.getBoundingClientRect();E(t.x,t.y+t.height)},B=()=>{A(),setTimeout((()=>{var t;null==(t=y.value)||t.focus()}))},R=()=>{setTimeout((()=>{var t;(null==(t=y.value)?void 0:t.isFocused())&&(O.value=!1)}),100)},M=()=>{setTimeout((()=>{T.value.focus(),R()}),100)},L=()=>{f(),v(),R()};return(t,e)=>(s(),l("div",{ref_key:"rootRef",ref:z,class:"mc-input-auto-tips"},[(s(),k(q,{to:".page-craft-root"},[W(F,{name:"mc-fade-scale"},{default:N((()=>[W(X,{ref_key:"menuRef",ref:y,style:c({...S(_),transition:"all .2s"}),class:"auto-tips-wrap",options:S(m),visible:S(O),"onUpdate:visible":e[0]||(e[0]=t=>K(O)?O.value=t:null),"auto-focus":!1,"close-on-click":!1,onOnClose:M},null,8,["style","options","visible"])])),_:1})])),g(h("input",lt({ref_key:"inputRef",ref:T,"onUpdate:modelValue":e[1]||(e[1]=t=>K(o)?o.value=t:null),type:"text",placeholder:"CSS class",class:"vp-input sl-css-class-input"},t.$attrs,{onFocus:A,onClick:A,onBlur:L,onKeyup:[e[2]||(e[2]=w((t=>o.value=""),["esc"])),w(p(f,["stop"]),["enter"]),w(p(B,["prevent"]),["up"]),w(p(B,["prevent"]),["down"])],onInput:A}),null,16,Tr),[[b,S(o)]])],512))}}),[["__scopeId","data-v-d10aa0c8"]]),Ar={$monacoClassNameHistory:[],$monacoScssVariables:[],$monacoScssSnippets:[],$monacoScssSnippetsCustom:[]};Yt.languages.registerCompletionItemProvider("scss",{triggerCharacters:[".","$","`"],provideCompletionItems:(t,e)=>{const i=()=>({insertTextRules:Yt.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:new Yt.Range(e.lineNumber,1,e.lineNumber,e.column)}),n=(t=[])=>(t||[]).map((t=>{let e=t.label.toLowerCase();return/^\./g.test(e)||(e="`"+e),{...i(),label:e,insertText:t.snippet,kind:Yt.languages.CompletionItemKind.Snippet}}));return{suggestions:[...((t=[])=>(t||[]).map((t=>{let e="";return t.label.split(" ").forEach((t=>{e+="."+t})),{...i(),kind:Yt.languages.CompletionItemKind.Keyword,label:`${e}`,insertText:`${e} {\n  \${1:}\n}`}})))(Ar.$monacoClassNameHistory),...((t=[])=>(t||[]).map((t=>({...i(),label:t,insertText:t,kind:Yt.languages.CompletionItemKind.Variable}))))(Ar.$monacoScssVariables),...n(Ar.$monacoScssSnippets),...n(Ar.$monacoScssSnippetsCustom)]}}});const Br=t({name:"BottomToolBar",components:{ClassNameInput:t({__name:"ClassNameInput",setup(t){const e=i(),n=()=>{const t=e.className;if(!t)return;let i="";t.split(" ").forEach((t=>{i+="."+t}));const n=`\n${i} {\n}\n`;E.emit(O.ON_ADD_STYLE,{code:n,isAppend:!1}),e.className=""},r=t=>{Ar.$monacoClassNameHistory=t};return(t,i)=>(s(),l(y,null,[W(zr,{modelValue:S(e).className,"onUpdate:modelValue":i[0]||(i[0]=t=>S(e).className=t),class:"sl-css-class-input font-code",title:"Focus shortcut: alt+1\nPress enter to insert css class\nInput without dot(.)",hid:"class",onKeyup:w(n,["enter"]),onHistoryChanged:r},null,8,["modelValue"]),g(h("input",{type:"text","onUpdate:modelValue":i[1]||(i[1]=t=>S(e).innerText=t),placeholder:"innerHTML | src | value",title:"Focus shortcut: alt+2\nPress esc to clear",class:"vp-input sl-inner-html-input font-code",onKeyup:i[2]||(i[2]=w((t=>S(e).innerText=""),["esc"]))},null,544),[[b,S(e).innerText]])],64))}}),PreviewWindow:Dr,ToolItem:Gt,InventoryModal:xr},setup(t,{emit:e}){A(),dt();const a=i(),o=n(),s=x(ht.TOOL_BAR_LIST,[...ct]),l=r(-1),h=t=>{l.value=t,setTimeout((()=>{l.value=-1}),200)},c=t=>{a.setCurrentBlock(t),d()},{play:d,stop:u}=zt();P((()=>o.toolbarIndex),(t=>{c(s.value[t]),u(),d()}));const f=()=>{o.toolbarIndex!==s.value.length-1?o.toolbarIndex+=1:o.toolbarIndex=0},p=()=>{o.toolbarIndex<=0?o.toolbarIndex=s.value.length-1:o.toolbarIndex-=1},m=t=>{t.preventDefault(),t.deltaY>0?f():p()},v=t=>{t.shiftKey&&(t.deltaY>0?f():p())},g=r();L((()=>{c(s.value[o.toolbarIndex])})),M((()=>{document.addEventListener("wheel",v),g.value.addEventListener("wheel",m,{passive:!1})})),L((()=>{document.removeEventListener("wheel",v),g.value.removeEventListener("wheel",m)}));const b=r(!0);return At((()=>o.showInventory)),{settingsStore:o,toolbarRef:g,toolBarList:s,mainStore:a,setCurrentToolItem:t=>{const e=[...s.value];e.splice(o.toolbarIndex,1,t),s.value=e,c(t),h(o.toolbarIndex)},handleToolItemClick:(t,e)=>{o.toolbarIndex=e,d()},resetToolbar(){s.value=[...ct],c(s.value[o.toolbarIndex]),window.$message.success("Toolbar reset success!")},handleDragStart:(t,e,i)=>{t.dataTransfer.setData("data-index",e),t.dataTransfer.setData("data-block",JSON.stringify(i))},switchItemsPosition:(t,e)=>{const i=Number(t.dataTransfer.getData("data-index"))||o.toolbarIndex,n=[...s.value];[n[e],n[i]]=[n[i],n[e]],s.value=n,i===o.toolbarIndex&&(o.toolbarIndex=e),h(e)},blinkAnimIndex:l,isShowPreviewDialog:b}}}),Rr={ref:"toolbarRef",class:"mc-toolbar vp-panel vp-window-panel _panel-bg"},Mr={class:"mc-toolbar-above"},Lr={class:"mc-toolbar-group"},Pr={class:"mc-toolbar-group"},Nr=h("button",{class:"vp-button"},[h("i",{class:"fa fa-refresh","aria-hidden":"true"})],-1),Fr=h("i",{class:"fa fa-archive","aria-hidden":"true"},null,-1),Ur=h("i",{class:"fa fa-wrench","aria-hidden":"true"},null,-1),jr={class:"mc-toolbar-main scrollbar-mini"};const Wr=o(Br,[["render",function(t,e,i,n,r,a){const o=m("PreviewWindow"),c=m("InventoryModal"),p=m("portal-target"),g=m("ClassNameInput"),b=ut,w=m("ToolItem");return s(),l(y,null,[W(o),t.settingsStore.isInvDocked?u("",!0):(s(),k(c,{key:0,visible:t.settingsStore.showInventory,"onUpdate:visible":e[0]||(e[0]=e=>t.settingsStore.showInventory=e),onOnItemClick:t.setCurrentToolItem},null,8,["visible","onOnItemClick"])),h("div",{class:f(["page-craft-toolbar-root",{_topLayout:t.settingsStore.enableTopLayout}])},[t.settingsStore.isInvDocked?(s(),k(c,{key:0,visible:t.settingsStore.showInventory,"onUpdate:visible":e[1]||(e[1]=e=>t.settingsStore.showInventory=e),onOnItemClick:t.setCurrentToolItem},null,8,["visible","onOnItemClick"])):u("",!0),h("div",Rr,[h("div",Mr,[h("div",Lr,[W(p,{name:"indicatorBarTeleportDest"}),W(g)]),h("div",Pr,[W(b,{title:t.$t("msgs.confirm_reset_toolba"),onConfirm:t.resetToolbar},{reference:N((()=>[Nr])),_:1},8,["title","onConfirm"]),h("button",{class:f(["vp-button",{primary:t.settingsStore.showInventory}]),style:{"min-width":"80px"},onClick:e[2]||(e[2]=e=>t.settingsStore.showInventory=!t.settingsStore.showInventory),title:"(alt+a)"},[Fr,H(" "+d(t.$t("common.inventory")),1)],2),v(t.$slots,"default"),h("button",{class:f(["vp-button",{primary:t.mainStore.isShowQuickLaunch}]),onClick:e[3]||(e[3]=e=>t.mainStore.isShowQuickLaunch=!t.mainStore.isShowQuickLaunch)},[Ur,H(" "+d(t.$t("common.toolbox")),1)],2)])]),h("div",jr,[(s(!0),l(y,null,_(t.toolBarList,((e,i)=>(s(),k(w,{key:i,item:e,class:f({blinkFast:t.blinkAnimIndex===i}),onClick:n=>t.handleToolItemClick(e,i),active:t.settingsStore.toolbarIndex===i,onOnDragStart:n=>t.handleDragStart(n,i,e),onOnDrop:e=>t.switchItemsPosition(e,i)},null,8,["item","class","onClick","active","onOnDragStart","onOnDrop"])))),128))])],512),v(t.$slots,"end")],2)],64)}]]),Hr=(t=>(J("data-v-6a4d529c"),t=t(),Q(),t))((()=>h("i",{class:"fa fa-paint-brush","aria-hidden":"true"},null,-1))),$r=o(t({__name:"CraftPage",setup(t){const e=vt((()=>gt((()=>import("./index-DI_545Ax.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]),import.meta.url))),{t:a}=A(),o=n(),c=i(),{play:u}=Bt(),{play:p}=Rt();At((()=>o.showStyleEditor)),Mt((()=>c.selecting)),P((()=>o.enableSoundFx),(()=>{window.$dialog.confirm(a("msgs.refresh_page"),a("actions.confirm"),{type:"warning"}).then((()=>{location.reload()})).catch()})),ft(document,"keydown",(t=>{const e=t.key.toLowerCase();if(t.altKey&&"a"===e&&!t.ctrlKey)o.showInventory=!o.showInventory;else if(t.altKey&&"s"===e&&!t.ctrlKey)o.showStyleEditor=!o.showStyleEditor;else if(t.altKey&&"w"===e)c.isShowSettings=!c.isShowSettings;else if(t.altKey&&"1"===e){const t=document.querySelector(".sl-css-class-input input");t&&t.focus()}else if(t.altKey&&"2"===e){const t=document.querySelector(".sl-inner-html-input input");t&&t.focus()}}));const{loadCurCompStyle:m,saveCurCompStyle:v}=Dt(),g=r(),b=r(!1),w=r("");P(w,(async()=>{b.value&&await v(w.value)}));const _=async()=>{b.value=!1,w.value=await m(),setTimeout((()=>{b.value=!0}),100)};return M((async()=>{await _()})),P((()=>o.curCompInStore),(async()=>{await _()})),pt(O.IMPORT_SUCCESS,_),pt(O.ON_ADD_STYLE,(t=>{g.value.handleAddStyle(t)})),(t,i)=>(s(),l(y,null,[h("div",{class:f(["page-craft-home-view",{_topLayout:S(o).enableTopLayout}])},[W(Lt),W(Wr,null,{end:N((()=>[])),default:N((()=>[h("button",{class:f(["vp-button",{primary:S(o).showStyleEditor}]),style:{"min-width":"70px"},onClick:i[0]||(i[0]=t=>S(o).showStyleEditor=!S(o).showStyleEditor),title:"(alt+s)"},[Hr,H(" "+d(S(a)("common.style")),1)],2)])),_:1})],2),W(S(e),{ref_key:"styleEditorRef",ref:g,visible:S(o).showStyleEditor,"onUpdate:visible":i[1]||(i[1]=t=>S(o).showStyleEditor=t),selecting:S(c).selecting,"onUpdate:selecting":i[2]||(i[2]=t=>S(c).selecting=t),styleCode:S(w),"onUpdate:styleCode":i[3]||(i[3]=t=>K(w)?w.value=t:null),"selecting-parent-class":S(mt),onOnFormat:S(u),onOnInsertCode:S(p),"show-tabs":""},null,8,["visible","selecting","styleCode","selecting-parent-class","onOnFormat","onOnInsertCode"])],64))}}),[["__scopeId","data-v-6a4d529c"]]),Zr=Object.freeze(Object.defineProperty({__proto__:null,default:$r},Symbol.toStringTag,{value:"Module"}));export{Zr as C,Ar as m};
