const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./howler-BJkMe7m-.js","./index-BJklM7uy.js","./index-CcByjSMb.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n);import{r as a,N as n,ak as l,y as o,P as s,a as r,s as i,I as c,ae as u,K as d,M as A,al as p,am as m,a7 as v,an as g,a9 as b,R as y,O as h,u as f,ao as w,c as S,ap as C,S as T,aq as E,ar as k,as as _,at as x,A as M,G as L,au as R,av as P,d as H,a3 as U,t as O,_ as D,p as N,Q as $,U as I,f as B,aw as V,h as F,q as z,V as j,o as q,ax as W,ay as G,az as J,e as X,F as Y,g as K,n as Z,aA as Q,aB as ee,ah as te,T as ae,a0 as ne,X as le,a1 as oe,w as se,i as re,af as ie,m as ce,W as ue,$ as de,aC as Ae,aD as pe,aE as me,aF as ve,aG as ge}from"./index-BJklM7uy.js";/* empty css                  *//* empty css                        *//* empty css                        *//* empty css                   *//* empty css                    */import{A as be}from"./enum-CdO7LyZZ.js";import{u as ye,a as he}from"./use-beforeunload-cpGEAtLA.js";import{n as fe,f as we}from"./index-BVPZ2aTg.js";import{p as Se}from"./index-vcidOvW8.js";import{V as Ce}from"./index-BB5hC_Ln.js";import{u as Te}from"./use-model-wrapper-Cm8bqa9M.js";import{_ as Ee}from"./index.vue_vue_type_style_index_0_lang-B7OiTwk5.js";import{_ as ke}from"./QuickContextMenu.vue_vue_type_script_setup_true_lang-DIpGAXu5.js";function _e(e,{volume:t=1,playbackRate:r=1,soundEnabled:i=!0,interrupt:c=!1,autoplay:u=!1,onload:d,...A}={}){const p=a(null),m=a(!1),v=a(null),g=a(null);function b(e){var t;"function"==typeof d&&d.call(this,e),v.value=1e3*(v.value||(null==(t=g.value)?void 0:t.duration())||0),!0===u&&(m.value=!0)}n((async()=>{await l((()=>import("./howler-BJkMe7m-.js").then((e=>e.h))),__vite__mapDeps([0,1,2]),import.meta.url),p.value=Howl,g.value=new p.value({src:o(e),volume:o(t),rate:o(r),onload:b,...A})})),s((()=>[o(e)]),(()=>{p.value&&p.value&&g&&g.value&&(g.value=new p.value({src:o(e),volume:o(t),rate:o(r),onload:b,...A}))})),s((()=>[o(t),o(r)]),(()=>{g.value&&(g.value.volume(o(t)),g.value.rate(o(r)))}));return{play:e=>{void 0===e&&(e={}),g.value&&(i||e.forceSoundEnabled)&&(c&&g.value.stop(),e.playbackRate&&g.value.rate(e.playbackRate),g.value.play(e.id),g.value.once("end",(()=>{g.value&&g.value&&!g.value.playing()&&(m.value=!1)})),m.value=!0)},sound:g,isPlaying:m,duration:v,pause:e=>{g.value&&(g.value.pause("number"==typeof e?e:void 0),m.value=!1)},stop:e=>{g.value&&(g.value.stop("number"==typeof e?e:void 0),m.value=!1)}}}const xe=""+new URL("open-UeZQ83h4.ogg",import.meta.url).href,Me=""+new URL("close1-BakA0P2g.ogg",import.meta.url).href,Le=""+new URL("select_pattern_mix-DXw_mqqO.ogg",import.meta.url).href,Re=""+new URL("wood_mix-zCSPzndQ.ogg",import.meta.url).href,Pe=""+new URL("grass_mix-BApjfdS6.ogg",import.meta.url).href,He=""+new URL("loading_middle2-D1wQur0C.ogg",import.meta.url).href,Ue=""+new URL("shoot2-Bgro1KOW.ogg",import.meta.url).href,Oe=""+new URL("brushing_generic2-B670JkA0.ogg",import.meta.url).href,De=""+new URL("bell-XX7Mxd8B.ogg",import.meta.url).href,Ne=""+new URL("fill1-B_y51Az1.ogg",import.meta.url).href,$e=""+new URL("guitar-BG0qG-kv.ogg",import.meta.url).href,Ie=""+new URL("bass-FEG0pYKb.ogg",import.meta.url).href,Be=e=>{const t=r(),{play:a}=_e(xe,{volume:1,soundEnabled:t.enableSoundFx}),{play:n}=_e(Me,{volume:1,soundEnabled:t.enableSoundFx});s(e,(e=>{e?a():n()}))},Ve=e=>{const t=r(),{play:a}=_e(He,{volume:1,soundEnabled:t.enableSoundFx}),{play:n}=_e(Ue,{volume:1,soundEnabled:t.enableSoundFx});s(e,(e=>{e?a():n()}))},Fe=()=>{const e=r(),{play:t,stop:a}=_e(Le,{volume:1,soundEnabled:e.enableSoundFx,sprite:{id_0:[0,500],id_1:[600,539],id_2:[1196,539],id_3:[1878,576],id_4:[2472,696]}});return{play:()=>{t({id:`id_${Math.floor(5*Math.random())}`})},stop:a}},ze=()=>{const e=r();return _e(Oe,{volume:1,soundEnabled:e.enableSoundFx})},je=()=>{const e=r();return _e(Ne,{volume:1,soundEnabled:e.enableSoundFx})},qe=()=>_e("data:audio/mpeg;base64,SUQzAwAAAAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+7BgAAAG0WjNZT8gCAAACXCgAAEaeXdl+P2AAAAAJcMAAACyFElJrUoQua0XwehGG+h6Hqur9jT6jV8dsQxYdMdQeFI2GIUZxgQYFyzquOpwHMMbRXTDgepjGJZunp6fPUocuH78ofx/JZjG3IdyWXZXDcbtzD/w/3k21td7T3gQlphuvclmMrn4g5cP5SiWY08vyjdvVJY3T26j/v/L8pRGIcnJtyH8sbz1SWNxiWczz/DDeGGH509Pbwjcvt//591nnn+sMOfhhh/7z7rPPP9YYfnSWN59qSiWY0lJSYfnnnnhzeeffwwz/WH50+eqenqcUOcH/8McRn+cyBNBHBCRCKGZCKLZTSSiVbZLDvG8ZZJyCtIxyWo0sI+gWAQQvg3j/KQCBRWDVSsVdNTUysfOkYgcmGhGIMHAQCAUUMEGxpVp37bg0xypLRacyta1QTMPzMjuZb3Vy/mtRhg70K4a8XclOOsssf/H/9WBKgtovRl9qWQy7UPWrsts73///3909mV27tP3v45dlNbKZ3397/9dlcvwl+WHcOc7uls1cd6/W8df+u///r9a5nSWM4pE5/lTCpU3q1+sqbuNarGbwl9KJQ/eQ7iYWQ39kqdWtASxAAAGlAAACr6qQCckkkZdcvW6zhQLMuLKJp+xoqGy/Wqq2us6UAzbJpcwVUEvRtBLEsi+jXn3CxU1VhYZ9rTlP1dwiNFqamce2saX+XZBhMztNn2W2ZTKsn2v2sY5FZb96Zd2TVq+Ebzwp61NTXLVXKU45XJVD3KbKxarbyypddl1NLsNW7/eXs7s7hyxdjMetUErprWeN3DX/ruuZf/7sGBLAAZOaNRXYwAEAAAJcOAAARp5oz+n4Y2QAAAlwAAABJ/jc3VrZZ2O93Kb1bLfO481/7x/dnG5V1Q1KtSu4LOYdi0SeZ5d1m4wmeitJuT3bGuarVpIkSSAE3JJIH8nTCV53qEoxQMieO40R9G8r4JiCRUCK+YmpqwF7ZCqxca7jBMEHOkUjFmKXqPZR5QJ82eSZ+ZLB3YdZc/VaBZVnDUWlsCDrhyPsO0Oz3VpWR8Qh0Nko5Hw8kW5ODofwOpVBahPgWPYj4qtLYx6jaBq6ZHNDJf2LzFKeH0ZNmA5gquSzQnWQ3lGnxyDUsD4fTey+iejq6NmFEZcrOn1tJbWurjno3aMtXjd6ON2cs0hbAZLlyvFqU5JpeMkzYkk3KgWB8dSAOzC8bhskN9vrWQbtbbbNO0w5Y0ugMCBWYY7HbqEBa50RUhrE19QEEJLvM3BAy0KmJd1SIVMXSbElckaYBgbINcRLQGl9lqsbNTwhLRkwpfYnoagtdryyqHqbK7DTvU8MzuoanpmGr/NzPw4olst203crapyKP7bNGqBsJblVTm1rmz/SX3tVPM1yMVPYGgkSJU8ybW/zPp6r+nzzXmWqqeiWz/2Oyt9U8zTzMtVU3bSKMtwURoob/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////uwYKMAD/lpSmsYM3JGgAlwAAABAAABLgAAACAAACXAAAAE////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+P//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+7BApwAP/ABLgAAACE6ACXAAAAEAAAEuAAAAIAAAJcAAAAT/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",{volume:1,soundEnabled:r().enableSoundFx}),We=/\.comp$/i;let Ge=1;const Je=(e,t)=>localStorage.getItem(e+"__"+t)||"",Xe=async(e,t,a)=>{await we.createFile({path:fe(e+"/"+t),file:a,isOverride:!0})},Ye=async(e,t,a)=>await we.getFile({path:fe(e+"/"+t),mode:a}),Ke=e=>{const{files:t,basePath:a,isLoading:n,emit:l}=e;r();const{t:o}=c(),s=async e=>{const t=`${e.name}.comp`,n=fe(a.value+"/"+t);await we.createDir({path:n});const l={id:e.id||d(),timeCreated:e.timestamp};await Xe(n,"index.json",JSON.stringify(l)),await Xe(n,"index.html",e.html),await Xe(n,"index.scss",e.style),e.cover&&await Xe(n,"cover.base64",e.cover)},i=async e=>{if(!e.meta)throw new Error("item must has meta");const t=fe(a.value+"/"+e.name),n=await Ye(t,"index.html"),l=await Ye(t,"index.scss");return{id:e.meta.id,name:e.name.replace(We,""),timestamp:e.meta.timeCreated,html:n,style:l,cover:e.meta.cover}};return{handleCreateComponent:async()=>{try{const e=await((e="",a="",n="")=>window.$mcUtils.showInputPrompt({title:e,value:a,placeholder:n,validateFn:e=>{if(t.value.find((t=>t.name===e)))return o("msgs.name_already_exists")}}))(o("actions.add_component"),`Component${Ge}`,o("msgs.please_enter_the_nam")),a=`${e}.comp`;if((e=>{if(console.log(e,t.value),t.value.some((t=>t.name===e)))return window.$message.error("Filename already exists, please rename it!"),!0})(a))return;n.value=!0;const r=Se(e||"my-component"),i=d();await s({id:i,name:e,timestamp:Date.now(),html:`<div class="${r}"></div>`,style:`.${r} {\n}\n`}),Ge++,l("refresh"),setTimeout((()=>{var e;null==(e=document.querySelector(`.mc-comp-item[data-name="${a}"]`))||e.click()}),100)}finally{n.value=!1}},importComponentAllJson:async e=>{for(let t=0;t<e.length;t++)await s(e[t])},exportComponentAllJson:async e=>{const t=await A("","PageCraftAllComponents");if(!t)return;const a=[];for(let n=0;n<e.length;n++)a.push(await i(e[n]));window.$mcUtils.handleExportFile(t,JSON.stringify(a,null,2),".json")},importComponentJson:s,exportComponentJson:i}},Ze=()=>{const e=r(),t=async t=>{if(!e.curCompInStore)return Je(u.DEFAULT_CANVAS,t);const{path:a}=e.curCompInStore;return await Ye(a,t)},a=async(t,a)=>{if(!e.curCompInStore)return n=u.DEFAULT_CANVAS,l=t,o=a,localStorage.setItem(n+"__"+l,o);var n,l,o;const{path:s}=e.curCompInStore;return await we.writeFile({path:fe(s+"/"+t),file:a})};return{openComponent:(t,a)=>{e.curCompInStore=((e,t)=>{if(!e.meta)throw new Error("item has no meta");return{id:e.meta.id,title:e.name.replace(We,""),path:t,basePath:e.basePath}})(t,a)},loadCurCompHtml:async()=>await t("index.html"),saveCurCompHtml:async e=>await a("index.html",e),loadCurCompStyle:async()=>await t("index.scss"),saveCurCompStyle:async e=>await a("index.scss",e)}},Qe=e=>{const t=i("component_is_migrated_v2",!1),l=a(!1),o=async()=>{if(t.value||l.value)return;l.value=!0;const a=(JSON.parse(localStorage.getItem(u.COMP_INDEX_LIST)||"null")||[]).map((({name:e})=>((e,t={})=>new p({blockType:v.COMPONENT,title:e,data:new m(t)}))(e,JSON.parse(Je(u.COMP_META,e)||"{}"))));for(let e=0;e<a.length;e++){const t=a[e],{title:n,data:{timestamp:l,stared:o,cover:s}}=t,r=fe((o?"/@Migrated/Stared":"/@Migrated")+"/"+`${n}.comp`),i={id:d(),timeCreated:l};await Xe(r,"index.json",JSON.stringify(i)),await Xe(r,"index.html",Je(u.COMP_HTML,n)),await Xe(r,"index.scss",Je(u.COMP_STYLE,n)),s&&await Xe(r,"cover.base64",s)}t.value=!0,e("refresh")};n((async()=>{await o()}))},et={indent_size:"2",indent_char:" ",max_preserve_newlines:"1",preserve_newlines:!0,keep_array_indentation:!1,break_chained_methods:!1,indent_scripts:"normal",brace_style:"collapse",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!1,end_with_newline:!1,wrap_line_length:"110",indent_inner_html:!1,comma_first:!1,e4x:!1,indent_empty_lines:!1},tt=e=>window.html_beautify(e,et),at=(e,t={})=>window.css_beautify(e,et),nt=async(e,t)=>{const{html:a,style:n}=e,{isInline:l=!1,inlineWithStyleTag:o=!1}=t||{};let s="";l&&(s+="-inline",o&&(s+="-with-style-tag"));const r=await A(e.name?e.name+s:""),i=n?at(await b(n)):"";let c;l?(c=window.$juice(`<style>${i}</style>\n${a}`),o&&(c=`<style>${i}</style>${c}`),c=tt(c)):c=`<!doctype html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport"\n        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">\n  <meta http-equiv="X-UA-Compatible" content="ie=edge">\n  <title>${r}</title>\n  <style>\n    ${i}\n  </style>\n</head>\n<body>\n${a}\n</body>\n</html>\n`,g(r,c,".html")},lt=async(e,t=2)=>{const{html:a,style:n}=e,l=await A(e.name),o=`\n<style lang="scss" scoped>\n${n}\n</style>\n`;let s="";s=3===t?`<script lang="ts">\nimport {defineComponent} from 'vue'\n\nexport default defineComponent({\n  name: '${l}',\n})\n<\/script>\n\n<template>\n${a}\n</template>\n\n${o}\n`:`<template>\n${a}\n</template>\n\n<script>\nexport default {\n  name: '${l}',\n}\n<\/script>\n\n${o}\n`,s.trim(),g(l,s,".vue")},ot=e=>new Promise(((t,a)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=e=>{a(e)},n.readAsDataURL(e)})),st=".page-craft-mc",rt=(e="my_channel",t)=>{const a=y();return n((()=>{const n=new BroadcastChannel(e);t&&(n.onmessage=e=>{t(e)}),a.value=n})),h((()=>{a.value&&a.value.close()})),{channelRef:a}},it=["img","iframe","video","audio","source","track","embed","object","picture","script","link"],ct=(e,t)=>{const{innerText:a="",className:n=""}=t||{},l=a||"",o=e.data.tag,s=document.createElement(o);return it.includes(o)?(["audio","video"].includes(o)&&(s.controls=!0),s.src=l):"input"===o?s.setAttribute("placeholder",l):["br","hr"].includes(o)||(s.innerHTML=l),n&&(s.className=n),s},ut=async e=>{const t=await navigator.clipboard.readText();return"src"in e?e.src=t:e.innerHTML=t,t},dt=(e,t=0)=>({label:e,key:e,type:be.INPUT,props:{clearable:!0,type:t>0?"textarea":void 0,rows:t}}),At=e=>({label:e,key:e,type:be.SWITCH,props:{checkedValue:"true"}}),pt={src:{label:"src",key:"src",type:be.INPUT,props:{clearable:!0}},alt:dt("alt"),href:{label:"href",key:"href",type:be.INPUT,props:{clearable:!0}},target:{label:"target",key:"target",type:be.SELECT,options:E(["_blank","_self","_parent","_top"]),props:{clearable:!0}},rel:{label:"rel",key:"rel",type:be.SELECT,options:E(["nofollow noopener noreferrer","nofollow"]),props:{clearable:!0}},poster:{label:"poster",key:"poster",type:be.INPUT,props:{clearable:!0}},placeholder:dt("placeholder",1),name:dt("name"),inputType:{label:"type",key:"type",type:be.SELECT,options:E(["text","email","number","password","tel","button","submit","checkbox","radio","color","date","datetime","time","datetime-local","month","week","file","image","range","reset","search","url","hidden"]),props:{filterable:!0,clearable:!0}},frameborder:{label:"frameborder",key:"frameborder",type:be.SELECT,options:E(["0"]),props:{clearable:!0}},srcdoc:dt("srcdoc",2),required:At("required"),disabled:At("disabled"),readonly:At("readonly"),title:dt("title",1),tabindex:{label:"tabindex",key:"tabindex",type:be.INPUT_NUMBER},id:dt("id"),className:dt("class"),dir:{label:"dir",key:"dir",type:be.SELECT,options:E(["ltr","rtl","auto"]),props:{clearable:!0}},style:dt("style",1)},mt=e=>"cols"in e?(e.children=e.children.map(mt),e):Array.isArray(e)?e=e.map(mt):{...e,key:`customProps.${e.key}`},vt=(e=[])=>{e=[pt.className,...e,[pt.title,pt.id,pt.dir],pt.style];const t=[],a=e=>{"cols"in e?e.children.forEach((e=>a(e))):Array.isArray(e)?e.forEach((e=>a(e))):t.push(e.key)};return e.forEach(a),{getCustomProps:e=>{const a={};return t.forEach((t=>{a[t]=e.getAttribute(t)})),a},updateElement(e,a){t.forEach((t=>{((e,t,a)=>{a?e.getAttribute(t)!==a&&e.setAttribute(t,a):e.removeAttribute(t)})(e,t,a.customProps[t])}))},customFormItems:e}},gt={a:vt([pt.href,[pt.target,pt.rel]]),input:vt([pt.placeholder,[pt.inputType,pt.name,pt.required,pt.disabled,pt.readonly]]),textarea:vt([[pt.name,pt.required,pt.disabled,pt.readonly]]),button:vt([[pt.disabled,pt.tabindex]]),video:vt([pt.src,pt.poster]),img:vt([pt.src,pt.alt]),iframe:vt([pt.src,pt.frameborder,pt.srcdoc])},bt=vt();it.forEach((e=>{gt[e]||(gt[e]=vt([pt.src]))}));const yt=e=>{if(!e)return{tagName:"",innerHTML:"",outerHTML:"",customProps:null};const t=gt[e.tagName.toLowerCase()]||bt;return{tagName:e.tagName||"",innerHTML:e.innerHTML||"",outerHTML:e.outerHTML||"",customProps:t.getCustomProps(e)}};class ht{constructor(e){t(this,"currentPosition"),t(this,"currentTarget"),t(this,"preSelectTarget"),t(this,"targetElement"),t(this,"crossX"),this.currentPosition=null,this.currentTarget=null,this.preSelectTarget=null,this.targetElement=e;const a=document.querySelector(".line-helper-x");a||console.error("crossX is not exist!"),this.crossX=a}hideLine(){this.crossX.classList.remove("visible")}drawLine(e){const t=e.target;if(!t)return;const a=this.targetElement,n=this.crossX,l=function(e,t,a){const n=e.getBoundingClientRect(),l=Math.round((n.bottom-n.top)/3);return{top:a<n.top+l,middle:a>=n.top+l&&a<=n.top+2*l,bottom:a>n.top+2*l}}(t,e.clientX,e.clientY),o=t.getBoundingClientRect();if(l.top&&a!==t){if("top"===this.currentPosition&&this.currentTarget===t)return;this.currentPosition="top",this.currentTarget=t,n.style.top=o.top+"px",n.style.left=o.left+"px",n.style.width=o.width+"px",n.style.height="3px",n.classList.add("visible")}else if(l.bottom&&a!==t){if("bottom"===this.currentPosition&&this.currentTarget===t)return;this.currentPosition="bottom",this.currentTarget=t,n.style.top=o.bottom+"px",n.style.left=o.left+"px",n.style.width=o.width+"px",n.style.height="3px",n.classList.add("visible")}else this.currentPosition="middle",this.currentTarget=t,this.preSelectTarget=t,n.style.top=o.top+"px",n.style.left=o.left+"px",n.style.width=o.width+"px",n.style.height=o.height+"px",n.classList.add("visible")}}const ft=e=>{const{t:t}=c(),{mainPlaygroundRef:l,saveData:o,indicatorOptions:s,copyHtml:i,recordUndo:u}=e,d=f(),A=a(0),p=a(null),m=a(0),g=a(0),b=a(!1),w=a(!1);Be((()=>b.value));const T=y();n((()=>{l.value.addEventListener("contextmenu",F),l.value.addEventListener("pointerdown",O),l.value.addEventListener("pointerup",D),T.value=new ht(l.value)})),h((()=>{l.value.removeEventListener("contextmenu",F),l.value.removeEventListener("pointerdown",O),l.value.removeEventListener("pointerup",D)}));const E=a(null),R=a(null),P=a(!1),H=a();k(H,(e=>{P.value&&setTimeout((()=>{P.value=!1}))}));const U=a(!1),O=e=>{2!==e.button&&(U.value=!0,window.getSelection().removeAllRanges())},D=e=>{if(!U.value)return;const t=window.getSelection();if(E.value=t,!t)return;if(!t.toString())return;const a=t.getRangeAt(0).getBoundingClientRect();R.value=_({x:a.left,y:a.top+a.height,width:a.width,height:a.height}),P.value=!0,U.value=!1},N=[...["b","i","u","del","code","mark","kbd","a","sup","sub","small","big","span","div","br"].map((e=>({label:e,onClick:()=>{u();const t=document.createElement(e);"br"===e?(e=>{try{if(window.getSelection){const t=window.getSelection();if(t){const a=t.getRangeAt(0);a.collapse(!1),a.insertNode(e)}}}catch(t){window.$message.error(t.message),console.error(t)}})(t):(e=>{try{if(window.getSelection){const t=window.getSelection();t&&t.rangeCount&&(t.getRangeAt(0).cloneRange().surroundContents(e),t.removeAllRanges())}}catch(t){window.$message.error(t.message),console.error(t)}})(t),o(),q()}})))],$=async(e,t="beforeend",a)=>{u(),a||(a=await navigator.clipboard.readText()),e.insertAdjacentHTML(t,a),o(),q()},I=(e,t="append",a)=>{u(),a||(a=ct(d.currentBlock,d)),e[t](a),o(),q()},B=a(null),V=a(),F=e=>{var t;const a=null==(t=E.value)?void 0:t.toString();!s.enableRightClick||a||e.ctrlKey||(e.preventDefault(),d.currentBlock.actionType===C.DEBUG&&console.log("[handleContextMenu]",e),B.value=e.target,V.value.showMenu(e))},z=S((()=>{const e=B.value;if(!e)return[];const a=e===l.value,n={label:"✏️ "+t("actions.edit_element"),props:{onClick:async()=>{b.value=!0,w.value=a}}},s=a?[n]:[n,{label:`📄 ${t("actions.copy")} HTML`,props:{onClick:async()=>{i(e)}}},{label:"✂️ "+t("actions.cut"),props:{onClick:async()=>{var t;x(e.outerHTML),u(),null==(t=e.parentNode)||t.removeChild(e),o(),W()}}},{label:"❌ "+t("actions.remove_element"),props:{onClick:async()=>{var t;u(),null==(t=e.parentNode)||t.removeChild(e),o(),W()}}}];return[d.currentBlock.blockType===v.HTML_ELEMENT&&{label:`➕ ${t("actions.insert")} ${d.currentBlock.title}`,children:a?void 0:["before","prepend","append","after"].map((a=>({label:`${t("actions.insert")} ${a}`,props:{onClick:async()=>{I(e,a)}}}))),props:{onClick:async()=>{I(e),contextMenuEtc.showRightMenu.value=!1}}},...s,{label:`📃 ${t("actions.paste")} outerHTML`,children:a?void 0:["beforebegin","afterbegin","beforeend","afterend"].map((a=>({label:`${t("actions.paste_at")} ${a}`,props:{onClick:async()=>{await $(e,a)}}}))),props:{onClick:async()=>{await $(e),contextMenuEtc.showRightMenu.value=!1}}},{label:"🎈 "+t("actions.paste_replace_value"),props:{onClick:async()=>{await(async e=>{u(),await ut(e),o(),q()})(e),contextMenuEtc.showRightMenu.value=!1}}},{split:!0},{label:"💻 "+t("actions.print_to_console"),props:{onClick:async()=>{console.log(B.value)}}}].filter(Boolean)})),j=S((()=>s.enableSelection||d.currentBlock.actionType===C.DEBUG||d.currentBlock.actionType===C.PASTE_REPLACE)),{play:q}=(()=>{const e=r(),{play:t}=_e(Re,{volume:1,soundEnabled:e.enableSoundFx,sprite:{id_0:[0,300],id_1:[420,300],id_2:[900,300],id_3:[1420,300]}});return{play:()=>t({id:`id_${Math.floor(4*Math.random())}`})}})(),{play:W}=(()=>{const e=r(),{play:t}=_e(Pe,{volume:1,soundEnabled:e.enableSoundFx,sprite:{id_0:[0,400],id_1:[400,500],id_2:[900,400],id_3:[1400,600]}});return{play:()=>t({id:`id_${Math.floor(4*Math.random())}`})}})(),G=async(e,t,a)=>{t||(t=d.currentBlock),t.actionType!==C.CURSOR&&t.actionType!==C.DEBUG&&t.actionType!==C.DRAG&&u(),a=a||d,await(async(e,t,a,n)=>{let l=t.target||n.value;if(e.blockType===v.ACTIONS){if(e.actionType===C.PASTE_REPLACE)return void(await ut(l));if(e.actionType===C.DEBUG){console.log("[event]",t);const e=t.target;for(var o=e.previousSibling;o&&1!==o.nodeType;)o=o.previousSibling;for(var s=e.nextSibling;s&&1!==s.nodeType;)s=s.nextSibling;return console.log({sibling1:o,sibling2:s}),void console.log("[targetEl]",l)}if(e.actionType===C.DELETE){if(l===n.value)return;l.parentNode.removeChild(l)}}else if(e.blockType===v.HTML_ELEMENT){const t=ct(e,a);l.appendChild(t)}})(t,e,a,l),t.actionType===C.DELETE?W():t.actionType!==C.DEBUG&&t.actionType!==C.CURSOR&&q(),o()},J=()=>{clearInterval(p.value),A.value=0,m.value=0,g.value=0},X=S((()=>(A.value/300*100).toFixed(2))),Y=y(null),K=a(null);return{isSelectMode:j,handleBlockClick:G,handleMouseDown:e=>{if(!d.selecting&&0===e.button){if(d.currentBlock.actionType===C.DELETE)return J(),p.value=setInterval((()=>{if(A.value>300)return J(),void G(e);A.value+=50}),50),m.value=e.x,g.value=e.y,void e.preventDefault();Y.value=null,d.currentBlock.actionType!==C.DRAG?G(e):e.target&&(Y.value=e.target,Y.value.draggable=!0)}},handleMouseUp:e=>{d.currentBlock.actionType===C.DELETE&&J(),Y.value&&(Y.value.draggable=!1,Y.value.removeAttribute("draggable"))},handleDragOver:e=>{T.value.drawLine(e)},handleDragLeave:e=>{T.value.hideLine()},handleDrop:async e=>{var t;T.value.hideLine();const a=e.target||l.value,n=T.value.currentPosition,s=async e=>{u(),"top"===n?await $(a,"beforebegin",e):"bottom"===n?await $(a,"afterend",e):await $(a,"beforeend",e),o(),q()};if(Y.value)return Y.value.draggable=!1,Y.value.removeAttribute("draggable"),await s(Y.value.outerHTML),e.ctrlKey||null==(t=Y.value.parentNode)||t.removeChild(Y.value),void(Y.value=null);const r=window.$draggingComponentExportData;if(r)return window.$draggingComponentExportData=null,await s(r.html),void M.emit(L.ON_ADD_STYLE,{code:r.style,isAppend:!0});const i=e.dataTransfer.getData("data-block");if(!i)return console.warn("drag item must be a BlockItem",e),void window.$message.warning("drag item not supported");const c=JSON.parse(i);if(c.blockType===v.HTML_ELEMENT){const e=ct(c,d);I(a,"top"===n?"before":"bottom"===n?"after":"appendChild",e)}else console.warn("block is unable to insert",c)},waitingProgress:X,cursorX:m,cursorY:g,ctxMenuRef:V,ctxMenuOptions:z,selectionActionStyle:R,selectionElRef:H,isShowSelectionAction:P,selectionPopupOptions:N,isShowElementEdit:b,editingNode:B,isEditingRoot:w,updateEditingElement:({el:e,data:t})=>{if(!e)return;u(),((e,t)=>{if(!t.customProps)return void console.error("[updateHtmlElement] data.customProps is not exist!");if(e.outerHTML!==t.outerHTML?e.outerHTML=t.outerHTML:e.innerHTML!==t.innerHTML&&(e.innerHTML=t.innerHTML),!e.outerHTML)return void console.warn("[updateHtmlElement] data.outerHTML is empty!");const a=gt[null==e?void 0:e.tagName.toLowerCase()]||bt;a&&a.updateElement(e,t)})(e,t);const a=K.value;"function"==typeof a&&a(),o()}}};class wt{constructor(e=10){t(this,"undoStack",[]),t(this,"redoStack",[]),t(this,"maxStackSize",100),this.maxStackSize=e}get lastUndo(){return this.undoStack[this.undoStack.length-1]||null}get lastRedo(){return this.redoStack[this.redoStack.length-1]||null}recordUndo(e){this.lastRedo!==e&&(this.undoStack.push(e),this.undoStack.length>this.maxStackSize&&this.undoStack.shift(),this.redoStack=[])}undo(e){return this.undoStack.length>0?(this.redoStack.push(e),this.undoStack.pop()):null}redo(e){return this.redoStack.length>0?(this.undoStack.push(e),this.redoStack.pop()):null}clear(){this.undoStack=[],this.redoStack=[]}getCount(){return this.undoStack.length+this.redoStack.length}}const St=e=>{const{t:t}=c(),{mainPlaygroundRef:l}=e;f();const o=r(),u=a(!1),{loadCurCompHtml:d,saveCurCompHtml:A,loadCurCompStyle:p}=Ze(),m=a(new wt(10));ye((()=>m.value.getCount()>0));const{play:v}=(()=>{const e=r();return _e(De,{volume:1,soundEnabled:e.enableSoundFx})})(),{play:g}=je();n((()=>{_(),M.on(L.SYNC_STORAGE_DATA,S),M.on(L.IMPORT_SUCCESS,_)})),h((()=>{M.off(L.SYNC_STORAGE_DATA,S),M.off(L.IMPORT_SUCCESS,_)}));const y=e=>{const a=e?e.outerHTML:l.value.innerHTML;x(tt(a)),window.$message.success(t("msgs.copy_success")),S(),v()},w=a(""),S=async e=>{var t;const a=l.value.innerHTML;await A(a),null==(t=E.value)||t.postMessage(null),e&&e()},C=a(!1),{channelRef:E}=rt("mainPlaygroundUpdate",(e=>{C.value=!0,console.log("[mainPlaygroundUpdate]"),o.$hydrate({runHooks:!0}),_(),T((()=>{C.value=!1}))}));s((()=>o.curCompInStore),(()=>{var e;C.value?console.warn("isSelfUpdating"):(_(),null==(e=E.value)||e.postMessage(null))}));const k=(e="")=>{l.value&&(l.value.innerHTML=e)},_=async()=>{const e=await d();k(e),m.value.clear(),g()},H=i(P.VARIABLES_STYLE,""),U=async({insertVariableCode:e=!0}={})=>{var t;await R();const a=await d()||"";let n=await p();e&&(n=H.value+n);return{name:(null==(t=o.curCompInStore)?void 0:t.title)||"",html:tt(a),style:at(n),timestamp:Date.now()}},O=e=>{N(),k(e),S(),g()},D=[{label:`📤 ${t("actions.export")}`,children:[{label:`💚 ${t("actions.export")} Vue 2 SFC`,props:{onClick:async()=>{await lt(await U({insertVariableCode:!1}))}}},{label:`💚 ${t("actions.export")} Vue 3 SFC`,props:{onClick:async()=>{await lt(await U({insertVariableCode:!1}),3)}}},{label:`📑 ${t("actions.export")} HTML`,props:{onClick:async()=>{nt(await U())}}},{label:`📧 ${t("actions.export")} Email HTML`,props:{onClick:async()=>{nt(await U(),{isInline:!0})}}},{label:`📧 ${t("actions.export")} Email HTML (With Style Tag)`,props:{onClick:async()=>{nt(await U(),{isInline:!0,inlineWithStyleTag:!0})}}}]},{split:!0},{label:`📄 ${t("actions.paste")} HTML...`,props:{onClick:async()=>{u.value=!0}}},{label:`📄 ${t("actions.copy")} HTML`,props:{onClick:async()=>{y()}}},{label:"📄 "+t("actions.copy_compiled_css"),props:{onClick:async()=>{const e=await p(),t=at(await b(e));window.$qlUtils.copy(t)}}},{split:!0},{label:"❌ "+t("actions.clear_all_html"),props:{onClick:async()=>{window.$dialog.confirm(t("msgs.confirm_clear_curren"),t("actions.confirm"),{type:"warning"}).then((()=>{O(""),M.emit(L.IMPORT_SUCCESS,""),window.$message.success(t("actions.done")+"!")})).catch()}}}];he((async()=>{nt(await U())}));const N=()=>{const e=l.value.innerHTML;m.value.recordUndo(e)},{play:$}=(()=>{const e=r();return _e($e,{volume:1,soundEnabled:e.enableSoundFx})})(),{play:I}=(()=>{const e=r();return _e(Ie,{volume:1,soundEnabled:e.enableSoundFx})})();return{htmlMenuOptions:D,isShowImportDialog:u,setPlaygroundHtml:k,pasteHtmlText:w,handleImportHtml:O,saveData:S,copyHtml:y,undoRedo:m,recordUndo:N,handleUndo:()=>{if(!m.value.undoStack.length)return;$();const e=l.value.innerHTML,t=m.value.undo(e);k(t),S()},handleRedo:()=>{if(!m.value.redoStack.length)return;I();const e=l.value.innerHTML,t=m.value.redo(e);k(t),S()}}},Ct=H({name:"ElementEditDialog",components:{AutoFormElPlus:Ee,ViewPortWindow:U},props:{editingNode:{type:Object,default:null},visible:{type:Boolean,default:!1},isRoot:{type:Boolean,default:!1}},emits:["onSave","update:visible"],setup(e,{emit:t}){const{isRoot:n,editingNode:l}=O(e),o=Te(e,t,"visible"),r=a(!0),i=a(),c=a(yt(null)),u=a({}),d=a([]);s(o,(e=>{e?A():(c.value=yt(null),d.value=[])})),s(l,(e=>{A()}));const A=()=>{var e;c.value=yt(l.value),d.value=(e=l.value)?(gt[null==e?void 0:e.tagName.toLowerCase()]||bt).customFormItems.map(mt):[],n.value&&(r.value=!0)},p=S((()=>n.value?[{type:be.MONACO_EDITOR,key:"innerHTML",label:"innerHTML"}]:r.value?[...d.value,{label:"innerHTML",key:"innerHTML",type:be.MONACO_EDITOR}]:[{label:"outerHTML",key:"outerHTML",type:be.MONACO_EDITOR,props:{style:"height: 400px; border-bottom: 1px solid rgba(91, 85, 85, 0.3)"}}]));return{mVisible:o,dataForm:c,autoFormRef:i,formRules:u,formItems:p,handleResize:()=>{window.dispatchEvent(new Event("resize"))},handleSubmit:()=>{t("onSave",{el:l.value,data:c.value}),o.value=!1},handleCancel:()=>{o.value=!1},isEditInnerHTML:r}}}),Tt={class:"action-row vp-bg"},Et={class:"flex-row-center-gap"},kt={type:"submit",class:"vp-button primary"};const _t=D(Ct,[["render",function(e,t,a,n,l,o){const s=V,r=z("AutoFormElPlus"),i=z("ViewPortWindow");return q(),N(i,{visible:e.mVisible,"onUpdate:visible":t[3]||(t[3]=t=>e.mVisible=t),"allow-maximum":"",wid:"element_editor",onResize:e.handleResize,"init-win-options":{width:"400px",height:"500px"}},{titleBarLeft:$((()=>[j(F(`${e.$t("actions.edit_element")} <${e.dataForm.tagName}>`),1)])),titleBarRightControls:$((()=>[B("button",{onClick:t[0]||(t[0]=(...t)=>e.autoFormRef.submitForm&&e.autoFormRef.submitForm(...t))},F(e.$t("actions.ok")),1)])),default:$((()=>[I(r,{ref:"autoFormRef","form-schema":{model:e.dataForm,rules:e.formRules,props:{labelPosition:"top"},formItems:e.formItems},onOnSubmit:e.handleSubmit,class:"element-edit-form font-code","hide-actions":""},{default:$((()=>[B("div",Tt,[I(s,{modelValue:e.isEditInnerHTML,"onUpdate:modelValue":t[1]||(t[1]=t=>e.isEditInnerHTML=t),title:`${e.$t("actions.toggle")} innerHTML/outerHTML`,disabled:e.isRoot,"active-text":"innerHTML","inactive-text":"outerHTML"},null,8,["modelValue","title","disabled"]),B("div",Et,[B("button",{type:"button",class:"vp-button",onClick:t[2]||(t[2]=(...t)=>e.handleCancel&&e.handleCancel(...t))},F(e.$t("actions.cancel")),1),B("button",kt,F(e.$t("actions.ok")),1)])])])),_:1},8,["form-schema","onOnSubmit"])])),_:1},8,["visible","onResize"])}],["__scopeId","data-v-4d6b5a1d"]]),xt={key:0,class:"mc-indicator-info font-code"},Mt=D(H({__name:"IndicatorInfo",props:{parentClass:{default:st}},setup(e){const t=e,{parentClass:l}=O(t),o=a(null);n((()=>{l.value&&(o.value=document.querySelector(l.value))}));const{x:s,y:r}=W({type:"client"}),{element:i}=G({x:s,y:r}),c=w(J(i)),u=S((()=>!(o.value&&!o.value.contains(i.value)||o.value===i.value))),d=S((()=>i.value&&u.value?{display:"block",width:`${c.width}px`,height:`${c.height}px`,left:`${c.left}px`,top:`${c.top}px`,transition:"all 0.05s linear"}:{display:"none"})),A=S((()=>{if(i.value&&u.value){let e=`${i.value.localName}`,t=i.value.className||"";return"string"!=typeof t&&(console.warn("className",t),t=""),t=t.trim().split(" ").join("."),t&&(e+=`.${t}`),e}return""}));return(e,t)=>(q(),X(Y,null,[A.value?(q(),X("div",xt,F(A.value),1)):K("",!0),B("div",{style:Z(d.value),class:"mc-indicator-box"},null,4)],64))}}),[["__scopeId","data-v-03bdb481"]]),Lt=["onClick"],Rt={class:"dialog-footer"},Pt=["title"],Ht={class:"vp-button"},Ut={class:"flex-row-center-gap"},Ot={style:{"font-size":"14px"}},Dt={class:"flex-row-center-gap"},Nt={class:"vp-button-group"},$t=["disabled"],It=["disabled"],Bt={key:1,style:{"border-right":"1px solid",opacity:"0.3"}},Vt=["contenteditable"],Ft=H({name:"MainPlayground",emits:[],setup(e,{emit:t}){const n=ie(),l=ee(),i=a();f();const d=r();Q();const A=S((()=>"PlaygroundPage"===l.name)),{htmlMenuOptions:p,isShowImportDialog:m,pasteHtmlText:g,handleImportHtml:b,saveData:y,copyHtml:h,undoRedo:E,recordUndo:k,handleUndo:_,handleRedo:x}=St({mainPlaygroundRef:i}),{indicatorOptions:R,mainCanvasClass:P,toggleList:H,backgroundStyle:U}=(()=>{const{t:e}=c(),t=f();qe();const n=a(!1),{channelRef:l}=rt("indicatorUpdate",(e=>{n.value=!0,Object.assign(o,e.data),T((()=>{n.value=!1}))})),o=w(JSON.parse(localStorage.getItem(u.INDICATOR_OPTIONS)||"null")||{enableDevHelpClass:!0,enableExpand:!0,enableSelection:!1,fullWidth:!1,bgDark:!1,bgTransparentPercent:100,centeredElementsY:!1,centeredElementsX:!1,showStyleEditor:!1,contentEditable:!1,enableRightClick:!0});s(o,(()=>{var e;if(n.value)return void console.warn("isSelfUpdating");const t={...o};localStorage.setItem(u.INDICATOR_OPTIONS,JSON.stringify(t)),null==(e=l.value)||e.postMessage(t)}),{deep:!0});const r=e=>{e.preventDefault(),window.$message.warning("Prevent link click")};s((()=>t.currentBlock),(e=>{console.log(e.actionType);const t=`${st} a`;e.actionType!==C.CURSOR?document.querySelectorAll(t).forEach((e=>{e.addEventListener("click",r)})):setTimeout((()=>{document.querySelectorAll(t).forEach((e=>{e.removeEventListener("click",r)}))}),500)}));const i=S((()=>{const e=t.currentBlock;return{"page-craft-mc--dev":o.enableDevHelpClass,"page-craft-mc--cursor-insert":e.blockType!==v.ACTIONS,"page-craft-mc--cursor-pickaxe":e.actionType===C.DELETE,"page-craft-mc--cursor-arrow":!1,"page-craft-mc--cursor-sword":e.actionType===C.DEBUG,"page-craft-mc--cursor-drag":e.actionType===C.DRAG,"page-craft-mc--cursor-oaksign":e.actionType===C.PASTE_REPLACE,"page-craft-mc--expand":o.enableExpand,"page-craft-mc--full-width":o.fullWidth,"page-craft-mc--centered-y":o.centeredElementsY,"page-craft-mc--centered-x":o.centeredElementsX,_dark:o.bgDark}})),d=[{flag:"enableDevHelpClass",title:e("common.outline"),desc:e("msgs.add_1px_outline_per")+" (alt+z)"},{flag:"enableExpand",title:e("common.padding"),desc:e("msgs.pad_each_element_wit")+" (alt+x)"},{flag:"contentEditable",title:e("msgs.content_editable"),desc:e("msgs.enable_html_contente")},{flag:"enableSelection",title:e("msgs.enable_hover"),desc:e("msgs.add_cursor_hover_loc")},{flag:"enableRightClick",title:e("msgs.enable_right_click"),desc:""},{flag:"centeredElementsY",title:e("msgs.centered")+" Y",desc:""},{flag:"centeredElementsX",title:e("msgs.centered")+" X",desc:""},{flag:"fullWidth",title:e("msgs.full_width"),desc:""},{flag:"bgDark",title:e("msgs.dark_bg"),desc:""}],A=S((()=>o.bgDark?{backgroundColor:`rgba(30, 30, 30,${o.bgTransparentPercent/100})`}:{backgroundColor:`rgba(255,255,255,${o.bgTransparentPercent/100})`}));return{indicatorOptions:o,mainCanvasClass:i,toggleList:d,backgroundStyle:A}})(),{isSelectMode:O,handleMouseDown:D,handleMouseUp:V,handleDragOver:W,handleDragLeave:G,handleDrop:J,waitingProgress:be,cursorX:ye,cursorY:he,ctxMenuRef:fe,ctxMenuOptions:we,selectionActionStyle:Se,selectionElRef:Te,isShowSelectionAction:Ee,selectionPopupOptions:_e,isShowElementEdit:xe,editingNode:Me,isEditingRoot:Le,updateEditingElement:Re}=ft({mainPlaygroundRef:i,saveData:y,indicatorOptions:R,copyHtml:h,recordUndo:k}),Pe=e=>{const t=e.key.toLowerCase();e.ctrlKey&&e.shiftKey&&"z"===t?x():e.ctrlKey&&"z"===t&&_()};te(document,"keydown",(e=>{const t=e.key.toLowerCase();e.altKey&&"x"===t?R.enableExpand=!R.enableExpand:e.altKey&&"z"===t&&(R.enableDevHelpClass=!R.enableDevHelpClass)}));const He=()=>{const e=n.resolve({name:"PlaygroundPage"}).href;console.log(e),window.__TAURI__?new ge("PlaygroundPage",{url:e}):window.open(e)},Ue=()=>{b(g.value),m.value=!1};return(e,t)=>{const a=ue,n=le,l=pe,s=Ae,r=me,c=z("portal");return q(),X("div",{tabindex:"0",onKeyup:Pe,class:"page-craft-mc-wrap"},[o(O)?(q(),N(Mt,{key:0})):K("",!0),I(ae,{name:"mc-fade"},{default:$((()=>[o(Ee)?(q(),X("div",{key:0,ref_key:"selectionElRef",ref:Te,class:"selection-action",style:Z(o(Se)),onClick:t[0]||(t[0]=e=>Ee.value=!1)},[(q(!0),X(Y,null,ce(o(_e),(e=>(q(),X("button",{key:e.label,onClick:e.onClick,class:"btn-no-style font-code"},F(e.label),9,Lt)))),128))],4)):K("",!0)])),_:1}),(q(),N(ne,{to:"body"},[I(ke,{ref_key:"ctxMenuRef",ref:fe,options:o(we)},null,8,["options"])])),I(n,{draggable:"",modelValue:o(m),"onUpdate:modelValue":t[3]||(t[3]=e=>oe(m)?m.value=e:null),title:`${e.$t("actions.paste")} HTML`,width:"600",top:"10vh","append-to":".page-craft-root"},{footer:$((()=>[B("div",Rt,[I(a,{onClick:t[2]||(t[2]=e=>m.value=!1)},{default:$((()=>[j(F(e.$t("actions.cancel")),1)])),_:1}),I(a,{type:"primary",onClick:Ue},{default:$((()=>[j(F(e.$t("actions.import"))+" HTML ",1)])),_:1})])])),default:$((()=>[o(m)?(q(),N(Ce,{key:0,modelValue:o(g),"onUpdate:modelValue":t[1]||(t[1]=e=>oe(g)?g.value=e:null),style:{height:"500px"}},null,8,["modelValue"])):K("",!0)])),_:1},8,["modelValue","title"]),(q(),N(ne,{to:".page-craft-root"},[I(_t,{visible:o(xe),"onUpdate:visible":t[4]||(t[4]=e=>oe(xe)?xe.value=e:null),"editing-node":o(Me),"is-root":o(Le),onOnSave:o(Re)},null,8,["visible","editing-node","is-root","onOnSave"])])),I(c,{to:"indicatorBarTeleportDest"},{default:$((()=>[o(A)?K("",!0):(q(),X(Y,{key:0},[I(de,{options:o(p)},{default:$((()=>{var e,a,n,l;return[B("button",{class:"vp-button",title:`${null==(e=o(d).curCompInStore)?void 0:e.basePath}\n${null==(a=o(d).curCompInStore)?void 0:a.title}`},[t[15]||(t[15]=B("span",{class:"mdi mdi-xml"},null,-1)),j(" "+F((null==(l=null==(n=o(d).curCompInStore)?void 0:n.title)?void 0:l.slice(0,10))||"Default"),1)],8,Pt)]})),_:1},8,["options"]),I(s,{width:"180",trigger:"hover",persistent:!1},{reference:$((()=>[B("button",Ht,[t[16]||(t[16]=B("span",{class:"mdi mdi-cog"},null,-1)),j(" "+F(e.$t("common.options")),1)])])),default:$((()=>[(q(!0),X(Y,null,ce(o(H),(e=>(q(),X("div",{key:e.flag,class:"toggle-list"},[B("div",Ut,[I(l,{modelValue:o(R)[e.flag],"onUpdate:modelValue":t=>o(R)[e.flag]=t,label:e.title,size:"small"},null,8,["modelValue","onUpdate:modelValue","label"]),e.desc?(q(),N(s,{key:0,trigger:"hover"},{reference:$((()=>t[17]||(t[17]=[B("span",{class:"mdi mdi-help-circle-outline"},null,-1)]))),default:$((()=>[B("span",Ot,F(e.desc),1)])),_:2},1024)):K("",!0)])])))),128)),I(r,{modelValue:o(R).bgTransparentPercent,"onUpdate:modelValue":t[5]||(t[5]=e=>o(R).bgTransparentPercent=e),step:1,size:"small"},null,8,["modelValue"]),B("div",Dt,[B("button",{class:"vp-button primary",onClick:t[6]||(t[6]=e=>o(M).emit(o(L).OPEN_SETTINGS,o(ve).COMMON))},F(e.$t("common.settings")),1),B("button",{class:"vp-button",onClick:He},"Playground")])])),_:1})],64)),B("div",Nt,[B("button",{class:"vp-button",title:"Undo (ctrl+z)",disabled:!o(E).undoStack.length,onClick:t[7]||(t[7]=(...e)=>o(_)&&o(_)(...e))},t[18]||(t[18]=[B("span",{class:"mdi mdi-undo-variant"},null,-1)]),8,$t),B("button",{class:"vp-button",title:"Redo (ctrl+shift+z)",disabled:!o(E).redoStack.length,onClick:t[8]||(t[8]=(...e)=>o(x)&&o(x)(...e))},t[19]||(t[19]=[B("span",{class:"mdi mdi-redo-variant"},null,-1)]),8,It)]),o(A)?K("",!0):(q(),X("span",Bt))])),_:1}),B("div",{ref_key:"mainPlaygroundRef",ref:i,class:re([o(P),"page-craft-mc"]),contenteditable:o(R).contentEditable,onMousedown:t[9]||(t[9]=(...e)=>o(D)&&o(D)(...e)),onMouseleave:t[10]||(t[10]=(...e)=>o(V)&&o(V)(...e)),onMouseup:t[11]||(t[11]=(...e)=>o(V)&&o(V)(...e)),onDragover:t[12]||(t[12]=se(((...e)=>o(W)&&o(W)(...e)),["prevent","stop"])),onDragleave:t[13]||(t[13]=se(((...e)=>o(G)&&o(G)(...e)),["prevent","stop"])),onDrop:t[14]||(t[14]=se(((...e)=>o(J)&&o(J)(...e)),["prevent","stop"])),style:Z(o(U))},null,46,Vt),t[20]||(t[20]=B("div",{class:"line-helper-x"},null,-1)),o(ye)?(q(),X("div",{key:1,class:"mc-digging-wrap",style:Z({top:o(he)+"px",left:o(ye)+"px"})},[B("div",{class:"mc-digging-inner",style:Z({width:`${o(be)}%`,height:`${o(be)}%`})},null,4)],4)):K("",!0)],32)}}});export{st as C,Ft as _,Qe as a,Ze as b,Xe as c,qe as d,Fe as e,ot as f,Be as g,ze as h,je as i,Ve as j,rt as k,at as l,We as r,Ke as u};
