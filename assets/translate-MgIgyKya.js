import{d as _,Y as A,Z as De,$ as Ne,bj as gt,bk as ht,a1 as yt,a6 as Le,a5 as le,r as T,m as E,bl as bt,bm as wt,bn as Ct,bo as $t,ac as kt,a3 as Ae,bp as Tt,bq as At,ah as _t,ag as Rt,ao as F,w as Q,aw as Vt,br as It,bs as He,bd as _e,bt as Re,az as Ve,ad as Ie,bu as Se,b7 as St,aj as K,aF as Mt,c as r,x as f,B as g,aL as Pt,T as x,g as xe,bv as ye,bw as q,v as Bt,N as Ot,b as X,e as V,z as N,y as D,bx as Dt,by as Ee,aT as Fe,aO as be,J as oe,C as w,aP as ze,aQ as Ue,aR as Ke,W as H,I as P,F as we,bz as Ce,h as je,o as Ge,bA as Nt,bB as ne,n as Je,bC as Lt,bD as Ht,aZ as ge,K as he,H as j,X as Ze,P as xt,i as Et,bE as Ft,V as zt,aW as Ut,bF as Me,bG as Kt}from"./index-ve-9jXjp.js";const jt=_({name:"Remove",render(){return A("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},A("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),Gt=e=>{const{borderRadius:t,boxShadow2:s,baseColor:a}=e;return Object.assign(Object.assign({},ht),{borderRadius:t,boxShadow:s,color:yt(a,"rgba(0, 0, 0, .85)"),textColor:a})},Jt=De({name:"Tooltip",common:Ne,peers:{Popover:gt},self:Gt}),Zt=Jt,Wt=Object.assign(Object.assign({},wt),le.props),qt=_({name:"Tooltip",props:Wt,__popover__:!0,setup(e){const{mergedClsPrefixRef:t}=Le(e),s=le("Tooltip","-tooltip",void 0,Zt,e,t),a=T(null);return Object.assign(Object.assign({},{syncPosition(){a.value.syncPosition()},setShow(m){a.value.setShow(m)}}),{popoverRef:a,mergedTheme:s,popoverThemeOverrides:E(()=>s.value.self)})},render(){const{mergedTheme:e,internalExtraClass:t}=this;return A(bt,Object.assign(Object.assign({},this.$props),{theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:t.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),Qt=e=>{const{textColorDisabled:t}=e;return{iconColorDisabled:t}},Xt=De({name:"InputNumber",common:Ne,peers:{Button:Ct,Input:$t},self:Qt}),Yt=Xt;function en(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function tn(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function fe(e){return e==null?!0:!Number.isNaN(e)}function Pe(e,t){return e==null?"":t===void 0?String(e):e.toFixed(t)}function ve(e){if(e===null)return null;if(typeof e=="number")return e;{const t=Number(e);return Number.isNaN(t)?null:t}}const nn=kt([Ae("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),Ae("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),Be=800,Oe=100,on=Object.assign(Object.assign({},le.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),ln=_({name:"InputNumber",props:on,setup(e){const{mergedBorderedRef:t,mergedClsPrefixRef:s,mergedRtlRef:a}=Le(e),o=le("InputNumber","-input-number",nn,Yt,e,s),{localeRef:m}=Tt("InputNumber"),h=At(e),{mergedSizeRef:y,mergedDisabledRef:p,mergedStatusRef:C}=h,u=T(null),R=T(null),I=T(null),v=T(e.defaultValue),b=_t(e,"value"),d=Rt(b,v),l=T(""),k=n=>{const i=String(n).split(".")[1];return i?i.length:0},B=n=>{const i=[e.min,e.max,e.step,n].map(c=>c===void 0?0:k(c));return Math.max(...i)},Ye=F(()=>{const{placeholder:n}=e;return n!==void 0?n:m.value.placeholder}),Y=F(()=>{const n=ve(e.step);return n!==null?n===0?1:Math.abs(n):1}),$e=F(()=>{const n=ve(e.min);return n!==null?n:null}),ke=F(()=>{const n=ve(e.max);return n!==null?n:null}),G=n=>{const{value:i}=d;if(n===i){z();return}const{"onUpdate:value":c,onUpdateValue:$,onChange:M}=e,{nTriggerFormInput:O,nTriggerFormChange:U}=h;M&&K(M,n),$&&K($,n),c&&K(c,n),v.value=n,O(),U()},S=({offset:n,doUpdateIfValid:i,fixPrecision:c,isInputing:$})=>{const{value:M}=l;if($&&tn(M))return!1;const O=(e.parse||en)(M);if(O===null)return i&&G(null),null;if(fe(O)){const U=k(O),{precision:W}=e;if(W!==void 0&&W<U&&!c)return!1;let L=parseFloat((O+n).toFixed(W??B(O)));if(fe(L)){const{value:pe}=ke,{value:me}=$e;if(pe!==null&&L>pe){if(!i||$)return!1;L=pe}if(me!==null&&L<me){if(!i||$)return!1;L=me}return e.validator&&!e.validator(L)?!1:(i&&G(L),L)}}return!1},z=()=>{const{value:n}=d;if(fe(n)){const{format:i,precision:c}=e;i?l.value=i(n):n===null||c===void 0||k(n)>c?l.value=Pe(n,void 0):l.value=Pe(n,c)}else l.value=String(n)};z();const et=F(()=>S({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),se=F(()=>{const{value:n}=d;if(e.validator&&n===null)return!1;const{value:i}=Y;return S({offset:-i,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),ie=F(()=>{const{value:n}=d;if(e.validator&&n===null)return!1;const{value:i}=Y;return S({offset:+i,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function tt(n){const{onFocus:i}=e,{nTriggerFormFocus:c}=h;i&&K(i,n),c()}function nt(n){var i,c;if(n.target===((i=u.value)===null||i===void 0?void 0:i.wrapperElRef))return;const $=S({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if($!==!1){const U=(c=u.value)===null||c===void 0?void 0:c.inputElRef;U&&(U.value=String($||"")),d.value===$&&z()}else z();const{onBlur:M}=e,{nTriggerFormBlur:O}=h;M&&K(M,n),O(),Mt(()=>{z()})}function ot(n){const{onClear:i}=e;i&&K(i,n)}function re(){const{value:n}=ie;if(!n){ce();return}const{value:i}=d;if(i===null)e.validator||G(Te());else{const{value:c}=Y;S({offset:c,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function ue(){const{value:n}=se;if(!n){de();return}const{value:i}=d;if(i===null)e.validator||G(Te());else{const{value:c}=Y;S({offset:-c,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const lt=tt,at=nt;function Te(){if(e.validator)return null;const{value:n}=$e,{value:i}=ke;return n!==null?Math.max(0,n):i!==null?Math.min(0,i):0}function st(n){ot(n),G(null)}function it(n){var i,c,$;!((i=I.value)===null||i===void 0)&&i.$el.contains(n.target)&&n.preventDefault(),!((c=R.value)===null||c===void 0)&&c.$el.contains(n.target)&&n.preventDefault(),($=u.value)===null||$===void 0||$.activate()}let J=null,Z=null,ee=null;function de(){ee&&(window.clearTimeout(ee),ee=null),J&&(window.clearInterval(J),J=null)}function ce(){te&&(window.clearTimeout(te),te=null),Z&&(window.clearInterval(Z),Z=null)}function rt(){de(),ee=window.setTimeout(()=>{J=window.setInterval(()=>{ue()},Oe)},Be),Re("mouseup",document,de,{once:!0})}let te=null;function ut(){ce(),te=window.setTimeout(()=>{Z=window.setInterval(()=>{re()},Oe)},Be),Re("mouseup",document,ce,{once:!0})}const dt=()=>{Z||re()},ct=()=>{J||ue()};function pt(n){var i,c;if(n.key==="Enter"){if(n.target===((i=u.value)===null||i===void 0?void 0:i.wrapperElRef))return;S({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((c=u.value)===null||c===void 0||c.deactivate())}else if(n.key==="ArrowUp"){if(!ie.value||e.keyboard.ArrowUp===!1)return;n.preventDefault(),S({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&re()}else if(n.key==="ArrowDown"){if(!se.value||e.keyboard.ArrowDown===!1)return;n.preventDefault(),S({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&ue()}}function mt(n){l.value=n,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&S({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}Q(d,()=>{z()});const ft={focus:()=>{var n;return(n=u.value)===null||n===void 0?void 0:n.focus()},blur:()=>{var n;return(n=u.value)===null||n===void 0?void 0:n.blur()},select:()=>{var n;return(n=u.value)===null||n===void 0?void 0:n.select()}},vt=Vt("InputNumber",a,s);return Object.assign(Object.assign({},ft),{rtlEnabled:vt,inputInstRef:u,minusButtonInstRef:R,addButtonInstRef:I,mergedClsPrefix:s,mergedBordered:t,uncontrolledValue:v,mergedValue:d,mergedPlaceholder:Ye,displayedValueInvalid:et,mergedSize:y,mergedDisabled:p,displayedValue:l,addable:ie,minusable:se,mergedStatus:C,handleFocus:lt,handleBlur:at,handleClear:st,handleMouseDown:it,handleAddClick:dt,handleMinusClick:ct,handleAddMousedown:ut,handleMinusMousedown:rt,handleKeyDown:pt,handleUpdateDisplayedValue:mt,mergedTheme:o,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:E(()=>{const{self:{iconColorDisabled:n}}=o.value,[i,c,$,M]=It(n);return{textColorTextDisabled:`rgb(${i}, ${c}, ${$})`,opacityDisabled:`${M}`}})})},render(){const{mergedClsPrefix:e,$slots:t}=this,s=()=>A(Se,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>Ve(t["minus-icon"],()=>[A(Ie,{clsPrefix:e},{default:()=>A(jt,null)})])}),a=()=>A(Se,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>Ve(t["add-icon"],()=>[A(Ie,{clsPrefix:e},{default:()=>A(St,null)})])});return A("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},A(He,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var o;return this.showButton&&this.buttonPlacement==="both"?[s(),_e(t.prefix,m=>m?A("span",{class:`${e}-input-number-prefix`},m):null)]:(o=t.prefix)===null||o===void 0?void 0:o.call(t)},suffix:()=>{var o;return this.showButton?[_e(t.suffix,m=>m?A("span",{class:`${e}-input-number-suffix`},m):null),this.buttonPlacement==="right"?s():null,a()]:(o=t.suffix)===null||o===void 0?void 0:o.call(t)}}))}}),an={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},sn=g("g",{fill:"none"},[g("path",{d:"M10 2.5a.5.5 0 0 0-1 0V9H2.5a.5.5 0 0 0 0 1H9v6.5a.5.5 0 0 0 1 0V10h6.5a.5.5 0 0 0 0-1H10V2.5z",fill:"currentColor"})],-1),rn=[sn],un=_({name:"Add20Regular",render:function(t,s){return r(),f("svg",an,rn)}}),dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},cn=g("g",{fill:"none"},[g("path",{d:"M3 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5zm2-1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H5zm5 2a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 10 6z",fill:"currentColor"})],-1),pn=[cn],mn=_({name:"AddSquare20Regular",render:function(t,s){return r(),f("svg",dn,pn)}}),fn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},vn=g("g",{fill:"none"},[g("path",{d:"M11.5 4a1.5 1.5 0 0 0-3 0h-1a2.5 2.5 0 0 1 5 0H17a.5.5 0 0 1 0 1h-.554L15.15 16.23A2 2 0 0 1 13.163 18H6.837a2 2 0 0 1-1.987-1.77L3.553 5H3a.5.5 0 0 1-.492-.41L2.5 4.5A.5.5 0 0 1 3 4h8.5zm3.938 1H4.561l1.282 11.115a1 1 0 0 0 .994.885h6.326a1 1 0 0 0 .993-.885L15.438 5zM8.5 7.5c.245 0 .45.155.492.359L9 7.938v6.125c0 .241-.224.437-.5.437c-.245 0-.45-.155-.492-.359L8 14.062V7.939c0-.242.224-.438.5-.438zm3 0c.245 0 .45.155.492.359l.008.079v6.125c0 .241-.224.437-.5.437c-.245 0-.45-.155-.492-.359L11 14.062V7.939c0-.242.224-.438.5-.438z",fill:"currentColor"})],-1),gn=[vn],We=_({name:"Delete20Regular",render:function(t,s){return r(),f("svg",fn,gn)}}),hn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},yn=g("g",{fill:"none"},[g("path",{d:"M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM8 3c.374 0 .875.356 1.313 1.318c.094.208.181.436.26.682H6.427a6.19 6.19 0 0 1 .26-.682C7.125 3.356 7.627 3 8 3zm-2.223.904c-.15.332-.283.7-.393 1.096H4a5.017 5.017 0 0 1 2.038-1.6a5.45 5.45 0 0 0-.261.504zM5.163 6A12.055 12.055 0 0 0 5 8c0 .699.057 1.373.163 2H3.416A4.983 4.983 0 0 1 3 8c0-.711.148-1.388.416-2h1.747zm.221 5c.11.396.242.764.393 1.096c.079.174.166.343.26.504A5.017 5.017 0 0 1 4 11h1.384zm1.043 0h3.146a6.195 6.195 0 0 1-.26.682C8.875 12.644 8.373 13 8 13c-.374 0-.875-.356-1.313-1.318a6.195 6.195 0 0 1-.26-.682zm3.394-1H6.18A10.936 10.936 0 0 1 6 8c0-.714.064-1.39.179-2H9.82c.115.61.179 1.286.179 2s-.064 1.39-.179 2zm.795 1H12a5.018 5.018 0 0 1-2.038 1.6c.095-.161.182-.33.26-.504c.152-.332.284-.7.394-1.096zm1.968-1h-1.747A12.05 12.05 0 0 0 11 8c0-.699-.057-1.372-.163-2h1.747c.268.612.416 1.289.416 2c0 .711-.148 1.388-.416 2zM9.962 3.4A5.018 5.018 0 0 1 12 5h-1.384a7.526 7.526 0 0 0-.393-1.096a5.454 5.454 0 0 0-.26-.504z",fill:"currentColor"})],-1),bn=[yn],wn=_({name:"Globe16Regular",render:function(t,s){return r(),f("svg",hn,bn)}}),Cn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},$n=g("g",{fill:"none"},[g("path",{d:"M10 18a8 8 0 1 0 0-16a8 8 0 0 0 0 16zm0-15c.657 0 1.407.59 2.022 1.908c.217.466.406 1.002.559 1.592H7.419c.153-.59.342-1.126.56-1.592C8.592 3.59 9.342 3 10 3zM7.072 4.485A10.502 10.502 0 0 0 6.389 6.5H3.936a7.022 7.022 0 0 1 3.778-3.118c-.241.33-.456.704-.642 1.103zM6.192 7.5A15.97 15.97 0 0 0 6 10c0 .87.067 1.712.193 2.5H3.46A6.984 6.984 0 0 1 3 10c0-.88.163-1.724.46-2.5h2.733zm.197 6c.176.743.407 1.422.683 2.015c.186.399.401.773.642 1.103A7.022 7.022 0 0 1 3.936 13.5H6.39zm1.03 0h5.162a9.248 9.248 0 0 1-.56 1.592C11.408 16.41 10.658 17 10 17c-.657 0-1.407-.59-2.022-1.908A9.254 9.254 0 0 1 7.42 13.5zm5.375-1H7.206A14.87 14.87 0 0 1 7 10c0-.883.073-1.725.206-2.5h5.588c.133.775.206 1.617.206 2.5s-.073 1.725-.206 2.5zm.817 1h2.453a7.022 7.022 0 0 1-3.778 3.118c.241-.33.456-.704.642-1.103c.276-.593.507-1.272.683-2.015zm2.93-1h-2.734c.126-.788.193-1.63.193-2.5c0-.87-.067-1.712-.193-2.5h2.733c.297.776.46 1.62.46 2.5c0 .88-.163 1.724-.46 2.5zm-4.255-9.118A7.021 7.021 0 0 1 16.064 6.5H13.61a10.504 10.504 0 0 0-.683-2.015a6.635 6.635 0 0 0-.642-1.103z",fill:"currentColor"})],-1),kn=[$n],Tn=_({name:"Globe20Regular",render:function(t,s){return r(),f("svg",Cn,kn)}}),ae=Pt("i18nToolSettings",{state:()=>({isFoldersMode:!0,autoPasteTrimQuotes:!0,autoPasteTextConvertMode:x.TEXT,ignoreFolders:["node_modules",".git",".idea",".vscode",".DS_Store"],isAutoShowImage:!0}),getters:{ignoreFoldersMap(){const e={};return this.ignoreFolders.forEach(t=>{e[t]=!0}),e}},persist:{key:"ls_key_i18n_tool_settings"}}),An=_({name:"I18nToolSettings",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(e,{emit:t}){const{t:s}=xe(),a=ye(e,t,"visible"),o=ae(),m=E(()=>[{label:s("common.i18njson_editing_too"),key:"json_editing",children:[{label:"自动粘贴: 移除首尾引号",subtitle:"Trim: ` | ' | \"",key:"autoPasteTrimQuotes",store:o,type:q.SWITCH},{label:"自动粘贴: 文本转换器模式",key:"autoPasteTextConvertMode",store:o,type:q.SELECT,selectOptions:[{label:"Disabled",value:x.DISABLED},{label:"Number",value:x.NUMBER},...Bt]},{label:"Dev",key:"dev",actionRender:A(Ot,{size:"small",onClick:()=>{console.log("window.$consoleUtils",window.$consoleUtils)}},()=>"Print Utils Console")}]},{label:s("common.i18njson_batch_tool"),key:"json_editing",children:[{label:s("common.folders_mode"),key:"isFoldersMode",store:o,type:q.SWITCH},{label:"ignoreFolders",key:"ignoreFolders",store:o,type:q.DYNAMIC_TAGS},{label:"Auto Show image",key:"isAutoShowImage",store:o,type:q.SWITCH}]}]);return{mVisible:a,optionList:m,dialogIconRender(){return A(Tn)}}}});function _n(e,t,s,a,o,m){const h=Dt,y=Ee;return r(),V(y,{show:e.mVisible,"onUpdate:show":t[0]||(t[0]=p=>e.mVisible=p),preset:"dialog",title:e.$t("common.settings"),style:{"padding-left":"10px","padding-right":"10px"},icon:e.dialogIconRender},{default:N(()=>[D(h,{"option-list":e.optionList},null,8,["option-list"])]),_:1},8,["show","title","icon"])}const yo=X(An,[["render",_n]]),Rn=_({name:"DialogTextEdit",components:{VueMonaco:Fe},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"Text edit"},placeholder:{type:String,default:"Input text"},text:{type:String,default:""},isTextarea:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},type:{type:String,default:"text"}},emits:["onSave","update:modelValue","update:visible"],setup(e,{emit:t}){const{text:s}=be(e),a=ye(e,t,"visible"),o=T(),m=T("");return Q(s,h=>{m.value=h},{immediate:!0}),Q(a,h=>{h&&setTimeout(()=>{var y;(y=o.value)==null||y.focus()})}),{inputRef:o,mVisible:a,editingText:m,handleSave(){t("onSave",m.value)}}}});function Vn(e,t,s,a,o,m){const h=Fe,y=He,p=Ee;return r(),V(p,{style:{width:"700px"},preset:"dialog","negative-text":e.$t("actions.cancel"),"positive-text":e.$t("actions.done"),title:e.title,onPositiveClick:e.handleSave,onNegativeClick:t[2]||(t[2]=C=>e.mVisible=!1),onClose:t[3]||(t[3]=C=>e.mVisible=!1),show:e.mVisible},{default:N(()=>[e.mVisible?(r(),f(oe,{key:0},[e.isTextarea?(r(),V(h,{key:0,ref:"inputRef",modelValue:e.editingText,"onUpdate:modelValue":t[0]||(t[0]=C=>e.editingText=C),language:"json",style:{height:"500px"}},null,8,["modelValue"])):(r(),V(y,{key:1,ref:"inputRef",type:e.type,value:e.editingText,"onUpdate:value":t[1]||(t[1]=C=>e.editingText=C),class:"font-code",rows:e.isTextarea?25:null,placeholder:e.placeholder,autofocus:"",clearable:e.clearable},null,8,["type","value","rows","placeholder","clearable"]))],64)):w("",!0)]),_:1},8,["negative-text","positive-text","title","onPositiveClick","show"])}const qe=X(Rn,[["render",Vn]]),In=e=>{const t=ae(),s=T(null);return Q(e,o=>{if(o==null){s.value=null;return}s.value=typeof o},{immediate:!0}),{autoPasteConvertMode:E(()=>{const o=s.value;return o==="number"?x.NUMBER:o==="string"?t.autoPasteTextConvertMode===x.HTML?x.HTML:x.TEXT:o==="object"?x.JSON:t.autoPasteTextConvertMode}),valType:s}};function Sn(e){return/^data:image\/([a-zA-Z]*);base64,/.test(e)}function Mn(e){return e?/^(https?:)/.test(e):!1}const Pn=_({name:"FieldEdit",components:{ClipboardPaste20Regular:ze},props:{modelValue:{type:[String,Number,Array]}},emits:["onValueBlur","previewArray","update:modelValue"],setup(e,{emit:t}){const s=ye(e,t),a=ae(),o=()=>{t("onValueBlur")},{valType:m,autoPasteConvertMode:h}=In(s),y=async()=>{let R=await Ue();s.value=Ke(R,h.value,{isTrimQuotes:a.autoPasteTrimQuotes}),setTimeout(()=>{o()})},p=T(),C=()=>{setTimeout(()=>{p.value.focus()})},u=E(()=>!a.isAutoShowImage||m.value!=="string"?!1:Mn(s.value)||Sn(s.value));return{i18nSetStore:a,mValue:s,valType:m,handleValueBlur:o,handlePaste:y,autoPasteConvertMode:h,focus:C,valueInputRef:p,isResUrl:u}}}),Bn={class:"item-value-edit-wrap"},On={key:0,class:"res-preview-wrap"},Dn=["href"],Nn=["src"],Ln=["title"],Hn=["title"];function xn(e,t,s,a,o,m){const h=ln,y=H("ClipboardPaste20Regular");return r(),f("div",Bn,[e.isResUrl?(r(),f("div",On,[g("a",{href:e.mValue,target:"_blank",rel:"nofollow noopener"},[g("img",{src:e.mValue,alt:"preview"},null,8,Nn)],8,Dn)])):w("",!0),e.valType==="number"?(r(),V(h,{key:1,ref:"valueInputRef",value:e.mValue,"onUpdate:value":t[0]||(t[0]=p=>e.mValue=p),placeholder:"number value",size:"small",class:"item-value-edit jssl_value",onBlur:e.handleValueBlur},null,8,["value","onBlur"])):e.valType==="object"?(r(),f("button",{key:2,title:e.mValue,class:"item-value-edit _button vp-button",onClick:t[1]||(t[1]=p=>e.$emit("previewArray"))}," 📝 "+P(e.$t("common.array")),9,Ln)):we((r(),f("textarea",{key:3,ref:"valueInputRef",type:"textarea",rows:"1",class:"item-value-edit vp-input","onUpdate:modelValue":t[2]||(t[2]=p=>e.mValue=p),placeholder:"text value",onBlur:t[3]||(t[3]=(...p)=>e.handleValueBlur&&e.handleValueBlur(...p))},null,544)),[[Ce,e.mValue]]),e.valType!=="object"?(r(),f("button",{key:4,onClick:t[4]||(t[4]=(...p)=>e.handlePaste&&e.handlePaste(...p)),class:"vp-button primary",title:`Auto Paste [${e.autoPasteConvertMode}]`},[D(y)],8,Hn)):w("",!0)])}const Qe=X(Pn,[["render",xn]]),En=_({name:"TranslateItem",components:{FieldEdit:Qe,Delete20Regular:We},props:{item:{type:Object,default:null},treeItem:{type:Object,default:null},isLite:{type:Boolean,default:!1},index:{type:Number,required:!0}},emits:["onRemove","previewArray","onKeyClick"],setup(e,{emit:t}){const{t:s}=xe(),a=je(),{item:o,treeItem:m,index:h}=be(e),y=E(()=>{if(!m.value)return"";const d=[];let l=m.value;for(;l;)d.push(l.namespace),l=l.parent||null;return d.reverse().join(".")}),p=E(()=>{if(!o.value||!o.value.value&&!o.value.key)return"";let d=o.value.key;y.value&&(d=y.value+"."+d);const l=new RegExp(Ht+".","g");return d=d.replace(l,""),d}),C=T(!1),u=()=>{var l;C.value=!1;const d=((l=m.value)==null?void 0:l.translates)||[];for(let k=0;k<d.length;k++){const B=d[k];if(h.value!==k&&B.key===o.value.key){C.value=!0;break}}},R=T(null),I=d=>{let l="";d===ne.ORIGINAL?l=`$t('${p.value}')`:d===ne.TEMPLATE?l=`{{ $t('${p.value}') }}`:d===ne.VHTML?l=`v-html="$t('${p.value}')"`:d===ne.DOLLART&&(l=`this.$t('${p.value}')`),R.value=d,a.trLastCopyMode=d,Je(l),window.$message.success(s("msgs.copy_success")+l)},v=()=>{o.value.key||(o.value.key=Lt(o.value.value),u())},b=T();return Ge(()=>{o.value&&(a.trAutoAddGuid!==null&&o.value.key===a.trAutoAddGuid?(a.trAutoAddGuid=null,o.value.key="",v(),setTimeout(()=>{I(a.trLastCopyMode)})):a.trIsManualAdd&&(b.value&&b.value.focus(),a.trIsManualAdd=!1))}),{copyModeOptions:Nt,namespacePrefix:y,nameDisplay:p,highlightCopyMode:R,handleCopy:I,handleValueBlur:v,handleKeyBlur(){u()},handleInputKeyClick(d){t("onKeyClick",p.value,d)},isKeyDuplicated:C,valueInputRef:b}}}),Fn=["data-id"],zn={key:0,class:"mc-error-tip-button",title:"Key duplicated, may cause bug!"},Un=["readonly"],Kn={key:2,class:"actions-buttons-wrap _mini"},jn=["title","onClick"],Gn={class:"vp-button danger"};function Jn(e,t,s,a,o,m){const h=Qe,y=H("Delete20Regular"),p=Ze,C=xt;return e.item?(r(),f("div",{key:0,"data-id":e.item.key,class:ge(["translate-item",{isLite:e.isLite,isKeyDuplicated:e.isKeyDuplicated}])},[D(C,{size:"small",align:"center"},{default:N(()=>[e.isKeyDuplicated?(r(),f("div",zn,"!")):w("",!0),we(g("input",{class:"font-code translate-item-input vp-input","onUpdate:modelValue":t[0]||(t[0]=u=>e.item.key=u),placeholder:"key",onClick:t[1]||(t[1]=(...u)=>e.handleInputKeyClick&&e.handleInputKeyClick(...u)),onBlur:t[2]||(t[2]=(...u)=>e.handleKeyBlur&&e.handleKeyBlur(...u)),readonly:e.isLite},null,40,Un),[[Ce,e.item.key]]),e.isLite?w("",!0):(r(),V(h,{key:1,ref:"valueInputRef",modelValue:e.item.value,"onUpdate:modelValue":t[3]||(t[3]=u=>e.item.value=u),onOnValueBlur:e.handleValueBlur,onPreviewArray:t[4]||(t[4]=u=>e.$emit("previewArray",e.item))},null,8,["modelValue","onOnValueBlur"])),!e.isLite&&e.nameDisplay?(r(),f("div",Kn,[(r(!0),f(oe,null,he(e.copyModeOptions,u=>(r(),f("button",{key:u.value,title:u.desc,onClick:R=>e.handleCopy(u.value),class:ge(["vp-button secondary",{primary:u.value===e.highlightCopyMode}])},P(u.label),11,jn))),128))])):w("",!0),e.isLite?w("",!0):(r(),V(p,{key:3,onPositiveClick:t[5]||(t[5]=u=>e.$emit("onRemove"))},{trigger:N(()=>[g("button",Gn,[D(y)])]),default:N(()=>[j(" "+P(e.$t("msgs.remove_item")),1)]),_:1}))]),_:1})],10,Fn)):w("",!0)}const Xe=X(En,[["render",Jn]]),Zn=()=>{const e=T(!1),t=Et(null),s=T("");return Q(e,a=>{a||(t.value=null,s.value="")}),{isShowArrayEdit:e,curTranslateItem:t,currentArrayString:s,handlePreviewArray(a){t.value=a,s.value=JSON.stringify(a.value,null,2),e.value=!0},handleSaveArray(a){if(t.value)try{t.value.value=JSON.parse(a||"[]"),e.value=!1}catch(o){console.error(o),window.$message.error(o.message)}}}},Wn=_({name:"TranslateTreeItem",components:{Delete20Regular:We,TranslateItem:Xe,DialogTextEdit:qe,AddSquare20Regular:mn,Add20Regular:un,ClipboardPaste20Regular:ze,Copy20Regular:Ft,Globe16Regular:wn},props:{item:{type:Object,default:null},isRoot:{type:Boolean,default:!0},isLite:{type:Boolean,default:!1},index:{type:Number,required:!0},title:{type:String,default:""}},emits:["onRemove","onKeyClick"],setup(e){const{item:t,index:s}=be(e),a=je(),o=ae(),m=()=>{a.trIsManualAdd=!0,t.value.children.push(Ut({parent:t.value}))},h=()=>{a.trIsManualAdd=!0,t.value.translates.push(Me())},y=async()=>{let v=await Ue();v=Ke(v,o.autoPasteTextConvertMode,{isTrimQuotes:o.autoPasteTrimQuotes}),a.trAutoAddGuid=Kt(),t.value.translates.push(Me({key:a.trAutoAddGuid,value:v}))},p=T(!0),C=E(()=>{if(!t.value)return"";const v=[];let b=t.value;for(;b;)v.push(b.namespace),b=b.parent||null;return v.pop(),v.shift(),v.reverse().join(".")}),u=T(!1),R=()=>{var b,d;u.value=!1;const v=((d=(b=t.value)==null?void 0:b.parent)==null?void 0:d.children)||[];for(let l=0;l<v.length;l++){const k=v[l];if(s.value!==l&&k.namespace===t.value.namespace){u.value=!0;break}}},I=T();return Ge(()=>{a.trIsManualAdd&&(I.value&&I.value.focus(),a.trIsManualAdd=!1)}),{i18nSetStore:o,handleAddChildren:m,handleAddTranslate:h,handleAutoAdd:y,handleGetJSON(){const v=zt([t.value]);console.log(v),Je(JSON.stringify(v,null,2)),window.$message.success("JSON Copied")},handleRemoveTreeItem(v){const b=[...t.value.children];b.splice(v,1),t.value.children=b},handleRemoveItem(v){const b=[...t.value.translates];b.splice(v,1),t.value.translates=b},isExpand:p,isKeyDuplicated:u,checkDuplicatedGroupKey:R,namespacePrefix:C,namespaceInputRef:I,...Zn()}}}),qn={class:"group-header"},Qn=g("div",{class:"mc-error-tip-button"},"!",-1),Xn={key:1,class:"namespace-input-wrap font-code"},Yn={key:0,style:{color:"#f44336"},class:"namespace-prefix"},eo=["value","readonly"],to={key:2,class:"namespace-input-wrap font-code"},no={key:0,class:"namespace-prefix"},oo=["readonly"],lo={key:3,class:"actions-buttons-wrap"},ao=["title"],so={class:"vp-button danger"},io={key:0},ro={key:0,class:"tr-list"},uo={class:"actions-wrap"},co={key:0,class:"actions-buttons-wrap"},po=["title"],mo=g("div",{class:"split-line"},null,-1),fo={class:"actions-wrap"},vo={class:"namespace-display"};function go(e,t,s,a,o,m){const h=qt,y=H("Copy20Regular"),p=H("Delete20Regular"),C=Ze,u=Xe,R=H("Add20Regular"),I=H("ClipboardPaste20Regular"),v=H("TranslateTreeItem",!0),b=H("AddSquare20Regular"),d=qe;return e.item?(r(),f("div",{key:0,class:ge(["vp-panel vp-window-panel translate-tree-item",{isKeyDuplicated:e.isKeyDuplicated}])},[g("div",qn,[e.isKeyDuplicated?(r(),V(h,{key:0,trigger:"hover"},{trigger:N(()=>[Qn]),default:N(()=>[j(" Group namespace duplicated, may cause bug! ")]),_:1})):w("",!0),e.isRoot?(r(),f("div",Xn,[e.isLite?w("",!0):(r(),f("span",Yn," § ")),g("input",{ref:"namespaceInputRef",class:"font-code vp-input",value:e.title||e.item.namespace,placeholder:"namespace",style:{flex:"1"},readonly:e.isLite,disabled:"",onBlur:t[0]||(t[0]=(...l)=>e.checkDuplicatedGroupKey&&e.checkDuplicatedGroupKey(...l))},null,40,eo)])):(r(),f("div",to,[e.isLite?w("",!0):(r(),f("span",no," § "+P(e.namespacePrefix+(e.namespacePrefix?".":"")),1)),we(g("input",{ref:"namespaceInputRef",class:"font-code vp-input","onUpdate:modelValue":t[1]||(t[1]=l=>e.item.namespace=l),placeholder:"namespace",style:{flex:"1"},readonly:e.isLite,onBlur:t[2]||(t[2]=(...l)=>e.checkDuplicatedGroupKey&&e.checkDuplicatedGroupKey(...l))},null,40,oo),[[Ce,e.item.namespace]])])),e.isLite?w("",!0):(r(),f("div",lo,[g("button",{class:"vp-button",onClick:t[3]||(t[3]=(...l)=>e.handleGetJSON&&e.handleGetJSON(...l)),title:`${e.$t("actions.copy")} JSON`},[D(y)],8,ao),e.isRoot?w("",!0):(r(),V(C,{key:0,onPositiveClick:t[4]||(t[4]=l=>e.$emit("onRemove"))},{trigger:N(()=>[g("button",so,[D(p)])]),default:N(()=>[j(" "+P(e.$t("msgs.remove_group")),1)]),_:1})),g("button",{onClick:t[5]||(t[5]=l=>e.isExpand=!e.isExpand),title:"Toggle Expand",class:"vp-button"},P(e.isExpand?"👀":"🙈"),1)]))]),e.isExpand?(r(),f("div",io,[e.item.translates&&e.item.translates.length?(r(),f("div",ro,[(r(!0),f(oe,null,he(e.item.translates,(l,k)=>(r(),V(u,{item:l,"tree-item":e.item,key:k,index:k,"is-lite":e.isLite,onPreviewArray:e.handlePreviewArray,onOnRemove:B=>e.handleRemoveItem(k),onOnKeyClick:t[6]||(t[6]=(...B)=>e.$emit("onKeyClick",...B))},null,8,["item","tree-item","index","is-lite","onPreviewArray","onOnRemove"]))),128))])):w("",!0),g("div",uo,[e.isLite?w("",!0):(r(),f("div",co,[g("button",{title:"Add translate item",onClick:t[7]||(t[7]=(...l)=>e.handleAddTranslate&&e.handleAddTranslate(...l)),class:"vp-button"},[D(R),j(" "+P(e.$t("common.field")),1)]),g("button",{onClick:t[8]||(t[8]=(...l)=>e.handleAutoAdd&&e.handleAutoAdd(...l)),title:`Auto Paste (${e.i18nSetStore.autoPasteTextConvertMode}) and copy key`,class:"vp-button primary"},[D(I),j(" Auto Paste ")],8,po)]))]),mo,e.item.children&&e.item.children.length?(r(!0),f(oe,{key:1},he(e.item.children,(l,k)=>(r(),V(v,{item:l,key:k,index:k,"is-root":!1,"is-lite":e.isLite,onOnRemove:B=>e.handleRemoveTreeItem(k),onPreviewArray:e.handlePreviewArray,onOnKeyClick:t[9]||(t[9]=(...B)=>e.$emit("onKeyClick",...B))},null,8,["item","index","is-lite","onOnRemove","onPreviewArray"]))),128)):w("",!0),g("div",fo,[g("span",vo,P(e.namespacePrefix?e.namespacePrefix+".":"")+P(e.item.namespace),1),e.isLite?w("",!0):(r(),f("button",{key:0,onClick:t[10]||(t[10]=(...l)=>e.handleAddChildren&&e.handleAddChildren(...l)),title:"Add translate children group",class:"vp-button primary"},[D(b),j(" "+P(e.$t("common.group")),1)]))])])):w("",!0),e.isShowArrayEdit?(r(),V(d,{key:1,"is-textarea":"",title:e.$t("common.array_detail"),placeholder:"Array JSON String",visible:e.isShowArrayEdit,"onUpdate:visible":t[11]||(t[11]=l=>e.isShowArrayEdit=l),text:e.currentArrayString,onOnSave:e.handleSaveArray},null,8,["title","visible","text","onOnSave"])):w("",!0)],2)):w("",!0)}const bo=X(Wn,[["render",go]]),wo="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.5%201C9.78557%201%2011.0423%201.38123%2012.1112%202.09546C13.1801%202.80969%2014.0132%203.82483%2014.5052%205.01257C14.8972%205.95898%2015.0586%206.98108%2014.9811%207.99524C14.8962%209.10645%2014.5267%2010.1801%2013.9046%2011.1112C13.1903%2012.1802%2012.1752%2013.0133%2010.9874%2013.5052C9.79973%2013.9972%208.4928%2014.126%207.23192%2013.8751C5.97104%2013.6243%204.81285%2013.0052%203.90381%2012.0962C2.99476%2011.1871%202.3757%2010.0289%202.12489%208.76807C1.8741%207.5072%202.00282%206.20032%202.49478%205.01257C2.98675%203.82483%203.81987%202.80969%204.88879%202.09546C5.95772%201.38123%207.21443%201%208.5%201ZM13.394%205C12.7527%203.75281%2011.6613%202.79626%2010.3412%202.32373C10.7845%203.16357%2011.106%204.0647%2011.294%205H13.394ZM13.9765%207.99524C13.9918%207.83081%2013.9997%207.66553%2014%207.5C13.999%206.99255%2013.9273%206.48767%2013.787%206H11.445C11.477%206.33105%2011.5%206.66406%2011.5%207C11.4997%207.12598%2011.4971%207.25195%2011.4921%207.37769C11.4917%207.38623%2011.4914%207.39417%2011.4911%207.40271C11.4834%207.58289%2011.4709%207.76331%2011.4536%207.94263C11.4192%208.29749%2011.366%208.65039%2011.294%209H13.787C13.8815%208.67139%2013.9449%208.33496%2013.9765%207.99524ZM10.4408%207.99524C10.4428%207.97815%2010.4447%207.96106%2010.4466%207.94397C10.4808%207.63074%2010.4987%207.31567%2010.5%207C10.4933%206.66553%2010.4679%206.33167%2010.424%206H6.576C6.53207%206.33167%206.5067%206.66553%206.5%207C6.50274%207.67334%206.5809%208.34412%206.733%209H10.267C10.3439%208.66833%2010.4019%208.33289%2010.4408%207.99524ZM10.249%205C10.1607%204.60352%2010.0465%204.21399%209.90597%203.83447C9.67117%203.2019%209.36551%202.59644%208.994%202.03003C8.83%202.01599%208.666%202%208.5%202C8.39551%202%208.29182%202.00635%208.18843%202.01453C8.12755%202.01929%208.06677%202.02478%208.00599%202.03003L8%202.03918C7.40887%202.94299%206.98573%203.9458%206.75101%205H10.249ZM5.70601%205C5.89779%204.0647%206.22313%203.16174%206.672%202.31897C5.34599%202.78979%204.24946%203.74866%203.606%205H5.70601ZM3.213%206C3.07269%206.48767%203.00101%206.99255%203%207.5C3.00101%208.00745%203.07269%208.51233%203.213%209H5.70601C5.57043%208.34192%205.50142%207.67188%205.5%207C5.5%206.66406%205.52301%206.33105%205.55501%206H3.213ZM5.96701%2010H3.60701C3.98501%2010.7384%204.52472%2011.382%205.18594%2011.8829C5.84715%2012.3838%206.61285%2012.729%207.42601%2012.8931C6.78598%2012.0142%206.2932%2011.0371%205.96701%2010ZM8.5%2012.644C9.13943%2011.8531%209.63927%2010.959%209.97799%2010H7.022C7.36075%2010.959%207.86058%2011.8531%208.5%2012.644ZM11.033%2010C10.7068%2011.0371%2010.214%2012.0142%209.574%2012.8931C10.3872%2012.729%2011.1528%2012.3838%2011.8141%2011.8829C12.4753%2011.382%2013.015%2010.7384%2013.393%2010H11.033Z'%20fill='%23689f57'/%3e%3c/svg%3e";export{We as D,yo as _,bo as a,Qe as b,qe as c,wo as i,ae as u};
