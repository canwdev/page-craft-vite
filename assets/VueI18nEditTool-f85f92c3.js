import{_ as C,I as v,i as R,e as S}from"./translate-4b3cc215.js";import{_ as b,a as F,u as H,c as J,d as A}from"./use-file-drop-4939055e.js";import{d as I,b as w,l as d,i as u,r as k,s as B,u as E,E as j,a as P,G as W,e as a,f as t,T as x,F as M,p as L,j as f,k as U,m as Z,v as q,n as r,t as G,q as D,H as K,I as Q,J as X,y as Y,K as ee,A as oe}from"./index-a2667843.js";const ne={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},te=u("g",{fill:"none"},[u("path",{d:"M3 5a2 2 0 0 1 2-2h8.379a2 2 0 0 1 1.414.586l1.621 1.621A2 2 0 0 1 17 6.621V15a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5zm2-1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1v-4.5A1.5 1.5 0 0 1 6.5 10h7a1.5 1.5 0 0 1 1.5 1.5V16a1 1 0 0 0 1-1V6.621a1 1 0 0 0-.293-.707l-1.621-1.621A1 1 0 0 0 13.379 4H13v2.5A1.5 1.5 0 0 1 11.5 8h-4A1.5 1.5 0 0 1 6 6.5V4H5zm2 0v2.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5V4H7zm7 12v-4.5a.5.5 0 0 0-.5-.5h-7a.5.5 0 0 0-.5.5V16h8z",fill:"currentColor"})],-1),ae=[te],se=I({name:"Save20Regular",render:function(o,p){return d(),w("svg",ne,ae)}}),T={types:[{description:"JSON",accept:{"application/JSON":[".json"]}}]},le=I({name:"VueI18nEditTool",components:{DialogCopyFormat:b,TranslateTreeItem:C,DropZone:F,Save20Regular:se},setup(){const e=k(v.parseWithRoot()),o=B(),p=async n=>{const s=await j(n),l=JSON.parse(s);e.value=v.parseWithRoot(l)},g=async()=>{const[n]=await window.showOpenFilePicker(T);o.value=n;const s=await n.getFile();p(s)},h=async()=>{if(!o.value)return;const n=await o.value.createWritable(),s=JSON.stringify(S(e.value),null,2);await n.write(s),await n.close(),window.$message.success("Saved!")},y=async()=>{var c;console.log(e.value);const n=JSON.stringify(S(e.value),null,2),l=await(await window.showSaveFilePicker({suggestedName:(c=o.value)==null?void 0:c.name,...T})).createWritable();await l.write(n),await l.close(),window.$message.success("Saved!")},{metaTitle:_}=E(),m=k(!1);return{metaTitle:_,translateTreeRoot:e,fileHandle:o,handleImport:p,handleSelectFile:g,handleSaveFile:h,handleExport:y,loadDemo(){e.value=v.parseWithRoot({hello_world:{section_a:{test_str:"This is a test string","":"It's fast and cool"},section_b:{"":"Blur this input and it'll fill left blank automatically!"}}})},iconTranslate:R,...H({cb:async n=>{for(const s of n.dataTransfer.items)if(s.kind==="file"){const l=await s.getAsFileSystemHandle();if(l.kind!=="directory"){o.value=l;const c=await l.getFile();await p(c)}}}}),isShowCopyDialog:m}}});const ie=e=>(Q("data-v-373ce130"),e=e(),X(),e),re={class:"_container"},ce=ie(()=>u("div",{style:{height:"500px"}},null,-1));function pe(e,o,p,g,h,y){const _=F,m=J,n=Y,s=W("Save20Regular"),l=ee,c=oe,V=A,z=b,$=U,N=C;return d(),w("div",{class:"vue-i18n-copy-tool",onDragover:o[3]||(o[3]=f((...i)=>e.fileDragover&&e.fileDragover(...i),["prevent","stop"])),onDragleave:o[4]||(o[4]=f(i=>e.showDropzone=!1,["prevent","stop"])),onDrop:o[5]||(o[5]=f((...i)=>e.fileDrop&&e.fileDrop(...i),["prevent","stop"]))},[a(x,{name:"mc-fade"},{default:t(()=>[Z(a(_,{text:"Drop json file here"},null,512),[[q,e.showDropzone]])]),_:1}),a($,{size:"small",style:{position:"sticky",top:"0","z-index":"100","margin-bottom":"10px"}},{default:t(()=>[a(V,{subtitle:"",onBack:o[1]||(o[1]=i=>e.$router.push({name:"HomeView"}))},{title:t(()=>[r(G(e.metaTitle),1)]),avatar:t(()=>[a(m,{src:e.iconTranslate,style:{background:"none"}},null,8,["src"])]),extra:t(()=>[a(c,null,{default:t(()=>[a(n,{secondary:"",size:"small",onClick:o[0]||(o[0]=i=>e.isShowCopyDialog=!0)},{default:t(()=>[r(" Tool ")]),_:1}),a(n,{type:"primary",onClick:e.handleSelectFile,size:"small"},{default:t(()=>[r(" Open JSON ")]),_:1},8,["onClick"]),e.fileHandle?(d(),D(n,{key:0,onClick:e.handleSaveFile,size:"small",type:"info"},{icon:t(()=>[a(s)]),default:t(()=>[r(" Save")]),_:1},8,["onClick"])):K("",!0),a(n,{secondary:"",onClick:e.handleExport,size:"small"},{default:t(()=>[r("Save as...")]),_:1},8,["onClick"]),a(l,{onPositiveClick:e.loadDemo},{trigger:t(()=>[a(n,{tertiary:"",size:"small"},{default:t(()=>[r("Demo")]),_:1})]),default:t(()=>[r(" Load Demo? This will override editing content. ")]),_:1},8,["onPositiveClick"])]),_:1})]),_:1}),a(z,{visible:e.isShowCopyDialog,"onUpdate:visible":o[2]||(o[2]=i=>e.isShowCopyDialog=i)},null,8,["visible"])]),_:1}),u("div",re,[(d(!0),w(M,null,L(e.translateTreeRoot,(i,O)=>(d(),D(N,{key:O,item:i},null,8,["item"]))),128))]),ce],32)}const me=P(le,[["render",pe],["__scopeId","data-v-373ce130"]]);export{me as default};
