import{_ as C,I as g,i as j,e as S}from"./translate-71e94eda.js";import{_ as F,a as V,d as k,u as H,c as J,e as B}from"./use-file-drop-e7c36efa.js";import{d as z,e as h,m as u,j as d,r as D,s as A,u as E,a as x,o as P,G as W,b as L,H as M,f as a,i as t,T as U,F as Z,q,k as f,l as G,n as K,v as Q,p as r,t as X,x as b,I as Y,J as ee,K as oe,z as ne,L as te,B as ae}from"./index-66297b3d.js";const se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},ie=d("g",{fill:"none"},[d("path",{d:"M3 5a2 2 0 0 1 2-2h8.379a2 2 0 0 1 1.414.586l1.621 1.621A2 2 0 0 1 17 6.621V15a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5zm2-1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1v-4.5A1.5 1.5 0 0 1 6.5 10h7a1.5 1.5 0 0 1 1.5 1.5V16a1 1 0 0 0 1-1V6.621a1 1 0 0 0-.293-.707l-1.621-1.621A1 1 0 0 0 13.379 4H13v2.5A1.5 1.5 0 0 1 11.5 8h-4A1.5 1.5 0 0 1 6 6.5V4H5zm2 0v2.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5V4H7zm7 12v-4.5a.5.5 0 0 0-.5-.5h-7a.5.5 0 0 0-.5.5V16h8z",fill:"currentColor"})],-1),le=[ie],re=z({name:"Save20Regular",render:function(o,c){return u(),h("svg",se,le)}}),T={types:[{description:"JSON",accept:{"application/JSON":[".json"]}}]},pe=z({name:"VueI18nEditTool",components:{DialogCopyFormat:F,TranslateTreeItem:C,DropZone:V,Save20Regular:re},setup(){const e=D(g.parseWithRoot()),o=A(),c=async n=>{const s=await W(n),i=JSON.parse(s);e.value=g.parseWithRoot(i)},y=async()=>{const[n]=await window.showOpenFilePicker(T);o.value=n;const s=await n.getFile();c(s)},_=async()=>{if(!o.value)return;const n=await o.value.createWritable(),s=JSON.stringify(S(e.value),null,2);await n.write(s),await n.close(),window.$message.success("Saved!")},m=async()=>{var p;console.log(e.value);const n=JSON.stringify(S(e.value),null,2),i=await(await window.showSaveFilePicker({suggestedName:(p=o.value)==null?void 0:p.name,...T})).createWritable();await i.write(n),await i.close(),window.$message.success("Saved!")},{metaTitle:v}=E(),w=D(!1);return x(()=>{if(o.value){_();return}m()}),P(async()=>{console.log(import.meta),await k("./lib/pinyinjs/pinyin_dict_notone.min.js"),await k("./lib/pinyinjs/pinyinUtil.js")}),{metaTitle:v,translateTreeRoot:e,fileHandle:o,handleImport:c,handleSelectFile:y,handleSaveFile:_,handleExport:m,loadDemo(){e.value=g.parseWithRoot({hello_world:{section_a:{test_str:"This is a test string",test_arr:["line 1","line 2","line 3"],test_number:114514},section_b:{"":"Blur this input and it'll generate the key automatically!"},section_c:{"":"中文 is Supported"}}})},iconTranslate:j,...H({cb:async n=>{for(const s of n.dataTransfer.items)if(s.kind==="file"){const i=await s.getAsFileSystemHandle();if(i.kind!=="directory"){o.value=i;const p=await i.getFile();await c(p)}}}}),isShowCopyDialog:w}}});const ce=e=>(ee("data-v-264c83ab"),e=e(),oe(),e),ue={class:"_container"},de=ce(()=>d("div",{style:{height:"500px"}},null,-1));function _e(e,o,c,y,_,m){const v=V,w=J,n=ne,s=M("Save20Regular"),i=te,p=ae,I=B,$=F,N=G,O=C;return u(),h("div",{class:"vue-i18n-copy-tool",onDragover:o[3]||(o[3]=f((...l)=>e.fileDragover&&e.fileDragover(...l),["prevent","stop"])),onDragleave:o[4]||(o[4]=f(l=>e.showDropzone=!1,["prevent","stop"])),onDrop:o[5]||(o[5]=f((...l)=>e.fileDrop&&e.fileDrop(...l),["prevent","stop"]))},[a(U,{name:"mc-fade"},{default:t(()=>[K(a(v,{text:"Drop json file here"},null,512),[[Q,e.showDropzone]])]),_:1}),a(N,{size:"small",style:{position:"sticky",top:"0","z-index":"100","margin-bottom":"10px"}},{default:t(()=>[a(I,{subtitle:"",onBack:o[1]||(o[1]=l=>e.$router.push({name:"HomeView"}))},{title:t(()=>[r(X(e.metaTitle),1)]),avatar:t(()=>[a(w,{src:e.iconTranslate,style:{background:"none"}},null,8,["src"])]),extra:t(()=>[a(p,null,{default:t(()=>[a(n,{secondary:"",size:"small",onClick:o[0]||(o[0]=l=>e.isShowCopyDialog=!0)},{default:t(()=>[r(" Tool ")]),_:1}),a(n,{type:"primary",onClick:e.handleSelectFile,size:"small"},{default:t(()=>[r(" Open JSON ")]),_:1},8,["onClick"]),e.fileHandle?(u(),b(n,{key:0,onClick:e.handleSaveFile,size:"small",type:"info"},{icon:t(()=>[a(s)]),default:t(()=>[r(" Save")]),_:1},8,["onClick"])):Y("",!0),a(n,{secondary:"",onClick:e.handleExport,size:"small"},{default:t(()=>[r("Save as...")]),_:1},8,["onClick"]),a(i,{onPositiveClick:e.loadDemo},{trigger:t(()=>[a(n,{tertiary:"",size:"small"},{default:t(()=>[r("Demo")]),_:1})]),default:t(()=>[r(" Load Demo? This will override editing content. ")]),_:1},8,["onPositiveClick"])]),_:1})]),_:1}),a($,{visible:e.isShowCopyDialog,"onUpdate:visible":o[2]||(o[2]=l=>e.isShowCopyDialog=l)},null,8,["visible"])]),_:1}),d("div",ue,[(u(!0),h(Z,null,q(e.translateTreeRoot,(l,R)=>(u(),b(O,{key:R,item:l},null,8,["item"]))),128))]),de],32)}const ge=L(pe,[["render",_e],["__scopeId","data-v-264c83ab"]]);export{ge as default};
