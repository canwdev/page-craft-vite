import{u as e}from"./useIDBKeyval-qkNoX_jN.js";import{e as a,O as n,N as s}from"./index-B89s4h30.js";const t=(t,i)=>{const{data:l,set:o}=e(t,[]),r=a((()=>l.value.length?[...l.value.sort(((e,a)=>a.lastOpened-e.lastOpened)).map((e=>{const{handle:a,lastOpened:t,alias:r}=e;return{label:r||a.name+` (${n(t).format("HH:mm:ss")})`,key:`open_${t}`,props:{onClick:()=>(async e=>{await async function(e){const a={};return"granted"===await e.queryPermission(a)||"granted"===await e.requestPermission(a)}(e)&&i(e)})(a)},children:[{label:"Set Alias",key:`alias_${t}`,props:{onClick:()=>(async e=>{const a=[...l.value],n=a.findIndex((a=>a===e));if(-1!==n){let e=a[n];const t=await s({title:`Set Alias: ${e.handle.name}`,value:e.alias||e.handle.name,allowEmpty:!0});e={...e,alias:t},a.splice(n,1,e),await o(a)}})(e)}},{label:"Remove",key:`remove_${t}`,props:{onClick:()=>(async e=>{const a=[...l.value],n=a.findIndex((a=>a===e));-1!==n&&(a.splice(n,1),await o(a))})(e)}}]}})),{label:"ðŸ§¹ Clear History",props:{onClick:()=>{window.$dialog.warning({title:"Confirm clear history?",positiveText:"OK",negativeText:"Cancel",onPositiveClick:()=>{l.value=[]},onNegativeClick:()=>{}})}}}]:[]));return{openedHistory:l,setOpenedHistory:o,appendHistory:async e=>{const a=[...l.value];a.push({handle:e,lastOpened:Date.now(),alias:""}),await o(a.slice(0,20))},historyMenuOptions:r}};export{t as u};
