import{d as e,S as a,ab as s,r,q as o,c as l,I as t,o as i,p as n,L as u,P as p,f as v,x as f,e as m,b as d,O as b,V as c,W as w,k as h,l as g,v as k,g as x,_}from"./index-D7imv_Md.js";import{V as y}from"./index-ChBI-IfP.js";import{u as C}from"./use-remote-options-BfsfSPcO.js";const j={key:0,class:"iframe-browser-inner-wrap"},B={class:"iframe-browser-address-bar-wrap"},I={class:"button-wrap"},P=["src"],L=_(e({name:"IframeBrowser",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(e,{emit:_}){const L=a(e,"visible",_),R=s(),S=r(!1),U=r(),V=r(""),E=R.resolve({name:"PlaygroundPage"}).href,F=o("pagecraft_iframe_browser_url",E,localStorage,{listenToStorageChanges:!1}),W=l((()=>S.value?"(Loading...)":""));t((()=>{F.value&&q()}));const q=()=>{V.value="",V.value=F.value,S.value=!0},G=()=>{S.value=!1},K=e=>{S.value=!1,console.error("[handleIframeError]",e)},{options:O}=C({fetchFn:async()=>{const e=await fetch("./bookmarks.json");return await e.json()},mapFn:e=>({label:"ðŸŒŽ "+(e.label||e.value),value:e.value,props:{onClick:e.children?void 0:()=>{F.value=e.value,q()}}})}),T=r(!1),z=r(),A=()=>{z.value.setPos("width","385px"),z.value.setPos("height","727px")};return(e,a)=>(i(),n(y,{ref_key:"iframeWinRef",ref:z,class:"iframe-browser-vp-window",visible:f(L),"onUpdate:visible":a[5]||(a[5]=e=>w(L)?L.value=e:null),wid:"iframe_browser","allow-maximum":"","init-win-options":{width:"350px",height:"500px"}},{titleBarLeft:u((()=>[p("Iframe Browser "+v(f(W)),1)])),titleBarRightControls:u((()=>[m("button",{onClick:A},"ðŸ“±")])),default:u((()=>[f(L)?(i(),d("div",j,[m("div",B,[m("div",I,[m("button",{class:"vp-button",onClick:a[0]||(a[0]=e=>T.value=!0)},"@"),b(c,{options:f(O),visible:f(T),"onUpdate:visible":a[1]||(a[1]=e=>w(T)?T.value=e:null),title:"Shortcuts"},null,8,["options","visible"])]),h(m("input",{class:"vp-input iframe-browser-input font-code","onUpdate:modelValue":a[2]||(a[2]=e=>w(F)?F.value=e:null),placeholder:"input url (https://)",type:"text",onKeyup:a[3]||(a[3]=g((e=>q()),["enter"]))},null,544),[[k,f(F)]]),m("button",{class:"vp-button",onClick:a[4]||(a[4]=e=>q())},"Go")]),m("iframe",{ref_key:"iframeRef",ref:U,onLoad:G,onError:K,class:"iframe-browser-inner-iframe",src:f(V),frameborder:"0"},null,40,P)])):x("",!0)])),_:1},8,["visible"]))}}),[["__scopeId","data-v-3ba70761"]]);export{L as default};
