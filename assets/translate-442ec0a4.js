import{d as B,Q as R,a2 as he,aw as fn,a0 as ye,a7 as G,aU as vn,a9 as xe,aa as U,ac as hn,aV as gn,av as yn,ag as Be,R as Oe,aW as _n,aX as bn,ai as wn,r as A,aY as kn,aZ as $n,a_ as Cn,a$ as Rn,a5 as Tn,b0 as In,W as Vn,Y as An,Z as Sn,$ as L,w as te,b1 as xn,aO as le,af as ke,b2 as $e,aH as Ce,al as Re,b3 as Te,b4 as Bn,a1 as j,aB as On,j as P,q as m,m as S,aS as Ne,aM as _e,b5 as Nn,i as be,A as $,l as r,b6 as Pn,F as ne,M as T,aL as Dn,e as Pe,L as E,aN as De,b7 as Mn,k as h,x as V,y as F,D as Me,G as ze,P as Le,N as Ee,O as Fe,b8 as zn,s as Ln,p as En,z as Ie,b9 as Fn,ba as Un,bb as Hn}from"./index-f1c21af2.js";const Kn=B({name:"Remove",render(){return R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},R("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),jn=he("collapse-transition",{width:"100%"},[fn()]),Gn=Object.assign(Object.assign({},G.props),{show:{type:Boolean,default:!0},appear:Boolean,collapsed:{type:Boolean,default:void 0}}),Jn=B({name:"CollapseTransition",props:Gn,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:o,mergedRtlRef:s}=ye(e),i=G("CollapseTransition","-collapse-transition",jn,vn,e,n),g=xe("CollapseTransition",s,n),p=U(()=>e.collapsed!==void 0?e.collapsed:e.show),f=U(()=>{const{self:{bezier:v}}=i.value;return{"--n-bezier":v}}),y=o?hn("collapse-transition",void 0,f,e):void 0;return{rtlEnabled:g,mergedShow:p,mergedClsPrefix:n,cssVars:o?void 0:f,themeClass:y==null?void 0:y.themeClass,onRender:y==null?void 0:y.onRender}},render(){return R(yn,{appear:this.appear},{default:()=>{var e;if(this.mergedShow)return(e=this.onRender)===null||e===void 0||e.call(this),R("div",gn({class:[`${this.mergedClsPrefix}-collapse-transition`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse-transition--rtl`,this.themeClass],style:this.cssVars},this.$attrs),this.$slots)}})}}),qn=e=>{const{borderRadius:n,boxShadow2:o,baseColor:s}=e;return Object.assign(Object.assign({},bn),{borderRadius:n,boxShadow:o,color:wn(s,"rgba(0, 0, 0, .85)"),textColor:s})},Wn=Be({name:"Tooltip",common:Oe,peers:{Popover:_n},self:qn}),Yn=Wn,Zn=Object.assign(Object.assign({},$n),G.props),Ue=B({name:"Tooltip",props:Zn,__popover__:!0,setup(e){const{mergedClsPrefixRef:n}=ye(e),o=G("Tooltip","-tooltip",void 0,Yn,e,n),s=A(null);return Object.assign(Object.assign({},{syncPosition(){s.value.syncPosition()},setShow(g){s.value.setShow(g)}}),{popoverRef:s,mergedTheme:o,popoverThemeOverrides:U(()=>o.value.self)})},render(){const{mergedTheme:e,internalExtraClass:n}=this;return R(kn,Object.assign(Object.assign({},this.$props),{theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:n.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),Xn=e=>{const{textColorDisabled:n}=e;return{iconColorDisabled:n}},Qn=Be({name:"InputNumber",common:Oe,peers:{Button:Cn,Input:Rn},self:Xn}),et=Qn;function nt(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function tt(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function fe(e){return e==null?!0:!Number.isNaN(e)}function Ve(e,n){return e==null?"":n===void 0?String(e):e.toFixed(n)}function ve(e){if(e===null)return null;if(typeof e=="number")return e;{const n=Number(e);return Number.isNaN(n)?null:n}}const lt=Tn([he("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),he("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),Ae=800,Se=100,at=Object.assign(Object.assign({},G.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),st=B({name:"InputNumber",props:at,setup(e){const{mergedBorderedRef:n,mergedClsPrefixRef:o,mergedRtlRef:s}=ye(e),i=G("InputNumber","-input-number",lt,et,e,o),{localeRef:g}=In("InputNumber"),p=Vn(e),{mergedSizeRef:f,mergedDisabledRef:y,mergedStatusRef:v}=p,_=A(null),d=A(null),a=A(null),c=A(e.defaultValue),w=An(e,"value"),C=Sn(w,c),x=A(""),J=t=>{const l=String(t).split(".")[1];return l?l.length:0},ae=t=>{const l=[e.min,e.max,e.step,t].map(u=>u===void 0?0:J(u));return Math.max(...l)},se=L(()=>{const{placeholder:t}=e;return t!==void 0?t:g.value.placeholder}),H=L(()=>{const t=ve(e.step);return t!==null?t===0?1:Math.abs(t):1}),Z=L(()=>{const t=ve(e.min);return t!==null?t:null}),X=L(()=>{const t=ve(e.max);return t!==null?t:null}),M=t=>{const{value:l}=C;if(t===l){I();return}const{"onUpdate:value":u,onUpdateValue:k,onChange:O}=e,{nTriggerFormInput:N,nTriggerFormChange:K}=p;O&&j(O,t),k&&j(k,t),u&&j(u,t),c.value=t,N(),K()},b=({offset:t,doUpdateIfValid:l,fixPrecision:u,isInputing:k})=>{const{value:O}=x;if(k&&tt(O))return!1;const N=(e.parse||nt)(O);if(N===null)return l&&M(null),null;if(fe(N)){const K=J(N),{precision:Y}=e;if(Y!==void 0&&Y<K&&!u)return!1;let D=parseFloat((N+t).toFixed(Y??ae(N)));if(fe(D)){const{value:me}=X,{value:pe}=Z;if(me!==null&&D>me){if(!l||k)return!1;D=me}if(pe!==null&&D<pe){if(!l||k)return!1;D=pe}return e.validator&&!e.validator(D)?!1:(l&&M(D),D)}}return!1},I=()=>{const{value:t}=C;if(fe(t)){const{format:l,precision:u}=e;l?x.value=l(t):t===null||u===void 0||J(t)>u?x.value=Ve(t,void 0):x.value=Ve(t,u)}else x.value=String(t)};I();const z=L(()=>b({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),oe=L(()=>{const{value:t}=C;if(e.validator&&t===null)return!1;const{value:l}=H;return b({offset:-l,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),ie=L(()=>{const{value:t}=C;if(e.validator&&t===null)return!1;const{value:l}=H;return b({offset:+l,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function Xe(t){const{onFocus:l}=e,{nTriggerFormFocus:u}=p;l&&j(l,t),u()}function Qe(t){var l,u;if(t.target===((l=_.value)===null||l===void 0?void 0:l.wrapperElRef))return;const k=b({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(k!==!1){const K=(u=_.value)===null||u===void 0?void 0:u.inputElRef;K&&(K.value=String(k||"")),C.value===k&&I()}else I();const{onBlur:O}=e,{nTriggerFormBlur:N}=p;O&&j(O,t),N(),On(()=>{I()})}function en(t){const{onClear:l}=e;l&&j(l,t)}function re(){const{value:t}=ie;if(!t){ce();return}const{value:l}=C;if(l===null)e.validator||M(we());else{const{value:u}=H;b({offset:u,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function ue(){const{value:t}=oe;if(!t){de();return}const{value:l}=C;if(l===null)e.validator||M(we());else{const{value:u}=H;b({offset:-u,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const nn=Xe,tn=Qe;function we(){if(e.validator)return null;const{value:t}=Z,{value:l}=X;return t!==null?Math.max(0,t):l!==null?Math.min(0,l):0}function ln(t){en(t),M(null)}function an(t){var l,u,k;!((l=a.value)===null||l===void 0)&&l.$el.contains(t.target)&&t.preventDefault(),!((u=d.value)===null||u===void 0)&&u.$el.contains(t.target)&&t.preventDefault(),(k=_.value)===null||k===void 0||k.activate()}let q=null,W=null,Q=null;function de(){Q&&(window.clearTimeout(Q),Q=null),q&&(window.clearInterval(q),q=null)}function ce(){ee&&(window.clearTimeout(ee),ee=null),W&&(window.clearInterval(W),W=null)}function sn(){de(),Q=window.setTimeout(()=>{q=window.setInterval(()=>{ue()},Se)},Ae),$e("mouseup",document,de,{once:!0})}let ee=null;function on(){ce(),ee=window.setTimeout(()=>{W=window.setInterval(()=>{re()},Se)},Ae),$e("mouseup",document,ce,{once:!0})}const rn=()=>{W||re()},un=()=>{q||ue()};function dn(t){var l,u;if(t.key==="Enter"){if(t.target===((l=_.value)===null||l===void 0?void 0:l.wrapperElRef))return;b({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((u=_.value)===null||u===void 0||u.deactivate())}else if(t.key==="ArrowUp"){if(!ie.value||e.keyboard.ArrowUp===!1)return;t.preventDefault(),b({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&re()}else if(t.key==="ArrowDown"){if(!oe.value||e.keyboard.ArrowDown===!1)return;t.preventDefault(),b({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&ue()}}function cn(t){x.value=t,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&b({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}te(C,()=>{I()});const mn={focus:()=>{var t;return(t=_.value)===null||t===void 0?void 0:t.focus()},blur:()=>{var t;return(t=_.value)===null||t===void 0?void 0:t.blur()}},pn=xe("InputNumber",s,o);return Object.assign(Object.assign({},mn),{rtlEnabled:pn,inputInstRef:_,minusButtonInstRef:d,addButtonInstRef:a,mergedClsPrefix:o,mergedBordered:n,uncontrolledValue:c,mergedValue:C,mergedPlaceholder:se,displayedValueInvalid:z,mergedSize:f,mergedDisabled:y,displayedValue:x,addable:ie,minusable:oe,mergedStatus:v,handleFocus:nn,handleBlur:tn,handleClear:ln,handleMouseDown:an,handleAddClick:rn,handleMinusClick:un,handleAddMousedown:on,handleMinusMousedown:sn,handleKeyDown:dn,handleUpdateDisplayedValue:cn,mergedTheme:i,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:U(()=>{const{self:{iconColorDisabled:t}}=i.value,[l,u,k,O]=xn(t);return{textColorTextDisabled:`rgb(${l}, ${u}, ${k})`,opacityDisabled:`${O}`}})})},render(){const{mergedClsPrefix:e,$slots:n}=this,o=()=>R(Te,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>Ce(n["minus-icon"],()=>[R(Re,{clsPrefix:e},{default:()=>R(Kn,null)})])}),s=()=>R(Te,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>Ce(n["add-icon"],()=>[R(Re,{clsPrefix:e},{default:()=>R(Bn,null)})])});return R("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},R(le,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var i;return this.showButton&&this.buttonPlacement==="both"?[o(),ke(n.prefix,g=>g?R("span",{class:`${e}-input-number-prefix`},g):null)]:(i=n.prefix)===null||i===void 0?void 0:i.call(n)},suffix:()=>{var i;return this.showButton?[ke(n.suffix,g=>g?R("span",{class:`${e}-input-number-suffix`},g):null),this.buttonPlacement==="right"?o():null,s()]:(i=n.suffix)===null||i===void 0?void 0:i.call(n)}}))}}),ot={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},it=S("g",{fill:"none"},[S("path",{d:"M10 2.5a.5.5 0 0 0-1 0V9H2.5a.5.5 0 0 0 0 1H9v6.5a.5.5 0 0 0 1 0V10h6.5a.5.5 0 0 0 0-1H10V2.5z",fill:"currentColor"})],-1),rt=[it],ut=B({name:"Add20Regular",render:function(n,o){return m(),P("svg",ot,rt)}}),dt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},ct=S("g",{fill:"none"},[S("path",{d:"M3 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5zm2-1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H5zm5 2a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 10 6z",fill:"currentColor"})],-1),mt=[ct],pt=B({name:"AddSquare20Regular",render:function(n,o){return m(),P("svg",dt,mt)}}),ft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},vt=S("g",{fill:"none"},[S("path",{d:"M11.5 4a1.5 1.5 0 0 0-3 0h-1a2.5 2.5 0 0 1 5 0H17a.5.5 0 0 1 0 1h-.554L15.15 16.23A2 2 0 0 1 13.163 18H6.837a2 2 0 0 1-1.987-1.77L3.553 5H3a.5.5 0 0 1-.492-.41L2.5 4.5A.5.5 0 0 1 3 4h8.5zm3.938 1H4.561l1.282 11.115a1 1 0 0 0 .994.885h6.326a1 1 0 0 0 .993-.885L15.438 5zM8.5 7.5c.245 0 .45.155.492.359L9 7.938v6.125c0 .241-.224.437-.5.437c-.245 0-.45-.155-.492-.359L8 14.062V7.939c0-.242.224-.438.5-.438zm3 0c.245 0 .45.155.492.359l.008.079v6.125c0 .241-.224.437-.5.437c-.245 0-.45-.155-.492-.359L11 14.062V7.939c0-.242.224-.438.5-.438z",fill:"currentColor"})],-1),ht=[vt],He=B({name:"Delete20Regular",render:function(n,o){return m(),P("svg",ft,ht)}}),gt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},yt=S("g",{fill:"none"},[S("path",{d:"M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM8 3c.374 0 .875.356 1.313 1.318c.094.208.181.436.26.682H6.427a6.19 6.19 0 0 1 .26-.682C7.125 3.356 7.627 3 8 3zm-2.223.904c-.15.332-.283.7-.393 1.096H4a5.017 5.017 0 0 1 2.038-1.6a5.45 5.45 0 0 0-.261.504zM5.163 6A12.055 12.055 0 0 0 5 8c0 .699.057 1.373.163 2H3.416A4.983 4.983 0 0 1 3 8c0-.711.148-1.388.416-2h1.747zm.221 5c.11.396.242.764.393 1.096c.079.174.166.343.26.504A5.017 5.017 0 0 1 4 11h1.384zm1.043 0h3.146a6.195 6.195 0 0 1-.26.682C8.875 12.644 8.373 13 8 13c-.374 0-.875-.356-1.313-1.318a6.195 6.195 0 0 1-.26-.682zm3.394-1H6.18A10.936 10.936 0 0 1 6 8c0-.714.064-1.39.179-2H9.82c.115.61.179 1.286.179 2s-.064 1.39-.179 2zm.795 1H12a5.018 5.018 0 0 1-2.038 1.6c.095-.161.182-.33.26-.504c.152-.332.284-.7.394-1.096zm1.968-1h-1.747A12.05 12.05 0 0 0 11 8c0-.699-.057-1.372-.163-2h1.747c.268.612.416 1.289.416 2c0 .711-.148 1.388-.416 2zM9.962 3.4A5.018 5.018 0 0 1 12 5h-1.384a7.526 7.526 0 0 0-.393-1.096a5.454 5.454 0 0 0-.26-.504z",fill:"currentColor"})],-1),_t=[yt],Ke=B({name:"Globe16Regular",render:function(n,o){return m(),P("svg",gt,_t)}}),bt=B({name:"DialogTextEdit",components:{VueMonaco:Ne},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"Text edit"},placeholder:{type:String,default:"Input text"},text:{type:String,default:""},isTextarea:{type:Boolean,default:!1}},emits:["onSave"],setup(e,{emit:n}){const{text:o}=_e(e),s=Nn(e,n,"visible"),i=A("");return te(o,g=>{i.value=g}),{mVisible:s,editingText:i,handleSave(){n("onSave",i.value)}}}});function wt(e,n,o,s,i,g){const p=Ne,f=le,y=Pn;return m(),$(y,{style:{width:"700px"},preset:"dialog","negative-text":e.$t("actions.cancel"),"positive-text":e.$t("actions.done"),title:e.title,onPositiveClick:e.handleSave,onNegativeClick:n[2]||(n[2]=v=>e.mVisible=!1),onClose:n[3]||(n[3]=v=>e.mVisible=!1),show:e.mVisible},{default:r(()=>[e.mVisible?(m(),P(ne,{key:0},[e.isTextarea?(m(),$(p,{key:0,modelValue:e.editingText,"onUpdate:modelValue":n[0]||(n[0]=v=>e.editingText=v),language:"json",style:{height:"500px"}},null,8,["modelValue"])):(m(),$(f,{key:1,type:e.isTextarea?"textarea":"text",value:e.editingText,"onUpdate:value":n[1]||(n[1]=v=>e.editingText=v),class:"font-code",rows:e.isTextarea?25:null,placeholder:e.placeholder,autofocus:""},null,8,["type","value","rows","placeholder"]))],64)):T("",!0)]),_:1},8,["negative-text","positive-text","title","onPositiveClick","show"])}const je=be(bt,[["render",wt]]),Ge=(e={})=>({key:e.key||"",value:e.value||""}),Je=(e={})=>({namespace:e.namespace||"",children:e.children||[],translates:e.translates||[],parent:e.parent||null}),qe=(e={},n=[],o=null)=>{if(!e)return[];if(!Array.isArray(e)&&typeof e=="object")for(let s in e){const i=e[s],g=[];if(i&&!Array.isArray(i)&&typeof i=="object"){const p=Je({namespace:s,translates:g,parent:o});p.children=qe(i,[],p),n.push(p)}else o&&o.translates&&o.translates.push(Ge({key:s,value:i}))}return n},ge="__root__",kt={parseWithRoot:(e={})=>qe({[ge]:e}),isRoot(e){return e?e.namespace===ge:!1}},We=(e,n={})=>{if(typeof e=="object"&&!Array.isArray(e)&&(e=[e]),kt.isRoot(e[0])){const o=e[0];o.translates.forEach(s=>{n[s.key]=s.value}),e=o.children}return e.forEach(o=>{const s={};o.translates.forEach(i=>{s[i.key]=i.value}),We(o.children,s),n[o.namespace]=s}),n};function $t(e){return/[\u4e00-\u9fa5]/.test(e)}const Ct=e=>{if(!e)return"";const{pinyinUtil:n}=window;return n&&$t(e)&&(e=n.getPinyin(e)),e=e.toLowerCase(),e=e.replace(/[^a-zA-Z0-9\s]+/g,""),e=e.replace(/\s/gi,"_"),e=e.slice(0,20),e=e.replace(/_$|^_/g,""),e},Rt=B({name:"TranslateItem",components:{Globe16Regular:Ke,Delete20Regular:He},props:{item:{type:Object,default:null},treeItem:{type:Object,default:null},isLite:{type:Boolean,default:!1},index:{type:Number,required:!0}},emits:["onRemove","previewArray","onKeyClick"],setup(e,{emit:n}){const{t:o}=Dn(),{item:s,treeItem:i,index:g}=_e(e),p=U(()=>{if(!i.value)return"";const d=[];let a=i.value;for(;a;)d.push(a.namespace),a=a.parent||null;return d.reverse().join(".")}),f=U(()=>{if(!s.value||!s.value.value&&!s.value.key)return"";let d=s.value.key;p.value&&(d=p.value+"."+d);const a=new RegExp(ge+".","g");return d=d.replace(a,""),d}),y=A(null);te(s,d=>{if(!d){y.value=null;return}y.value=typeof d.value},{immediate:!0});const v=A(!1),_=()=>{var a;v.value=!1;const d=((a=i.value)==null?void 0:a.translates)||[];for(let c=0;c<d.length;c++){const w=d[c];if(g.value!==c&&w.key===s.value.key){v.value=!0;break}}};return{namespacePrefix:p,nameDisplay:f,handleCopy(d){let a=`$t('${f.value}')`;d==="html"?a=`{{ $t('${f.value}') }}`:d==="v-html"?a=`v-html="$t('${f.value}')"`:d==="js"&&(a=`this.$t('${f.value}')`),Pe(a),window.$message.success(o("msgs.copy_success"))},handleValueBlur(){s.value.key||(s.value.key=Ct(s.value.value),_())},handleKeyBlur(){_()},handleInputKeyClick(d){n("onKeyClick",f.value,d)},valType:y,isKeyDuplicated:v}}});const Tt=e=>(Ee("data-v-1033c504"),e=e(),Fe(),e),It=Tt(()=>S("div",{class:"error-tip-button"},"!",-1));function Vt(e,n,o,s,i,g){const p=Ue,f=le,y=st,v=Me,_=ze,d=E("Delete20Regular"),a=Le,c=Mn;return e.item?(m(),$(c,{key:0,size:"small",class:De(["translate-item",{isLite:e.isLite,isKeyDuplicated:e.isKeyDuplicated}])},{default:r(()=>[h(_,{size:"small",justify:"space-between"},{default:r(()=>[h(_,{size:"small",align:"center"},{default:r(()=>[e.isKeyDuplicated?(m(),$(p,{key:0,trigger:"hover"},{trigger:r(()=>[It]),default:r(()=>[V(" Key duplicated, may cause bug! ")]),_:1})):T("",!0),h(f,{size:"small",class:"font-code translate-item-input",value:e.item.key,"onUpdate:value":n[0]||(n[0]=w=>e.item.key=w),placeholder:"key",onClick:e.handleInputKeyClick,onBlur:e.handleKeyBlur},null,8,["value","onClick","onBlur"]),e.isLite?T("",!0):(m(),P(ne,{key:1},[e.valType==="number"?(m(),$(y,{key:0,value:e.item.value,"onUpdate:value":n[1]||(n[1]=w=>e.item.value=w),placeholder:"number value",size:"small",class:"item-value-edit",onBlur:e.handleValueBlur},null,8,["value","onBlur"])):Array.isArray(e.item.value)?(m(),$(v,{key:2,title:e.item.value,size:"small",class:"item-value-edit",onClick:n[3]||(n[3]=w=>e.$emit("previewArray",e.item))},{default:r(()=>[V(" 📝 "+F(e.$t("common.array")),1)]),_:1},8,["title"])):(m(),$(f,{key:1,type:"textarea",rows:"1",size:"small",class:"item-value-edit",value:e.item.value,"onUpdate:value":n[2]||(n[2]=w=>e.item.value=w),placeholder:"text value",onBlur:e.handleValueBlur},null,8,["value","onBlur"]))],64)),!e.isLite&&e.nameDisplay?(m(),$(_,{key:2,size:"small"},{default:r(()=>[h(f,{class:"font-code",size:"small",style:{width:"300px"},value:`$t('${e.nameDisplay}')`,readonly:""},null,8,["value"]),h(v,{size:"small",onClick:e.handleCopy,title:"Copy Original $('')"},{default:r(()=>[V(" $() ")]),_:1},8,["onClick"]),h(v,{size:"small",type:"info",onClick:n[4]||(n[4]=w=>e.handleCopy("html")),title:"Copy HTML template"},{default:r(()=>[V(F("{{ }}"))]),_:1}),h(v,{size:"small",type:"success",onClick:n[5]||(n[5]=w=>e.handleCopy("v-html")),title:"Copy v-html template"},{default:r(()=>[V(" v-html ")]),_:1}),h(v,{size:"small",type:"warning",onClick:n[6]||(n[6]=w=>e.handleCopy("js")),title:"Copy JavaScript"},{default:r(()=>[V(" this.$t ")]),_:1})]),_:1})):T("",!0),e.isLite?T("",!0):(m(),$(a,{key:3,onPositiveClick:n[7]||(n[7]=w=>e.$emit("onRemove"))},{trigger:r(()=>[h(v,{tertiary:"",style:{"margin-left":"15px"},size:"small",type:"error"},{icon:r(()=>[h(d)]),_:1})]),default:r(()=>[V(" "+F(e.$t("msgs.remove_item")),1)]),_:1}))]),_:1}),h(_)]),_:1})]),_:1},8,["class"])):T("",!0)}const Ye=be(Rt,[["render",Vt],["__scopeId","data-v-1033c504"]]),At=B({name:"TranslateTreeItem",components:{Delete20Regular:He,TranslateItem:Ye,DialogTextEdit:je,AddSquare20Regular:pt,Add20Regular:ut,Copy20Regular:zn,Globe16Regular:Ke},props:{item:{type:Object,default:null},isRoot:{type:Boolean,default:!0},isLite:{type:Boolean,default:!1},index:{type:Number,required:!0}},emits:["onRemove","onKeyClick"],setup(e){const{item:n,index:o}=_e(e),s=()=>{console.log("[handleAddChildren]"),n.value.children.push(Je({parent:n.value}))},i=()=>{console.log("[handleAddTranslate]"),n.value.translates.push(Ge())},g=A(!0),p=A(!1),f=Ln(null),y=A(null);te(p,a=>{a||(f.value=null,y.value=null)});const v=U(()=>{if(!n.value)return"";const a=[];let c=n.value;for(;c;)a.push(c.namespace),c=c.parent||null;return a.pop(),a.shift(),a.reverse().join(".")}),_=A(!1);return{handleAddChildren:s,handleAddTranslate:i,handleGetJSON(){const a=We([n.value]);console.log(a),Pe(JSON.stringify(a,null,2)),window.$message.success("JSON Copied")},handleRemoveTreeItem(a){const c=[...n.value.children];c.splice(a,1),n.value.children=c},handleRemoveItem(a){const c=[...n.value.translates];c.splice(a,1),n.value.translates=c},isExpand:g,isShowArrayEdit:p,currentPreviewItem:f,currentArrayString:y,handlePreviewArray(a){f.value=a,y.value=JSON.stringify(a.value,null,2),p.value=!0},handleSaveArray(a){if(f.value)try{f.value.value=JSON.parse(a||"[]"),p.value=!1}catch(c){console.error(c),window.$message.error(c.message)}},isKeyDuplicated:_,checkDuplicatedGroupKey:()=>{var c,w;_.value=!1;const a=((w=(c=n.value)==null?void 0:c.parent)==null?void 0:w.children)||[];for(let C=0;C<a.length;C++){const x=a[C];if(o.value!==C&&x.namespace===n.value.namespace){_.value=!0;break}}},namespacePrefix:v}}});const Ze=e=>(Ee("data-v-2a8f7b6e"),e=e(),Fe(),e),St={class:"group-header"},xt=Ze(()=>S("div",{class:"error-tip-button"},"!",-1)),Bt={key:0,style:{color:"darkseagreen"}},Ot=Ze(()=>S("div",{class:"split-line"},null,-1));function Nt(e,n,o,s,i,g){const p=Ue,f=E("Globe16Regular"),y=Fn,v=le,_=E("Copy20Regular"),d=Me,a=E("Delete20Regular"),c=Le,w=Un,C=ze,x=Ye,J=Hn,ae=E("Add20Regular"),se=E("TranslateTreeItem",!0),H=E("AddSquare20Regular"),Z=Jn,X=je,M=En;return e.item?(m(),$(M,{key:0,size:"small",class:De(["tree-item",{isKeyDuplicated:e.isKeyDuplicated}])},{default:r(()=>[S("div",St,[e.isKeyDuplicated?(m(),$(p,{key:0,trigger:"hover"},{trigger:r(()=>[xt]),default:r(()=>[V(" Group namespace duplicated, may cause bug! ")]),_:1})):T("",!0),h(v,{size:"small",disabled:e.isRoot,class:"font-code",value:e.item.namespace,"onUpdate:value":n[0]||(n[0]=b=>e.item.namespace=b),placeholder:"namespace",style:{flex:"1"},onBlur:e.checkDuplicatedGroupKey},{prefix:r(()=>[h(y,{color:"darkseagreen",size:"16",title:e.namespacePrefix},{default:r(()=>[h(f)]),_:1},8,["title"]),e.isLite?T("",!0):(m(),P("span",Bt,F(e.namespacePrefix+(e.namespacePrefix?".":"")),1))]),_:1},8,["disabled","value","onBlur"]),e.isLite?T("",!0):(m(),$(C,{key:1,style:{"margin-left":"10px"},align:"center"},{default:r(()=>[h(d,{size:"small",secondary:"",type:"info",onClick:e.handleGetJSON,title:`${e.$t("actions.copy")} JSON`},{icon:r(()=>[h(_)]),_:1},8,["onClick","title"]),e.isRoot?T("",!0):(m(),$(c,{key:0,onPositiveClick:n[1]||(n[1]=b=>e.$emit("onRemove"))},{trigger:r(()=>[h(d,{secondary:"",type:"error",size:"small"},{icon:r(()=>[h(a)]),_:1})]),default:r(()=>[V(" "+F(e.$t("msgs.remove_group")),1)]),_:1})),h(w,{size:"small",value:e.isExpand,"onUpdate:value":n[2]||(n[2]=b=>e.isExpand=b)},{checked:r(()=>[V(" 👀 ")]),unchecked:r(()=>[V(" 🙈 ")]),_:1},8,["value"])]),_:1}))]),h(Z,{show:e.isExpand},{default:r(()=>[e.item.translates&&e.item.translates.length?(m(),$(J,{key:0,size:"small",style:{"margin-top":"10px"}},{default:r(()=>[(m(!0),P(ne,null,Ie(e.item.translates,(b,I)=>(m(),$(x,{item:b,"tree-item":e.item,key:I,index:I,"is-lite":e.isLite,onPreviewArray:e.handlePreviewArray,onOnRemove:z=>e.handleRemoveItem(I),onOnKeyClick:n[3]||(n[3]=(...z)=>e.$emit("onKeyClick",...z))},null,8,["item","tree-item","index","is-lite","onPreviewArray","onOnRemove"]))),128))]),_:1})):T("",!0),e.isLite?T("",!0):(m(),$(C,{key:1,justify:"space-between",align:"center",style:{"margin-top":"5px"}},{default:r(()=>[h(d,{title:"Add translate item",type:"info",onClick:e.handleAddTranslate},{icon:r(()=>[h(ae)]),default:r(()=>[V(" "+F(e.$t("common.translate")),1)]),_:1},8,["onClick"])]),_:1})),Ot,e.item.children&&e.item.children.length?(m(!0),P(ne,{key:2},Ie(e.item.children,(b,I)=>(m(),$(se,{item:b,key:I,index:I,"is-root":!1,"is-lite":e.isLite,onOnRemove:z=>e.handleRemoveTreeItem(I),onPreviewArray:e.handlePreviewArray,onOnKeyClick:n[4]||(n[4]=(...z)=>e.$emit("onKeyClick",...z))},null,8,["item","index","is-lite","onOnRemove","onPreviewArray"]))),128)):T("",!0),e.isLite?T("",!0):(m(),$(d,{key:3,type:"primary",onClick:e.handleAddChildren,title:"Add translate children group"},{icon:r(()=>[h(H)]),default:r(()=>[V(" "+F(e.$t("common.group")),1)]),_:1},8,["onClick"]))]),_:1},8,["show"]),h(X,{"is-textarea":"",title:e.$t("common.array_detail"),placeholder:"Array JSON String",visible:e.isShowArrayEdit,"onUpdate:visible":n[5]||(n[5]=b=>e.isShowArrayEdit=b),text:e.currentArrayString,onOnSave:e.handleSaveArray},null,8,["title","visible","text","onOnSave"])]),_:1},8,["class"])):T("",!0)}const Dt=be(At,[["render",Nt],["__scopeId","data-v-2a8f7b6e"]]),Mt=""+new URL("translate-6e3a2b88.svg",import.meta.url).href;export{kt as I,Dt as _,je as a,We as e,Je as f,Mt as i};
