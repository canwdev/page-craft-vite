import{w as n,d as e,Q as t,i as o,o as i,l as a,R as r,S as l,U as s,V as u,W as c,_ as d,r as m,a as p,c as f,b as v,X as g,Y as y,j as h,h as b,Z as C,z as S,$ as k,a0 as w,a1 as V,e as _}from"./index-L-jpUM2t.js";var x,D=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],E=function(n){return-1!==D.map((function(n){return n.toLowerCase()})).indexOf(n.toLowerCase())},j=function(e,t,o,i,a,r){i.setContent(r()),o.attrs["onUpdate:modelValue"]&&function(e,t,o,i){var a=e.modelEvents?e.modelEvents:null,r=Array.isArray(a)?a.join(" "):a;n(i,(function(n,t){o&&"string"==typeof n&&n!==t&&n!==o.getContent({format:e.outputFormat})&&o.setContent(n)})),o.on(r||"change input undo redo",(function(){t.emit("update:modelValue",o.getContent({format:e.outputFormat}))}))}(t,o,i,a),function(n,e,t){Object.keys(e).filter(E).forEach((function(o){var i=e[o];"function"==typeof i&&("onInit"===o?i(n,t):t.on(o.substring(2),(function(n){return i(n,t)})))}))}(e,o.attrs,i)},A=0,M=function(n){var e=Date.now();return n+"_"+Math.floor(1e9*Math.random())+ ++A+String(e)},O=function(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")},B=function(){return{listeners:[],scriptId:M("tiny-script"),scriptLoaded:!1}},U=(x=B(),{load:function(n,e,t){x.scriptLoaded?t():(x.listeners.push(t),n.getElementById(x.scriptId)||function(n,e,t,o){var i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n,i.src=t;var a=function(){i.removeEventListener("load",a),o()};i.addEventListener("load",a),e.head&&e.head.appendChild(i)}(x.scriptId,n,e,(function(){x.listeners.forEach((function(n){return n()})),x.scriptLoaded=!0})))},reinitialize:function(){x=B()}}),L=function(){var n="undefined"!=typeof window?window:global;return n&&n.tinymce?n.tinymce:null},P={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return"html"===n||"text"===n}}},I=function(){return I=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},I.apply(this,arguments)},R={selector:void 0,target:void 0},F=e({props:P,setup:function(e,c){var d=e.init?I(I({},e.init),R):I({},R),m=t(e),p=m.disabled,f=m.modelValue,v=m.tagName,g=o(null),y=null,h=e.id||M("tiny-vue"),b=e.init&&e.init.inline||e.inline,C=!!c.attrs["onUpdate:modelValue"],S=!0,k=e.initialValue?e.initialValue:"",w="",V=function(){var n,t,o,i=(n=S,C?function(){return(null==f?void 0:f.value)?f.value:""}:function(){return n?k:w}),a=I(I({},d),{readonly:e.disabled,target:g.value,plugins:(t=d.plugins,o=e.plugins,O(t).concat(O(o))),toolbar:e.toolbar||d.toolbar,inline:b,setup:function(n){y=n,n.on("init",(function(t){return j(t,e,c,n,f,i)})),"function"==typeof d.setup&&d.setup(n)}});(function(n){return null!==n&&"textarea"===n.tagName.toLowerCase()})(g.value)&&(g.value.style.visibility=""),L().init(a),S=!1};n(p,(function(n){var e;null!==y&&("function"==typeof(null===(e=y.mode)||void 0===e?void 0:e.set)?y.mode.set(n?"readonly":"design"):y.setMode(n?"readonly":"design"))})),n(v,(function(n){var e;C||(w=y.getContent()),null===(e=L())||void 0===e||e.remove(y),u((function(){return V()}))})),i((function(){if(null!==L())V();else if(g.value&&g.value.ownerDocument){var n=e.cloudChannel?e.cloudChannel:"6",t=e.apiKey?e.apiKey:"no-api-key",o=null==e.tinymceScriptSrc?"https://cdn.tiny.cloud/1/".concat(t,"/tinymce/").concat(n,"/tinymce.min.js"):e.tinymceScriptSrc;U.load(g.value.ownerDocument,o,V)}})),a((function(){null!==L()&&L().remove(y)})),b||(r((function(){S||V()})),l((function(){var n;C||(w=y.getContent()),null===(n=L())||void 0===n||n.remove(y)})));return c.expose({rerender:function(n){var e;w=y.getContent(),null===(e=L())||void 0===e||e.remove(y),d=I(I(I({},d),n),R),u((function(){return V()}))},getEditor:function(){return y}}),function(){return b?function(n,e,t,o){return n(o||"div",{id:e,ref:t})}(s,h,g,e.tagName):s("textarea",{id:h,visibility:"hidden",ref:g})}}});const K=e({name:"TinyMceEditor",components:{Editor:F},inheritAttrs:!1,props:{modelValue:{type:String,default:""},minimal:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},contentCss:{type:String,default:"dark"}},emits:["update:modelValue","valueChange"],setup(n,{emit:e}){const{contentCss:i,minimal:a,dark:r}=t(n),l=o({body_class:"detail-rich-text",skin:r.value?"oxide-dark":"oxide",content_css:i.value,verify_html:!1,plugins:["advlist","autolink","link","image","lists","charmap","preview","anchor","pagebreak","searchreplace","wordcount","visualblocks","visualchars","code","fullscreen","insertdatetime","media","table","emoticons","template","help"],menubar:a.value?"":"edit view insert format tools table help",height:600,content_style:"img {max-width: 100%;}",toolbar:a.value?["styles bold italic alignleft aligncenter alignright alignjustify bullist numlist forecolor backcolor"]:["undo redo | styles | bold italic | alignleft aligncenter alignright alignjustify | ","bullist numlist outdent indent | link image | print preview media fullscreen | forecolor backcolor emoticons"],relative_urls:!1,remove_script_host:!1,image_dimensions:!1});return{mValue:c(n,"modelValue",e),initOptions:l}}}),N={class:"tiny-mce-editor"};const z=d(K,[["render",function(n,e,t,o,i,a){const r=m("Editor");return p(),f("div",N,[v(r,g({modelValue:n.mValue,"onUpdate:modelValue":e[0]||(e[0]=e=>n.mValue=e),init:n.initOptions},n.$attrs),null,16,["modelValue","init"])])}]]),G={class:"rich-text-tool-wrap _scrollbar_mini"},T={key:1},$=(n=>(w("data-v-119684e2"),n=n(),V(),n))((()=>_("ul",{class:"vp-bg"},[_("li",null,[_("a",{href:"https://word2md.com/",target:"_blank"},"https://word2md.com/")])],-1))),H=d(e({__name:"RichTextTool",setup(n){const e=o(!1);y("lib/tinymce-6.0.3/tinymce.min.js",(n=>{e.value=!0}));const t=h("rich_text_tool_value",""),i=b();return(n,o)=>(p(),f("div",G,[C(e)?(p(),S(z,{key:0,dark:C(i).isAppDarkMode,"content-css":C(i).isAppDarkMode?"dark":"",modelValue:C(t),"onUpdate:modelValue":o[0]||(o[0]=n=>k(t)?t.value=n:null)},null,8,["dark","content-css","modelValue"])):(p(),f("div",T,"Loading...")),$]))}}),[["__scopeId","data-v-119684e2"]]);export{H as default};
